import{_ as rt}from"./PageContainer.vue_vue_type_script_setup_true_lang-GXGA1i54.js";import{_ as it}from"./AreaCard.vue_vue_type_script_setup_true_lang-DGxXCWui.js";import{_ as ue}from"./Separator.vue_vue_type_script_setup_true_lang-Dc9_avbK.js";import{r as n,D as ne,d as Te,i as Ie,c,a as t,e as l,u as e,a8 as ee,U as te,w as r,g as S,j as Z,F as q,n as P,t as C,o as i,q as we,k as le,y as ie,a4 as Ge,p as Q,E as Je,a5 as Qe}from"./index-QFOTd2Kd.js";import{_ as J}from"./index-DyuDFaNz.js";import{_ as se}from"./Input.vue_vue_type_script_setup_true_lang-BIaepkwK.js";import{_ as Ue,a as Ne,b as Le,c as Ae,d as Fe,e as ze,f as Ke,g as Ze}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-DBd12-nP.js";import{r as _}from"./reference-DUJ_1zin.js";import{X as re}from"./x-6HjwjOXz.js";import{_ as ye}from"./Checkbox.vue_vue_type_script_setup_true_lang-DlPW7fLP.js";import{_ as ge,a as xe,b as _e,c as ke,C as Ye,d as be}from"./SelectValue.vue_vue_type_script_setup_true_lang-g0p8pOR1.js";import{_ as dt,a as ut,b as ct,c as pt,d as mt}from"./DialogTitle.vue_vue_type_script_setup_true_lang-qn4srsHV.js";import{C as et,_ as vt}from"./DialogDescription.vue_vue_type_script_setup_true_lang-CkW0llb0.js";import{c as ft}from"./createLucideIcon-fWNHlsiP.js";import"./Collection-CGcyK3yj.js";import"./index-CxEO5tYI.js";import"./utils-D_xcrhet.js";import"./DialogTitle-Bl2mC9UQ.js";import"./DialogDescription-CJm570HQ.js";import"./apiClient-Cyhc7A6k.js";const yt=ft("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function gt(){const X=n([]),A=n([]),W=n([]),U=n([]),$=n(null),y=n(null),f=n(null),N=n(""),b=n(""),g=n(""),V=n(""),D=n(!1),L=n(!1),K=async()=>{try{X.value=await _.getDivisionList()}catch(d){console.error("Division 목록 로드 실패:",d)}},B=async d=>{try{A.value=await _.getWorkTypeList(d)}catch(m){console.error("WorkType 목록 로드 실패:",m)}},v=async d=>{try{W.value=await _.getSubWorkTypeList(d)}catch(m){console.error("SubWorkType 목록 로드 실패:",m)}},x=async d=>{try{U.value=await _.getWorkStepList(d)}catch(m){console.error("WorkStep 목록 로드 실패:",m)}},F=d=>{$.value=d,y.value=null,f.value=null,W.value=[],U.value=[]},H=d=>{y.value=d,f.value=null,U.value=[]},R=d=>{f.value=d},O=async()=>{if(D.value)return;const d=N.value.trim();if(d){D.value=!0;try{await _.createDivision(d),N.value="",await K()}catch(m){console.error("Division 추가 실패:",m);const w=m;alert(w.response?.data?.message||w.message)}finally{D.value=!1}}},z=async()=>{if(D.value)return;const d=b.value.trim();if(!(!d||!$.value)){D.value=!0;try{await _.createWorkType($.value,d),b.value="",await B($.value)}catch(m){console.error("WorkType 추가 실패:",m);const w=m;alert(w.response?.data?.message||w.message)}finally{D.value=!1}}},M=async()=>{if(D.value)return;const d=g.value.trim();if(!(!d||!y.value)){D.value=!0;try{await _.createSubWorkType(y.value,d),g.value="",await v(y.value)}catch(m){console.error("SubWorkType 추가 실패:",m);const w=m;alert(w.response?.data?.message||w.message)}finally{D.value=!1}}},u=async()=>{if(D.value)return;const d=V.value.trim();if(!(!d||!f.value)){D.value=!0;try{await _.createWorkStep(f.value,d),V.value="",await x(f.value)}catch(m){console.error("WorkStep 추가 실패:",m);const w=m;alert(w.response?.data?.message||w.message)}finally{D.value=!1}}},h=async d=>{if(!L.value){L.value=!0;try{await _.deleteDivision(d),$.value===d&&($.value=null,y.value=null,f.value=null,A.value=[],W.value=[],U.value=[]),await K()}catch(m){console.error("Division 삭제 실패:",m);const w=m;alert(w.response?.data?.message||w.message)}finally{L.value=!1}}},I=async d=>{if(!L.value){L.value=!0;try{await _.deleteWorkType(d),y.value===d&&(y.value=null,f.value=null,W.value=[],U.value=[]),$.value&&await B($.value)}catch(m){console.error("WorkType 삭제 실패:",m);const w=m;alert(w.response?.data?.message||w.message)}finally{L.value=!1}}},G=async d=>{if(!L.value){L.value=!0;try{await _.deleteSubWorkType(d),f.value===d&&(f.value=null,U.value=[]),y.value&&await v(y.value)}catch(m){console.error("SubWorkType 삭제 실패:",m);const w=m;alert(w.response?.data?.message||w.message)}finally{L.value=!1}}},j=async d=>{if(!L.value){L.value=!0;try{await _.deleteWorkStep(d),f.value&&await x(f.value)}catch(m){console.error("WorkStep 삭제 실패:",m);const w=m;alert(w.response?.data?.message||w.message)}finally{L.value=!1}}};return ne($,d=>{A.value=[],d&&B(d)}),ne(y,d=>{W.value=[],d&&v(d)}),ne(f,d=>{U.value=[],d&&x(d)}),{divisions:X,workTypes:A,subWorkTypes:W,workSteps:U,selectedDivisionId:$,selectedWorkTypeId:y,selectedSubWorkTypeId:f,newDivisionName:N,newWorkTypeName:b,newSubWorkTypeName:g,newWorkStepName:V,isCreating:D,isDeleting:L,loadDivisions:K,selectDivision:F,selectWorkType:H,selectSubWorkType:R,addDivision:O,addWorkType:z,addSubWorkType:M,addWorkStep:u,deleteDivision:h,deleteWorkType:I,deleteSubWorkType:G,deleteWorkStep:j}}const xt={class:"grid grid-cols-4 gap-4"},_t={class:"space-y-2"},kt={class:"flex gap-1"},bt={class:"space-y-1 max-h-48 overflow-y-auto"},ht=["onClick"],Ct={class:"flex-1 truncate"},wt=["disabled","onClick"],Tt={key:0,class:"text-xs text-muted-foreground py-2 text-center"},St={class:"space-y-2"},$t={class:"flex gap-1"},Mt={class:"space-y-1 max-h-48 overflow-y-auto"},Wt=["onClick"],Vt={class:"flex-1 truncate"},Dt=["disabled","onClick"],It={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Ut={key:1,class:"text-xs text-muted-foreground py-2 text-center"},Nt={class:"space-y-2"},Lt={class:"flex gap-1"},At={class:"space-y-1 max-h-48 overflow-y-auto"},Ft=["onClick"],zt={class:"flex-1 truncate"},Kt=["disabled","onClick"],Zt={key:0,class:"text-xs text-muted-foreground py-2 text-center"},jt={key:1,class:"text-xs text-muted-foreground py-2 text-center"},Rt={class:"space-y-2"},Et={class:"flex gap-1"},Bt={class:"space-y-1 max-h-48 overflow-y-auto"},Ot={class:"flex-1 truncate"},qt=["disabled","onClick"],Pt={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Ht={key:1,class:"text-xs text-muted-foreground py-2 text-center"},Xt=Te({__name:"WorkClassificationArea",setup(X){const{divisions:A,workTypes:W,subWorkTypes:U,workSteps:$,selectedDivisionId:y,selectedWorkTypeId:f,selectedSubWorkTypeId:N,newDivisionName:b,newWorkTypeName:g,newSubWorkTypeName:V,newWorkStepName:D,isCreating:L,isDeleting:K,loadDivisions:B,selectDivision:v,selectWorkType:x,selectSubWorkType:F,addDivision:H,addWorkType:R,addSubWorkType:O,addWorkStep:z,deleteDivision:M,deleteWorkType:u,deleteSubWorkType:h,deleteWorkStep:I}=gt();Ie(()=>{B()});const G=n(!1),j=n(null),d=n(""),m=n(null);function w(ce,T,k){j.value=ce,d.value=T,m.value=k,G.value=!0}async function de(){j.value!=null&&m.value&&await m.value(j.value),G.value=!1}return(ce,T)=>(i(),c("div",null,[T[16]||(T[16]=t("h3",{class:"text-sm font-semibold mb-3"},"공종분류",-1)),t("div",xt,[t("div",_t,[T[6]||(T[6]=t("p",{class:"text-xs text-muted-foreground font-medium"},"분류 (Division)",-1)),t("div",kt,[l(e(se),{modelValue:e(b),"onUpdate:modelValue":T[0]||(T[0]=k=>te(b)?b.value=k:null),placeholder:"이름 입력",class:"h-8 text-sm",onKeyup:ee(e(H),["enter"])},null,8,["modelValue","onKeyup"]),l(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(L)||!e(b).trim(),onClick:e(H)},{default:r(()=>[...T[5]||(T[5]=[S(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",bt,[(i(!0),c(q,null,P(e(A),k=>(i(),c("div",{key:k.id,class:we(["flex items-center px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(y)===k.id,"border-border hover:bg-muted/50":e(y)!==k.id}]),onClick:Y=>e(v)(k.id)},[t("span",Ct,C(k.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(K),onClick:le(Y=>w(k.id,k.name,e(M)),["stop"])},[l(e(re),{class:"w-3 h-3"})],8,wt)],10,ht))),128)),e(A).length===0?(i(),c("p",Tt," 항목 없음 ")):Z("",!0)])]),t("div",St,[T[8]||(T[8]=t("p",{class:"text-xs text-muted-foreground font-medium"},"공종 (WorkType)",-1)),t("div",$t,[l(e(se),{modelValue:e(g),"onUpdate:modelValue":T[1]||(T[1]=k=>te(g)?g.value=k:null),placeholder:"이름 입력",class:"h-8 text-sm",disabled:!e(y),onKeyup:ee(e(R),["enter"])},null,8,["modelValue","disabled","onKeyup"]),l(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(L)||!e(g).trim()||!e(y),onClick:e(R)},{default:r(()=>[...T[7]||(T[7]=[S(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",Mt,[(i(!0),c(q,null,P(e(W),k=>(i(),c("div",{key:k.id,class:we(["flex items-center px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(f)===k.id,"border-border hover:bg-muted/50":e(f)!==k.id}]),onClick:Y=>e(x)(k.id)},[t("span",Vt,C(k.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(K),onClick:le(Y=>w(k.id,k.name,e(u)),["stop"])},[l(e(re),{class:"w-3 h-3"})],8,Dt)],10,Wt))),128)),e(y)&&e(W).length===0?(i(),c("p",It," 항목 없음 ")):Z("",!0),e(y)?Z("",!0):(i(),c("p",Ut," 분류를 선택하세요 "))])]),t("div",Nt,[T[10]||(T[10]=t("p",{class:"text-xs text-muted-foreground font-medium"},"세부공종 (SubWorkType)",-1)),t("div",Lt,[l(e(se),{modelValue:e(V),"onUpdate:modelValue":T[2]||(T[2]=k=>te(V)?V.value=k:null),placeholder:"이름 입력",class:"h-8 text-sm",disabled:!e(f),onKeyup:ee(e(O),["enter"])},null,8,["modelValue","disabled","onKeyup"]),l(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(L)||!e(V).trim()||!e(f),onClick:e(O)},{default:r(()=>[...T[9]||(T[9]=[S(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",At,[(i(!0),c(q,null,P(e(U),k=>(i(),c("div",{key:k.id,class:we(["flex items-center px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(N)===k.id,"border-border hover:bg-muted/50":e(N)!==k.id}]),onClick:Y=>e(F)(k.id)},[t("span",zt,C(k.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(K),onClick:le(Y=>w(k.id,k.name,e(h)),["stop"])},[l(e(re),{class:"w-3 h-3"})],8,Kt)],10,Ft))),128)),e(f)&&e(U).length===0?(i(),c("p",Zt," 항목 없음 ")):Z("",!0),e(f)?Z("",!0):(i(),c("p",jt," 공종을 선택하세요 "))])]),t("div",Rt,[T[12]||(T[12]=t("p",{class:"text-xs text-muted-foreground font-medium"},"작업절차 (WorkStep)",-1)),t("div",Et,[l(e(se),{modelValue:e(D),"onUpdate:modelValue":T[3]||(T[3]=k=>te(D)?D.value=k:null),placeholder:"이름 입력",class:"h-8 text-sm",disabled:!e(N),onKeyup:ee(e(z),["enter"])},null,8,["modelValue","disabled","onKeyup"]),l(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(L)||!e(D).trim()||!e(N),onClick:e(z)},{default:r(()=>[...T[11]||(T[11]=[S(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",Bt,[(i(!0),c(q,null,P(e($),k=>(i(),c("div",{key:k.id,class:"flex items-center px-3 py-2 border rounded-md text-sm border-border"},[t("span",Ot,C(k.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(K),onClick:le(Y=>w(k.id,k.name,e(I)),["stop"])},[l(e(re),{class:"w-3 h-3"})],8,qt)]))),128)),e(N)&&e($).length===0?(i(),c("p",Pt," 항목 없음 ")):Z("",!0),e(N)?Z("",!0):(i(),c("p",Ht," 세부공종을 선택하세요 "))])])]),l(e(Ue),{open:G.value,"onUpdate:open":T[4]||(T[4]=k=>G.value=k)},{default:r(()=>[l(e(Ne),null,{default:r(()=>[l(e(Le),null,{default:r(()=>[l(e(Ae),null,{default:r(()=>[...T[13]||(T[13]=[S("삭제 확인",-1)])]),_:1}),l(e(Fe),null,{default:r(()=>[S(" '"+C(d.value)+"' 항목을 삭제하시겠습니까? ",1)]),_:1})]),_:1}),l(e(ze),null,{default:r(()=>[l(e(Ke),null,{default:r(()=>[...T[14]||(T[14]=[S("취소",-1)])]),_:1}),l(e(Ze),{onClick:de},{default:r(()=>[...T[15]||(T[15]=[S("삭제",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}});function Gt(){const X=n([]),A=n([]),W=n(null),U=n(""),$=n(""),y=n(""),f=n(!1),N=n(!1),b=async()=>{try{X.value=await _.getMaterialTypeList()}catch(v){console.error("MaterialType 목록 로드 실패:",v)}},g=async v=>{try{A.value=await _.getMaterialSpecList(v)}catch(x){console.error("MaterialSpec 목록 로드 실패:",x)}},V=v=>{W.value=v},D=async()=>{if(f.value)return;const v=U.value.trim();if(v){f.value=!0;try{const x=$.value.trim()||void 0;await _.createMaterialType(v,x),U.value="",$.value="",await b()}catch(x){console.error("MaterialType 추가 실패:",x);const F=x;alert(F.response?.data?.message||F.message)}finally{f.value=!1}}},L=async()=>{if(f.value)return;const v=y.value.trim();if(!(!v||!W.value)){f.value=!0;try{await _.createMaterialSpec(W.value,v),y.value="",await g(W.value)}catch(x){console.error("MaterialSpec 추가 실패:",x);const F=x;alert(F.response?.data?.message||F.message)}finally{f.value=!1}}},K=async v=>{if(!N.value){N.value=!0;try{await _.deleteMaterialType(v),W.value===v&&(W.value=null,A.value=[]),await b()}catch(x){console.error("MaterialType 삭제 실패:",x);const F=x;alert(F.response?.data?.message||F.message)}finally{N.value=!1}}},B=async v=>{if(!N.value){N.value=!0;try{await _.deleteMaterialSpec(v),W.value&&await g(W.value)}catch(x){console.error("MaterialSpec 삭제 실패:",x);const F=x;alert(F.response?.data?.message||F.message)}finally{N.value=!1}}};return ne(W,v=>{A.value=[],v&&g(v)}),{materialTypes:X,materialSpecs:A,selectedMaterialTypeId:W,newMaterialTypeName:U,newMaterialTypeUnit:$,newMaterialSpecName:y,isCreating:f,isDeleting:N,loadMaterialTypes:b,selectMaterialType:V,addMaterialType:D,addMaterialSpec:L,deleteMaterialType:K,deleteMaterialSpec:B}}const Jt={class:"grid grid-cols-2 gap-4"},Qt={class:"space-y-2"},Yt={class:"flex gap-1"},el={class:"space-y-1 max-h-48 overflow-y-auto"},tl=["onClick"],ll={class:"flex-1 truncate"},sl={key:0,class:"text-muted-foreground"},al=["disabled","onClick"],ol={key:0,class:"text-xs text-muted-foreground py-2 text-center"},nl={class:"space-y-2"},rl={class:"flex gap-1"},il={class:"space-y-1 max-h-48 overflow-y-auto"},dl={class:"flex-1 truncate"},ul=["disabled","onClick"],cl={key:0,class:"text-xs text-muted-foreground py-2 text-center"},pl={key:1,class:"text-xs text-muted-foreground py-2 text-center"},ml=Te({__name:"MaterialMasterArea",setup(X){const{materialTypes:A,materialSpecs:W,selectedMaterialTypeId:U,newMaterialTypeName:$,newMaterialTypeUnit:y,newMaterialSpecName:f,isCreating:N,isDeleting:b,loadMaterialTypes:g,selectMaterialType:V,addMaterialType:D,addMaterialSpec:L,deleteMaterialType:K,deleteMaterialSpec:B}=Gt();Ie(()=>{g()});const v=n(!1),x=n(null),F=n(""),H=n(null);function R(z,M,u){x.value=z,F.value=M,H.value=u,v.value=!0}async function O(){x.value!=null&&H.value&&await H.value(x.value),v.value=!1}return(z,M)=>(i(),c("div",null,[M[11]||(M[11]=t("h3",{class:"text-sm font-semibold mb-3"},"자재분류",-1)),t("div",Jt,[t("div",Qt,[M[5]||(M[5]=t("p",{class:"text-xs text-muted-foreground font-medium"},"자재유형 (MaterialType)",-1)),t("div",Yt,[l(e(se),{modelValue:e($),"onUpdate:modelValue":M[0]||(M[0]=u=>te($)?$.value=u:null),placeholder:"이름 입력",class:"h-8 text-sm flex-1",onKeyup:ee(e(D),["enter"])},null,8,["modelValue","onKeyup"]),l(e(se),{modelValue:e(y),"onUpdate:modelValue":M[1]||(M[1]=u=>te(y)?y.value=u:null),placeholder:"단위",class:"h-8 text-sm w-20",onKeyup:ee(e(D),["enter"])},null,8,["modelValue","onKeyup"]),l(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(N)||!e($).trim(),onClick:e(D)},{default:r(()=>[...M[4]||(M[4]=[S(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",el,[(i(!0),c(q,null,P(e(A),u=>(i(),c("div",{key:u.id,class:we(["flex items-center px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(U)===u.id,"border-border hover:bg-muted/50":e(U)!==u.id}]),onClick:h=>e(V)(u.id)},[t("span",ll,[S(C(u.name)+" ",1),u.unit?(i(),c("span",sl,"("+C(u.unit)+")",1)):Z("",!0)]),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(b),onClick:le(h=>R(u.id,u.name,e(K)),["stop"])},[l(e(re),{class:"w-3 h-3"})],8,al)],10,tl))),128)),e(A).length===0?(i(),c("p",ol," 항목 없음 ")):Z("",!0)])]),t("div",nl,[M[7]||(M[7]=t("p",{class:"text-xs text-muted-foreground font-medium"},"자재규격 (MaterialSpec)",-1)),t("div",rl,[l(e(se),{modelValue:e(f),"onUpdate:modelValue":M[2]||(M[2]=u=>te(f)?f.value=u:null),placeholder:"이름 입력",class:"h-8 text-sm",disabled:!e(U),onKeyup:ee(e(L),["enter"])},null,8,["modelValue","disabled","onKeyup"]),l(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(N)||!e(f).trim()||!e(U),onClick:e(L)},{default:r(()=>[...M[6]||(M[6]=[S(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",il,[(i(!0),c(q,null,P(e(W),u=>(i(),c("div",{key:u.id,class:"flex items-center px-3 py-2 border rounded-md text-sm border-border"},[t("span",dl,C(u.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(b),onClick:le(h=>R(u.id,u.name,e(B)),["stop"])},[l(e(re),{class:"w-3 h-3"})],8,ul)]))),128)),e(U)&&e(W).length===0?(i(),c("p",cl," 항목 없음 ")):Z("",!0),e(U)?Z("",!0):(i(),c("p",pl," 자재유형을 선택하세요 "))])])]),l(e(Ue),{open:v.value,"onUpdate:open":M[3]||(M[3]=u=>v.value=u)},{default:r(()=>[l(e(Ne),null,{default:r(()=>[l(e(Le),null,{default:r(()=>[l(e(Ae),null,{default:r(()=>[...M[8]||(M[8]=[S("삭제 확인",-1)])]),_:1}),l(e(Fe),null,{default:r(()=>[S(" '"+C(F.value)+"' 항목을 삭제하시겠습니까? ",1)]),_:1})]),_:1}),l(e(ze),null,{default:r(()=>[l(e(Ke),null,{default:r(()=>[...M[9]||(M[9]=[S("취소",-1)])]),_:1}),l(e(Ze),{onClick:O},{default:r(()=>[...M[10]||(M[10]=[S("삭제",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}});function vl(){const X=n([]),A=n([]),W=n([]),U=n([]),$=n(""),y=n(""),f=n(""),N=n(""),b=n({zone:!1,floor:!1,section:!1,usage:!1}),g=n({zone:!1,floor:!1,section:!1,usage:!1}),V=async()=>{try{X.value=await _.getZoneList()}catch(u){console.error("Zone 목록 로드 실패:",u)}},D=async()=>{try{A.value=await _.getFloorList()}catch(u){console.error("Floor 목록 로드 실패:",u)}},L=async()=>{try{W.value=await _.getSectionList()}catch(u){console.error("Section 목록 로드 실패:",u)}},K=async()=>{try{U.value=await _.getUsageList()}catch(u){console.error("Usage 목록 로드 실패:",u)}};return{zones:X,floors:A,sections:W,usages:U,newZone:$,newFloor:y,newSection:f,newUsage:N,isCreating:b,isDeleting:g,loadAll:async()=>{await Promise.all([V(),D(),L(),K()])},addZone:async()=>{if(b.value.zone)return;const u=$.value.trim();if(u){b.value.zone=!0;try{await _.createZone(u),$.value="",await V()}catch(h){console.error("Zone 추가 실패:",h);const I=h;alert(I.response?.data?.message||I.message)}finally{b.value.zone=!1}}},addFloor:async()=>{if(b.value.floor)return;const u=y.value.trim();if(u){b.value.floor=!0;try{await _.createFloor(u),y.value="",await D()}catch(h){console.error("Floor 추가 실패:",h);const I=h;alert(I.response?.data?.message||I.message)}finally{b.value.floor=!1}}},addSection:async()=>{if(b.value.section)return;const u=f.value.trim();if(u){b.value.section=!0;try{await _.createSection(u),f.value="",await L()}catch(h){console.error("Section 추가 실패:",h);const I=h;alert(I.response?.data?.message||I.message)}finally{b.value.section=!1}}},addUsage:async()=>{if(b.value.usage)return;const u=N.value.trim();if(u){b.value.usage=!0;try{await _.createUsage(u),N.value="",await K()}catch(h){console.error("Usage 추가 실패:",h);const I=h;alert(I.response?.data?.message||I.message)}finally{b.value.usage=!1}}},deleteZone:async u=>{if(!g.value.zone){g.value.zone=!0;try{await _.deleteZone(u),await V()}catch(h){console.error("Zone 삭제 실패:",h);const I=h;alert(I.response?.data?.message||I.message)}finally{g.value.zone=!1}}},deleteFloor:async u=>{if(!g.value.floor){g.value.floor=!0;try{await _.deleteFloor(u),await D()}catch(h){console.error("Floor 삭제 실패:",h);const I=h;alert(I.response?.data?.message||I.message)}finally{g.value.floor=!1}}},deleteSection:async u=>{if(!g.value.section){g.value.section=!0;try{await _.deleteSection(u),await L()}catch(h){console.error("Section 삭제 실패:",h);const I=h;alert(I.response?.data?.message||I.message)}finally{g.value.section=!1}}},deleteUsage:async u=>{if(!g.value.usage){g.value.usage=!0;try{await _.deleteUsage(u),await K()}catch(h){console.error("Usage 삭제 실패:",h);const I=h;alert(I.response?.data?.message||I.message)}finally{g.value.usage=!1}}}}}const fl={class:"grid grid-cols-4 gap-4"},yl={class:"text-xs text-muted-foreground font-medium"},gl={class:"flex gap-1"},xl={class:"space-y-1 max-h-48 overflow-y-auto"},_l={class:"flex-1 truncate"},kl=["disabled","onClick"],bl={key:0,class:"text-xs text-muted-foreground py-2 text-center"},hl=Te({__name:"LocationMasterArea",setup(X){const{zones:A,floors:W,sections:U,usages:$,newZone:y,newFloor:f,newSection:N,newUsage:b,isCreating:g,isDeleting:V,loadAll:D,addZone:L,addFloor:K,addSection:B,addUsage:v,deleteZone:x,deleteFloor:F,deleteSection:H,deleteUsage:R}=vl();Ie(()=>{D()});const O=[{label:"Zone",items:A,input:y,creating:"zone",deleting:"zone",add:L,deleteFn:x},{label:"Floor",items:W,input:f,creating:"floor",deleting:"floor",add:K,deleteFn:F},{label:"Section",items:U,input:N,creating:"section",deleting:"section",add:B,deleteFn:H},{label:"Usage",items:$,input:b,creating:"usage",deleting:"usage",add:v,deleteFn:R}],z=n(!1),M=n(null),u=n(""),h=n(null);function I(j,d,m){M.value=j,u.value=d,h.value=m,z.value=!0}async function G(){M.value!=null&&h.value&&await h.value(M.value),z.value=!1}return(j,d)=>(i(),c("div",null,[d[5]||(d[5]=t("h3",{class:"text-sm font-semibold mb-3"},"위치분류",-1)),t("div",fl,[(i(),c(q,null,P(O,m=>t("div",{key:m.label,class:"space-y-2"},[t("p",yl,C(m.label),1),t("div",gl,[l(e(se),{modelValue:m.input.value,"onUpdate:modelValue":w=>m.input.value=w,placeholder:"이름 입력",class:"h-8 text-sm",onKeyup:ee(m.add,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),l(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(g)[m.creating]||!m.input.value.trim(),onClick:m.add},{default:r(()=>[...d[1]||(d[1]=[S(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",xl,[(i(!0),c(q,null,P(m.items.value,w=>(i(),c("div",{key:w.id,class:"flex items-center px-3 py-2 border border-border rounded-md text-sm"},[t("span",_l,C(w.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(V)[m.deleting],onClick:le(de=>I(w.id,w.name,m.deleteFn),["stop"])},[l(e(re),{class:"w-3 h-3"})],8,kl)]))),128)),m.items.value.length===0?(i(),c("p",bl," 항목 없음 ")):Z("",!0)])])),64))]),l(e(Ue),{open:z.value,"onUpdate:open":d[0]||(d[0]=m=>z.value=m)},{default:r(()=>[l(e(Ne),null,{default:r(()=>[l(e(Le),null,{default:r(()=>[l(e(Ae),null,{default:r(()=>[...d[2]||(d[2]=[S("삭제 확인",-1)])]),_:1}),l(e(Fe),null,{default:r(()=>[S(" '"+C(u.value)+"' 항목을 삭제하시겠습니까? ",1)]),_:1})]),_:1}),l(e(ze),null,{default:r(()=>[l(e(Ke),null,{default:r(()=>[...d[3]||(d[3]=[S("취소",-1)])]),_:1}),l(e(Ze),{onClick:G},{default:r(()=>[...d[4]||(d[4]=[S("삭제",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}});function Cl(){const X=n([]),A=n(""),W=n(!1),U=n(!1),$=n([]),y=n(null),f=n(""),N=n(!1),b=n(!1),g=n([]),V=n([]),D=n(!1),L=n([]),K=n([]),B=n([]),v=n([]),x=n([]),F=n([]),H=n([]),R=n({divisionId:"",workTypeId:"",subWorkTypeId:""}),O=n({materialTypeId:"",materialSpecId:""}),z=n([]),M=n(!1),u=n(!1),h=n(!1),I=n(!1),G=n(!1),j=n(!1),d=n(null),m=n(!1),w=async()=>{try{X.value=await _.getComponentTypeList()}catch(o){console.error("ComponentType 목록 로드 실패:",o)}},de=async()=>{if(W.value)return;const o=A.value.trim();if(o){W.value=!0;try{await _.createComponentType(o),A.value="",await w()}catch(p){console.error("ComponentType 추가 실패:",p);const E=p;alert(E.response?.data?.message||E.message)}finally{W.value=!1}}},ce=async o=>{if(!U.value){U.value=!0;try{await _.deleteComponentType(o),y.value===o&&(y.value=null,$.value=[],V.value=[]),await w()}catch(p){console.error("ComponentType 삭제 실패:",p);const E=p;alert(E.response?.data?.message||E.message)}finally{U.value=!1}}},T=async o=>{try{$.value=await _.getComponentCodeList(o)}catch(p){console.error("ComponentCode 목록 로드 실패:",p),$.value=[]}},k=async()=>{if(N.value||y.value==null)return;const o=f.value.trim();if(o){N.value=!0;try{await _.createComponentCode(y.value,o),f.value="",await T(y.value)}catch(p){console.error("ComponentCode 추가 실패:",p);const E=p;alert(E.response?.data?.message||E.message)}finally{N.value=!1}}},Y=async o=>{if(!b.value){b.value=!0;try{await _.deleteComponentCode(o);const p=V.value.indexOf(o);p!==-1&&V.value.splice(p,1),y.value!=null&&await T(y.value)}catch(p){console.error("ComponentCode 삭제 실패:",p);const E=p;alert(E.response?.data?.message||E.message)}finally{b.value=!1}}},ae=ie(()=>$.value.length===0?!1:$.value.every(o=>V.value.includes(o.id))),Se=o=>{const p=V.value.indexOf(o);p===-1?V.value.push(o):V.value.splice(p,1)},je=()=>{ae.value?V.value=[]:V.value=$.value.map(o=>o.id)},$e=ie(()=>v.value.length===0?!1:v.value.every(o=>x.value.includes(o.id))),he=o=>{const p=x.value.indexOf(o);p===-1?x.value.push(o):x.value.splice(p,1)},Re=()=>{$e.value?x.value=[]:x.value=v.value.map(o=>o.id)},Ce=async()=>{try{g.value=await _.getComponentCodeMappingList(),z.value=[]}catch(o){console.error("전체 매핑 로드 실패:",o),g.value=[]}},pe=ie(()=>{let o=g.value;if(y.value!=null&&$.value.length>0){const p=$.value.map(E=>E.id);o=o.filter(E=>p.includes(E.componentCodeId))}return V.value.length>0&&(o=o.filter(p=>V.value.includes(p.componentCodeId))),x.value.length>0&&(o=o.filter(p=>x.value.includes(p.workStepId))),o}),oe=ie(()=>pe.value.length===0?!1:pe.value.every(o=>z.value.includes(o.id))),Ee=o=>{const p=z.value.indexOf(o);p===-1?z.value.push(o):z.value.splice(p,1)},Be=()=>{oe.value?z.value=[]:z.value=pe.value.map(o=>o.id)},Me=async()=>{try{L.value=await _.getDivisionList()}catch(o){console.error("Division 목록 로드 실패:",o)}},me=async()=>{try{F.value=await _.getMaterialTypeList()}catch(o){console.error("MaterialType 목록 로드 실패:",o)}},ve=async()=>{if(!D.value&&V.value.length!==0&&x.value.length!==0){D.value=!0;try{let o=0,p=0;for(const qe of V.value)for(const Pe of x.value)try{const We=await _.createComponentCodeMapping({componentCodeId:qe,workStepId:Pe});o+=We.mappedCount,p+=We.skippedCount}catch{p+=1}const E=[];o>0&&E.push(`${o}개 매핑 생성`),p>0&&E.push(`${p}개 스킵(중복)`),alert(E.join(", ")||"매핑 완료"),await Ce()}catch(o){console.error("매핑 추가 실패:",o);const p=o;alert(p.response?.data?.message||p.message)}finally{D.value=!1}}},Oe=async()=>{if(z.value.length!==0&&O.value.materialSpecId){G.value=!0;try{const o=await _.updateComponentCodeMapping({ids:z.value,materialSpecId:Number(O.value.materialSpecId)});alert(`${o.updatedCount}개 매핑에 자재규격 적용됨`),await Ce(),O.value.materialTypeId="",O.value.materialSpecId=""}catch(o){console.error("자재 적용 실패:",o);const p=o;alert(p.response?.data?.message||p.message)}finally{G.value=!1}}},fe=async()=>{if(!j.value){j.value=!0;try{const o=await _.createTasks();d.value=o,m.value=!0}catch(o){console.error("세부작업 생성 실패:",o);const p=o;alert(p.response?.data?.message||p.message)}finally{j.value=!1}}};return ne(y,o=>{o!=null?T(o):$.value=[],V.value=[]}),ne(()=>R.value.divisionId,async o=>{if(K.value=[],B.value=[],v.value=[],R.value.workTypeId="",R.value.subWorkTypeId="",x.value=[],!!o){M.value=!0;try{K.value=await _.getWorkTypeList(Number(o))}catch(p){console.error("WorkType 목록 로드 실패:",p)}finally{M.value=!1}}}),ne(()=>R.value.workTypeId,async o=>{if(B.value=[],v.value=[],R.value.subWorkTypeId="",x.value=[],!!o){u.value=!0;try{B.value=await _.getSubWorkTypeList(Number(o))}catch(p){console.error("SubWorkType 목록 로드 실패:",p)}finally{u.value=!1}}}),ne(()=>R.value.subWorkTypeId,async o=>{if(v.value=[],x.value=[],!!o){h.value=!0;try{v.value=await _.getWorkStepList(Number(o))}catch(p){console.error("WorkStep 목록 로드 실패:",p)}finally{h.value=!1}}}),ne(()=>O.value.materialTypeId,async o=>{if(H.value=[],O.value.materialSpecId="",!!o){I.value=!0;try{H.value=await _.getMaterialSpecList(Number(o))}catch(p){console.error("MaterialSpec 목록 로드 실패:",p)}finally{I.value=!1}}}),{componentTypes:X,newComponentTypeName:A,isCreatingType:W,isDeletingType:U,loadComponentTypes:w,addComponentType:de,deleteComponentType:ce,componentCodes:$,selectedComponentTypeId:y,newComponentCode:f,isCreatingCode:N,isDeletingCode:b,addComponentCode:k,deleteComponentCode:Y,selectedComponentCodeIds:V,isAllComponentCodesSelected:ae,toggleComponentCode:Se,toggleAllComponentCodes:je,allMappings:g,filteredMappings:pe,isCreatingMapping:D,divisions:L,workTypes:K,subWorkTypes:B,workSteps:v,materialTypes:F,materialSpecs:H,mappingForm:R,isLoadingWorkTypes:M,isLoadingSubWorkTypes:u,isLoadingWorkSteps:h,isLoadingMaterialSpecs:I,loadDivisions:Me,loadMaterialTypes:me,loadAllMappings:Ce,addMapping:ve,selectedWorkStepIds:x,isAllWorkStepsSelected:$e,toggleWorkStep:he,toggleAllWorkSteps:Re,selectedMappingIds:z,isAllMappingsSelected:oe,toggleMapping:Ee,toggleAllMappings:Be,materialApplyForm:O,isApplyingMaterial:G,applyMaterialToSelectedMappings:Oe,isCreatingTasks:j,createTasksResult:d,showCreateTasksResult:m,createTasks:fe}}const wl={class:"space-y-6"},Tl={class:"grid grid-cols-2 gap-4"},Sl={class:"space-y-2"},$l={class:"flex gap-1"},Ml={class:"space-y-1 max-h-48 overflow-y-auto"},Wl=["onClick"],Vl={class:"flex-1 truncate"},Dl=["disabled","onClick"],Il={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Ul={class:"space-y-2"},Nl={class:"flex gap-1"},Ll={class:"space-y-1 max-h-48 overflow-y-auto"},Al={class:"flex-1 truncate"},Fl=["disabled","onClick"],zl={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Kl={key:1,class:"text-xs text-muted-foreground py-2 text-center"},Zl={class:"grid grid-cols-2 gap-4 mb-4"},jl={class:"space-y-2"},Rl={class:"flex items-center justify-between"},El={class:"text-xs text-primary font-medium"},Bl={key:0,class:"border rounded-md"},Ol={class:"border-t px-3 py-2 space-y-2 max-h-40 overflow-y-auto"},ql={key:0,class:"flex items-center gap-2 cursor-pointer text-sm font-medium text-primary"},Pl={key:2,class:"text-xs text-muted-foreground text-center py-2"},Hl={key:1,class:"text-xs text-muted-foreground text-center py-2 border rounded-md"},Xl={class:"space-y-2"},Gl={class:"flex items-center justify-between"},Jl={class:"text-xs text-primary font-medium"},Ql={class:"grid grid-cols-3 gap-1"},Yl={key:0,class:"border rounded-md"},es={class:"border-t px-3 py-2 space-y-2 max-h-40 overflow-y-auto"},ts={key:0,class:"flex items-center gap-2 cursor-pointer text-sm font-medium text-primary"},ls={key:2,class:"text-xs text-muted-foreground text-center py-2"},ss={key:1,class:"text-xs text-muted-foreground text-center py-2 border rounded-md"},as={key:2,class:"text-xs text-muted-foreground text-center py-2 border rounded-md"},os={class:"flex justify-end mb-4"},ns={key:0,class:"ml-1"},rs={class:"border rounded-md"},is={class:"flex items-center justify-between px-3 py-2 hover:bg-muted/50 transition-colors"},ds={class:"border-t"},us={key:0,class:"w-full text-sm"},cs={class:"bg-muted/50"},ps={class:"w-10 px-2 text-center"},ms={class:"divide-y"},vs={class:"px-2 text-center"},fs={class:"px-3 py-2"},ys={class:"px-3 py-2"},gs={class:"px-3 py-2"},xs={class:"px-3 py-2"},_s={class:"px-3 py-2"},ks={class:"px-3 py-2"},bs={class:"px-3 py-2"},hs={class:"px-3 py-2"},Cs={class:"px-3 py-2"},ws={key:1,class:"text-xs text-muted-foreground py-4 text-center"},Ts={key:2,class:"border-t px-3 py-2 bg-muted/30"},Ss={class:"flex items-center gap-2"},$s={class:"text-sm font-medium"},Ms={class:"flex justify-end"},Ws={key:0,class:"space-y-2 text-sm"},Vs={class:"flex justify-between"},Ds={class:"font-medium"},Is={class:"flex justify-between"},Us={class:"font-medium"},Ns={class:"flex justify-between"},Ls={class:"font-medium"},As=Te({__name:"ComponentCodeArea",setup(X){const{componentTypes:A,newComponentTypeName:W,isCreatingType:U,isDeletingType:$,loadComponentTypes:y,addComponentType:f,deleteComponentType:N,componentCodes:b,selectedComponentTypeId:g,newComponentCode:V,isCreatingCode:D,isDeletingCode:L,addComponentCode:K,deleteComponentCode:B,selectedComponentCodeIds:v,isAllComponentCodesSelected:x,toggleComponentCode:F,toggleAllComponentCodes:H,filteredMappings:R,isCreatingMapping:O,divisions:z,workTypes:M,subWorkTypes:u,workSteps:h,materialTypes:I,materialSpecs:G,mappingForm:j,isLoadingWorkTypes:d,isLoadingSubWorkTypes:m,isLoadingWorkSteps:w,isLoadingMaterialSpecs:de,loadDivisions:ce,loadMaterialTypes:T,loadAllMappings:k,addMapping:Y,selectedWorkStepIds:ae,isAllWorkStepsSelected:Se,toggleWorkStep:je,toggleAllWorkSteps:$e,selectedMappingIds:he,isAllMappingsSelected:Re,toggleMapping:Ce,toggleAllMappings:pe,materialApplyForm:oe,isApplyingMaterial:Ee,applyMaterialToSelectedMappings:Be,isCreatingTasks:Me,createTasksResult:me,showCreateTasksResult:ve,createTasks:Oe}=Cl(),fe=n(!0),o=n(!0),p=n(!0);Ie(()=>{y(),ce(),T(),k()});function E(De){g.value=De}const qe=ie(()=>g.value!=null?String(g.value):""),Pe=ie(()=>v.value.length===0?"선택 안함":x.value?"모두선택":`${v.value.length}개 선택`),We=ie(()=>ae.value.length===0?"선택 안함":Se.value?"모두선택":`${ae.value.length}개 선택`),at=ie(()=>!O.value&&v.value.length>0&&ae.value.length>0);function ot(){k()}const Ve=n(!1),He=n(null),tt=n(""),Xe=n(null);function lt(De,s,a){He.value=De,tt.value=s,Xe.value=a,Ve.value=!0}async function nt(){He.value!=null&&Xe.value&&await Xe.value(He.value),Ve.value=!1}return(De,s)=>(i(),c("div",wl,[t("div",null,[s[18]||(s[18]=t("h3",{class:"text-sm font-semibold mb-3"},"부재분류",-1)),t("div",Tl,[t("div",Sl,[s[15]||(s[15]=t("p",{class:"text-xs text-muted-foreground font-medium"},"부재 타입 (ComponentType)",-1)),t("div",$l,[l(e(se),{modelValue:e(W),"onUpdate:modelValue":s[0]||(s[0]=a=>te(W)?W.value=a:null),placeholder:"이름 입력",class:"h-8 text-sm",onKeyup:ee(e(f),["enter"])},null,8,["modelValue","onKeyup"]),l(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(U)||!e(W).trim(),onClick:e(f)},{default:r(()=>[...s[14]||(s[14]=[S(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",Ml,[(i(!0),c(q,null,P(e(A),a=>(i(),c("div",{key:a.id,class:we(["flex items-center px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(g)===a.id,"border-border hover:bg-muted/50":e(g)!==a.id}]),onClick:st=>E(a.id)},[t("span",Vl,C(a.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e($),onClick:le(st=>lt(a.id,a.name,e(N)),["stop"])},[l(e(re),{class:"w-3 h-3"})],8,Dl)],10,Wl))),128)),e(A).length===0?(i(),c("p",Il," 항목 없음 ")):Z("",!0)])]),t("div",Ul,[s[17]||(s[17]=t("p",{class:"text-xs text-muted-foreground font-medium"},"부재 코드 (ComponentCode)",-1)),t("div",Nl,[l(e(se),{modelValue:e(V),"onUpdate:modelValue":s[1]||(s[1]=a=>te(V)?V.value=a:null),placeholder:"코드 입력",class:"h-8 text-sm",disabled:e(g)==null,onKeyup:ee(e(K),["enter"])},null,8,["modelValue","disabled","onKeyup"]),l(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(D)||!e(V).trim()||e(g)==null,onClick:e(K)},{default:r(()=>[...s[16]||(s[16]=[S(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",Ll,[(i(!0),c(q,null,P(e(b),a=>(i(),c("div",{key:a.id,class:"flex items-center px-3 py-2 border rounded-md text-sm border-border"},[t("span",Al,C(a.code),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(L),onClick:le(st=>lt(a.id,a.code,e(B)),["stop"])},[l(e(re),{class:"w-3 h-3"})],8,Fl)]))),128)),e(g)!=null&&e(b).length===0?(i(),c("p",zl," 항목 없음 ")):Z("",!0),e(g)==null?(i(),c("p",Kl," 부재 타입을 선택하세요 ")):Z("",!0)])])])]),l(e(ue)),t("div",null,[s[36]||(s[36]=t("h3",{class:"text-sm font-semibold mb-3"},"부재코드-작업절차-자재규격 연결",-1)),t("div",Zl,[t("div",jl,[t("div",Rl,[s[19]||(s[19]=t("p",{class:"text-xs text-muted-foreground font-medium"},"부재코드 선택",-1)),t("span",El,C(Pe.value),1)]),l(e(ge),{"model-value":qe.value,"onUpdate:modelValue":s[2]||(s[2]=a=>a&&E(Number(a)))},{default:r(()=>[l(e(xe),{class:"h-8 text-sm"},{default:r(()=>[l(e(_e),{placeholder:"부재타입 선택"})]),_:1}),l(e(ke),null,{default:r(()=>[(i(!0),c(q,null,P(e(A),a=>(i(),Q(e(be),{key:a.id,value:String(a.id)},{default:r(()=>[S(C(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"]),e(g)!=null?(i(),c("div",Bl,[t("button",{class:"flex items-center justify-between w-full px-3 py-2 text-sm hover:bg-muted/50",onClick:s[3]||(s[3]=a=>o.value=!o.value)},[s[20]||(s[20]=t("span",{class:"font-medium"},"부재코드 목록",-1)),(i(),Q(Je(o.value?e(Ye):e(et)),{class:"h-4 w-4"}))]),Ge(t("div",Ol,[e(b).length>0?(i(),c("label",ql,[l(e(ye),{"model-value":e(x),"onUpdate:modelValue":e(H)},null,8,["model-value","onUpdate:modelValue"]),s[21]||(s[21]=S(" 모두선택 ",-1))])):Z("",!0),e(b).length>0?(i(),Q(e(ue),{key:1,class:"my-1"})):Z("",!0),(i(!0),c(q,null,P(e(b),a=>(i(),c("label",{key:a.id,class:"flex items-center gap-2 cursor-pointer text-sm"},[l(e(ye),{"model-value":e(v).includes(a.id),"onUpdate:modelValue":()=>e(F)(a.id)},null,8,["model-value","onUpdate:modelValue"]),S(" "+C(a.code),1)]))),128)),e(b).length===0?(i(),c("p",Pl," 항목 없음 ")):Z("",!0)],512),[[Qe,o.value]])])):(i(),c("p",Hl," 부재타입을 먼저 선택하세요 "))]),t("div",Xl,[t("div",Gl,[s[22]||(s[22]=t("p",{class:"text-xs text-muted-foreground font-medium"},"작업절차 선택",-1)),t("span",Jl,C(We.value),1)]),t("div",Ql,[l(e(ge),{modelValue:e(j).divisionId,"onUpdate:modelValue":s[4]||(s[4]=a=>e(j).divisionId=a)},{default:r(()=>[l(e(xe),{class:"h-8 text-sm"},{default:r(()=>[l(e(_e),{placeholder:"분류"})]),_:1}),l(e(ke),null,{default:r(()=>[(i(!0),c(q,null,P(e(z),a=>(i(),Q(e(be),{key:a.id,value:String(a.id)},{default:r(()=>[S(C(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),l(e(ge),{modelValue:e(j).workTypeId,"onUpdate:modelValue":s[5]||(s[5]=a=>e(j).workTypeId=a),disabled:!e(j).divisionId||e(d)},{default:r(()=>[l(e(xe),{class:"h-8 text-sm"},{default:r(()=>[l(e(_e),{placeholder:e(d)?"...":"공종"},null,8,["placeholder"])]),_:1}),l(e(ke),null,{default:r(()=>[(i(!0),c(q,null,P(e(M),a=>(i(),Q(e(be),{key:a.id,value:String(a.id)},{default:r(()=>[S(C(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),l(e(ge),{modelValue:e(j).subWorkTypeId,"onUpdate:modelValue":s[6]||(s[6]=a=>e(j).subWorkTypeId=a),disabled:!e(j).workTypeId||e(m)},{default:r(()=>[l(e(xe),{class:"h-8 text-sm"},{default:r(()=>[l(e(_e),{placeholder:e(m)?"...":"세부공종"},null,8,["placeholder"])]),_:1}),l(e(ke),null,{default:r(()=>[(i(!0),c(q,null,P(e(u),a=>(i(),Q(e(be),{key:a.id,value:String(a.id)},{default:r(()=>[S(C(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),e(j).subWorkTypeId&&!e(w)?(i(),c("div",Yl,[t("button",{class:"flex items-center justify-between w-full px-3 py-2 text-sm hover:bg-muted/50",onClick:s[7]||(s[7]=a=>p.value=!p.value)},[s[23]||(s[23]=t("span",{class:"font-medium"},"작업절차 목록",-1)),(i(),Q(Je(p.value?e(Ye):e(et)),{class:"h-4 w-4"}))]),Ge(t("div",es,[e(h).length>0?(i(),c("label",ts,[l(e(ye),{"model-value":e(Se),"onUpdate:modelValue":e($e)},null,8,["model-value","onUpdate:modelValue"]),s[24]||(s[24]=S(" 모두선택 ",-1))])):Z("",!0),e(h).length>0?(i(),Q(e(ue),{key:1,class:"my-1"})):Z("",!0),(i(!0),c(q,null,P(e(h),a=>(i(),c("label",{key:a.id,class:"flex items-center gap-2 cursor-pointer text-sm"},[l(e(ye),{"model-value":e(ae).includes(a.id),"onUpdate:modelValue":()=>e(je)(a.id)},null,8,["model-value","onUpdate:modelValue"]),S(" "+C(a.name),1)]))),128)),e(h).length===0?(i(),c("p",ls," 항목 없음 ")):Z("",!0)],512),[[Qe,p.value]])])):e(w)?(i(),c("div",ss," 로딩 중... ")):(i(),c("p",as," 세부공종을 먼저 선택하세요 "))])]),t("div",os,[l(e(J),{size:"sm",class:"h-8 px-6",disabled:!at.value,onClick:e(Y)},{default:r(()=>[s[25]||(s[25]=S(" 연결 추가 ",-1)),e(v).length>0&&e(ae).length>0?(i(),c("span",ns," ("+C(e(v).length)+" × "+C(e(ae).length)+") ",1)):Z("",!0)]),_:1},8,["disabled","onClick"])]),t("div",rs,[t("div",is,[t("button",{class:"flex items-center gap-2 text-sm font-medium",onClick:s[8]||(s[8]=a=>fe.value=!fe.value)},[(i(),Q(Je(fe.value?e(Ye):e(et)),{class:"h-4 w-4"})),t("span",null,"매핑 목록 ("+C(e(R).length)+")",1)]),t("button",{class:"p-1 rounded hover:bg-muted",title:"새로고침",onClick:le(ot,["stop"])},[l(e(yt),{class:"h-4 w-4"})])]),Ge(t("div",ds,[e(R).length>0?(i(),c("table",us,[t("thead",cs,[t("tr",null,[t("th",ps,[l(e(ye),{"model-value":e(Re),"onUpdate:modelValue":e(pe)},null,8,["model-value","onUpdate:modelValue"])]),s[26]||(s[26]=t("th",{class:"px-3 py-2 text-left font-medium"},"부재타입",-1)),s[27]||(s[27]=t("th",{class:"px-3 py-2 text-left font-medium"},"부재코드",-1)),s[28]||(s[28]=t("th",{class:"px-3 py-2 text-left font-medium"},"분류",-1)),s[29]||(s[29]=t("th",{class:"px-3 py-2 text-left font-medium"},"공종",-1)),s[30]||(s[30]=t("th",{class:"px-3 py-2 text-left font-medium"},"세부공종",-1)),s[31]||(s[31]=t("th",{class:"px-3 py-2 text-left font-medium"},"작업절차",-1)),s[32]||(s[32]=t("th",{class:"px-3 py-2 text-left font-medium"},"자재유형",-1)),s[33]||(s[33]=t("th",{class:"px-3 py-2 text-left font-medium"},"자재규격",-1)),s[34]||(s[34]=t("th",{class:"px-3 py-2 text-left font-medium"},"단위",-1))])]),t("tbody",ms,[(i(!0),c(q,null,P(e(R),a=>(i(),c("tr",{key:a.id,class:"hover:bg-muted/30"},[t("td",vs,[l(e(ye),{"model-value":e(he).includes(a.id),"onUpdate:modelValue":()=>e(Ce)(a.id)},null,8,["model-value","onUpdate:modelValue"])]),t("td",fs,C(a.componentTypeName),1),t("td",ys,C(a.componentCodeName),1),t("td",gs,C(a.divisionName),1),t("td",xs,C(a.workTypeName),1),t("td",_s,C(a.subWorkTypeName),1),t("td",ks,C(a.workStepName),1),t("td",bs,C(a.materialTypeName||"-"),1),t("td",hs,C(a.materialSpecName||"-"),1),t("td",Cs,C(a.unitName||"-"),1)]))),128))])])):(i(),c("p",ws," 연결된 작업절차가 없습니다 ")),e(he).length>0?(i(),c("div",Ts,[t("div",Ss,[t("span",$s,C(e(he).length)+"개 선택",1),l(e(ge),{modelValue:e(oe).materialTypeId,"onUpdate:modelValue":s[9]||(s[9]=a=>e(oe).materialTypeId=a)},{default:r(()=>[l(e(xe),{class:"h-8 text-sm w-40"},{default:r(()=>[l(e(_e),{placeholder:"자재유형"})]),_:1}),l(e(ke),null,{default:r(()=>[(i(!0),c(q,null,P(e(I),a=>(i(),Q(e(be),{key:a.id,value:String(a.id)},{default:r(()=>[S(C(a.name)+C(a.unit?` (${a.unit})`:""),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),l(e(ge),{modelValue:e(oe).materialSpecId,"onUpdate:modelValue":s[10]||(s[10]=a=>e(oe).materialSpecId=a),disabled:!e(oe).materialTypeId||e(de)},{default:r(()=>[l(e(xe),{class:"h-8 text-sm w-32"},{default:r(()=>[l(e(_e),{placeholder:e(de)?"로딩...":"자재규격"},null,8,["placeholder"])]),_:1}),l(e(ke),null,{default:r(()=>[(i(!0),c(q,null,P(e(G),a=>(i(),Q(e(be),{key:a.id,value:String(a.id)},{default:r(()=>[S(C(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),l(e(J),{size:"sm",disabled:!e(oe).materialSpecId||e(Ee),onClick:e(Be)},{default:r(()=>[...s[35]||(s[35]=[S(" 자재 적용 ",-1)])]),_:1},8,["disabled","onClick"])])])):Z("",!0)],512),[[Qe,fe.value]])])]),l(e(ue)),t("div",Ms,[l(e(J),{disabled:e(Me),onClick:e(Oe)},{default:r(()=>[S(C(e(Me)?"생성 중...":"세부작업 생성"),1)]),_:1},8,["disabled","onClick"])]),l(e(Ue),{open:Ve.value,"onUpdate:open":s[11]||(s[11]=a=>Ve.value=a)},{default:r(()=>[l(e(Ne),null,{default:r(()=>[l(e(Le),null,{default:r(()=>[l(e(Ae),null,{default:r(()=>[...s[37]||(s[37]=[S("삭제 확인",-1)])]),_:1}),l(e(Fe),null,{default:r(()=>[S(" '"+C(tt.value)+"' 항목을 삭제하시겠습니까? ",1)]),_:1})]),_:1}),l(e(ze),null,{default:r(()=>[l(e(Ke),null,{default:r(()=>[...s[38]||(s[38]=[S("취소",-1)])]),_:1}),l(e(Ze),{onClick:nt},{default:r(()=>[...s[39]||(s[39]=[S("삭제",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),l(e(dt),{open:e(ve),"onUpdate:open":s[13]||(s[13]=a=>te(ve)?ve.value=a:null)},{default:r(()=>[l(e(ut),null,{default:r(()=>[l(e(ct),null,{default:r(()=>[l(e(pt),null,{default:r(()=>[...s[40]||(s[40]=[S("세부작업 생성 완료",-1)])]),_:1}),l(e(vt),null,{default:r(()=>[...s[41]||(s[41]=[S("세부작업 생성 결과입니다.",-1)])]),_:1})]),_:1}),e(me)?(i(),c("div",Ws,[t("div",Vs,[s[42]||(s[42]=t("span",{class:"text-muted-foreground"},"생성된 작업 수",-1)),t("span",Ds,C(e(me).createdCount)+"건",1)]),t("div",Is,[s[43]||(s[43]=t("span",{class:"text-muted-foreground"},"건너뛴 중복 작업 수",-1)),t("span",Us,C(e(me).skippedDuplicateCount)+"건",1)]),t("div",Ns,[s[44]||(s[44]=t("span",{class:"text-muted-foreground"},"부재코드 없는 건 수",-1)),t("span",Ls,C(e(me).skippedNoCcodeCount)+"건",1)])])):Z("",!0),l(e(mt),null,{default:r(()=>[l(e(J),{onClick:s[12]||(s[12]=a=>ve.value=!1)},{default:r(()=>[...s[45]||(s[45]=[S("확인",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}}),Fs={class:"p-4 space-y-6"},aa=Te({__name:"AdminPage",setup(X){return(A,W)=>(i(),Q(rt,{title:"기준정보 관리"},{default:r(()=>[l(it,{title:"작업관련",height:"flex-1","min-height":"600px"},{default:r(()=>[t("div",Fs,[l(Xt),l(e(ue)),l(ml),l(e(ue)),l(hl),l(e(ue)),l(As)])]),_:1})]),_:1}))}});export{aa as default};
