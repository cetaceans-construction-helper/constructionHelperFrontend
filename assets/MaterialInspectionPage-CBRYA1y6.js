import{_ as N}from"./PageContainer.vue_vue_type_script_setup_true_lang-DRDIQ0kE.js";import{_ as U}from"./AreaCard.vue_vue_type_script_setup_true_lang-DJ4lChFG.js";import{_ as w}from"./index-C7HMwd8y.js";import{_ as T,a as V,b as h,c as i,d as j,e as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-DMcxyLmq.js";import{a as q,b as A,c as B,d as z,e as E,f as F,g as H,_ as O}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-Ba0kYQpB.js";import{m as b}from"./projectDocumentCode-DUIWWEmA.js";import{m as P}from"./materialOrder-DzpsOdMD.js";import{c as M}from"./createLucideIcon-BN78TdVt.js";import{d as S,r as u,i as G,p as _,w as t,e as s,c as p,u as a,g as o,n as J,F as K,t as c,o as r}from"./index-BfWxKujM.js";import"./Collection-Czag8AmA.js";import"./index-nT69UIRx.js";import"./utils-BNW14Lxq.js";import"./DialogTitle-DtDnRnRg.js";import"./DialogDescription-CrmbOr-p.js";import"./apiClient-Cn64PT0n.js";const Q=M("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);const W=M("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),X={key:0,class:"text-sm text-muted-foreground text-center py-8"},Y={key:1,class:"text-sm text-muted-foreground text-center py-8"},Z={key:1,class:"text-xs text-muted-foreground"},ve=S({__name:"MaterialInspectionPage",setup(ee){const v=u(!1),g=u([]),y=u({}),m=u(!1),k=u(null),x=u(""),d=u(!1);async function $(){v.value=!0;try{g.value=await b.getMaterialInspectionRequestList()}catch(l){console.error("MIR 목록 로드 실패:",l);const e=l;alert(e.response?.data?.message||e.message)}finally{v.value=!1}}function D(l){k.value=l.id,x.value=l.documentNumber,m.value=!0}async function I(){if(k.value!=null){d.value=!0;try{await b.deleteMaterialInspectionRequest(k.value),m.value=!1,$()}catch(l){console.error("MIR 삭제 실패:",l);const e=l;alert(e.response?.data?.message||e.message)}finally{d.value=!1}}}async function L(l){if(l.mirUrl){y.value[l.id]=!0;try{const e=await P.getDeliveryNoteImage(l.mirUrl),n=document.createElement("a");n.href=e,n.download=`${l.documentNumber}.xlsx`,n.click(),URL.revokeObjectURL(e)}catch(e){console.error("MIR 다운로드 실패:",e);const n=e;alert(n.response?.data?.message||n.message)}finally{y.value[l.id]=!1}}}function R(l){return l.split("T")[0]}return G(()=>{$()}),(l,e)=>(r(),_(N,{title:"자재반입검수요청서"},{default:t(()=>[s(U,null,{default:t(()=>[v.value?(r(),p("div",X," 목록 로딩 중... ")):g.value.length===0?(r(),p("div",Y," 생성된 검수요청서가 없습니다. ")):(r(),_(a(T),{key:2},{default:t(()=>[s(a(V),null,{default:t(()=>[s(a(h),null,{default:t(()=>[s(a(i),null,{default:t(()=>[...e[1]||(e[1]=[o("문서번호",-1)])]),_:1}),s(a(i),null,{default:t(()=>[...e[2]||(e[2]=[o("납품일",-1)])]),_:1}),s(a(i),null,{default:t(()=>[...e[3]||(e[3]=[o("생성일",-1)])]),_:1}),s(a(i),{class:"w-20 text-center"},{default:t(()=>[...e[4]||(e[4]=[o("다운로드",-1)])]),_:1}),s(a(i),{class:"w-20 text-center"},{default:t(()=>[...e[5]||(e[5]=[o("삭제",-1)])]),_:1})]),_:1})]),_:1}),s(a(j),null,{default:t(()=>[(r(!0),p(K,null,J(g.value,n=>(r(),_(a(h),{key:n.id},{default:t(()=>[s(a(f),{class:"font-medium"},{default:t(()=>[o(c(n.documentNumber),1)]),_:2},1024),s(a(f),null,{default:t(()=>[o(c(n.deliveryDate),1)]),_:2},1024),s(a(f),null,{default:t(()=>[o(c(R(n.createdAt)),1)]),_:2},1024),s(a(f),{class:"text-center"},{default:t(()=>[n.mirUrl?(r(),_(a(w),{key:0,variant:"ghost",size:"sm",class:"h-8 w-8 p-0",disabled:y.value[n.id],onClick:C=>L(n)},{default:t(()=>[s(a(Q),{class:"h-4 w-4 text-muted-foreground"})]),_:1},8,["disabled","onClick"])):(r(),p("span",Z,"-"))]),_:2},1024),s(a(f),{class:"text-center"},{default:t(()=>[s(a(w),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0 text-muted-foreground hover:text-destructive",onClick:C=>D(n)},{default:t(()=>[s(a(W),{class:"h-4 w-4"})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))]),_:1}),s(a(O),{open:m.value,"onUpdate:open":e[0]||(e[0]=n=>m.value=n)},{default:t(()=>[s(a(q),null,{default:t(()=>[s(a(A),null,{default:t(()=>[s(a(B),null,{default:t(()=>[...e[6]||(e[6]=[o("삭제 확인",-1)])]),_:1}),s(a(z),null,{default:t(()=>[o(" '"+c(x.value)+"' 검수요청서를 삭제하시겠습니까? ",1)]),_:1})]),_:1}),s(a(E),null,{default:t(()=>[s(a(F),{disabled:d.value},{default:t(()=>[...e[7]||(e[7]=[o("취소",-1)])]),_:1},8,["disabled"]),s(a(H),{disabled:d.value,onClick:I},{default:t(()=>[o(c(d.value?"삭제 중...":"삭제"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1}))}});export{ve as default};
