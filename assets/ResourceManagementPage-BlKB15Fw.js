import{_ as re}from"./PageContainer.vue_vue_type_script_setup_true_lang-BIH9eeFm.js";import{_ as ne}from"./AreaCard.vue_vue_type_script_setup_true_lang-BUJNG2ka.js";import{_ as le}from"./Separator.vue_vue_type_script_setup_true_lang-D-Wo3tYl.js";import{r as c,D as B,d as G,i as J,c as p,a as t,e as a,j as C,F as K,n as U,u as e,q as z,a8 as F,U as R,w as v,g as $,t as D,o as d,k as H,p as ae}from"./index-DG8erdFC.js";import{_ as j}from"./index-CKTY9j9I.js";import{_ as P}from"./Input.vue_vue_type_script_setup_true_lang-CGgGVb3D.js";import{_ as O,a as Q,b as Y,c as Z,d as ee,e as te,f as se,g as oe}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-Bxz5wUrA.js";import{r as q}from"./reference-B-qmHaHf.js";import{X}from"./x-CwbFRCqd.js";import"./Collection-BA_9eYIH.js";import"./index-CE7v__89.js";import"./utils-DU_xaL7B.js";import"./DialogTitle-0IlAdc_J.js";import"./createLucideIcon-CDvnuoGZ.js";import"./DialogDescription-gp0zo3qJ.js";import"./apiClient-r2tmWO-w.js";function ie(){const w=c([]),_=c([]),f=c([]),k=c(null),b=c(null),m=c(null),y=c([]),T=c(""),h=c(!1),E=c(!1),S=async()=>{try{w.value=await q.getDivisionList()}catch(r){console.error("Division 목록 로드 실패:",r)}},W=async r=>{try{_.value=await q.getWorkTypeList(r)}catch(g){console.error("WorkType 목록 로드 실패:",g)}},V=async r=>{try{f.value=await q.getSubWorkTypeList(r)}catch(g){console.error("SubWorkType 목록 로드 실패:",g)}},N=async()=>{try{y.value=await q.getLaborTypeList()}catch(r){console.error("LaborType 목록 로드 실패:",r)}},n=r=>{k.value=r,b.value=null,m.value=null,_.value=[],f.value=[]},i=r=>{b.value=r,m.value=null,f.value=[]},x=r=>{m.value=r},I=async()=>{if(h.value)return;const r=T.value.trim(),g=b.value;if(!(!r||!g)){h.value=!0;try{await q.createLaborType({name:r,workTypeId:g,subWorkTypeId:m.value}),T.value="",await N()}catch(s){console.error("LaborType 추가 실패:",s);const u=s;alert(u.response?.data?.message||u.message)}finally{h.value=!1}}},L=async r=>{if(!E.value){E.value=!0;try{await q.deleteLaborType(r),y.value=y.value.filter(g=>g.id!==r)}catch(g){console.error("LaborType 삭제 실패:",g);const s=g;alert(s.response?.data?.message||s.message)}finally{E.value=!1}}};return B(k,r=>{_.value=[],r&&W(r)}),B(b,r=>{f.value=[],r&&V(r)}),{divisions:w,workTypes:_,subWorkTypes:f,laborTypes:y,selectedDivisionId:k,selectedWorkTypeId:b,selectedSubWorkTypeId:m,newLaborTypeName:T,isCreating:h,isDeleting:E,loadDivisions:S,loadLaborTypes:N,selectDivision:n,selectWorkType:i,selectSubWorkType:x,addLaborType:I,deleteLaborType:L}}const ue={class:"grid grid-cols-4 gap-4 mb-4"},de={class:"space-y-2"},pe={class:"space-y-1 max-h-36 overflow-y-auto"},ce=["onClick"],me={key:0,class:"text-xs text-muted-foreground py-2 text-center"},ye={class:"space-y-2"},fe={class:"space-y-1 max-h-36 overflow-y-auto"},ve=["onClick"],xe={key:0,class:"text-xs text-muted-foreground py-2 text-center"},_e={key:1,class:"text-xs text-muted-foreground py-2 text-center"},be={class:"space-y-2"},ge={class:"space-y-1 max-h-36 overflow-y-auto"},ke=["onClick"],Te={key:1,class:"text-xs text-muted-foreground py-2 text-center"},he={class:"space-y-2"},qe={class:"flex gap-1"},$e={key:0,class:"text-xs text-muted-foreground"},we={class:"mt-4"},Ee={class:"border rounded-md max-h-48 overflow-y-auto"},Ce={class:"w-full text-sm"},De={class:"px-3 py-2"},Le={class:"px-3 py-2 text-muted-foreground"},Se={class:"px-3 py-2 text-muted-foreground"},We={class:"px-2 text-center"},Ne=["disabled","onClick"],Ve={key:0},Ie=G({__name:"LaborTypeArea",setup(w){const{divisions:_,workTypes:f,subWorkTypes:k,laborTypes:b,selectedDivisionId:m,selectedWorkTypeId:y,selectedSubWorkTypeId:T,newLaborTypeName:h,isCreating:E,isDeleting:S,loadDivisions:W,loadLaborTypes:V,selectDivision:N,selectWorkType:n,selectSubWorkType:i,addLaborType:x,deleteLaborType:I}=ie();J(()=>{W(),V()});const L=c(!1),r=c(null),g=c("");function s(M,o){r.value=M,g.value=o,L.value=!0}async function u(){r.value!=null&&await I(r.value),L.value=!1}return(M,o)=>(d(),p("div",null,[o[14]||(o[14]=t("h3",{class:"text-sm font-semibold mb-3"},"직종 관리 (LaborType)",-1)),t("div",ue,[t("div",de,[o[3]||(o[3]=t("p",{class:"text-xs text-muted-foreground font-medium"},"분류 (Division)",-1)),t("div",pe,[(d(!0),p(K,null,U(e(_),l=>(d(),p("div",{key:l.id,class:z(["px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(m)===l.id,"border-border hover:bg-muted/50":e(m)!==l.id}]),onClick:A=>e(N)(l.id)},D(l.name),11,ce))),128)),e(_).length===0?(d(),p("p",me," 항목 없음 ")):C("",!0)])]),t("div",ye,[o[4]||(o[4]=t("p",{class:"text-xs text-muted-foreground font-medium"},"공종 (WorkType) *필수",-1)),t("div",fe,[(d(!0),p(K,null,U(e(f),l=>(d(),p("div",{key:l.id,class:z(["px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(y)===l.id,"border-border hover:bg-muted/50":e(y)!==l.id}]),onClick:A=>e(n)(l.id)},D(l.name),11,ve))),128)),e(m)&&e(f).length===0?(d(),p("p",xe," 항목 없음 ")):C("",!0),e(m)?C("",!0):(d(),p("p",_e," 분류를 선택하세요 "))])]),t("div",be,[o[5]||(o[5]=t("p",{class:"text-xs text-muted-foreground font-medium"},"세부공종 (선택사항)",-1)),t("div",ge,[e(y)?(d(),p("div",{key:0,class:z(["px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(T)===null,"border-border hover:bg-muted/50":e(T)!==null}]),onClick:o[0]||(o[0]=l=>e(i)(null))}," (선택 안함) ",2)):C("",!0),(d(!0),p(K,null,U(e(k),l=>(d(),p("div",{key:l.id,class:z(["px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(T)===l.id,"border-border hover:bg-muted/50":e(T)!==l.id}]),onClick:A=>e(i)(l.id)},D(l.name),11,ke))),128)),e(y)?C("",!0):(d(),p("p",Te," 공종을 선택하세요 "))])]),t("div",he,[o[7]||(o[7]=t("p",{class:"text-xs text-muted-foreground font-medium"},"직종명 입력",-1)),t("div",qe,[a(e(P),{modelValue:e(h),"onUpdate:modelValue":o[1]||(o[1]=l=>R(h)?h.value=l:null),placeholder:"직종명 입력",class:"h-8 text-sm",disabled:!e(y),onKeyup:F(e(x),["enter"])},null,8,["modelValue","disabled","onKeyup"]),a(e(j),{size:"sm",class:"h-8 shrink-0",disabled:e(E)||!e(h).trim()||!e(y),onClick:e(x)},{default:v(()=>[...o[6]||(o[6]=[$(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),e(y)?C("",!0):(d(),p("p",$e," 공종을 선택하세요 "))])]),t("div",we,[o[10]||(o[10]=t("p",{class:"text-xs text-muted-foreground font-medium mb-2"},"등록된 직종 목록",-1)),t("div",Ee,[t("table",Ce,[o[9]||(o[9]=t("thead",{class:"bg-muted/50 sticky top-0"},[t("tr",null,[t("th",{class:"text-left px-3 py-2 font-medium"},"직종명"),t("th",{class:"text-left px-3 py-2 font-medium"},"공종"),t("th",{class:"text-left px-3 py-2 font-medium"},"세부공종"),t("th",{class:"w-10 px-2"})])],-1)),t("tbody",null,[(d(!0),p(K,null,U(e(b),l=>(d(),p("tr",{key:l.id,class:"border-t border-border"},[t("td",De,D(l.name),1),t("td",Le,D(l.workTypeName),1),t("td",Se,D(l.subWorkTypeName||"-"),1),t("td",We,[t("button",{class:"p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive",disabled:e(S),onClick:A=>s(l.id,l.name)},[a(e(X),{class:"w-3 h-3"})],8,Ne)])]))),128)),e(b).length===0?(d(),p("tr",Ve,[...o[8]||(o[8]=[t("td",{colspan:"4",class:"px-3 py-4 text-center text-muted-foreground"}," 등록된 직종이 없습니다 ",-1)])])):C("",!0)])])])]),a(e(O),{open:L.value,"onUpdate:open":o[2]||(o[2]=l=>L.value=l)},{default:v(()=>[a(e(Q),null,{default:v(()=>[a(e(Y),null,{default:v(()=>[a(e(Z),null,{default:v(()=>[...o[11]||(o[11]=[$("삭제 확인",-1)])]),_:1}),a(e(ee),null,{default:v(()=>[$(" '"+D(g.value)+"' 직종을 삭제하시겠습니까? ",1)]),_:1})]),_:1}),a(e(te),null,{default:v(()=>[a(e(se),null,{default:v(()=>[...o[12]||(o[12]=[$("취소",-1)])]),_:1}),a(e(oe),{onClick:u},{default:v(()=>[...o[13]||(o[13]=[$("삭제",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}});function Ke(){const w=c([]),_=c([]),f=c(null),k=c(""),b=c(""),m=c(!1),y=c(!1),T=async()=>{try{w.value=await q.getEquipmentTypeList()}catch(n){console.error("EquipmentType 목록 로드 실패:",n)}},h=async n=>{try{_.value=await q.getEquipmentSpecList(n)}catch(i){console.error("EquipmentSpec 목록 로드 실패:",i)}},E=n=>{f.value=n},S=async()=>{if(m.value)return;const n=k.value.trim();if(n){m.value=!0;try{await q.createEquipmentType(n),k.value="",await T()}catch(i){console.error("EquipmentType 추가 실패:",i);const x=i;alert(x.response?.data?.message||x.message)}finally{m.value=!1}}},W=async()=>{if(m.value)return;const n=b.value.trim();if(!(!n||!f.value)){m.value=!0;try{await q.createEquipmentSpec(f.value,n),b.value="",await h(f.value)}catch(i){console.error("EquipmentSpec 추가 실패:",i);const x=i;alert(x.response?.data?.message||x.message)}finally{m.value=!1}}},V=async n=>{if(!y.value){y.value=!0;try{await q.deleteEquipmentType(n),f.value===n&&(f.value=null,_.value=[]),w.value=w.value.filter(i=>i.id!==n)}catch(i){console.error("EquipmentType 삭제 실패:",i);const x=i;alert(x.response?.data?.message||x.message)}finally{y.value=!1}}},N=async n=>{if(!y.value){y.value=!0;try{await q.deleteEquipmentSpec(n),_.value=_.value.filter(i=>i.id!==n)}catch(i){console.error("EquipmentSpec 삭제 실패:",i);const x=i;alert(x.response?.data?.message||x.message)}finally{y.value=!1}}};return B(f,n=>{_.value=[],n&&h(n)}),{equipmentTypes:w,equipmentSpecs:_,selectedEquipmentTypeId:f,newEquipmentTypeName:k,newEquipmentSpecName:b,isCreating:m,isDeleting:y,loadEquipmentTypes:T,selectEquipmentType:E,addEquipmentType:S,addEquipmentSpec:W,deleteEquipmentType:V,deleteEquipmentSpec:N}}const Ue={class:"grid grid-cols-2 gap-4"},Me={class:"space-y-2"},ze={class:"flex gap-1"},Ae={class:"space-y-1 max-h-48 overflow-y-auto"},Be=["onClick"],Fe={class:"flex-1 truncate"},Re=["disabled","onClick"],je={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Pe={class:"space-y-2"},Xe={class:"flex gap-1"},Ge={class:"space-y-1 max-h-48 overflow-y-auto"},He={class:"flex-1 truncate"},Je=["disabled","onClick"],Oe={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Qe={key:1,class:"text-xs text-muted-foreground py-2 text-center"},Ye=G({__name:"EquipmentMasterArea",setup(w){const{equipmentTypes:_,equipmentSpecs:f,selectedEquipmentTypeId:k,newEquipmentTypeName:b,newEquipmentSpecName:m,isCreating:y,isDeleting:T,loadEquipmentTypes:h,selectEquipmentType:E,addEquipmentType:S,addEquipmentSpec:W,deleteEquipmentType:V,deleteEquipmentSpec:N}=Ke();J(()=>{h()});const n=c(!1),i=c(null),x=c(""),I=c(null);function L(g,s,u){i.value=g,x.value=s,I.value=u,n.value=!0}async function r(){i.value!=null&&I.value&&await I.value(i.value),n.value=!1}return(g,s)=>(d(),p("div",null,[s[10]||(s[10]=t("h3",{class:"text-sm font-semibold mb-3"},"장비분류",-1)),t("div",Ue,[t("div",Me,[s[4]||(s[4]=t("p",{class:"text-xs text-muted-foreground font-medium"},"장비유형 (EquipmentType)",-1)),t("div",ze,[a(e(P),{modelValue:e(b),"onUpdate:modelValue":s[0]||(s[0]=u=>R(b)?b.value=u:null),placeholder:"이름 입력",class:"h-8 text-sm flex-1",onKeyup:F(e(S),["enter"])},null,8,["modelValue","onKeyup"]),a(e(j),{size:"sm",class:"h-8 shrink-0",disabled:e(y)||!e(b).trim(),onClick:e(S)},{default:v(()=>[...s[3]||(s[3]=[$(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",Ae,[(d(!0),p(K,null,U(e(_),u=>(d(),p("div",{key:u.id,class:z(["flex items-center px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(k)===u.id,"border-border hover:bg-muted/50":e(k)!==u.id}]),onClick:M=>e(E)(u.id)},[t("span",Fe,D(u.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(T),onClick:H(M=>L(u.id,u.name,e(V)),["stop"])},[a(e(X),{class:"w-3 h-3"})],8,Re)],10,Be))),128)),e(_).length===0?(d(),p("p",je," 항목 없음 ")):C("",!0)])]),t("div",Pe,[s[6]||(s[6]=t("p",{class:"text-xs text-muted-foreground font-medium"},"장비규격 (EquipmentSpec)",-1)),t("div",Xe,[a(e(P),{modelValue:e(m),"onUpdate:modelValue":s[1]||(s[1]=u=>R(m)?m.value=u:null),placeholder:"이름 입력",class:"h-8 text-sm",disabled:!e(k),onKeyup:F(e(W),["enter"])},null,8,["modelValue","disabled","onKeyup"]),a(e(j),{size:"sm",class:"h-8 shrink-0",disabled:e(y)||!e(m).trim()||!e(k),onClick:e(W)},{default:v(()=>[...s[5]||(s[5]=[$(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",Ge,[(d(!0),p(K,null,U(e(f),u=>(d(),p("div",{key:u.id,class:"flex items-center px-3 py-2 border rounded-md text-sm border-border"},[t("span",He,D(u.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(T),onClick:H(M=>L(u.id,u.name,e(N)),["stop"])},[a(e(X),{class:"w-3 h-3"})],8,Je)]))),128)),e(k)&&e(f).length===0?(d(),p("p",Oe," 항목 없음 ")):C("",!0),e(k)?C("",!0):(d(),p("p",Qe," 장비유형을 선택하세요 "))])])]),a(e(O),{open:n.value,"onUpdate:open":s[2]||(s[2]=u=>n.value=u)},{default:v(()=>[a(e(Q),null,{default:v(()=>[a(e(Y),null,{default:v(()=>[a(e(Z),null,{default:v(()=>[...s[7]||(s[7]=[$("삭제 확인",-1)])]),_:1}),a(e(ee),null,{default:v(()=>[$(" '"+D(x.value)+"' 항목을 삭제하시겠습니까? ",1)]),_:1})]),_:1}),a(e(te),null,{default:v(()=>[a(e(se),null,{default:v(()=>[...s[8]||(s[8]=[$("취소",-1)])]),_:1}),a(e(oe),{onClick:r},{default:v(()=>[...s[9]||(s[9]=[$("삭제",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}}),Ze={class:"p-4 space-y-6"},vt=G({__name:"ResourceManagementPage",setup(w){return(_,f)=>(d(),ae(re,{title:"자원정보 관리"},{default:v(()=>[a(ne,{title:"직종관리",height:"flex-1","min-height":"600px"},{default:v(()=>[t("div",Ze,[a(Ie),a(e(le)),a(Ye)])]),_:1})]),_:1}))}});export{vt as default};
