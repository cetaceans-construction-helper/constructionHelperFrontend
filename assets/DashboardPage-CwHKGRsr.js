import{d as F,r as p,y as v,i as V,c as n,a as t,e as f,w as y,u as m,f as G,g as b,t as d,F as i,n as u,o as a}from"./index-BfWxKujM.js";import{_ as S}from"./AreaCard.vue_vue_type_script_setup_true_lang-DJ4lChFG.js";import{_}from"./index-C7HMwd8y.js";import{w as I}from"./work-xiz4qXMp.js";import{a as O,e as R}from"./equipment-BIxAe1fX.js";import{m as Y}from"./materialOrder-DzpsOdMD.js";import{u as H}from"./apiClient-Cn64PT0n.js";import{u as J}from"./calendarStore-pXXzeDPN.js";import"./Collection-Czag8AmA.js";import"./index-nT69UIRx.js";import"./utils-BNW14Lxq.js";const K={class:"flex-1 flex flex-col gap-4"},U={class:"flex gap-4 items-start"},X={class:"flex items-center justify-between mb-3"},Z={key:0,class:"text-sm text-muted-foreground"},tt={key:1,class:"space-y-4"},et={class:"flex items-center justify-between"},st={class:"text-lg font-semibold"},ot={class:"text-sm text-muted-foreground"},rt={class:"border border-border rounded-lg p-3"},nt={key:0,class:"text-sm text-muted-foreground"},at={key:1,class:"space-y-3"},dt={class:"text-sm font-medium mb-1"},lt={class:"space-y-0.5"},it={class:"border border-border rounded-lg p-3"},ut={key:0,class:"text-sm text-muted-foreground"},mt={key:1,class:"space-y-3"},ct={class:"text-sm font-medium mb-1"},pt={class:"space-y-0.5"},ft={class:"border border-border rounded-lg p-3"},yt={key:0,class:"text-sm text-muted-foreground"},xt={key:1,class:"space-y-3"},gt={class:"text-sm font-medium mb-1"},vt={class:"space-y-0.5"},bt={class:"border border-border rounded-lg p-3"},_t={key:0,class:"text-sm text-muted-foreground"},kt={key:1,class:"space-y-3"},ht={class:"text-sm font-medium mb-1"},wt={class:"space-y-0.5"},Dt={class:"text-sm font-bold mt-2"},Nt={class:"border border-border rounded-lg p-3"},St={key:0,class:"text-sm text-muted-foreground"},It={key:1,class:"space-y-3"},Ct={class:"text-sm font-medium mb-1"},Bt={class:"space-y-0.5"},Tt={class:"text-sm font-bold mt-2"},Mt={class:"space-y-4 mt-[5rem]"},jt={class:"border border-border rounded-lg p-3 flex items-center justify-between"},Wt={class:"border border-border rounded-lg p-3 flex items-center justify-between"},qt={class:"border border-border rounded-lg p-3 flex items-center justify-between"},Ht=F({__name:"DashboardPage",setup(Lt){const A=G(),C=H(),P=J(),B=l=>`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-${String(l.getDate()).padStart(2,"0")}`,x=new Date,k=new Date(x);k.setDate(k.getDate()+1);const g=B(x),Q=B(k),E=["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "][x.getDay()],h=p([]),T=p([]),M=p([]),j=p([]),W=p([]),q=p([]),w=p(!1),L=v(()=>{const l=new Set(T.value),e=h.value.filter(r=>l.has(r.workId)),s=new Map;for(const r of e){const o=r.workType||"ë¯¸ë¶„ë¥˜";s.has(o)||s.set(o,[]),s.get(o).push(r)}return s}),$=v(()=>{const l=new Set(M.value),e=h.value.filter(r=>l.has(r.workId)),s=new Map;for(const r of e){const o=r.workType||"ë¯¸ë¶„ë¥˜";s.has(o)||s.set(o,[]),s.get(o).push(r)}return s}),z=v(()=>{const l=new Map;for(const e of W.value){const s=e.workTypeName||"ë¯¸ë¶„ë¥˜";l.has(s)||l.set(s,[]),l.get(s).push(e)}return l}),D=v(()=>{const l=[],e=new Map;for(const s of j.value){const r=`${s.workTypeId}-${s.companyId}`;if(!e.has(r)){const c={workTypeName:s.workTypeName,companyDisplayName:s.companyDisplayName,totalCount:0,items:[]};e.set(r,c),l.push(c)}const o=e.get(r);o.items.push(s),o.totalCount+=s.count}return l}),N=v(()=>{const l=[],e=new Map;for(const s of q.value){const r=s.companyId;if(!e.has(r)){const c={companyDisplayName:s.companyDisplayName,totalCount:0,items:[]};e.set(r,c),l.push(c)}const o=e.get(r);o.items.push(s),o.totalCount+=s.count}return l});return V(async()=>{if(C.selectedProjectId){w.value=!0;try{await P.getCalendar(C.selectedProjectId);const[l,e,s,r,o,c]=await Promise.all([I.getWorkList(),I.getWorkListByDate(g),I.getWorkListByDate(Q),O.getAttendanceListByDate(g),Y.getTotalDeliveryQuantityByDate(g),R.getEquipmentDeploymentListByDate(g)]);h.value=l,T.value=e,M.value=s,j.value=r,W.value=o,q.value=c}catch(l){console.error("ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:",l)}finally{w.value=!1}}}),(l,e)=>(a(),n("div",K,[t("div",U,[f(S,{height:"flex-none","min-height":"auto",class:"w-1/3"},{default:y(()=>[t("div",X,[e[2]||(e[2]=t("h3",{class:"text-lg font-semibold"},"ì˜¤ëŠ˜ì‘ì—…",-1)),f(m(_),{variant:"outline",size:"sm",onClick:e[0]||(e[0]=s=>m(A).push("/helper/schedule/2d"))},{default:y(()=>[...e[1]||(e[1]=[b(" ê³µì •í‘œ ìˆ˜ì • ",-1)])]),_:1})]),w.value?(a(),n("div",Z,"ë¡œë”© ì¤‘...")):(a(),n("div",tt,[t("div",et,[t("div",null,[t("p",st,d(m(x).getMonth()+1)+"ì›” "+d(m(x).getDate())+"ì¼ ("+d(m(E))+") ",1),t("p",ot,d(m(g)),1)]),e[3]||(e[3]=t("div",{class:"text-right text-sm text-muted-foreground"},[t("p",null,"ë§‘ìŒ"),t("p",null,"-5Â°C / 3Â°C")],-1))]),t("div",rt,[e[4]||(e[4]=t("h4",{class:"text-sm font-semibold mb-2 text-foreground"},"ì˜¤ëŠ˜ ì‘ì—…",-1)),L.value.size===0?(a(),n("div",nt," ì˜¤ëŠ˜ ì˜ˆì •ëœ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤. ")):(a(),n("div",at,[(a(!0),n(i,null,u(L.value,([s,r])=>(a(),n("div",{key:s},[t("p",dt,"â–  "+d(s),1),t("div",lt,[(a(!0),n(i,null,u(r,o=>(a(),n("p",{key:o.workId,class:"text-sm text-muted-foreground"}," - "+d(o.workName),1))),128))])]))),128))]))]),t("div",it,[e[5]||(e[5]=t("h4",{class:"text-sm font-semibold mb-2 text-foreground"},"ë‚´ì¼ ì‘ì—…",-1)),$.value.size===0?(a(),n("div",ut," ë‚´ì¼ ì˜ˆì •ëœ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤. ")):(a(),n("div",mt,[(a(!0),n(i,null,u($.value,([s,r])=>(a(),n("div",{key:s},[t("p",ct,"â–  "+d(s),1),t("div",pt,[(a(!0),n(i,null,u(r,o=>(a(),n("p",{key:o.workId,class:"text-sm text-muted-foreground"}," - "+d(o.workName),1))),128))])]))),128))]))]),t("div",ft,[e[6]||(e[6]=t("h4",{class:"text-sm font-semibold mb-2 text-foreground"},"ë°˜ì… ìì¬",-1)),z.value.size===0?(a(),n("div",yt," ì˜¤ëŠ˜ ë°˜ì…ëœ ìì¬ê°€ ì—†ìŠµë‹ˆë‹¤. ")):(a(),n("div",xt,[(a(!0),n(i,null,u(z.value,([s,r])=>(a(),n("div",{key:s},[t("p",gt,"â–  "+d(s),1),t("div",vt,[(a(!0),n(i,null,u(r,o=>(a(),n("p",{key:o.materialSpecName,class:"text-sm text-muted-foreground"}," - "+d(o.materialTypeName)+"("+d(o.materialSpecName)+") : "+d(o.totalQuantity)+" "+d(o.unit),1))),128))])]))),128))]))]),t("div",bt,[e[7]||(e[7]=t("h4",{class:"text-sm font-semibold mb-2 text-foreground"},"ë°˜ì… ì¥ë¹„",-1)),N.value.length===0?(a(),n("div",_t," ì˜¤ëŠ˜ ë°˜ì…ëœ ì¥ë¹„ê°€ ì—†ìŠµë‹ˆë‹¤. ")):(a(),n("div",kt,[(a(!0),n(i,null,u(N.value,(s,r)=>(a(),n("div",{key:r},[t("p",ht," â–  "+d(s.companyDisplayName)+" : "+d(s.totalCount)+"ëŒ€ ",1),t("div",wt,[(a(!0),n(i,null,u(s.items,o=>(a(),n("p",{key:o.equipmentSpecId,class:"text-sm text-muted-foreground"}," - "+d(o.equipmentTypeName)+"("+d(o.equipmentSpecName)+") : "+d(o.count)+"ëŒ€ ",1))),128))])]))),128)),t("p",Dt," â–  ì´ ì¥ë¹„ : "+d(N.value.reduce((s,r)=>s+r.totalCount,0))+"ëŒ€ ",1)]))]),t("div",Nt,[e[8]||(e[8]=t("h4",{class:"text-sm font-semibold mb-2 text-foreground"},"ì¶œì—­ ì¸ì›",-1)),D.value.length===0?(a(),n("div",St," ì˜¤ëŠ˜ ì¶œì—­ ì¸ì›ì´ ì—†ìŠµë‹ˆë‹¤. ")):(a(),n("div",It,[(a(!0),n(i,null,u(D.value,(s,r)=>(a(),n("div",{key:r},[t("p",Ct," â–  "+d(s.workTypeName)+"("+d(s.companyDisplayName)+") : "+d(s.totalCount)+"ëª… ",1),t("div",Bt,[(a(!0),n(i,null,u(s.items,o=>(a(),n("p",{key:o.laborTypeId,class:"text-sm text-muted-foreground"}," - "+d(o.laborTypeName)+" : "+d(o.count)+"ëª… ",1))),128))])]))),128)),t("p",Tt," â–  ì´ ì¶œì—­ì¸ì› : "+d(D.value.reduce((s,r)=>s+r.totalCount,0))+"ëª… ",1)]))])]))]),_:1}),f(S,{height:"flex-none","min-height":"auto",class:"w-1/3"},{default:y(()=>[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold"},"AI ë„ìš°ë¯¸",-1)),t("div",Mt,[t("div",jt,[e[10]||(e[10]=t("p",{class:"text-sm"},"ì˜¤ëŠ˜ ì‘ì—…ëŸ‰ì„ ì²´í¬í•´ë³¼ê¹Œìš”?",-1)),f(m(_),{variant:"outline",size:"sm",class:"ml-4 shrink-0"},{default:y(()=>[...e[9]||(e[9]=[b("ë°”ë¡œê°€ê¸°",-1)])]),_:1})]),t("div",Wt,[e[12]||(e[12]=t("p",{class:"text-sm"},"3ê°œì›” í›„ ì—˜ë¦¬ë² ì´í„° ê³µì‚¬ê°€ ì‹œì‘ë©ë‹ˆë‹¤, ê²¬ì ì„ ìš”ì²­í• ê¹Œìš”?",-1)),f(m(_),{variant:"outline",size:"sm",class:"ml-4 shrink-0"},{default:y(()=>[...e[11]||(e[11]=[b("ë°”ë¡œê°€ê¸°",-1)])]),_:1})]),t("div",qt,[e[14]||(e[14]=t("p",{class:"text-sm"},"ì˜¤ëŠ˜ ì‘ì—… í‰ê°€ì„œê°€ ë‚˜ì™”ìŠµë‹ˆë‹¤. í™•ì¸í•´ì£¼ì„¸ìš”.",-1)),f(m(_),{variant:"outline",size:"sm",class:"ml-4 shrink-0"},{default:y(()=>[...e[13]||(e[13]=[b("ë°”ë¡œê°€ê¸°",-1)])]),_:1})])])]),_:1}),f(S,{height:"flex-none","min-height":"auto",class:"w-1/3"},{default:y(()=>[...e[16]||(e[16]=[t("h3",{class:"text-lg font-semibold"},"ì‘ì—… í‰ê°€",-1),t("div",{class:"space-y-4 mt-[5rem]"},[t("div",{class:"border border-border rounded-lg p-3"},[t("p",{class:"text-sm font-medium text-orange-600 dark:text-orange-400"},"âš ï¸ ì˜¤ëŠ˜ íš¨ìœ¨ ì €í•˜"),t("p",{class:"text-sm text-muted-foreground mt-1"},"ì˜¤ëŠ˜ì€ ì¶œì—­ì¸ì› ëŒ€ë¹„ ì‘ì—…ëŸ‰ì´ 84% ë°–ì— ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.")]),t("div",{class:"border border-border rounded-lg p-3"},[t("p",{class:"text-sm font-medium text-green-600 dark:text-green-400"},"âœ“ ì´ë²ˆì£¼ ëª©í‘œ ì´ˆê³¼ ë‹¬ì„±"),t("p",{class:"text-sm text-muted-foreground mt-1"},"ì´ë²ˆì£¼ëŠ” ì¶œì—­ì¸ì› ëŒ€ë¹„ ì‘ì—…ëŸ‰ì´ 110% ì…ë‹ˆë‹¤.")]),t("div",{class:"border border-border rounded-lg p-3"},[t("p",{class:"text-sm font-medium text-blue-600 dark:text-blue-400"},"ğŸ“Š ì² ê·¼ì½˜í¬ë¦¬íŠ¸ê³µì‚¬"),t("p",{class:"text-sm text-muted-foreground mt-1"},"ì´ë²ˆë‹¬ ì² ê·¼ê³µì‚¬ ì§„ì²™ë¥ ì´ ê³„íš ëŒ€ë¹„ 105%ë¡œ ìˆœì¡°ë¡­ìŠµë‹ˆë‹¤.")]),t("div",{class:"border border-border rounded-lg p-3"},[t("p",{class:"text-sm font-medium text-red-600 dark:text-red-400"},"âš ï¸ ì§€ì—° ì£¼ì˜"),t("p",{class:"text-sm text-muted-foreground mt-1"},"ê¸ˆì†ê³µì‚¬ê°€ ê³„íš ëŒ€ë¹„ 3ì¼ ì§€ì—°ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì¸ì› ë³´ê°•ì„ ê²€í† í•˜ì„¸ìš”.")]),t("div",{class:"border border-border rounded-lg p-3"},[t("p",{class:"text-sm font-medium text-purple-600 dark:text-purple-400"},"ğŸ“ˆ ìƒì‚°ì„± ë¶„ì„"),t("p",{class:"text-sm text-muted-foreground mt-1"},"í˜•í‹€ê³µ 1ì¸ë‹¹ ì¼ì¼ í‰ê·  ì‘ì—…ëŸ‰: 12.5ã¡ (ì—…ê³„ í‰ê·  ëŒ€ë¹„ +15%)")])],-1)])]),_:1})])]))}});export{Ht as default};
