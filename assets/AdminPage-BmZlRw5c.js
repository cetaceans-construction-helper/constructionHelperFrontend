import{_ as dt}from"./PageContainer.vue_vue_type_script_setup_true_lang-CEHe9PLv.js";import{_ as ut}from"./AreaCard.vue_vue_type_script_setup_true_lang-Cun49brn.js";import{_ as ce}from"./Separator.vue_vue_type_script_setup_true_lang-DnZfeeDb.js";import{r as n,D as ne,d as Te,i as Le,c,a as t,e as s,u as e,a8 as te,U as se,w as r,g as C,j as Z,F as E,n as B,t as h,o as i,q as we,k as Y,y as de,a4 as et,p as Q,E as tt,a5 as st}from"./index-CrXngJox.js";import{_ as J}from"./index-DjQGxc2-.js";import{_ as le}from"./Input.vue_vue_type_script_setup_true_lang-Cd6-xZ_U.js";import{_ as Ae,a as Fe,b as ze,c as Ke,d as Ze,e as je,f as Re,g as Ee}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-BMpptCBF.js";import{r as y}from"./reference-BgrhXxFd.js";import{X as ae}from"./x-CqUQJ7je.js";import{_ as ge}from"./Checkbox.vue_vue_type_script_setup_true_lang-CQl3bHDA.js";import{_ as xe,a as _e,b as ke,c as be,C as lt,d as he}from"./SelectValue.vue_vue_type_script_setup_true_lang-jGZzJRNu.js";import{_ as ct,a as pt,b as mt,c as vt,d as ft}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BB_oSIsK.js";import{C as at,_ as yt}from"./DialogDescription.vue_vue_type_script_setup_true_lang-C-ltv-ET.js";import{c as gt}from"./createLucideIcon-BNaNAPpz.js";import"./Collection-7xKaQT2u.js";import"./index-DbURNFAQ.js";import"./utils-BjnBM6mg.js";import"./DialogTitle-Bfgltyr_.js";import"./apiClient-ycqybHFy.js";const xt=gt("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function _t(){const H=n([]),F=n([]),W=n([]),L=n([]),w=n(null),g=n(null),f=n(null),A=n(""),b=n(""),x=n(""),V=n(""),I=n(!1),U=n(!1),K=async()=>{try{H.value=await y.getDivisionList()}catch(d){console.error("Division 목록 로드 실패:",d)}},O=async d=>{try{F.value=await y.getWorkTypeList(d)}catch(p){console.error("WorkType 목록 로드 실패:",p)}},k=async d=>{try{W.value=await y.getSubWorkTypeList(d)}catch(p){console.error("SubWorkType 목록 로드 실패:",p)}},$=async d=>{try{L.value=await y.getWorkStepList(d)}catch(p){console.error("WorkStep 목록 로드 실패:",p)}},D=d=>{w.value=d,g.value=null,f.value=null,W.value=[],L.value=[]},X=d=>{g.value=d,f.value=null,L.value=[]},q=d=>{f.value=d},R=async()=>{if(I.value)return;const d=A.value.trim();if(d){I.value=!0;try{await y.createDivision(d),A.value="",await K()}catch(p){console.error("Division 추가 실패:",p);const T=p;alert(T.response?.data?.message||T.message)}finally{I.value=!1}}},j=async()=>{if(I.value)return;const d=b.value.trim();if(!(!d||!w.value)){I.value=!0;try{await y.createWorkType(w.value,d),b.value="",await O(w.value)}catch(p){console.error("WorkType 추가 실패:",p);const T=p;alert(T.response?.data?.message||T.message)}finally{I.value=!1}}},v=async()=>{if(I.value)return;const d=x.value.trim();if(!(!d||!g.value)){I.value=!0;try{await y.createSubWorkType(g.value,d),x.value="",await k(g.value)}catch(p){console.error("SubWorkType 추가 실패:",p);const T=p;alert(T.response?.data?.message||T.message)}finally{I.value=!1}}},u=async()=>{if(I.value)return;const d=V.value.trim();if(!(!d||!f.value)){I.value=!0;try{await y.createWorkStep(f.value,d),V.value="",await $(f.value)}catch(p){console.error("WorkStep 추가 실패:",p);const T=p;alert(T.response?.data?.message||T.message)}finally{I.value=!1}}},M=async d=>{if(!U.value){U.value=!0;try{await y.deleteDivision(d),w.value===d&&(w.value=null,g.value=null,f.value=null,F.value=[],W.value=[],L.value=[]),await K()}catch(p){console.error("Division 삭제 실패:",p);const T=p;alert(T.response?.data?.message||T.message)}finally{U.value=!1}}},N=async d=>{if(!U.value){U.value=!0;try{await y.deleteWorkType(d),g.value===d&&(g.value=null,f.value=null,W.value=[],L.value=[]),w.value&&await O(w.value)}catch(p){console.error("WorkType 삭제 실패:",p);const T=p;alert(T.response?.data?.message||T.message)}finally{U.value=!1}}},P=async d=>{if(!U.value){U.value=!0;try{await y.deleteSubWorkType(d),f.value===d&&(f.value=null,L.value=[]),g.value&&await k(g.value)}catch(p){console.error("SubWorkType 삭제 실패:",p);const T=p;alert(T.response?.data?.message||T.message)}finally{U.value=!1}}},G=async d=>{if(!U.value){U.value=!0;try{await y.deleteWorkStep(d),f.value&&await $(f.value)}catch(p){console.error("WorkStep 삭제 실패:",p);const T=p;alert(T.response?.data?.message||T.message)}finally{U.value=!1}}};return ne(w,d=>{F.value=[],d&&O(d)}),ne(g,d=>{W.value=[],d&&k(d)}),ne(f,d=>{L.value=[],d&&$(d)}),{divisions:H,workTypes:F,subWorkTypes:W,workSteps:L,selectedDivisionId:w,selectedWorkTypeId:g,selectedSubWorkTypeId:f,newDivisionName:A,newWorkTypeName:b,newSubWorkTypeName:x,newWorkStepName:V,isCreating:I,isDeleting:U,loadDivisions:K,selectDivision:D,selectWorkType:X,selectSubWorkType:q,addDivision:R,addWorkType:j,addSubWorkType:v,addWorkStep:u,deleteDivision:M,deleteWorkType:N,deleteSubWorkType:P,deleteWorkStep:G}}const kt={class:"grid grid-cols-4 gap-4"},bt={class:"space-y-2"},ht={class:"flex gap-1"},Ct={class:"space-y-1 max-h-48 overflow-y-auto"},wt=["onClick"],Tt={class:"flex-1 truncate"},St=["disabled","onClick"],$t={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Mt={class:"space-y-2"},Wt={class:"flex gap-1"},Vt={class:"space-y-1 max-h-48 overflow-y-auto"},Dt=["onClick"],It={class:"flex-1 truncate"},Ut=["disabled","onClick"],Nt={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Lt={key:1,class:"text-xs text-muted-foreground py-2 text-center"},At={class:"space-y-2"},Ft={class:"flex gap-1"},zt={class:"space-y-1 max-h-48 overflow-y-auto"},Kt=["onClick"],Zt={class:"flex-1 truncate"},jt=["disabled","onClick"],Rt={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Et={key:1,class:"text-xs text-muted-foreground py-2 text-center"},Bt={class:"space-y-2"},Ot={class:"flex gap-1"},qt={class:"space-y-1 max-h-48 overflow-y-auto"},Pt={class:"flex-1 truncate"},Ht=["disabled","onClick"],Xt={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Gt={key:1,class:"text-xs text-muted-foreground py-2 text-center"},Jt=Te({__name:"WorkClassificationArea",setup(H){const{divisions:F,workTypes:W,subWorkTypes:L,workSteps:w,selectedDivisionId:g,selectedWorkTypeId:f,selectedSubWorkTypeId:A,newDivisionName:b,newWorkTypeName:x,newSubWorkTypeName:V,newWorkStepName:I,isCreating:U,isDeleting:K,loadDivisions:O,selectDivision:k,selectWorkType:$,selectSubWorkType:D,addDivision:X,addWorkType:q,addSubWorkType:R,addWorkStep:j,deleteDivision:v,deleteWorkType:u,deleteSubWorkType:M,deleteWorkStep:N}=_t();Le(()=>{O()});const P=n(!1),G=n(null),d=n(""),p=n(null);function T(ue,S,_){G.value=ue,d.value=S,p.value=_,P.value=!0}async function oe(){G.value!=null&&p.value&&await p.value(G.value),P.value=!1}return(ue,S)=>(i(),c("div",null,[S[16]||(S[16]=t("h3",{class:"text-sm font-semibold mb-3"},"공종분류",-1)),t("div",kt,[t("div",bt,[S[6]||(S[6]=t("p",{class:"text-xs text-muted-foreground font-medium"},"분류 (Division)",-1)),t("div",ht,[s(e(le),{modelValue:e(b),"onUpdate:modelValue":S[0]||(S[0]=_=>se(b)?b.value=_:null),placeholder:"이름 입력",class:"h-8 text-sm",onKeyup:te(e(X),["enter"])},null,8,["modelValue","onKeyup"]),s(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(U)||!e(b).trim(),onClick:e(X)},{default:r(()=>[...S[5]||(S[5]=[C(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",Ct,[(i(!0),c(E,null,B(e(F),_=>(i(),c("div",{key:_.id,class:we(["flex items-center px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(g)===_.id,"border-border hover:bg-muted/50":e(g)!==_.id}]),onClick:ee=>e(k)(_.id)},[t("span",Tt,h(_.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(K),onClick:Y(ee=>T(_.id,_.name,e(v)),["stop"])},[s(e(ae),{class:"w-3 h-3"})],8,St)],10,wt))),128)),e(F).length===0?(i(),c("p",$t," 항목 없음 ")):Z("",!0)])]),t("div",Mt,[S[8]||(S[8]=t("p",{class:"text-xs text-muted-foreground font-medium"},"공종 (WorkType)",-1)),t("div",Wt,[s(e(le),{modelValue:e(x),"onUpdate:modelValue":S[1]||(S[1]=_=>se(x)?x.value=_:null),placeholder:"이름 입력",class:"h-8 text-sm",disabled:!e(g),onKeyup:te(e(q),["enter"])},null,8,["modelValue","disabled","onKeyup"]),s(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(U)||!e(x).trim()||!e(g),onClick:e(q)},{default:r(()=>[...S[7]||(S[7]=[C(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",Vt,[(i(!0),c(E,null,B(e(W),_=>(i(),c("div",{key:_.id,class:we(["flex items-center px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(f)===_.id,"border-border hover:bg-muted/50":e(f)!==_.id}]),onClick:ee=>e($)(_.id)},[t("span",It,h(_.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(K),onClick:Y(ee=>T(_.id,_.name,e(u)),["stop"])},[s(e(ae),{class:"w-3 h-3"})],8,Ut)],10,Dt))),128)),e(g)&&e(W).length===0?(i(),c("p",Nt," 항목 없음 ")):Z("",!0),e(g)?Z("",!0):(i(),c("p",Lt," 분류를 선택하세요 "))])]),t("div",At,[S[10]||(S[10]=t("p",{class:"text-xs text-muted-foreground font-medium"},"세부공종 (SubWorkType)",-1)),t("div",Ft,[s(e(le),{modelValue:e(V),"onUpdate:modelValue":S[2]||(S[2]=_=>se(V)?V.value=_:null),placeholder:"이름 입력",class:"h-8 text-sm",disabled:!e(f),onKeyup:te(e(R),["enter"])},null,8,["modelValue","disabled","onKeyup"]),s(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(U)||!e(V).trim()||!e(f),onClick:e(R)},{default:r(()=>[...S[9]||(S[9]=[C(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",zt,[(i(!0),c(E,null,B(e(L),_=>(i(),c("div",{key:_.id,class:we(["flex items-center px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(A)===_.id,"border-border hover:bg-muted/50":e(A)!==_.id}]),onClick:ee=>e(D)(_.id)},[t("span",Zt,h(_.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(K),onClick:Y(ee=>T(_.id,_.name,e(M)),["stop"])},[s(e(ae),{class:"w-3 h-3"})],8,jt)],10,Kt))),128)),e(f)&&e(L).length===0?(i(),c("p",Rt," 항목 없음 ")):Z("",!0),e(f)?Z("",!0):(i(),c("p",Et," 공종을 선택하세요 "))])]),t("div",Bt,[S[12]||(S[12]=t("p",{class:"text-xs text-muted-foreground font-medium"},"작업절차 (WorkStep)",-1)),t("div",Ot,[s(e(le),{modelValue:e(I),"onUpdate:modelValue":S[3]||(S[3]=_=>se(I)?I.value=_:null),placeholder:"이름 입력",class:"h-8 text-sm",disabled:!e(A),onKeyup:te(e(j),["enter"])},null,8,["modelValue","disabled","onKeyup"]),s(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(U)||!e(I).trim()||!e(A),onClick:e(j)},{default:r(()=>[...S[11]||(S[11]=[C(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",qt,[(i(!0),c(E,null,B(e(w),_=>(i(),c("div",{key:_.id,class:"flex items-center px-3 py-2 border rounded-md text-sm border-border"},[t("span",Pt,h(_.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(K),onClick:Y(ee=>T(_.id,_.name,e(N)),["stop"])},[s(e(ae),{class:"w-3 h-3"})],8,Ht)]))),128)),e(A)&&e(w).length===0?(i(),c("p",Xt," 항목 없음 ")):Z("",!0),e(A)?Z("",!0):(i(),c("p",Gt," 세부공종을 선택하세요 "))])])]),s(e(Ae),{open:P.value,"onUpdate:open":S[4]||(S[4]=_=>P.value=_)},{default:r(()=>[s(e(Fe),null,{default:r(()=>[s(e(ze),null,{default:r(()=>[s(e(Ke),null,{default:r(()=>[...S[13]||(S[13]=[C("삭제 확인",-1)])]),_:1}),s(e(Ze),null,{default:r(()=>[C(" '"+h(d.value)+"' 항목을 삭제하시겠습니까? ",1)]),_:1})]),_:1}),s(e(je),null,{default:r(()=>[s(e(Re),null,{default:r(()=>[...S[14]||(S[14]=[C("취소",-1)])]),_:1}),s(e(Ee),{onClick:oe},{default:r(()=>[...S[15]||(S[15]=[C("삭제",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}});function Qt(){const H=n([]),F=n([]),W=n(null),L=n(""),w=n(""),g=n(""),f=n(!1),A=n(!1),b=async()=>{try{H.value=await y.getMaterialTypeList()}catch(k){console.error("MaterialType 목록 로드 실패:",k)}},x=async k=>{try{F.value=await y.getMaterialSpecList(k)}catch($){console.error("MaterialSpec 목록 로드 실패:",$)}},V=k=>{W.value=k},I=async()=>{if(f.value)return;const k=L.value.trim();if(k){f.value=!0;try{const $=w.value.trim()||void 0;await y.createMaterialType(k,$),L.value="",w.value="",await b()}catch($){console.error("MaterialType 추가 실패:",$);const D=$;alert(D.response?.data?.message||D.message)}finally{f.value=!1}}},U=async()=>{if(f.value)return;const k=g.value.trim();if(!(!k||!W.value)){f.value=!0;try{await y.createMaterialSpec(W.value,k),g.value="",await x(W.value)}catch($){console.error("MaterialSpec 추가 실패:",$);const D=$;alert(D.response?.data?.message||D.message)}finally{f.value=!1}}},K=async k=>{if(!A.value){A.value=!0;try{await y.deleteMaterialType(k),W.value===k&&(W.value=null,F.value=[]),await b()}catch($){console.error("MaterialType 삭제 실패:",$);const D=$;alert(D.response?.data?.message||D.message)}finally{A.value=!1}}},O=async k=>{if(!A.value){A.value=!0;try{await y.deleteMaterialSpec(k),W.value&&await x(W.value)}catch($){console.error("MaterialSpec 삭제 실패:",$);const D=$;alert(D.response?.data?.message||D.message)}finally{A.value=!1}}};return ne(W,k=>{F.value=[],k&&x(k)}),{materialTypes:H,materialSpecs:F,selectedMaterialTypeId:W,newMaterialTypeName:L,newMaterialTypeUnit:w,newMaterialSpecName:g,isCreating:f,isDeleting:A,loadMaterialTypes:b,selectMaterialType:V,addMaterialType:I,addMaterialSpec:U,deleteMaterialType:K,deleteMaterialSpec:O}}const Yt={class:"grid grid-cols-2 gap-4"},es={class:"space-y-2"},ts={class:"flex gap-1"},ss={class:"space-y-1 max-h-48 overflow-y-auto"},ls=["onClick"],as={class:"flex-1 truncate"},os={key:0,class:"text-muted-foreground"},ns=["disabled","onClick"],rs={key:0,class:"text-xs text-muted-foreground py-2 text-center"},is={class:"space-y-2"},ds={class:"flex gap-1"},us={class:"space-y-1 max-h-48 overflow-y-auto"},cs={class:"flex-1 truncate"},ps=["disabled","onClick"],ms={key:0,class:"text-xs text-muted-foreground py-2 text-center"},vs={key:1,class:"text-xs text-muted-foreground py-2 text-center"},fs=Te({__name:"MaterialMasterArea",setup(H){const{materialTypes:F,materialSpecs:W,selectedMaterialTypeId:L,newMaterialTypeName:w,newMaterialTypeUnit:g,newMaterialSpecName:f,isCreating:A,isDeleting:b,loadMaterialTypes:x,selectMaterialType:V,addMaterialType:I,addMaterialSpec:U,deleteMaterialType:K,deleteMaterialSpec:O}=Qt();Le(()=>{x()});const k=n(!1),$=n(null),D=n(""),X=n(null);function q(j,v,u){$.value=j,D.value=v,X.value=u,k.value=!0}async function R(){$.value!=null&&X.value&&await X.value($.value),k.value=!1}return(j,v)=>(i(),c("div",null,[v[11]||(v[11]=t("h3",{class:"text-sm font-semibold mb-3"},"자재분류",-1)),t("div",Yt,[t("div",es,[v[5]||(v[5]=t("p",{class:"text-xs text-muted-foreground font-medium"},"자재유형 (MaterialType)",-1)),t("div",ts,[s(e(le),{modelValue:e(w),"onUpdate:modelValue":v[0]||(v[0]=u=>se(w)?w.value=u:null),placeholder:"이름 입력",class:"h-8 text-sm flex-1",onKeyup:te(e(I),["enter"])},null,8,["modelValue","onKeyup"]),s(e(le),{modelValue:e(g),"onUpdate:modelValue":v[1]||(v[1]=u=>se(g)?g.value=u:null),placeholder:"단위",class:"h-8 text-sm w-20",onKeyup:te(e(I),["enter"])},null,8,["modelValue","onKeyup"]),s(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(A)||!e(w).trim(),onClick:e(I)},{default:r(()=>[...v[4]||(v[4]=[C(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",ss,[(i(!0),c(E,null,B(e(F),u=>(i(),c("div",{key:u.id,class:we(["flex items-center px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(L)===u.id,"border-border hover:bg-muted/50":e(L)!==u.id}]),onClick:M=>e(V)(u.id)},[t("span",as,[C(h(u.name)+" ",1),u.unit?(i(),c("span",os,"("+h(u.unit)+")",1)):Z("",!0)]),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(b),onClick:Y(M=>q(u.id,u.name,e(K)),["stop"])},[s(e(ae),{class:"w-3 h-3"})],8,ns)],10,ls))),128)),e(F).length===0?(i(),c("p",rs," 항목 없음 ")):Z("",!0)])]),t("div",is,[v[7]||(v[7]=t("p",{class:"text-xs text-muted-foreground font-medium"},"자재규격 (MaterialSpec)",-1)),t("div",ds,[s(e(le),{modelValue:e(f),"onUpdate:modelValue":v[2]||(v[2]=u=>se(f)?f.value=u:null),placeholder:"이름 입력",class:"h-8 text-sm",disabled:!e(L),onKeyup:te(e(U),["enter"])},null,8,["modelValue","disabled","onKeyup"]),s(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(A)||!e(f).trim()||!e(L),onClick:e(U)},{default:r(()=>[...v[6]||(v[6]=[C(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",us,[(i(!0),c(E,null,B(e(W),u=>(i(),c("div",{key:u.id,class:"flex items-center px-3 py-2 border rounded-md text-sm border-border"},[t("span",cs,h(u.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(b),onClick:Y(M=>q(u.id,u.name,e(O)),["stop"])},[s(e(ae),{class:"w-3 h-3"})],8,ps)]))),128)),e(L)&&e(W).length===0?(i(),c("p",ms," 항목 없음 ")):Z("",!0),e(L)?Z("",!0):(i(),c("p",vs," 자재유형을 선택하세요 "))])])]),s(e(Ae),{open:k.value,"onUpdate:open":v[3]||(v[3]=u=>k.value=u)},{default:r(()=>[s(e(Fe),null,{default:r(()=>[s(e(ze),null,{default:r(()=>[s(e(Ke),null,{default:r(()=>[...v[8]||(v[8]=[C("삭제 확인",-1)])]),_:1}),s(e(Ze),null,{default:r(()=>[C(" '"+h(D.value)+"' 항목을 삭제하시겠습니까? ",1)]),_:1})]),_:1}),s(e(je),null,{default:r(()=>[s(e(Re),null,{default:r(()=>[...v[9]||(v[9]=[C("취소",-1)])]),_:1}),s(e(Ee),{onClick:R},{default:r(()=>[...v[10]||(v[10]=[C("삭제",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}});function ys(){const H=n([]),F=n([]),W=n([]),L=n([]),w=n(""),g=n(""),f=n(""),A=n(""),b=n({zone:!1,floor:!1,section:!1,usage:!1}),x=n({zone:!1,floor:!1,section:!1,usage:!1}),V=async()=>{try{H.value=await y.getZoneList()}catch(u){console.error("Zone 목록 로드 실패:",u)}},I=async()=>{try{F.value=await y.getFloorList()}catch(u){console.error("Floor 목록 로드 실패:",u)}},U=async()=>{try{W.value=await y.getSectionList()}catch(u){console.error("Section 목록 로드 실패:",u)}},K=async()=>{try{L.value=await y.getUsageList()}catch(u){console.error("Usage 목록 로드 실패:",u)}};return{zones:H,floors:F,sections:W,usages:L,newZone:w,newFloor:g,newSection:f,newUsage:A,isCreating:b,isDeleting:x,loadAll:async()=>{await Promise.all([V(),I(),U(),K()])},addZone:async()=>{if(b.value.zone)return;const u=w.value.trim();if(u){b.value.zone=!0;try{await y.createZone(u),w.value="",await V()}catch(M){console.error("Zone 추가 실패:",M);const N=M;alert(N.response?.data?.message||N.message)}finally{b.value.zone=!1}}},addFloor:async()=>{if(b.value.floor)return;const u=g.value.trim();if(u){b.value.floor=!0;try{await y.createFloor(u),g.value="",await I()}catch(M){console.error("Floor 추가 실패:",M);const N=M;alert(N.response?.data?.message||N.message)}finally{b.value.floor=!1}}},addSection:async()=>{if(b.value.section)return;const u=f.value.trim();if(u){b.value.section=!0;try{await y.createSection(u),f.value="",await U()}catch(M){console.error("Section 추가 실패:",M);const N=M;alert(N.response?.data?.message||N.message)}finally{b.value.section=!1}}},addUsage:async()=>{if(b.value.usage)return;const u=A.value.trim();if(u){b.value.usage=!0;try{await y.createUsage(u),A.value="",await K()}catch(M){console.error("Usage 추가 실패:",M);const N=M;alert(N.response?.data?.message||N.message)}finally{b.value.usage=!1}}},deleteZone:async u=>{if(!x.value.zone){x.value.zone=!0;try{await y.deleteZone(u),await V()}catch(M){console.error("Zone 삭제 실패:",M);const N=M;alert(N.response?.data?.message||N.message)}finally{x.value.zone=!1}}},deleteFloor:async u=>{if(!x.value.floor){x.value.floor=!0;try{await y.deleteFloor(u),await I()}catch(M){console.error("Floor 삭제 실패:",M);const N=M;alert(N.response?.data?.message||N.message)}finally{x.value.floor=!1}}},deleteSection:async u=>{if(!x.value.section){x.value.section=!0;try{await y.deleteSection(u),await U()}catch(M){console.error("Section 삭제 실패:",M);const N=M;alert(N.response?.data?.message||N.message)}finally{x.value.section=!1}}},deleteUsage:async u=>{if(!x.value.usage){x.value.usage=!0;try{await y.deleteUsage(u),await K()}catch(M){console.error("Usage 삭제 실패:",M);const N=M;alert(N.response?.data?.message||N.message)}finally{x.value.usage=!1}}}}}const gs={class:"grid grid-cols-4 gap-4"},xs={class:"text-xs text-muted-foreground font-medium"},_s={class:"flex gap-1"},ks={class:"space-y-1 max-h-48 overflow-y-auto"},bs={class:"flex-1 truncate"},hs=["disabled","onClick"],Cs={key:0,class:"text-xs text-muted-foreground py-2 text-center"},ws=Te({__name:"LocationMasterArea",setup(H){const{zones:F,floors:W,sections:L,usages:w,newZone:g,newFloor:f,newSection:A,newUsage:b,isCreating:x,isDeleting:V,loadAll:I,addZone:U,addFloor:K,addSection:O,addUsage:k,deleteZone:$,deleteFloor:D,deleteSection:X,deleteUsage:q}=ys();Le(()=>{I()});const R=[{label:"Zone",items:F,input:g,creating:"zone",deleting:"zone",add:U,deleteFn:$},{label:"Floor",items:W,input:f,creating:"floor",deleting:"floor",add:K,deleteFn:D},{label:"Section",items:L,input:A,creating:"section",deleting:"section",add:O,deleteFn:X},{label:"Usage",items:w,input:b,creating:"usage",deleting:"usage",add:k,deleteFn:q}],j=n(!1),v=n(null),u=n(""),M=n(null);function N(G,d,p){v.value=G,u.value=d,M.value=p,j.value=!0}async function P(){v.value!=null&&M.value&&await M.value(v.value),j.value=!1}return(G,d)=>(i(),c("div",null,[d[5]||(d[5]=t("h3",{class:"text-sm font-semibold mb-3"},"위치분류",-1)),t("div",gs,[(i(),c(E,null,B(R,p=>t("div",{key:p.label,class:"space-y-2"},[t("p",xs,h(p.label),1),t("div",_s,[s(e(le),{modelValue:p.input.value,"onUpdate:modelValue":T=>p.input.value=T,placeholder:"이름 입력",class:"h-8 text-sm",onKeyup:te(p.add,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),s(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(x)[p.creating]||!p.input.value.trim(),onClick:p.add},{default:r(()=>[...d[1]||(d[1]=[C(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",ks,[(i(!0),c(E,null,B(p.items.value,T=>(i(),c("div",{key:T.id,class:"flex items-center px-3 py-2 border border-border rounded-md text-sm"},[t("span",bs,h(T.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(V)[p.deleting],onClick:Y(oe=>N(T.id,T.name,p.deleteFn),["stop"])},[s(e(ae),{class:"w-3 h-3"})],8,hs)]))),128)),p.items.value.length===0?(i(),c("p",Cs," 항목 없음 ")):Z("",!0)])])),64))]),s(e(Ae),{open:j.value,"onUpdate:open":d[0]||(d[0]=p=>j.value=p)},{default:r(()=>[s(e(Fe),null,{default:r(()=>[s(e(ze),null,{default:r(()=>[s(e(Ke),null,{default:r(()=>[...d[2]||(d[2]=[C("삭제 확인",-1)])]),_:1}),s(e(Ze),null,{default:r(()=>[C(" '"+h(u.value)+"' 항목을 삭제하시겠습니까? ",1)]),_:1})]),_:1}),s(e(je),null,{default:r(()=>[s(e(Re),null,{default:r(()=>[...d[3]||(d[3]=[C("취소",-1)])]),_:1}),s(e(Ee),{onClick:P},{default:r(()=>[...d[4]||(d[4]=[C("삭제",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}});function Ts(){const H=n([]),F=n(""),W=n(!1),L=n(!1),w=n([]),g=n(null),f=n(""),A=n(!1),b=n(!1),x=n([]),V=n([]),I=n(!1),U=n(!1),K=n([]),O=n([]),k=n([]),$=n([]),D=n([]),X=n([]),q=n([]),R=n({divisionId:"",workTypeId:"",subWorkTypeId:""}),j=n({materialTypeId:"",materialSpecId:""}),v=n([]),u=n(!1),M=n(!1),N=n(!1),P=n(!1),G=n(!1),d=n(!1),p=n(null),T=n(!1),oe=async()=>{try{H.value=await y.getComponentTypeList()}catch(o){console.error("ComponentType 목록 로드 실패:",o)}},ue=async()=>{if(W.value)return;const o=F.value.trim();if(o){W.value=!0;try{await y.createComponentType(o),F.value="",await oe()}catch(m){console.error("ComponentType 추가 실패:",m);const z=m;alert(z.response?.data?.message||z.message)}finally{W.value=!1}}},S=async o=>{if(!L.value){L.value=!0;try{await y.deleteComponentType(o),g.value===o&&(g.value=null,w.value=[],V.value=[]),await oe()}catch(m){console.error("ComponentType 삭제 실패:",m);const z=m;alert(z.response?.data?.message||z.message)}finally{L.value=!1}}},_=async o=>{try{w.value=await y.getComponentCodeList(o)}catch(m){console.error("ComponentCode 목록 로드 실패:",m),w.value=[]}},ee=async()=>{if(A.value||g.value==null)return;const o=f.value.trim();if(o){A.value=!0;try{await y.createComponentCode(g.value,o),f.value="",await _(g.value)}catch(m){console.error("ComponentCode 추가 실패:",m);const z=m;alert(z.response?.data?.message||z.message)}finally{A.value=!1}}},Se=async o=>{if(!b.value){b.value=!0;try{await y.deleteComponentCode(o);const m=V.value.indexOf(o);m!==-1&&V.value.splice(m,1),g.value!=null&&await _(g.value)}catch(m){console.error("ComponentCode 삭제 실패:",m);const z=m;alert(z.response?.data?.message||z.message)}finally{b.value=!1}}},$e=de(()=>w.value.length===0?!1:w.value.every(o=>V.value.includes(o.id))),re=o=>{const m=V.value.indexOf(o);m===-1?V.value.push(o):V.value.splice(m,1)},Me=()=>{$e.value?V.value=[]:V.value=w.value.map(o=>o.id)},We=de(()=>$.value.length===0?!1:$.value.every(o=>D.value.includes(o.id))),Be=o=>{const m=D.value.indexOf(o);m===-1?D.value.push(o):D.value.splice(m,1)},Ce=()=>{We.value?D.value=[]:D.value=$.value.map(o=>o.id)},pe=async()=>{try{x.value=await y.getComponentCodeMappingList(),v.value=[]}catch(o){console.error("전체 매핑 로드 실패:",o),x.value=[]}},me=de(()=>{let o=x.value;if(g.value!=null&&w.value.length>0){const m=w.value.map(z=>z.id);o=o.filter(z=>m.includes(z.componentCodeId))}return V.value.length>0&&(o=o.filter(m=>V.value.includes(m.componentCodeId))),D.value.length>0&&(o=o.filter(m=>D.value.includes(m.workStepId))),o}),Ve=de(()=>me.value.length===0?!1:me.value.every(o=>v.value.includes(o.id))),ie=o=>{const m=v.value.indexOf(o);m===-1?v.value.push(o):v.value.splice(m,1)},Oe=()=>{Ve.value?v.value=[]:v.value=me.value.map(o=>o.id)},qe=async()=>{try{K.value=await y.getDivisionList()}catch(o){console.error("Division 목록 로드 실패:",o)}},De=async()=>{try{X.value=await y.getMaterialTypeList()}catch(o){console.error("MaterialType 목록 로드 실패:",o)}},ve=async()=>{if(!I.value&&V.value.length!==0&&D.value.length!==0){I.value=!0;try{let o=0,m=0;for(const He of V.value)for(const Xe of D.value)try{const Ie=await y.createComponentCodeMapping({componentCodeId:He,workStepId:Xe});o+=Ie.mappedCount,m+=Ie.skippedCount}catch{m+=1}const z=[];o>0&&z.push(`${o}개 매핑 생성`),m>0&&z.push(`${m}개 스킵(중복)`),alert(z.join(", ")||"매핑 완료"),await pe()}catch(o){console.error("매핑 추가 실패:",o);const m=o;alert(m.response?.data?.message||m.message)}finally{I.value=!1}}},fe=async o=>{if(!U.value){U.value=!0;try{await y.deleteCwmMapping(o),await pe()}catch(m){console.error("CwmMapping 삭제 실패:",m);const z=m;alert(z.response?.data?.message||z.message)}finally{U.value=!1}}},Pe=async()=>{if(v.value.length!==0&&j.value.materialSpecId){G.value=!0;try{const o=await y.updateComponentCodeMapping({ids:v.value,materialSpecId:Number(j.value.materialSpecId)});alert(`${o.updatedCount}개 매핑에 자재규격 적용됨`),await pe(),j.value.materialTypeId="",j.value.materialSpecId=""}catch(o){console.error("자재 적용 실패:",o);const m=o;alert(m.response?.data?.message||m.message)}finally{G.value=!1}}},ye=async()=>{if(!d.value){d.value=!0;try{const o=await y.createTasks();p.value=o,T.value=!0}catch(o){console.error("세부작업 생성 실패:",o);const m=o;alert(m.response?.data?.message||m.message)}finally{d.value=!1}}};return ne(g,o=>{o!=null?_(o):w.value=[],V.value=[]}),ne(()=>R.value.divisionId,async o=>{if(O.value=[],k.value=[],$.value=[],R.value.workTypeId="",R.value.subWorkTypeId="",D.value=[],!!o){u.value=!0;try{O.value=await y.getWorkTypeList(Number(o))}catch(m){console.error("WorkType 목록 로드 실패:",m)}finally{u.value=!1}}}),ne(()=>R.value.workTypeId,async o=>{if(k.value=[],$.value=[],R.value.subWorkTypeId="",D.value=[],!!o){M.value=!0;try{k.value=await y.getSubWorkTypeList(Number(o))}catch(m){console.error("SubWorkType 목록 로드 실패:",m)}finally{M.value=!1}}}),ne(()=>R.value.subWorkTypeId,async o=>{if($.value=[],D.value=[],!!o){N.value=!0;try{$.value=await y.getWorkStepList(Number(o))}catch(m){console.error("WorkStep 목록 로드 실패:",m)}finally{N.value=!1}}}),ne(()=>j.value.materialTypeId,async o=>{if(q.value=[],j.value.materialSpecId="",!!o){P.value=!0;try{q.value=await y.getMaterialSpecList(Number(o))}catch(m){console.error("MaterialSpec 목록 로드 실패:",m)}finally{P.value=!1}}}),{componentTypes:H,newComponentTypeName:F,isCreatingType:W,isDeletingType:L,loadComponentTypes:oe,addComponentType:ue,deleteComponentType:S,componentCodes:w,selectedComponentTypeId:g,newComponentCode:f,isCreatingCode:A,isDeletingCode:b,addComponentCode:ee,deleteComponentCode:Se,selectedComponentCodeIds:V,isAllComponentCodesSelected:$e,toggleComponentCode:re,toggleAllComponentCodes:Me,allMappings:x,filteredMappings:me,isCreatingMapping:I,isDeletingMapping:U,deleteCwmMapping:fe,divisions:K,workTypes:O,subWorkTypes:k,workSteps:$,materialTypes:X,materialSpecs:q,mappingForm:R,isLoadingWorkTypes:u,isLoadingSubWorkTypes:M,isLoadingWorkSteps:N,isLoadingMaterialSpecs:P,loadDivisions:qe,loadMaterialTypes:De,loadAllMappings:pe,addMapping:ve,selectedWorkStepIds:D,isAllWorkStepsSelected:We,toggleWorkStep:Be,toggleAllWorkSteps:Ce,selectedMappingIds:v,isAllMappingsSelected:Ve,toggleMapping:ie,toggleAllMappings:Oe,materialApplyForm:j,isApplyingMaterial:G,applyMaterialToSelectedMappings:Pe,isCreatingTasks:d,createTasksResult:p,showCreateTasksResult:T,createTasks:ye}}const Ss={class:"space-y-6"},$s={class:"grid grid-cols-2 gap-4"},Ms={class:"space-y-2"},Ws={class:"flex gap-1"},Vs={class:"space-y-1 max-h-48 overflow-y-auto"},Ds=["onClick"],Is={class:"flex-1 truncate"},Us=["disabled","onClick"],Ns={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Ls={class:"space-y-2"},As={class:"flex gap-1"},Fs={class:"space-y-1 max-h-48 overflow-y-auto"},zs={class:"flex-1 truncate"},Ks=["disabled","onClick"],Zs={key:0,class:"text-xs text-muted-foreground py-2 text-center"},js={key:1,class:"text-xs text-muted-foreground py-2 text-center"},Rs={class:"grid grid-cols-2 gap-4 mb-4"},Es={class:"space-y-2"},Bs={class:"flex items-center justify-between"},Os={class:"text-xs text-primary font-medium"},qs={key:0,class:"border rounded-md"},Ps={class:"border-t px-3 py-2 space-y-2 max-h-40 overflow-y-auto"},Hs={key:0,class:"flex items-center gap-2 cursor-pointer text-sm font-medium text-primary"},Xs={key:2,class:"text-xs text-muted-foreground text-center py-2"},Gs={key:1,class:"text-xs text-muted-foreground text-center py-2 border rounded-md"},Js={class:"space-y-2"},Qs={class:"flex items-center justify-between"},Ys={class:"text-xs text-primary font-medium"},el={class:"grid grid-cols-3 gap-1"},tl={key:0,class:"border rounded-md"},sl={class:"border-t px-3 py-2 space-y-2 max-h-40 overflow-y-auto"},ll={key:0,class:"flex items-center gap-2 cursor-pointer text-sm font-medium text-primary"},al={key:2,class:"text-xs text-muted-foreground text-center py-2"},ol={key:1,class:"text-xs text-muted-foreground text-center py-2 border rounded-md"},nl={key:2,class:"text-xs text-muted-foreground text-center py-2 border rounded-md"},rl={class:"flex justify-end mb-4"},il={key:0,class:"ml-1"},dl={class:"border rounded-md"},ul={class:"flex items-center justify-between px-3 py-2 hover:bg-muted/50 transition-colors"},cl={class:"border-t"},pl={key:0,class:"w-full text-sm"},ml={class:"bg-muted/50"},vl={class:"w-10 px-2 text-center"},fl={class:"divide-y"},yl={class:"px-2 text-center"},gl={class:"px-3 py-2"},xl={class:"px-3 py-2"},_l={class:"px-3 py-2"},kl={class:"px-3 py-2"},bl={class:"px-3 py-2"},hl={class:"px-3 py-2"},Cl={class:"px-3 py-2"},wl={class:"px-3 py-2"},Tl={class:"px-3 py-2"},Sl={class:"px-2 text-center"},$l=["disabled","onClick"],Ml={key:1,class:"text-xs text-muted-foreground py-4 text-center"},Wl={key:2,class:"border-t px-3 py-2 bg-muted/30"},Vl={class:"flex items-center gap-2"},Dl={class:"text-sm font-medium"},Il={class:"flex justify-end"},Ul={key:0,class:"space-y-2 text-sm"},Nl={class:"flex justify-between"},Ll={class:"font-medium"},Al={class:"flex justify-between"},Fl={class:"font-medium"},zl={class:"flex justify-between"},Kl={class:"font-medium"},Zl=Te({__name:"ComponentCodeArea",setup(H){const{componentTypes:F,newComponentTypeName:W,isCreatingType:L,isDeletingType:w,loadComponentTypes:g,addComponentType:f,deleteComponentType:A,componentCodes:b,selectedComponentTypeId:x,newComponentCode:V,isCreatingCode:I,isDeletingCode:U,addComponentCode:K,deleteComponentCode:O,selectedComponentCodeIds:k,isAllComponentCodesSelected:$,toggleComponentCode:D,toggleAllComponentCodes:X,filteredMappings:q,isCreatingMapping:R,isDeletingMapping:j,deleteCwmMapping:v,divisions:u,workTypes:M,subWorkTypes:N,workSteps:P,materialTypes:G,materialSpecs:d,mappingForm:p,isLoadingWorkTypes:T,isLoadingSubWorkTypes:oe,isLoadingWorkSteps:ue,isLoadingMaterialSpecs:S,loadDivisions:_,loadMaterialTypes:ee,loadAllMappings:Se,addMapping:$e,selectedWorkStepIds:re,isAllWorkStepsSelected:Me,toggleWorkStep:We,toggleAllWorkSteps:Be,selectedMappingIds:Ce,isAllMappingsSelected:pe,toggleMapping:me,toggleAllMappings:Ve,materialApplyForm:ie,isApplyingMaterial:Oe,applyMaterialToSelectedMappings:qe,isCreatingTasks:De,createTasksResult:ve,showCreateTasksResult:fe,createTasks:Pe}=Ts(),ye=n(!0),o=n(!0),m=n(!0);Le(()=>{g(),_(),ee(),Se()});function z(Ne){x.value=Ne}const He=de(()=>x.value!=null?String(x.value):""),Xe=de(()=>k.value.length===0?"선택 안함":$.value?"모두선택":`${k.value.length}개 선택`),Ie=de(()=>re.value.length===0?"선택 안함":Me.value?"모두선택":`${re.value.length}개 선택`),nt=de(()=>!R.value&&k.value.length>0&&re.value.length>0);function rt(){Se()}const Ue=n(!1),Ge=n(null),ot=n(""),Je=n(null);function Qe(Ne,l,a){Ge.value=Ne,ot.value=l,Je.value=a,Ue.value=!0}async function it(){Ge.value!=null&&Je.value&&await Je.value(Ge.value),Ue.value=!1}return(Ne,l)=>(i(),c("div",Ss,[t("div",null,[l[18]||(l[18]=t("h3",{class:"text-sm font-semibold mb-3"},"부재분류",-1)),t("div",$s,[t("div",Ms,[l[15]||(l[15]=t("p",{class:"text-xs text-muted-foreground font-medium"},"부재 타입 (ComponentType)",-1)),t("div",Ws,[s(e(le),{modelValue:e(W),"onUpdate:modelValue":l[0]||(l[0]=a=>se(W)?W.value=a:null),placeholder:"이름 입력",class:"h-8 text-sm",onKeyup:te(e(f),["enter"])},null,8,["modelValue","onKeyup"]),s(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(L)||!e(W).trim(),onClick:e(f)},{default:r(()=>[...l[14]||(l[14]=[C(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",Vs,[(i(!0),c(E,null,B(e(F),a=>(i(),c("div",{key:a.id,class:we(["flex items-center px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(x)===a.id,"border-border hover:bg-muted/50":e(x)!==a.id}]),onClick:Ye=>z(a.id)},[t("span",Is,h(a.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(w),onClick:Y(Ye=>Qe(a.id,a.name,e(A)),["stop"])},[s(e(ae),{class:"w-3 h-3"})],8,Us)],10,Ds))),128)),e(F).length===0?(i(),c("p",Ns," 항목 없음 ")):Z("",!0)])]),t("div",Ls,[l[17]||(l[17]=t("p",{class:"text-xs text-muted-foreground font-medium"},"부재 코드 (ComponentCode)",-1)),t("div",As,[s(e(le),{modelValue:e(V),"onUpdate:modelValue":l[1]||(l[1]=a=>se(V)?V.value=a:null),placeholder:"코드 입력",class:"h-8 text-sm",disabled:e(x)==null,onKeyup:te(e(K),["enter"])},null,8,["modelValue","disabled","onKeyup"]),s(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(I)||!e(V).trim()||e(x)==null,onClick:e(K)},{default:r(()=>[...l[16]||(l[16]=[C(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",Fs,[(i(!0),c(E,null,B(e(b),a=>(i(),c("div",{key:a.id,class:"flex items-center px-3 py-2 border rounded-md text-sm border-border"},[t("span",zs,h(a.code),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(U),onClick:Y(Ye=>Qe(a.id,a.code,e(O)),["stop"])},[s(e(ae),{class:"w-3 h-3"})],8,Ks)]))),128)),e(x)!=null&&e(b).length===0?(i(),c("p",Zs," 항목 없음 ")):Z("",!0),e(x)==null?(i(),c("p",js," 부재 타입을 선택하세요 ")):Z("",!0)])])])]),s(e(ce)),t("div",null,[l[37]||(l[37]=t("h3",{class:"text-sm font-semibold mb-3"},"부재코드-작업절차-자재규격 연결",-1)),t("div",Rs,[t("div",Es,[t("div",Bs,[l[19]||(l[19]=t("p",{class:"text-xs text-muted-foreground font-medium"},"부재코드 선택",-1)),t("span",Os,h(Xe.value),1)]),s(e(xe),{"model-value":He.value,"onUpdate:modelValue":l[2]||(l[2]=a=>a&&z(Number(a)))},{default:r(()=>[s(e(_e),{class:"h-8 text-sm"},{default:r(()=>[s(e(ke),{placeholder:"부재타입 선택"})]),_:1}),s(e(be),null,{default:r(()=>[(i(!0),c(E,null,B(e(F),a=>(i(),Q(e(he),{key:a.id,value:String(a.id)},{default:r(()=>[C(h(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"]),e(x)!=null?(i(),c("div",qs,[t("button",{class:"flex items-center justify-between w-full px-3 py-2 text-sm hover:bg-muted/50",onClick:l[3]||(l[3]=a=>o.value=!o.value)},[l[20]||(l[20]=t("span",{class:"font-medium"},"부재코드 목록",-1)),(i(),Q(tt(o.value?e(lt):e(at)),{class:"h-4 w-4"}))]),et(t("div",Ps,[e(b).length>0?(i(),c("label",Hs,[s(e(ge),{"model-value":e($),"onUpdate:modelValue":e(X)},null,8,["model-value","onUpdate:modelValue"]),l[21]||(l[21]=C(" 모두선택 ",-1))])):Z("",!0),e(b).length>0?(i(),Q(e(ce),{key:1,class:"my-1"})):Z("",!0),(i(!0),c(E,null,B(e(b),a=>(i(),c("label",{key:a.id,class:"flex items-center gap-2 cursor-pointer text-sm"},[s(e(ge),{"model-value":e(k).includes(a.id),"onUpdate:modelValue":()=>e(D)(a.id)},null,8,["model-value","onUpdate:modelValue"]),C(" "+h(a.code),1)]))),128)),e(b).length===0?(i(),c("p",Xs," 항목 없음 ")):Z("",!0)],512),[[st,o.value]])])):(i(),c("p",Gs," 부재타입을 먼저 선택하세요 "))]),t("div",Js,[t("div",Qs,[l[22]||(l[22]=t("p",{class:"text-xs text-muted-foreground font-medium"},"작업절차 선택",-1)),t("span",Ys,h(Ie.value),1)]),t("div",el,[s(e(xe),{modelValue:e(p).divisionId,"onUpdate:modelValue":l[4]||(l[4]=a=>e(p).divisionId=a)},{default:r(()=>[s(e(_e),{class:"h-8 text-sm"},{default:r(()=>[s(e(ke),{placeholder:"분류"})]),_:1}),s(e(be),null,{default:r(()=>[(i(!0),c(E,null,B(e(u),a=>(i(),Q(e(he),{key:a.id,value:String(a.id)},{default:r(()=>[C(h(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),s(e(xe),{modelValue:e(p).workTypeId,"onUpdate:modelValue":l[5]||(l[5]=a=>e(p).workTypeId=a),disabled:!e(p).divisionId||e(T)},{default:r(()=>[s(e(_e),{class:"h-8 text-sm"},{default:r(()=>[s(e(ke),{placeholder:e(T)?"...":"공종"},null,8,["placeholder"])]),_:1}),s(e(be),null,{default:r(()=>[(i(!0),c(E,null,B(e(M),a=>(i(),Q(e(he),{key:a.id,value:String(a.id)},{default:r(()=>[C(h(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),s(e(xe),{modelValue:e(p).subWorkTypeId,"onUpdate:modelValue":l[6]||(l[6]=a=>e(p).subWorkTypeId=a),disabled:!e(p).workTypeId||e(oe)},{default:r(()=>[s(e(_e),{class:"h-8 text-sm"},{default:r(()=>[s(e(ke),{placeholder:e(oe)?"...":"세부공종"},null,8,["placeholder"])]),_:1}),s(e(be),null,{default:r(()=>[(i(!0),c(E,null,B(e(N),a=>(i(),Q(e(he),{key:a.id,value:String(a.id)},{default:r(()=>[C(h(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),e(p).subWorkTypeId&&!e(ue)?(i(),c("div",tl,[t("button",{class:"flex items-center justify-between w-full px-3 py-2 text-sm hover:bg-muted/50",onClick:l[7]||(l[7]=a=>m.value=!m.value)},[l[23]||(l[23]=t("span",{class:"font-medium"},"작업절차 목록",-1)),(i(),Q(tt(m.value?e(lt):e(at)),{class:"h-4 w-4"}))]),et(t("div",sl,[e(P).length>0?(i(),c("label",ll,[s(e(ge),{"model-value":e(Me),"onUpdate:modelValue":e(Be)},null,8,["model-value","onUpdate:modelValue"]),l[24]||(l[24]=C(" 모두선택 ",-1))])):Z("",!0),e(P).length>0?(i(),Q(e(ce),{key:1,class:"my-1"})):Z("",!0),(i(!0),c(E,null,B(e(P),a=>(i(),c("label",{key:a.id,class:"flex items-center gap-2 cursor-pointer text-sm"},[s(e(ge),{"model-value":e(re).includes(a.id),"onUpdate:modelValue":()=>e(We)(a.id)},null,8,["model-value","onUpdate:modelValue"]),C(" "+h(a.name),1)]))),128)),e(P).length===0?(i(),c("p",al," 항목 없음 ")):Z("",!0)],512),[[st,m.value]])])):e(ue)?(i(),c("div",ol," 로딩 중... ")):(i(),c("p",nl," 세부공종을 먼저 선택하세요 "))])]),t("div",rl,[s(e(J),{size:"sm",class:"h-8 px-6",disabled:!nt.value,onClick:e($e)},{default:r(()=>[l[25]||(l[25]=C(" 연결 추가 ",-1)),e(k).length>0&&e(re).length>0?(i(),c("span",il," ("+h(e(k).length)+" × "+h(e(re).length)+") ",1)):Z("",!0)]),_:1},8,["disabled","onClick"])]),t("div",dl,[t("div",ul,[t("button",{class:"flex items-center gap-2 text-sm font-medium",onClick:l[8]||(l[8]=a=>ye.value=!ye.value)},[(i(),Q(tt(ye.value?e(lt):e(at)),{class:"h-4 w-4"})),t("span",null,"매핑 목록 ("+h(e(q).length)+")",1)]),t("button",{class:"p-1 rounded hover:bg-muted",title:"새로고침",onClick:Y(rt,["stop"])},[s(e(xt),{class:"h-4 w-4"})])]),et(t("div",cl,[e(q).length>0?(i(),c("table",pl,[t("thead",ml,[t("tr",null,[t("th",vl,[s(e(ge),{"model-value":e(pe),"onUpdate:modelValue":e(Ve)},null,8,["model-value","onUpdate:modelValue"])]),l[26]||(l[26]=t("th",{class:"px-3 py-2 text-left font-medium"},"부재타입",-1)),l[27]||(l[27]=t("th",{class:"px-3 py-2 text-left font-medium"},"부재코드",-1)),l[28]||(l[28]=t("th",{class:"px-3 py-2 text-left font-medium"},"분류",-1)),l[29]||(l[29]=t("th",{class:"px-3 py-2 text-left font-medium"},"공종",-1)),l[30]||(l[30]=t("th",{class:"px-3 py-2 text-left font-medium"},"세부공종",-1)),l[31]||(l[31]=t("th",{class:"px-3 py-2 text-left font-medium"},"작업절차",-1)),l[32]||(l[32]=t("th",{class:"px-3 py-2 text-left font-medium"},"자재유형",-1)),l[33]||(l[33]=t("th",{class:"px-3 py-2 text-left font-medium"},"자재규격",-1)),l[34]||(l[34]=t("th",{class:"px-3 py-2 text-left font-medium"},"단위",-1)),l[35]||(l[35]=t("th",{class:"w-10 px-2 text-center font-medium"},"삭제",-1))])]),t("tbody",fl,[(i(!0),c(E,null,B(e(q),a=>(i(),c("tr",{key:a.id,class:"hover:bg-muted/30"},[t("td",yl,[s(e(ge),{"model-value":e(Ce).includes(a.id),"onUpdate:modelValue":()=>e(me)(a.id)},null,8,["model-value","onUpdate:modelValue"])]),t("td",gl,h(a.componentTypeName),1),t("td",xl,h(a.componentCodeName),1),t("td",_l,h(a.divisionName),1),t("td",kl,h(a.workTypeName),1),t("td",bl,h(a.subWorkTypeName),1),t("td",hl,h(a.workStepName),1),t("td",Cl,h(a.materialTypeName||"-"),1),t("td",wl,h(a.materialSpecName||"-"),1),t("td",Tl,h(a.unitName||"-"),1),t("td",Sl,[t("button",{class:"p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive",disabled:e(j),onClick:Y(Ye=>Qe(a.id,a.componentCodeName,e(v)),["stop"])},[s(e(ae),{class:"w-3 h-3"})],8,$l)])]))),128))])])):(i(),c("p",Ml," 연결된 작업절차가 없습니다 ")),e(Ce).length>0?(i(),c("div",Wl,[t("div",Vl,[t("span",Dl,h(e(Ce).length)+"개 선택",1),s(e(xe),{modelValue:e(ie).materialTypeId,"onUpdate:modelValue":l[9]||(l[9]=a=>e(ie).materialTypeId=a)},{default:r(()=>[s(e(_e),{class:"h-8 text-sm w-40"},{default:r(()=>[s(e(ke),{placeholder:"자재유형"})]),_:1}),s(e(be),null,{default:r(()=>[(i(!0),c(E,null,B(e(G),a=>(i(),Q(e(he),{key:a.id,value:String(a.id)},{default:r(()=>[C(h(a.name)+h(a.unit?` (${a.unit})`:""),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),s(e(xe),{modelValue:e(ie).materialSpecId,"onUpdate:modelValue":l[10]||(l[10]=a=>e(ie).materialSpecId=a),disabled:!e(ie).materialTypeId||e(S)},{default:r(()=>[s(e(_e),{class:"h-8 text-sm w-32"},{default:r(()=>[s(e(ke),{placeholder:e(S)?"로딩...":"자재규격"},null,8,["placeholder"])]),_:1}),s(e(be),null,{default:r(()=>[(i(!0),c(E,null,B(e(d),a=>(i(),Q(e(he),{key:a.id,value:String(a.id)},{default:r(()=>[C(h(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),s(e(J),{size:"sm",disabled:!e(ie).materialSpecId||e(Oe),onClick:e(qe)},{default:r(()=>[...l[36]||(l[36]=[C(" 자재 적용 ",-1)])]),_:1},8,["disabled","onClick"])])])):Z("",!0)],512),[[st,ye.value]])])]),s(e(ce)),t("div",Il,[s(e(J),{disabled:e(De),onClick:e(Pe)},{default:r(()=>[C(h(e(De)?"생성 중...":"세부작업 생성"),1)]),_:1},8,["disabled","onClick"])]),s(e(Ae),{open:Ue.value,"onUpdate:open":l[11]||(l[11]=a=>Ue.value=a)},{default:r(()=>[s(e(Fe),null,{default:r(()=>[s(e(ze),null,{default:r(()=>[s(e(Ke),null,{default:r(()=>[...l[38]||(l[38]=[C("삭제 확인",-1)])]),_:1}),s(e(Ze),null,{default:r(()=>[C(" '"+h(ot.value)+"' 항목을 삭제하시겠습니까? ",1)]),_:1})]),_:1}),s(e(je),null,{default:r(()=>[s(e(Re),null,{default:r(()=>[...l[39]||(l[39]=[C("취소",-1)])]),_:1}),s(e(Ee),{onClick:it},{default:r(()=>[...l[40]||(l[40]=[C("삭제",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),s(e(ct),{open:e(fe),"onUpdate:open":l[13]||(l[13]=a=>se(fe)?fe.value=a:null)},{default:r(()=>[s(e(pt),null,{default:r(()=>[s(e(mt),null,{default:r(()=>[s(e(vt),null,{default:r(()=>[...l[41]||(l[41]=[C("세부작업 생성 완료",-1)])]),_:1}),s(e(yt),null,{default:r(()=>[...l[42]||(l[42]=[C("세부작업 생성 결과입니다.",-1)])]),_:1})]),_:1}),e(ve)?(i(),c("div",Ul,[t("div",Nl,[l[43]||(l[43]=t("span",{class:"text-muted-foreground"},"생성된 작업 수",-1)),t("span",Ll,h(e(ve).createdCount)+"건",1)]),t("div",Al,[l[44]||(l[44]=t("span",{class:"text-muted-foreground"},"건너뛴 중복 작업 수",-1)),t("span",Fl,h(e(ve).skippedDuplicateCount)+"건",1)]),t("div",zl,[l[45]||(l[45]=t("span",{class:"text-muted-foreground"},"부재코드 없는 건 수",-1)),t("span",Kl,h(e(ve).skippedNoCcodeCount)+"건",1)])])):Z("",!0),s(e(ft),null,{default:r(()=>[s(e(J),{onClick:l[12]||(l[12]=a=>fe.value=!1)},{default:r(()=>[...l[46]||(l[46]=[C("확인",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}}),jl={class:"p-4 space-y-6"},ra=Te({__name:"AdminPage",setup(H){return(F,W)=>(i(),Q(dt,{title:"기준정보 관리"},{default:r(()=>[s(ut,{title:"작업관련",height:"flex-1","min-height":"600px"},{default:r(()=>[t("div",jl,[s(Jt),s(e(ce)),s(fs),s(e(ce)),s(ws),s(e(ce)),s(Zl)])]),_:1})]),_:1}))}});export{ra as default};
