import{_ as F}from"./PageContainer.vue_vue_type_script_setup_true_lang-B09PvwP_.js";import{_ as R}from"./AreaCard.vue_vue_type_script_setup_true_lang-BiQIp4Fq.js";import{_ as j}from"./Separator.vue_vue_type_script_setup_true_lang-C3sSok5q.js";import{r as x,D as V,d as B,i as A,c as a,a as s,j as b,F as E,n as w,u as e,q as L,e as _,a8 as N,U as D,w as S,g as I,o as n,t as q,p as P}from"./index-DcaPXdBc.js";import{_ as K}from"./index-DTZpzGeh.js";import{_ as z}from"./Input.vue_vue_type_script_setup_true_lang-CM712QL7.js";import{r as g}from"./reference-CAJS-lEZ.js";import"./Collection-lW4Ngy-k.js";import"./index-obepjlzc.js";import"./utils-cH_i9hZ8.js";import"./apiClient-DF1r_6BF.js";function G(){const k=x([]),y=x([]),d=x([]),c=x(null),p=x(null),i=x(null),m=x([]),f=x(""),v=x(!1),T=async()=>{try{k.value=await g.getDivisionList()}catch(t){console.error("Division 목록 로드 실패:",t)}},h=async t=>{try{y.value=await g.getWorkTypeList(t)}catch(o){console.error("WorkType 목록 로드 실패:",o)}},u=async t=>{try{d.value=await g.getSubWorkTypeList(t)}catch(o){console.error("SubWorkType 목록 로드 실패:",o)}},r=async()=>{try{m.value=await g.getLaborTypeList()}catch(t){console.error("LaborType 목록 로드 실패:",t)}},l=t=>{c.value=t,p.value=null,i.value=null,y.value=[],d.value=[]},$=t=>{p.value=t,i.value=null,d.value=[]},W=t=>{i.value=t},M=async()=>{if(v.value)return;const t=f.value.trim(),o=p.value;if(!(!t||!o)){v.value=!0;try{await g.createLaborType({name:t,workTypeId:o,subWorkTypeId:i.value}),f.value="",await r()}catch(C){console.error("LaborType 추가 실패:",C);const U=C;alert(U.response?.data?.message||U.message)}finally{v.value=!1}}};return V(c,t=>{y.value=[],t&&h(t)}),V(p,t=>{d.value=[],t&&u(t)}),{divisions:k,workTypes:y,subWorkTypes:d,laborTypes:m,selectedDivisionId:c,selectedWorkTypeId:p,selectedSubWorkTypeId:i,newLaborTypeName:f,isCreating:v,loadDivisions:T,loadLaborTypes:r,selectDivision:l,selectWorkType:$,selectSubWorkType:W,addLaborType:M}}const H={class:"grid grid-cols-4 gap-4 mb-4"},J={class:"space-y-2"},O={class:"space-y-1 max-h-36 overflow-y-auto"},Q=["onClick"],X={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Y={class:"space-y-2"},Z={class:"space-y-1 max-h-36 overflow-y-auto"},ee=["onClick"],te={key:0,class:"text-xs text-muted-foreground py-2 text-center"},se={key:1,class:"text-xs text-muted-foreground py-2 text-center"},oe={class:"space-y-2"},re={class:"space-y-1 max-h-36 overflow-y-auto"},ne=["onClick"],ae={key:1,class:"text-xs text-muted-foreground py-2 text-center"},ie={class:"space-y-2"},le={class:"flex gap-1"},de={key:0,class:"text-xs text-muted-foreground"},ue={class:"mt-4"},pe={class:"border rounded-md max-h-48 overflow-y-auto"},ce={class:"w-full text-sm"},me={class:"px-3 py-2"},ye={class:"px-3 py-2 text-muted-foreground"},xe={class:"px-3 py-2 text-muted-foreground"},fe={key:0},ve=B({__name:"LaborTypeArea",setup(k){const{divisions:y,workTypes:d,subWorkTypes:c,laborTypes:p,selectedDivisionId:i,selectedWorkTypeId:m,selectedSubWorkTypeId:f,newLaborTypeName:v,isCreating:T,loadDivisions:h,loadLaborTypes:u,selectDivision:r,selectWorkType:l,selectSubWorkType:$,addLaborType:W}=G();return A(()=>{h(),u()}),(M,t)=>(n(),a("div",null,[t[10]||(t[10]=s("h3",{class:"text-sm font-semibold mb-3"},"직종 관리 (LaborType)",-1)),s("div",H,[s("div",J,[t[2]||(t[2]=s("p",{class:"text-xs text-muted-foreground font-medium"},"분류 (Division)",-1)),s("div",O,[(n(!0),a(E,null,w(e(y),o=>(n(),a("div",{key:o.id,class:L(["px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(i)===o.id,"border-border hover:bg-muted/50":e(i)!==o.id}]),onClick:C=>e(r)(o.id)},q(o.name),11,Q))),128)),e(y).length===0?(n(),a("p",X," 항목 없음 ")):b("",!0)])]),s("div",Y,[t[3]||(t[3]=s("p",{class:"text-xs text-muted-foreground font-medium"},"공종 (WorkType) *필수",-1)),s("div",Z,[(n(!0),a(E,null,w(e(d),o=>(n(),a("div",{key:o.id,class:L(["px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(m)===o.id,"border-border hover:bg-muted/50":e(m)!==o.id}]),onClick:C=>e(l)(o.id)},q(o.name),11,ee))),128)),e(i)&&e(d).length===0?(n(),a("p",te," 항목 없음 ")):b("",!0),e(i)?b("",!0):(n(),a("p",se," 분류를 선택하세요 "))])]),s("div",oe,[t[4]||(t[4]=s("p",{class:"text-xs text-muted-foreground font-medium"},"세부공종 (선택사항)",-1)),s("div",re,[e(m)?(n(),a("div",{key:0,class:L(["px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(f)===null,"border-border hover:bg-muted/50":e(f)!==null}]),onClick:t[0]||(t[0]=o=>e($)(null))}," (선택 안함) ",2)):b("",!0),(n(!0),a(E,null,w(e(c),o=>(n(),a("div",{key:o.id,class:L(["px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(f)===o.id,"border-border hover:bg-muted/50":e(f)!==o.id}]),onClick:C=>e($)(o.id)},q(o.name),11,ne))),128)),e(m)?b("",!0):(n(),a("p",ae," 공종을 선택하세요 "))])]),s("div",ie,[t[6]||(t[6]=s("p",{class:"text-xs text-muted-foreground font-medium"},"직종명 입력",-1)),s("div",le,[_(e(z),{modelValue:e(v),"onUpdate:modelValue":t[1]||(t[1]=o=>D(v)?v.value=o:null),placeholder:"직종명 입력",class:"h-8 text-sm",disabled:!e(m),onKeyup:N(e(W),["enter"])},null,8,["modelValue","disabled","onKeyup"]),_(e(K),{size:"sm",class:"h-8 shrink-0",disabled:e(T)||!e(v).trim()||!e(m),onClick:e(W)},{default:S(()=>[...t[5]||(t[5]=[I(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),e(m)?b("",!0):(n(),a("p",de," 공종을 선택하세요 "))])]),s("div",ue,[t[9]||(t[9]=s("p",{class:"text-xs text-muted-foreground font-medium mb-2"},"등록된 직종 목록",-1)),s("div",pe,[s("table",ce,[t[8]||(t[8]=s("thead",{class:"bg-muted/50 sticky top-0"},[s("tr",null,[s("th",{class:"text-left px-3 py-2 font-medium"},"직종명"),s("th",{class:"text-left px-3 py-2 font-medium"},"공종"),s("th",{class:"text-left px-3 py-2 font-medium"},"세부공종")])],-1)),s("tbody",null,[(n(!0),a(E,null,w(e(p),o=>(n(),a("tr",{key:o.id,class:"border-t border-border"},[s("td",me,q(o.name),1),s("td",ye,q(o.workTypeName),1),s("td",xe,q(o.subWorkTypeName||"-"),1)]))),128)),e(p).length===0?(n(),a("tr",fe,[...t[7]||(t[7]=[s("td",{colspan:"3",class:"px-3 py-4 text-center text-muted-foreground"}," 등록된 직종이 없습니다 ",-1)])])):b("",!0)])])])])]))}});function be(){const k=x([]),y=x([]),d=x(null),c=x(""),p=x(""),i=x(!1),m=async()=>{try{k.value=await g.getEquipmentTypeList()}catch(u){console.error("EquipmentType 목록 로드 실패:",u)}},f=async u=>{try{y.value=await g.getEquipmentSpecList(u)}catch(r){console.error("EquipmentSpec 목록 로드 실패:",r)}},v=u=>{d.value=u},T=async()=>{if(i.value)return;const u=c.value.trim();if(u){i.value=!0;try{await g.createEquipmentType(u),c.value="",await m()}catch(r){console.error("EquipmentType 추가 실패:",r);const l=r;alert(l.response?.data?.message||l.message)}finally{i.value=!1}}},h=async()=>{if(i.value)return;const u=p.value.trim();if(!(!u||!d.value)){i.value=!0;try{await g.createEquipmentSpec(d.value,u),p.value="",await f(d.value)}catch(r){console.error("EquipmentSpec 추가 실패:",r);const l=r;alert(l.response?.data?.message||l.message)}finally{i.value=!1}}};return V(d,u=>{y.value=[],u&&f(u)}),{equipmentTypes:k,equipmentSpecs:y,selectedEquipmentTypeId:d,newEquipmentTypeName:c,newEquipmentSpecName:p,isCreating:i,loadEquipmentTypes:m,selectEquipmentType:v,addEquipmentType:T,addEquipmentSpec:h}}const _e={class:"grid grid-cols-2 gap-4"},ge={class:"space-y-2"},ke={class:"flex gap-1"},Te={class:"space-y-1 max-h-48 overflow-y-auto"},he=["onClick"],qe={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Ee={class:"space-y-2"},we={class:"flex gap-1"},$e={class:"space-y-1 max-h-48 overflow-y-auto"},Ce={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Le={key:1,class:"text-xs text-muted-foreground py-2 text-center"},Se=B({__name:"EquipmentMasterArea",setup(k){const{equipmentTypes:y,equipmentSpecs:d,selectedEquipmentTypeId:c,newEquipmentTypeName:p,newEquipmentSpecName:i,isCreating:m,loadEquipmentTypes:f,selectEquipmentType:v,addEquipmentType:T,addEquipmentSpec:h}=be();return A(()=>{f()}),(u,r)=>(n(),a("div",null,[r[6]||(r[6]=s("h3",{class:"text-sm font-semibold mb-3"},"장비분류",-1)),s("div",_e,[s("div",ge,[r[3]||(r[3]=s("p",{class:"text-xs text-muted-foreground font-medium"},"장비유형 (EquipmentType)",-1)),s("div",ke,[_(e(z),{modelValue:e(p),"onUpdate:modelValue":r[0]||(r[0]=l=>D(p)?p.value=l:null),placeholder:"이름 입력",class:"h-8 text-sm flex-1",onKeyup:N(e(T),["enter"])},null,8,["modelValue","onKeyup"]),_(e(K),{size:"sm",class:"h-8 shrink-0",disabled:e(m)||!e(p).trim(),onClick:e(T)},{default:S(()=>[...r[2]||(r[2]=[I(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),s("div",Te,[(n(!0),a(E,null,w(e(y),l=>(n(),a("div",{key:l.id,class:L(["px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(c)===l.id,"border-border hover:bg-muted/50":e(c)!==l.id}]),onClick:$=>e(v)(l.id)},q(l.name),11,he))),128)),e(y).length===0?(n(),a("p",qe," 항목 없음 ")):b("",!0)])]),s("div",Ee,[r[5]||(r[5]=s("p",{class:"text-xs text-muted-foreground font-medium"},"장비규격 (EquipmentSpec)",-1)),s("div",we,[_(e(z),{modelValue:e(i),"onUpdate:modelValue":r[1]||(r[1]=l=>D(i)?i.value=l:null),placeholder:"이름 입력",class:"h-8 text-sm",disabled:!e(c),onKeyup:N(e(h),["enter"])},null,8,["modelValue","disabled","onKeyup"]),_(e(K),{size:"sm",class:"h-8 shrink-0",disabled:e(m)||!e(i).trim()||!e(c),onClick:e(h)},{default:S(()=>[...r[4]||(r[4]=[I(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),s("div",$e,[(n(!0),a(E,null,w(e(d),l=>(n(),a("div",{key:l.id,class:"px-3 py-2 border rounded-md text-sm border-border"},q(l.name),1))),128)),e(c)&&e(d).length===0?(n(),a("p",Ce," 항목 없음 ")):b("",!0),e(c)?b("",!0):(n(),a("p",Le," 장비유형을 선택하세요 "))])])])]))}}),We={class:"p-4 space-y-6"},Re=B({__name:"ResourceManagementPage",setup(k){return(y,d)=>(n(),P(F,{title:"자원정보 관리"},{default:S(()=>[_(R,{title:"직종관리",height:"flex-1","min-height":"600px"},{default:S(()=>[s("div",We,[_(ve),_(e(j)),_(Se)])]),_:1})]),_:1}))}});export{Re as default};
