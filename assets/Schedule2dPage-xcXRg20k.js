import{_ as es}from"./PageContainer.vue_vue_type_script_setup_true_lang-DRDIQ0kE.js";import{_ as ts}from"./AreaCard.vue_vue_type_script_setup_true_lang-DJ4lChFG.js";import{d as We,L as Ii,D as Te,M as ns,I as $i,c as Z,o as R,e as ue,s as Ye,w as he,a as V,u as g,N as ln,O as Ci,y as de,r as J,P as os,i as xt,F as Se,n as Ve,z as Oe,Q as wt,R as Di,j as Ee,S as rs,p as je,K as Ct,T as Be,q as Ke,t as Ce,U as ir,C as is,V as as,W as Mi,X as Un,Y as un,Z as nn,J as Ti,_ as Ae,$ as Ie,a0 as ss,x as Pi,a1 as ls,E as Jt,g as ze,a2 as Zn,a3 as us,a4 as ds,a5 as ar,k as Ue,a6 as On,a7 as An}from"./index-BfWxKujM.js";import{_ as Eo}from"./index-C7HMwd8y.js";import{_ as Sr,a as Er,b as Nr,c as Ir,d as $r,e as Cr,f as Dr,g as Mr}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-Ba0kYQpB.js";import{_ as Tr,a as Pr,b as zr,c as Or,d as Ar}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BwJ9g-xK.js";import{_ as No,a as Io,b as $o,c as Co,d as Do}from"./SelectValue.vue_vue_type_script_setup_true_lang-CB0swD2u.js";import{_ as Et}from"./Checkbox.vue_vue_type_script_setup_true_lang-xA4yc8N6.js";import{w as nt}from"./work-xiz4qXMp.js";import{a as Zt,u as cs}from"./apiClient-Cn64PT0n.js";import{u as fs}from"./calendarStore-pXXzeDPN.js";import{r as at}from"./reference-FtYIgWLV.js";import"./Collection-Czag8AmA.js";import"./index-nT69UIRx.js";import"./utils-BNW14Lxq.js";import"./DialogTitle-DtDnRnRg.js";import"./createLucideIcon-BN78TdVt.js";import"./DialogDescription-CrmbOr-p.js";import"./x-B4sIAsCH.js";import"./check-CqOsjgOL.js";function bn(e){return Mi()?(Un(e),!0):!1}function mt(e){return typeof e=="function"?e():g(e)}const ps=typeof window<"u"&&typeof document<"u",hs=e=>typeof e<"u",gs=Object.prototype.toString,vs=e=>gs.call(e)==="[object Object]",ms=()=>{};function ys(e,t){function n(...o){return new Promise((r,i)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(i)})}return n}const zi=e=>e();function ws(e=zi){const t=J(!0);function n(){t.value=!1}function o(){t.value=!0}const r=(...i)=>{t.value&&e(...i)};return{isActive:us(t),pause:n,resume:o,eventFilter:r}}function Wr(e,t=!1,n="Timeout"){return new Promise((o,r)=>{setTimeout(t?()=>r(n):o,e)})}function bs(e,t,n={}){const{eventFilter:o=zi,...r}=n;return Te(e,ys(o,t),r)}function Kt(e,t,n={}){const{eventFilter:o,...r}=n,{eventFilter:i,pause:a,resume:s,isActive:l}=ws(o);return{stop:bs(e,t,{...r,eventFilter:i}),pause:a,resume:s,isActive:l}}function xs(e,t={}){if(!ir(e))return is(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=as(()=>({get(){return e.value[o]},set(r){var i;if((i=mt(t.replaceRef))!=null?i:!0)if(Array.isArray(e.value)){const s=[...e.value];s[o]=r,e.value=s}else{const s={...e.value,[o]:r};Object.setPrototypeOf(s,Object.getPrototypeOf(e.value)),e.value=s}else e.value[o]=r}}));return n}function Yo(e,t=!1){function n(p,{flush:v="sync",deep:m=!1,timeout:M,throwOnTimeout:E}={}){let N=null;const z=[new Promise(x=>{N=Te(e,C=>{p(C)!==t&&(N?.(),x(C))},{flush:v,deep:m,immediate:!0})})];return M!=null&&z.push(Wr(M,E).then(()=>mt(e)).finally(()=>N?.())),Promise.race(z)}function o(p,v){if(!ir(p))return n(C=>C===p,v);const{flush:m="sync",deep:M=!1,timeout:E,throwOnTimeout:N}=v??{};let T=null;const x=[new Promise(C=>{T=Te([e,p],([D,O])=>{t!==(D===O)&&(T?.(),C(D))},{flush:m,deep:M,immediate:!0})})];return E!=null&&x.push(Wr(E,N).then(()=>mt(e)).finally(()=>(T?.(),mt(e)))),Promise.race(x)}function r(p){return n(v=>!!v,p)}function i(p){return o(null,p)}function a(p){return o(void 0,p)}function s(p){return n(Number.isNaN,p)}function l(p,v){return n(m=>{const M=Array.from(m);return M.includes(p)||M.includes(mt(p))},v)}function u(p){return d(1,p)}function d(p=1,v){let m=-1;return n(()=>(m+=1,m>=p),v)}return Array.isArray(mt(e))?{toMatch:n,toContains:l,changed:u,changedTimes:d,get not(){return Yo(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:r,toBeNull:i,toBeNaN:s,toBeUndefined:a,changed:u,changedTimes:d,get not(){return Yo(e,!t)}}}function Xo(e){return Yo(e)}function _s(e){var t;const n=mt(e);return(t=n?.$el)!=null?t:n}const Oi=ps?window:void 0;function Ai(...e){let t,n,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,r]=e,t=Oi):[t,n,o,r]=e,!t)return ms;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const i=[],a=()=>{i.forEach(d=>d()),i.length=0},s=(d,p,v,m)=>(d.addEventListener(p,v,m),()=>d.removeEventListener(p,v,m)),l=Te(()=>[_s(t),mt(r)],([d,p])=>{if(a(),!d)return;const v=vs(p)?{...p}:p;i.push(...n.flatMap(m=>o.map(M=>s(d,m,M,v))))},{immediate:!0,flush:"post"}),u=()=>{l(),a()};return bn(u),u}function ks(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Br(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=Oi,eventName:i="keydown",passive:a=!1,dedupe:s=!1}=o,l=ks(t);return Ai(r,i,d=>{d.repeat&&mt(s)||l(d)&&n(d)},a)}function Ss(e){return JSON.parse(JSON.stringify(e))}function Mo(e,t,n,o={}){var r,i,a;const{clone:s=!1,passive:l=!1,eventName:u,deep:d=!1,defaultValue:p,shouldEmit:v}=o,m=ln(),M=n||m?.emit||((r=m?.$emit)==null?void 0:r.bind(m))||((a=(i=m?.proxy)==null?void 0:i.$emit)==null?void 0:a.bind(m?.proxy));let E=u;t||(t="modelValue"),E=E||`update:${t.toString()}`;const N=x=>s?typeof s=="function"?s(x):Ss(x):x,T=()=>hs(e[t])?N(e[t]):p,z=x=>{v?v(x)&&M(E,x):M(E,x)};if(l){const x=T(),C=J(x);let D=!1;return Te(()=>e[t],O=>{D||(D=!0,C.value=N(O),wt(()=>D=!1))}),Te(C,O=>{!D&&(O!==e[t]||d)&&z(O)},{deep:d}),C}else return de({get(){return T()},set(x){z(x)}})}var Es={value:()=>{}};function po(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Kn(n)}function Kn(e){this._=e}function Ns(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Kn.prototype=po.prototype={constructor:Kn,on:function(e,t){var n=this._,o=Ns(e+"",n),r,i=-1,a=o.length;if(arguments.length<2){for(;++i<a;)if((r=(e=o[i]).type)&&(r=Is(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<a;)if(r=(e=o[i]).type)n[r]=Hr(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Hr(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Kn(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function Is(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function Hr(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=Es,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Fo="http://www.w3.org/1999/xhtml";const Lr={svg:"http://www.w3.org/2000/svg",xhtml:Fo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ho(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Lr.hasOwnProperty(t)?{space:Lr[t],local:e}:e}function $s(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Fo&&t.documentElement.namespaceURI===Fo?t.createElement(e):t.createElementNS(n,e)}}function Cs(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Wi(e){var t=ho(e);return(t.local?Cs:$s)(t)}function Ds(){}function sr(e){return e==null?Ds:function(){return this.querySelector(e)}}function Ms(e){typeof e!="function"&&(e=sr(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=new Array(a),l,u,d=0;d<a;++d)(l=i[d])&&(u=e.call(l,l.__data__,d,i))&&("__data__"in l&&(u.__data__=l.__data__),s[d]=u);return new tt(o,this._parents)}function Ts(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ps(){return[]}function Bi(e){return e==null?Ps:function(){return this.querySelectorAll(e)}}function zs(e){return function(){return Ts(e.apply(this,arguments))}}function Os(e){typeof e=="function"?e=zs(e):e=Bi(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a=t[i],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(o.push(e.call(l,l.__data__,u,a)),r.push(l));return new tt(o,r)}function Hi(e){return function(){return this.matches(e)}}function Li(e){return function(t){return t.matches(e)}}var As=Array.prototype.find;function Ws(e){return function(){return As.call(this.children,e)}}function Bs(){return this.firstElementChild}function Hs(e){return this.select(e==null?Bs:Ws(typeof e=="function"?e:Li(e)))}var Ls=Array.prototype.filter;function Vs(){return Array.from(this.children)}function Rs(e){return function(){return Ls.call(this.children,e)}}function Ys(e){return this.selectAll(e==null?Vs:Rs(typeof e=="function"?e:Li(e)))}function Xs(e){typeof e!="function"&&(e=Hi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=[],l,u=0;u<a;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&s.push(l);return new tt(o,this._parents)}function Vi(e){return new Array(e.length)}function Fs(){return new tt(this._enter||this._groups.map(Vi),this._parents)}function eo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}eo.prototype={constructor:eo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Gs(e){return function(){return e}}function Us(e,t,n,o,r,i){for(var a=0,s,l=t.length,u=i.length;a<u;++a)(s=t[a])?(s.__data__=i[a],o[a]=s):n[a]=new eo(e,i[a]);for(;a<l;++a)(s=t[a])&&(r[a]=s)}function Zs(e,t,n,o,r,i,a){var s,l,u=new Map,d=t.length,p=i.length,v=new Array(d),m;for(s=0;s<d;++s)(l=t[s])&&(v[s]=m=a.call(l,l.__data__,s,t)+"",u.has(m)?r[s]=l:u.set(m,l));for(s=0;s<p;++s)m=a.call(e,i[s],s,i)+"",(l=u.get(m))?(o[s]=l,l.__data__=i[s],u.delete(m)):n[s]=new eo(e,i[s]);for(s=0;s<d;++s)(l=t[s])&&u.get(v[s])===l&&(r[s]=l)}function Ks(e){return e.__data__}function qs(e,t){if(!arguments.length)return Array.from(this,Ks);var n=t?Zs:Us,o=this._parents,r=this._groups;typeof e!="function"&&(e=Gs(e));for(var i=r.length,a=new Array(i),s=new Array(i),l=new Array(i),u=0;u<i;++u){var d=o[u],p=r[u],v=p.length,m=js(e.call(d,d&&d.__data__,u,o)),M=m.length,E=s[u]=new Array(M),N=a[u]=new Array(M),T=l[u]=new Array(v);n(d,p,E,N,T,m,t);for(var z=0,x=0,C,D;z<M;++z)if(C=E[z]){for(z>=x&&(x=z+1);!(D=N[x])&&++x<M;);C._next=D||null}}return a=new tt(a,o),a._enter=s,a._exit=l,a}function js(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Js(){return new tt(this._exit||this._groups.map(Vi),this._parents)}function Qs(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function el(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),s=new Array(r),l=0;l<a;++l)for(var u=n[l],d=o[l],p=u.length,v=s[l]=new Array(p),m,M=0;M<p;++M)(m=u[M]||d[M])&&(v[M]=m);for(;l<r;++l)s[l]=n[l];return new tt(s,this._parents)}function tl(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],a;--r>=0;)(a=o[r])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function nl(e){e||(e=ol);function t(p,v){return p&&v?e(p.__data__,v.__data__):!p-!v}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a=n[i],s=a.length,l=r[i]=new Array(s),u,d=0;d<s;++d)(u=a[d])&&(l[d]=u);l.sort(t)}return new tt(r,this._parents).order()}function ol(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function rl(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function il(){return Array.from(this)}function al(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null}function sl(){let e=0;for(const t of this)++e;return e}function ll(){return!this.node()}function ul(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,a=r.length,s;i<a;++i)(s=r[i])&&e.call(s,s.__data__,i,r);return this}function dl(e){return function(){this.removeAttribute(e)}}function cl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fl(e,t){return function(){this.setAttribute(e,t)}}function pl(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function hl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function gl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function vl(e,t){var n=ho(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?cl:dl:typeof t=="function"?n.local?gl:hl:n.local?pl:fl)(n,t))}function Ri(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ml(e){return function(){this.style.removeProperty(e)}}function yl(e,t,n){return function(){this.style.setProperty(e,t,n)}}function wl(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function bl(e,t,n){return arguments.length>1?this.each((t==null?ml:typeof t=="function"?wl:yl)(e,t,n??"")):on(this.node(),e)}function on(e,t){return e.style.getPropertyValue(t)||Ri(e).getComputedStyle(e,null).getPropertyValue(t)}function xl(e){return function(){delete this[e]}}function _l(e,t){return function(){this[e]=t}}function kl(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Sl(e,t){return arguments.length>1?this.each((t==null?xl:typeof t=="function"?kl:_l)(e,t)):this.node()[e]}function Yi(e){return e.trim().split(/^|\s+/)}function lr(e){return e.classList||new Xi(e)}function Xi(e){this._node=e,this._names=Yi(e.getAttribute("class")||"")}Xi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Fi(e,t){for(var n=lr(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function Gi(e,t){for(var n=lr(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function El(e){return function(){Fi(this,e)}}function Nl(e){return function(){Gi(this,e)}}function Il(e,t){return function(){(t.apply(this,arguments)?Fi:Gi)(this,e)}}function $l(e,t){var n=Yi(e+"");if(arguments.length<2){for(var o=lr(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Il:t?El:Nl)(n,t))}function Cl(){this.textContent=""}function Dl(e){return function(){this.textContent=e}}function Ml(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Tl(e){return arguments.length?this.each(e==null?Cl:(typeof e=="function"?Ml:Dl)(e)):this.node().textContent}function Pl(){this.innerHTML=""}function zl(e){return function(){this.innerHTML=e}}function Ol(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Al(e){return arguments.length?this.each(e==null?Pl:(typeof e=="function"?Ol:zl)(e)):this.node().innerHTML}function Wl(){this.nextSibling&&this.parentNode.appendChild(this)}function Bl(){return this.each(Wl)}function Hl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ll(){return this.each(Hl)}function Vl(e){var t=typeof e=="function"?e:Wi(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Rl(){return null}function Yl(e,t){var n=typeof e=="function"?e:Wi(e),o=t==null?Rl:typeof t=="function"?t:sr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Xl(){var e=this.parentNode;e&&e.removeChild(this)}function Fl(){return this.each(Xl)}function Gl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ul(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Zl(e){return this.select(e?Ul:Gl)}function Kl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ql(e){return function(t){e.call(this,t,this.__data__)}}function jl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Jl(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function Ql(e,t,n){return function(){var o=this.__on,r,i=ql(t);if(o){for(var a=0,s=o.length;a<s;++a)if((r=o[a]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function eu(e,t,n){var o=jl(e+""),r,i=o.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,d;l<u;++l)for(r=0,d=s[l];r<i;++r)if((a=o[r]).type===d.type&&a.name===d.name)return d.value}return}for(s=t?Ql:Jl,r=0;r<i;++r)this.each(s(o[r],t,n));return this}function Ui(e,t,n){var o=Ri(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function tu(e,t){return function(){return Ui(this,e,t)}}function nu(e,t){return function(){return Ui(this,e,t.apply(this,arguments))}}function ou(e,t){return this.each((typeof t=="function"?nu:tu)(e,t))}function*ru(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,a;r<i;++r)(a=o[r])&&(yield a)}var Zi=[null];function tt(e,t){this._groups=e,this._parents=t}function $n(){return new tt([[document.documentElement]],Zi)}function iu(){return this}tt.prototype=$n.prototype={constructor:tt,select:Ms,selectAll:Os,selectChild:Hs,selectChildren:Ys,filter:Xs,data:qs,enter:Fs,exit:Js,join:Qs,merge:el,selection:iu,order:tl,sort:nl,call:rl,nodes:il,node:al,size:sl,empty:ll,each:ul,attr:vl,style:bl,property:Sl,classed:$l,text:Tl,html:Al,raise:Bl,lower:Ll,append:Vl,insert:Yl,remove:Fl,clone:Zl,datum:Kl,on:eu,dispatch:ou,[Symbol.iterator]:ru};function ot(e){return typeof e=="string"?new tt([[document.querySelector(e)]],[document.documentElement]):new tt([[e]],Zi)}function au(e){let t;for(;t=e.sourceEvent;)e=t;return e}function lt(e,t){if(e=au(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const su={passive:!1},xn={capture:!0,passive:!1};function To(e){e.stopImmediatePropagation()}function Qt(e){e.preventDefault(),e.stopImmediatePropagation()}function Ki(e){var t=e.document.documentElement,n=ot(e).on("dragstart.drag",Qt,xn);"onselectstart"in t?n.on("selectstart.drag",Qt,xn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function qi(e,t){var n=e.document.documentElement,o=ot(e).on("dragstart.drag",null);t&&(o.on("click.drag",Qt,xn),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Wn=e=>()=>e;function Go(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:s,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}Go.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function lu(e){return!e.ctrlKey&&!e.button}function uu(){return this.parentNode}function du(e,t){return t??{x:e.x,y:e.y}}function cu(){return navigator.maxTouchPoints||"ontouchstart"in this}function fu(){var e=lu,t=uu,n=du,o=cu,r={},i=po("start","drag","end"),a=0,s,l,u,d,p=0;function v(C){C.on("mousedown.drag",m).filter(o).on("touchstart.drag",N).on("touchmove.drag",T,su).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(C,D){if(!(d||!e.call(this,C,D))){var O=x(this,t.call(this,C,D),C,D,"mouse");O&&(ot(C.view).on("mousemove.drag",M,xn).on("mouseup.drag",E,xn),Ki(C.view),To(C),u=!1,s=C.clientX,l=C.clientY,O("start",C))}}function M(C){if(Qt(C),!u){var D=C.clientX-s,O=C.clientY-l;u=D*D+O*O>p}r.mouse("drag",C)}function E(C){ot(C.view).on("mousemove.drag mouseup.drag",null),qi(C.view,u),Qt(C),r.mouse("end",C)}function N(C,D){if(e.call(this,C,D)){var O=C.changedTouches,H=t.call(this,C,D),Y=O.length,I,U;for(I=0;I<Y;++I)(U=x(this,H,C,D,O[I].identifier,O[I]))&&(To(C),U("start",C,O[I]))}}function T(C){var D=C.changedTouches,O=D.length,H,Y;for(H=0;H<O;++H)(Y=r[D[H].identifier])&&(Qt(C),Y("drag",C,D[H]))}function z(C){var D=C.changedTouches,O=D.length,H,Y;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),H=0;H<O;++H)(Y=r[D[H].identifier])&&(To(C),Y("end",C,D[H]))}function x(C,D,O,H,Y,I){var U=i.copy(),K=lt(I||O,D),_,te,w;if((w=n.call(C,new Go("beforestart",{sourceEvent:O,target:v,identifier:Y,active:a,x:K[0],y:K[1],dx:0,dy:0,dispatch:U}),H))!=null)return _=w.x-K[0]||0,te=w.y-K[1]||0,function B($,F,q){var Q=K,ee;switch($){case"start":r[Y]=B,ee=a++;break;case"end":delete r[Y],--a;case"drag":K=lt(q||F,D),ee=a;break}U.call($,C,new Go($,{sourceEvent:F,subject:w,target:v,identifier:Y,active:ee,x:K[0]+_,y:K[1]+te,dx:K[0]-Q[0],dy:K[1]-Q[1],dispatch:U}),H)}}return v.filter=function(C){return arguments.length?(e=typeof C=="function"?C:Wn(!!C),v):e},v.container=function(C){return arguments.length?(t=typeof C=="function"?C:Wn(C),v):t},v.subject=function(C){return arguments.length?(n=typeof C=="function"?C:Wn(C),v):n},v.touchable=function(C){return arguments.length?(o=typeof C=="function"?C:Wn(!!C),v):o},v.on=function(){var C=i.on.apply(i,arguments);return C===i?v:C},v.clickDistance=function(C){return arguments.length?(p=(C=+C)*C,v):Math.sqrt(p)},v}function ur(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ji(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Cn(){}var _n=.7,to=1/_n,en="\\s*([+-]?\\d+)\\s*",kn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ct="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pu=/^#([0-9a-f]{3,8})$/,hu=new RegExp(`^rgb\\(${en},${en},${en}\\)$`),gu=new RegExp(`^rgb\\(${ct},${ct},${ct}\\)$`),vu=new RegExp(`^rgba\\(${en},${en},${en},${kn}\\)$`),mu=new RegExp(`^rgba\\(${ct},${ct},${ct},${kn}\\)$`),yu=new RegExp(`^hsl\\(${kn},${ct},${ct}\\)$`),wu=new RegExp(`^hsla\\(${kn},${ct},${ct},${kn}\\)$`),Vr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ur(Cn,Lt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Rr,formatHex:Rr,formatHex8:bu,formatHsl:xu,formatRgb:Yr,toString:Yr});function Rr(){return this.rgb().formatHex()}function bu(){return this.rgb().formatHex8()}function xu(){return Ji(this).formatHsl()}function Yr(){return this.rgb().formatRgb()}function Lt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Xr(t):n===3?new Qe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Bn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Bn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hu.exec(e))?new Qe(t[1],t[2],t[3],1):(t=gu.exec(e))?new Qe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vu.exec(e))?Bn(t[1],t[2],t[3],t[4]):(t=mu.exec(e))?Bn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yu.exec(e))?Ur(t[1],t[2]/100,t[3]/100,1):(t=wu.exec(e))?Ur(t[1],t[2]/100,t[3]/100,t[4]):Vr.hasOwnProperty(e)?Xr(Vr[e]):e==="transparent"?new Qe(NaN,NaN,NaN,0):null}function Xr(e){return new Qe(e>>16&255,e>>8&255,e&255,1)}function Bn(e,t,n,o){return o<=0&&(e=t=n=NaN),new Qe(e,t,n,o)}function _u(e){return e instanceof Cn||(e=Lt(e)),e?(e=e.rgb(),new Qe(e.r,e.g,e.b,e.opacity)):new Qe}function Uo(e,t,n,o){return arguments.length===1?_u(e):new Qe(e,t,n,o??1)}function Qe(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}ur(Qe,Uo,ji(Cn,{brighter(e){return e=e==null?to:Math.pow(to,e),new Qe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_n:Math.pow(_n,e),new Qe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qe(Bt(this.r),Bt(this.g),Bt(this.b),no(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Fr,formatHex:Fr,formatHex8:ku,formatRgb:Gr,toString:Gr}));function Fr(){return`#${Wt(this.r)}${Wt(this.g)}${Wt(this.b)}`}function ku(){return`#${Wt(this.r)}${Wt(this.g)}${Wt(this.b)}${Wt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Gr(){const e=no(this.opacity);return`${e===1?"rgb(":"rgba("}${Bt(this.r)}, ${Bt(this.g)}, ${Bt(this.b)}${e===1?")":`, ${e})`}`}function no(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Bt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wt(e){return e=Bt(e),(e<16?"0":"")+e.toString(16)}function Ur(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new rt(e,t,n,o)}function Ji(e){if(e instanceof rt)return new rt(e.h,e.s,e.l,e.opacity);if(e instanceof Cn||(e=Lt(e)),!e)return new rt;if(e instanceof rt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,s=i-r,l=(i+r)/2;return s?(t===i?a=(n-o)/s+(n<o)*6:n===i?a=(o-t)/s+2:a=(t-n)/s+4,s/=l<.5?i+r:2-i-r,a*=60):s=l>0&&l<1?0:a,new rt(a,s,l,e.opacity)}function Su(e,t,n,o){return arguments.length===1?Ji(e):new rt(e,t,n,o??1)}function rt(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}ur(rt,Su,ji(Cn,{brighter(e){return e=e==null?to:Math.pow(to,e),new rt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_n:Math.pow(_n,e),new rt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new Qe(Po(e>=240?e-240:e+120,r,o),Po(e,r,o),Po(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new rt(Zr(this.h),Hn(this.s),Hn(this.l),no(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=no(this.opacity);return`${e===1?"hsl(":"hsla("}${Zr(this.h)}, ${Hn(this.s)*100}%, ${Hn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Zr(e){return e=(e||0)%360,e<0?e+360:e}function Hn(e){return Math.max(0,Math.min(1,e||0))}function Po(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const dr=e=>()=>e;function Eu(e,t){return function(n){return e+n*t}}function Nu(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Iu(e){return(e=+e)==1?Qi:function(t,n){return n-t?Nu(t,n,e):dr(isNaN(t)?n:t)}}function Qi(e,t){var n=t-e;return n?Eu(e,n):dr(isNaN(e)?t:e)}const oo=(function e(t){var n=Iu(t);function o(r,i){var a=n((r=Uo(r)).r,(i=Uo(i)).r),s=n(r.g,i.g),l=n(r.b,i.b),u=Qi(r.opacity,i.opacity);return function(d){return r.r=a(d),r.g=s(d),r.b=l(d),r.opacity=u(d),r+""}}return o.gamma=e,o})(1);function $u(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),r;return function(i){for(r=0;r<n;++r)o[r]=e[r]*(1-i)+t[r]*i;return o}}function Cu(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Du(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,r=new Array(o),i=new Array(n),a;for(a=0;a<o;++a)r[a]=mn(e[a],t[a]);for(;a<n;++a)i[a]=t[a];return function(s){for(a=0;a<o;++a)i[a]=r[a](s);return i}}function Mu(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function ut(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Tu(e,t){var n={},o={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=mn(e[r],t[r]):o[r]=t[r];return function(i){for(r in n)o[r]=n[r](i);return o}}var Zo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zo=new RegExp(Zo.source,"g");function Pu(e){return function(){return e}}function zu(e){return function(t){return e(t)+""}}function ea(e,t){var n=Zo.lastIndex=zo.lastIndex=0,o,r,i,a=-1,s=[],l=[];for(e=e+"",t=t+"";(o=Zo.exec(e))&&(r=zo.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),s[a]?s[a]+=i:s[++a]=i),(o=o[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:ut(o,r)})),n=zo.lastIndex;return n<t.length&&(i=t.slice(n),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?zu(l[0].x):Pu(t):(t=l.length,function(u){for(var d=0,p;d<t;++d)s[(p=l[d]).i]=p.x(u);return s.join("")})}function mn(e,t){var n=typeof t,o;return t==null||n==="boolean"?dr(t):(n==="number"?ut:n==="string"?(o=Lt(t))?(t=o,oo):ea:t instanceof Lt?oo:t instanceof Date?Mu:Cu(t)?$u:Array.isArray(t)?Du:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Tu:ut)(e,t)}var Kr=180/Math.PI,Ko={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ta(e,t,n,o,r,i){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Kr,skewX:Math.atan(l)*Kr,scaleX:a,scaleY:s}}var Ln;function Ou(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ko:ta(t.a,t.b,t.c,t.d,t.e,t.f)}function Au(e){return e==null||(Ln||(Ln=document.createElementNS("http://www.w3.org/2000/svg","g")),Ln.setAttribute("transform",e),!(e=Ln.transform.baseVal.consolidate()))?Ko:(e=e.matrix,ta(e.a,e.b,e.c,e.d,e.e,e.f))}function na(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,d,p,v,m,M){if(u!==p||d!==v){var E=m.push("translate(",null,t,null,n);M.push({i:E-4,x:ut(u,p)},{i:E-2,x:ut(d,v)})}else(p||v)&&m.push("translate("+p+t+v+n)}function a(u,d,p,v){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),v.push({i:p.push(r(p)+"rotate(",null,o)-2,x:ut(u,d)})):d&&p.push(r(p)+"rotate("+d+o)}function s(u,d,p,v){u!==d?v.push({i:p.push(r(p)+"skewX(",null,o)-2,x:ut(u,d)}):d&&p.push(r(p)+"skewX("+d+o)}function l(u,d,p,v,m,M){if(u!==p||d!==v){var E=m.push(r(m)+"scale(",null,",",null,")");M.push({i:E-4,x:ut(u,p)},{i:E-2,x:ut(d,v)})}else(p!==1||v!==1)&&m.push(r(m)+"scale("+p+","+v+")")}return function(u,d){var p=[],v=[];return u=e(u),d=e(d),i(u.translateX,u.translateY,d.translateX,d.translateY,p,v),a(u.rotate,d.rotate,p,v),s(u.skewX,d.skewX,p,v),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,p,v),u=d=null,function(m){for(var M=-1,E=v.length,N;++M<E;)p[(N=v[M]).i]=N.x(m);return p.join("")}}}var Wu=na(Ou,"px, ","px)","deg)"),Bu=na(Au,", ",")",")"),Hu=1e-12;function qr(e){return((e=Math.exp(e))+1/e)/2}function Lu(e){return((e=Math.exp(e))-1/e)/2}function Vu(e){return((e=Math.exp(2*e))-1)/(e+1)}const qn=(function e(t,n,o){function r(i,a){var s=i[0],l=i[1],u=i[2],d=a[0],p=a[1],v=a[2],m=d-s,M=p-l,E=m*m+M*M,N,T;if(E<Hu)T=Math.log(v/u)/t,N=function(H){return[s+H*m,l+H*M,u*Math.exp(t*H*T)]};else{var z=Math.sqrt(E),x=(v*v-u*u+o*E)/(2*u*n*z),C=(v*v-u*u-o*E)/(2*v*n*z),D=Math.log(Math.sqrt(x*x+1)-x),O=Math.log(Math.sqrt(C*C+1)-C);T=(O-D)/t,N=function(H){var Y=H*T,I=qr(D),U=u/(n*z)*(I*Vu(t*Y+D)-Lu(D));return[s+U*m,l+U*M,u*I/qr(t*Y+D)]}}return N.duration=T*1e3*t/Math.SQRT2,N}return r.rho=function(i){var a=Math.max(.001,+i),s=a*a,l=s*s;return e(a,s,l)},r})(Math.SQRT2,2,4);var rn=0,pn=0,cn=0,oa=1e3,ro,hn,io=0,Vt=0,go=0,Sn=typeof performance=="object"&&performance.now?performance:Date,ra=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function cr(){return Vt||(ra(Ru),Vt=Sn.now()+go)}function Ru(){Vt=0}function ao(){this._call=this._time=this._next=null}ao.prototype=ia.prototype={constructor:ao,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?cr():+n)+(t==null?0:+t),!this._next&&hn!==this&&(hn?hn._next=this:ro=this,hn=this),this._call=e,this._time=n,qo()},stop:function(){this._call&&(this._call=null,this._time=1/0,qo())}};function ia(e,t,n){var o=new ao;return o.restart(e,t,n),o}function Yu(){cr(),++rn;for(var e=ro,t;e;)(t=Vt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--rn}function jr(){Vt=(io=Sn.now())+go,rn=pn=0;try{Yu()}finally{rn=0,Fu(),Vt=0}}function Xu(){var e=Sn.now(),t=e-io;t>oa&&(go-=t,io=e)}function Fu(){for(var e,t=ro,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ro=n);hn=e,qo(o)}function qo(e){if(!rn){pn&&(pn=clearTimeout(pn));var t=e-Vt;t>24?(e<1/0&&(pn=setTimeout(jr,e-Sn.now()-go)),cn&&(cn=clearInterval(cn))):(cn||(io=Sn.now(),cn=setInterval(Xu,oa)),rn=1,ra(jr))}}function Jr(e,t,n){var o=new ao;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Gu=po("start","end","cancel","interrupt"),Uu=[],aa=0,Qr=1,jo=2,jn=3,ei=4,Jo=5,Jn=6;function vo(e,t,n,o,r,i){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Zu(e,n,{name:t,index:o,group:r,on:Gu,tween:Uu,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:aa})}function fr(e,t){var n=it(e,t);if(n.state>aa)throw new Error("too late; already scheduled");return n}function ft(e,t){var n=it(e,t);if(n.state>jn)throw new Error("too late; already running");return n}function it(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Zu(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=ia(i,0,n.time);function i(u){n.state=Qr,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var d,p,v,m;if(n.state!==Qr)return l();for(d in o)if(m=o[d],m.name===n.name){if(m.state===jn)return Jr(a);m.state===ei?(m.state=Jn,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete o[d]):+d<t&&(m.state=Jn,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete o[d])}if(Jr(function(){n.state===jn&&(n.state=ei,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=jo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===jo){for(n.state=jn,r=new Array(v=n.tween.length),d=0,p=-1;d<v;++d)(m=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++p]=m);r.length=p+1}}function s(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Jo,1),p=-1,v=r.length;++p<v;)r[p].call(e,d);n.state===Jo&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Jn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Qn(e,t){var n=e.__transition,o,r,i=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((o=n[a]).name!==t){i=!1;continue}r=o.state>jo&&o.state<Jo,o.state=Jn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]}i&&delete e.__transition}}function Ku(e){return this.each(function(){Qn(this,e)})}function qu(e,t){var n,o;return function(){var r=ft(this,e),i=r.tween;if(i!==n){o=n=i;for(var a=0,s=o.length;a<s;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}r.tween=o}}function ju(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=ft(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var s={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=s;break}l===u&&r.push(s)}i.tween=r}}function Ju(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=it(this.node(),n).tween,r=0,i=o.length,a;r<i;++r)if((a=o[r]).name===e)return a.value;return null}return this.each((t==null?qu:ju)(n,e,t))}function pr(e,t,n){var o=e._id;return e.each(function(){var r=ft(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return it(r,o).value[t]}}function sa(e,t){var n;return(typeof t=="number"?ut:t instanceof Lt?oo:(n=Lt(t))?(t=n,oo):ea)(e,t)}function Qu(e){return function(){this.removeAttribute(e)}}function ed(e){return function(){this.removeAttributeNS(e.space,e.local)}}function td(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttribute(e);return a===r?null:a===o?i:i=t(o=a,n)}}function nd(e,t,n){var o,r=n+"",i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===o?i:i=t(o=a,n)}}function od(e,t,n){var o,r,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s)))}}function rd(e,t,n){var o,r,i;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s)))}}function id(e,t){var n=ho(e),o=n==="transform"?Bu:sa;return this.attrTween(e,typeof t=="function"?(n.local?rd:od)(n,o,pr(this,"attr."+e,t)):t==null?(n.local?ed:Qu)(n):(n.local?nd:td)(n,o,t))}function ad(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function sd(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ld(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&sd(e,i)),n}return r._value=t,r}function ud(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&ad(e,i)),n}return r._value=t,r}function dd(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=ho(e);return this.tween(n,(o.local?ld:ud)(o,t))}function cd(e,t){return function(){fr(this,e).delay=+t.apply(this,arguments)}}function fd(e,t){return t=+t,function(){fr(this,e).delay=t}}function pd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?cd:fd)(t,e)):it(this.node(),t).delay}function hd(e,t){return function(){ft(this,e).duration=+t.apply(this,arguments)}}function gd(e,t){return t=+t,function(){ft(this,e).duration=t}}function vd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?hd:gd)(t,e)):it(this.node(),t).duration}function md(e,t){if(typeof t!="function")throw new Error;return function(){ft(this,e).ease=t}}function yd(e){var t=this._id;return arguments.length?this.each(md(t,e)):it(this.node(),t).ease}function wd(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ft(this,e).ease=n}}function bd(e){if(typeof e!="function")throw new Error;return this.each(wd(this._id,e))}function xd(e){typeof e!="function"&&(e=Hi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],a=i.length,s=o[r]=[],l,u=0;u<a;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&s.push(l);return new bt(o,this._parents,this._name,this._id)}function _d(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),s=0;s<i;++s)for(var l=t[s],u=n[s],d=l.length,p=a[s]=new Array(d),v,m=0;m<d;++m)(v=l[m]||u[m])&&(p[m]=v);for(;s<o;++s)a[s]=t[s];return new bt(a,this._parents,this._name,this._id)}function kd(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Sd(e,t,n){var o,r,i=kd(t)?fr:ft;return function(){var a=i(this,e),s=a.on;s!==o&&(r=(o=s).copy()).on(t,n),a.on=r}}function Ed(e,t){var n=this._id;return arguments.length<2?it(this.node(),n).on.on(e):this.each(Sd(n,e,t))}function Nd(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Id(){return this.on("end.remove",Nd(this._id))}function $d(e){var t=this._name,n=this._id;typeof e!="function"&&(e=sr(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var s=o[a],l=s.length,u=i[a]=new Array(l),d,p,v=0;v<l;++v)(d=s[v])&&(p=e.call(d,d.__data__,v,s))&&("__data__"in d&&(p.__data__=d.__data__),u[v]=p,vo(u[v],t,n,v,u,it(d,n)));return new bt(i,this._parents,t,n)}function Cd(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Bi(e));for(var o=this._groups,r=o.length,i=[],a=[],s=0;s<r;++s)for(var l=o[s],u=l.length,d,p=0;p<u;++p)if(d=l[p]){for(var v=e.call(d,d.__data__,p,l),m,M=it(d,n),E=0,N=v.length;E<N;++E)(m=v[E])&&vo(m,t,n,E,v,M);i.push(v),a.push(d)}return new bt(i,a,t,n)}var Dd=$n.prototype.constructor;function Md(){return new Dd(this._groups,this._parents)}function Td(e,t){var n,o,r;return function(){var i=on(this,e),a=(this.style.removeProperty(e),on(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}function la(e){return function(){this.style.removeProperty(e)}}function Pd(e,t,n){var o,r=n+"",i;return function(){var a=on(this,e);return a===r?null:a===o?i:i=t(o=a,n)}}function zd(e,t,n){var o,r,i;return function(){var a=on(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),on(this,e))),a===l?null:a===o&&l===r?i:(r=l,i=t(o=a,s))}}function Od(e,t){var n,o,r,i="style."+t,a="end."+i,s;return function(){var l=ft(this,e),u=l.on,d=l.value[i]==null?s||(s=la(t)):void 0;(u!==n||r!==d)&&(o=(n=u).copy()).on(a,r=d),l.on=o}}function Ad(e,t,n){var o=(e+="")=="transform"?Wu:sa;return t==null?this.styleTween(e,Td(e,o)).on("end.style."+e,la(e)):typeof t=="function"?this.styleTween(e,zd(e,o,pr(this,"style."+e,t))).each(Od(this._id,e)):this.styleTween(e,Pd(e,o,t),n).on("end.style."+e,null)}function Wd(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Bd(e,t,n){var o,r;function i(){var a=t.apply(this,arguments);return a!==r&&(o=(r=a)&&Wd(e,a,n)),o}return i._value=t,i}function Hd(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Bd(e,t,n??""))}function Ld(e){return function(){this.textContent=e}}function Vd(e){return function(){var t=e(this);this.textContent=t??""}}function Rd(e){return this.tween("text",typeof e=="function"?Vd(pr(this,"text",e)):Ld(e==null?"":e+""))}function Yd(e){return function(t){this.textContent=e.call(this,t)}}function Xd(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Yd(r)),t}return o._value=e,o}function Fd(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Xd(e))}function Gd(){for(var e=this._name,t=this._id,n=ua(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var d=it(l,t);vo(l,e,n,u,a,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new bt(o,this._parents,e,n)}function Ud(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,a){var s={value:a},l={value:function(){--r===0&&i()}};n.each(function(){var u=ft(this,o),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),r===0&&i()})}var Zd=0;function bt(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function ua(){return++Zd}var gt=$n.prototype;bt.prototype={constructor:bt,select:$d,selectAll:Cd,selectChild:gt.selectChild,selectChildren:gt.selectChildren,filter:xd,merge:_d,selection:Md,transition:Gd,call:gt.call,nodes:gt.nodes,node:gt.node,size:gt.size,empty:gt.empty,each:gt.each,on:Ed,attr:id,attrTween:dd,style:Ad,styleTween:Hd,text:Rd,textTween:Fd,remove:Id,tween:Ju,delay:pd,duration:vd,ease:yd,easeVarying:bd,end:Ud,[Symbol.iterator]:gt[Symbol.iterator]};function Kd(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var qd={time:null,delay:0,duration:250,ease:Kd};function jd(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Jd(e){var t,n;e instanceof bt?(t=e._id,e=e._name):(t=ua(),(n=qd).time=cr(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a=o[i],s=a.length,l,u=0;u<s;++u)(l=a[u])&&vo(l,e,t,u,a,n||jd(l,t));return new bt(o,this._parents,e,t)}$n.prototype.interrupt=Ku;$n.prototype.transition=Jd;const Vn=e=>()=>e;function Qd(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function yt(e,t,n){this.k=e,this.x=t,this.y=n}yt.prototype={constructor:yt,scale:function(e){return e===1?this:new yt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new yt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var an=new yt(1,0,0);yt.prototype;function Oo(e){e.stopImmediatePropagation()}function fn(e){e.preventDefault(),e.stopImmediatePropagation()}function ec(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function tc(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ti(){return this.__zoom||an}function nc(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function oc(){return navigator.maxTouchPoints||"ontouchstart"in this}function rc(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function ic(){var e=ec,t=tc,n=rc,o=nc,r=oc,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=qn,u=po("start","zoom","end"),d,p,v,m=500,M=150,E=0,N=10;function T(w){w.property("__zoom",ti).on("wheel.zoom",Y,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",U).filter(r).on("touchstart.zoom",K).on("touchmove.zoom",_).on("touchend.zoom touchcancel.zoom",te).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}T.transform=function(w,B,$,F){var q=w.selection?w.selection():w;q.property("__zoom",ti),w!==q?D(w,B,$,F):q.interrupt().each(function(){O(this,arguments).event(F).start().zoom(null,typeof B=="function"?B.apply(this,arguments):B).end()})},T.scaleBy=function(w,B,$,F){T.scaleTo(w,function(){var q=this.__zoom.k,Q=typeof B=="function"?B.apply(this,arguments):B;return q*Q},$,F)},T.scaleTo=function(w,B,$,F){T.transform(w,function(){var q=t.apply(this,arguments),Q=this.__zoom,ee=$==null?C(q):typeof $=="function"?$.apply(this,arguments):$,se=Q.invert(ee),le=typeof B=="function"?B.apply(this,arguments):B;return n(x(z(Q,le),ee,se),q,a)},$,F)},T.translateBy=function(w,B,$,F){T.transform(w,function(){return n(this.__zoom.translate(typeof B=="function"?B.apply(this,arguments):B,typeof $=="function"?$.apply(this,arguments):$),t.apply(this,arguments),a)},null,F)},T.translateTo=function(w,B,$,F,q){T.transform(w,function(){var Q=t.apply(this,arguments),ee=this.__zoom,se=F==null?C(Q):typeof F=="function"?F.apply(this,arguments):F;return n(an.translate(se[0],se[1]).scale(ee.k).translate(typeof B=="function"?-B.apply(this,arguments):-B,typeof $=="function"?-$.apply(this,arguments):-$),Q,a)},F,q)};function z(w,B){return B=Math.max(i[0],Math.min(i[1],B)),B===w.k?w:new yt(B,w.x,w.y)}function x(w,B,$){var F=B[0]-$[0]*w.k,q=B[1]-$[1]*w.k;return F===w.x&&q===w.y?w:new yt(w.k,F,q)}function C(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function D(w,B,$,F){w.on("start.zoom",function(){O(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).event(F).end()}).tween("zoom",function(){var q=this,Q=arguments,ee=O(q,Q).event(F),se=t.apply(q,Q),le=$==null?C(se):typeof $=="function"?$.apply(q,Q):$,ye=Math.max(se[1][0]-se[0][0],se[1][1]-se[0][1]),xe=q.__zoom,oe=typeof B=="function"?B.apply(q,Q):B,P=l(xe.invert(le).concat(ye/xe.k),oe.invert(le).concat(ye/oe.k));return function(G){if(G===1)G=oe;else{var ve=P(G),we=ye/ve[2];G=new yt(we,le[0]-ve[0]*we,le[1]-ve[1]*we)}ee.zoom(null,G)}})}function O(w,B,$){return!$&&w.__zooming||new H(w,B)}function H(w,B){this.that=w,this.args=B,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,B),this.taps=0}H.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,B){return this.mouse&&w!=="mouse"&&(this.mouse[1]=B.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=B.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=B.invert(this.touch1[0])),this.that.__zoom=B,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var B=ot(this.that).datum();u.call(w,this.that,new Qd(w,{sourceEvent:this.sourceEvent,target:T,transform:this.that.__zoom,dispatch:u}),B)}};function Y(w,...B){if(!e.apply(this,arguments))return;var $=O(this,B).event(w),F=this.__zoom,q=Math.max(i[0],Math.min(i[1],F.k*Math.pow(2,o.apply(this,arguments)))),Q=lt(w);if($.wheel)($.mouse[0][0]!==Q[0]||$.mouse[0][1]!==Q[1])&&($.mouse[1]=F.invert($.mouse[0]=Q)),clearTimeout($.wheel);else{if(F.k===q)return;$.mouse=[Q,F.invert(Q)],Qn(this),$.start()}fn(w),$.wheel=setTimeout(ee,M),$.zoom("mouse",n(x(z(F,q),$.mouse[0],$.mouse[1]),$.extent,a));function ee(){$.wheel=null,$.end()}}function I(w,...B){if(v||!e.apply(this,arguments))return;var $=w.currentTarget,F=O(this,B,!0).event(w),q=ot(w.view).on("mousemove.zoom",le,!0).on("mouseup.zoom",ye,!0),Q=lt(w,$),ee=w.clientX,se=w.clientY;Ki(w.view),Oo(w),F.mouse=[Q,this.__zoom.invert(Q)],Qn(this),F.start();function le(xe){if(fn(xe),!F.moved){var oe=xe.clientX-ee,P=xe.clientY-se;F.moved=oe*oe+P*P>E}F.event(xe).zoom("mouse",n(x(F.that.__zoom,F.mouse[0]=lt(xe,$),F.mouse[1]),F.extent,a))}function ye(xe){q.on("mousemove.zoom mouseup.zoom",null),qi(xe.view,F.moved),fn(xe),F.event(xe).end()}}function U(w,...B){if(e.apply(this,arguments)){var $=this.__zoom,F=lt(w.changedTouches?w.changedTouches[0]:w,this),q=$.invert(F),Q=$.k*(w.shiftKey?.5:2),ee=n(x(z($,Q),F,q),t.apply(this,B),a);fn(w),s>0?ot(this).transition().duration(s).call(D,ee,F,w):ot(this).call(T.transform,ee,F,w)}}function K(w,...B){if(e.apply(this,arguments)){var $=w.touches,F=$.length,q=O(this,B,w.changedTouches.length===F).event(w),Q,ee,se,le;for(Oo(w),ee=0;ee<F;++ee)se=$[ee],le=lt(se,this),le=[le,this.__zoom.invert(le),se.identifier],q.touch0?!q.touch1&&q.touch0[2]!==le[2]&&(q.touch1=le,q.taps=0):(q.touch0=le,Q=!0,q.taps=1+!!d);d&&(d=clearTimeout(d)),Q&&(q.taps<2&&(p=le[0],d=setTimeout(function(){d=null},m)),Qn(this),q.start())}}function _(w,...B){if(this.__zooming){var $=O(this,B).event(w),F=w.changedTouches,q=F.length,Q,ee,se,le;for(fn(w),Q=0;Q<q;++Q)ee=F[Q],se=lt(ee,this),$.touch0&&$.touch0[2]===ee.identifier?$.touch0[0]=se:$.touch1&&$.touch1[2]===ee.identifier&&($.touch1[0]=se);if(ee=$.that.__zoom,$.touch1){var ye=$.touch0[0],xe=$.touch0[1],oe=$.touch1[0],P=$.touch1[1],G=(G=oe[0]-ye[0])*G+(G=oe[1]-ye[1])*G,ve=(ve=P[0]-xe[0])*ve+(ve=P[1]-xe[1])*ve;ee=z(ee,Math.sqrt(G/ve)),se=[(ye[0]+oe[0])/2,(ye[1]+oe[1])/2],le=[(xe[0]+P[0])/2,(xe[1]+P[1])/2]}else if($.touch0)se=$.touch0[0],le=$.touch0[1];else return;$.zoom("touch",n(x(ee,se,le),$.extent,a))}}function te(w,...B){if(this.__zooming){var $=O(this,B).event(w),F=w.changedTouches,q=F.length,Q,ee;for(Oo(w),v&&clearTimeout(v),v=setTimeout(function(){v=null},m),Q=0;Q<q;++Q)ee=F[Q],$.touch0&&$.touch0[2]===ee.identifier?delete $.touch0:$.touch1&&$.touch1[2]===ee.identifier&&delete $.touch1;if($.touch1&&!$.touch0&&($.touch0=$.touch1,delete $.touch1),$.touch0)$.touch0[1]=this.__zoom.invert($.touch0[0]);else if($.end(),$.taps===2&&(ee=lt(ee,this),Math.hypot(p[0]-ee[0],p[1]-ee[1])<N)){var se=ot(this).on("dblclick.zoom");se&&se.apply(this,arguments)}}}return T.wheelDelta=function(w){return arguments.length?(o=typeof w=="function"?w:Vn(+w),T):o},T.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Vn(!!w),T):e},T.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:Vn(!!w),T):r},T.extent=function(w){return arguments.length?(t=typeof w=="function"?w:Vn([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),T):t},T.scaleExtent=function(w){return arguments.length?(i[0]=+w[0],i[1]=+w[1],T):[i[0],i[1]]},T.translateExtent=function(w){return arguments.length?(a[0][0]=+w[0][0],a[1][0]=+w[1][0],a[0][1]=+w[0][1],a[1][1]=+w[1][1],T):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},T.constrain=function(w){return arguments.length?(n=w,T):n},T.duration=function(w){return arguments.length?(s=+w,T):s},T.interpolate=function(w){return arguments.length?(l=w,T):l},T.on=function(){var w=u.on.apply(u,arguments);return w===u?T:w},T.clickDistance=function(w){return arguments.length?(E=(w=+w)*w,T):Math.sqrt(E)},T.tapDistance=function(w){return arguments.length?(N=+w,T):N},T}var fe=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(fe||{}),hr=(e=>(e.Partial="partial",e.Full="full",e))(hr||{}),Ot=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Ot||{}),Dt=(e=>(e.Strict="strict",e.Loose="loose",e))(Dt||{}),Qo=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Qo||{}),yn=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(yn||{}),da=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(da||{});const ac=["INPUT","SELECT","TEXTAREA"],sc=typeof document<"u"?document:null;function er(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,r=typeof o?.hasAttribute=="function"?o.hasAttribute("contenteditable"):!1,i=typeof o?.closest=="function"?o.closest(".nokey"):null;return ac.includes(o?.nodeName)||r||!!i}function lc(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function ni(e,t,n,o){const r=t.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(a=>a.trim().toLowerCase());if(r.length===1)return e.toLowerCase()===t.toLowerCase();o||n.add(e.toLowerCase());const i=r.every((a,s)=>n.has(a)&&Array.from(n.values())[s]===r[s]);return o&&n.delete(e.toLowerCase()),i}function uc(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=dc(n.code,e);return Array.isArray(e)?e.some(r=>ni(n[o],r,t,n.type==="keyup")):ni(n[o],e,t,n.type==="keyup")}}function dc(e,t){return t.includes(e)?"code":"key"}function wn(e,t){const n=de(()=>Ie(t?.target)??sc),o=Ct(Ie(e)===!0);let r=!1;const i=new Set;let a=l(Ie(e));Te(()=>Ie(e),(u,d)=>{typeof d=="boolean"&&typeof u!="boolean"&&s(),a=l(u)},{immediate:!0}),Ai(["blur","contextmenu"],s),Br((...u)=>a(...u),u=>{var d,p;const v=Ie(t?.actInsideInputWithModifier)??!0,m=Ie(t?.preventDefault)??!1;if(r=lc(u),(!r||r&&!v)&&er(u))return;const E=((p=(d=u.composedPath)==null?void 0:d.call(u))==null?void 0:p[0])||u.target,N=E?.nodeName==="BUTTON"||E?.nodeName==="A";!m&&(r||!N)&&u.preventDefault(),o.value=!0},{eventName:"keydown",target:n}),Br((...u)=>a(...u),u=>{const d=Ie(t?.actInsideInputWithModifier)??!0;if(o.value){if((!r||r&&!d)&&er(u))return;r=!1,o.value=!1}},{eventName:"keyup",target:n});function s(){r=!1,i.clear(),o.value=Ie(e)===!0}function l(u){return u===null?(s(),()=>!1):typeof u=="boolean"?(s(),o.value=u,()=>!1):Array.isArray(u)||typeof u=="string"?uc(u,i):u}return o}const ca="vue-flow__node-desc",fa="vue-flow__edge-desc",cc="vue-flow__aria-live",pa=["Enter"," ","Escape"],tn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function so(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function lo(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function mo(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Rt(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function ha(e,t){return{x:Rt(e.x,t[0][0],t[1][0]),y:Rt(e.y,t[0][1],t[1][1])}}function oi(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function Mt(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function Ht(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!Mt(e)}function gn(e){return Ht(e)&&"computedPosition"in e}function Rn(e){return!Number.isNaN(e)&&Number.isFinite(e)}function fc(e){return Rn(e.width)&&Rn(e.height)&&Rn(e.x)&&Rn(e.y)}function pc(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:Zn({width:0,height:0}),computedPosition:Zn({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Xe(e.data)?e.data:{},events:Zn(Xe(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function ga(e,t,n){var o,r;const i={id:e.id.toString(),type:e.type??t?.type??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(r=e.targetHandle)==null?void 0:r.toString(),updatable:e.updatable??n?.updatable,selectable:e.selectable??n?.selectable,focusable:e.focusable??n?.focusable,data:Xe(e.data)?e.data:{},events:Zn(Xe(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??n?.interactionWidth,...n??{}};return Object.assign(t??i,e,{id:e.id.toString()})}function va(e,t,n,o){const r=typeof e=="string"?e:e.id,i=new Set,a=o==="source"?"target":"source";for(const s of n)s[a]===r&&i.add(s[o]);return t.filter(s=>i.has(s.id))}function hc(...e){if(e.length===3){const[i,a,s]=e;return va(i,a,s,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>Mt(i)&&i.source===o).map(i=>n.find(a=>Ht(a)&&a.id===i.target))}function gc(...e){if(e.length===3){const[i,a,s]=e;return va(i,a,s,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>Mt(i)&&i.target===o).map(i=>n.find(a=>Ht(a)&&a.id===i.source))}function ma({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function vc(e,t){return t.some(n=>Mt(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function En({x:e,y:t},{x:n,y:o,zoom:r}){return{x:e*r+n,y:t*r+o}}function Nn({x:e,y:t},{x:n,y:o,zoom:r},i=!1,a=[1,1]){const s={x:(e-n)/r,y:(t-o)/r};return i?yo(s,a):s}function mc(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function ya({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function yc({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function wa(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=mc(t,ya({...o.computedPosition,...o.dimensions}))}return yc(t)}function ba(e,t,n={x:0,y:0,zoom:1},o=!1,r=!1){const i={...Nn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},a=[];for(const s of e){const{dimensions:l,selectable:u=!0,hidden:d=!1}=s,p=l.width??s.width??null,v=l.height??s.height??null;if(r&&!u||d)continue;const m=lo(i,so(s)),M=p===null||v===null,E=o&&m>0,N=(p??0)*(v??0);(M||E||m>=N||s.dragging)&&a.push(s)}return a}function xa(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function qt(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return Dn(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function wc(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=qt(e,n),r=qt(e,t);return{top:o,right:r,bottom:o,left:r,x:r*2,y:o*2}}if(typeof e=="object"){const o=qt(e.top??e.y??0,n),r=qt(e.bottom??e.y??0,n),i=qt(e.left??e.x??0,t),a=qt(e.right??e.x??0,t);return{top:o,right:a,bottom:r,left:i,x:i+a,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function bc(e,t,n,o,r,i){const{x:a,y:s}=En(e,{x:t,y:n,zoom:o}),{x:l,y:u}=En({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:o}),d=r-l,p=i-u;return{left:Math.floor(a),top:Math.floor(s),right:Math.floor(d),bottom:Math.floor(p)}}function ri(e,t,n,o,r,i=.1){const a=wc(i,t,n),s=(t-a.x)/e.width,l=(n-a.y)/e.height,u=Math.min(s,l),d=Rt(u,o,r),p=e.x+e.width/2,v=e.y+e.height/2,m=t/2-p*d,M=n/2-v*d,E=bc(e,m,M,d,t,n),N={left:Math.min(E.left-a.left,0),top:Math.min(E.top-a.top,0),right:Math.min(E.right-a.right,0),bottom:Math.min(E.bottom-a.bottom,0)};return{x:m-N.left+N.right,y:M-N.top+N.bottom,zoom:d}}function xc(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function _a(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:_a(n,t):!1}function In(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function ii(e){const t=e.ctrlKey&&uo()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t}function ai(e,t,n){return e<t?Rt(Math.abs(e-t),1,t)/t:e>n?-Rt(Math.abs(e-n),1,t)/t:0}function ka(e,t,n=15,o=40){const r=ai(e.x,o,t.width-o)*n,i=ai(e.y,o,t.height-o)*n;return[r,i]}function Ao(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let r={};if(typeof t.style=="function"?r={...t.style(t)}:t.style&&(r={...t.style}),r.width=r.width??`${t.dimensions.width}px`,r.height=r.height??`${t.dimensions.height}px`,n>0)if(typeof r.width=="string"){const i=Number(r.width.replace("px",""));r.width=`${i+n}px`}else r.width+=n;if(o>0)if(typeof r.height=="string"){const i=Number(r.height.replace("px",""));r.height=`${i+o}px`}else r.height+=o;if(e.position.x<0){const i=Math.abs(e.position.x);if(t.position.x=t.position.x-i,typeof r.width=="string"){const a=Number(r.width.replace("px",""));r.width=`${a+i}px`}else r.width+=i;e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);if(t.position.y=t.position.y-i,typeof r.height=="string"){const a=Number(r.height.replace("px",""));r.height=`${a+i}px`}else r.height+=i;e.position.y=0}t.dimensions.width=Number(r.width.toString().replace("px","")),t.dimensions.height=Number(r.height.toString().replace("px","")),typeof t.style=="function"?t.style=i=>{const a=t.style;return{...a(i),...r}}:t.style={...t.style,...r}}}}function si(e,t){var n,o;const r=e.filter(a=>a.type==="add"||a.type==="remove");for(const a of r)if(a.type==="add")t.findIndex(l=>l.id===a.item.id)===-1&&t.push(a.item);else if(a.type==="remove"){const s=t.findIndex(l=>l.id===a.id);s!==-1&&t.splice(s,1)}const i=t.map(a=>a.id);for(const a of t)for(const s of e)if(s.id===a.id)switch(s.type){case"select":a.selected=s.selected;break;case"position":if(gn(a)&&(typeof s.position<"u"&&(a.position=s.position),typeof s.dragging<"u"&&(a.dragging=s.dragging),a.expandParent&&a.parentNode)){const l=t[i.indexOf(a.parentNode)];l&&gn(l)&&Ao(a,l)}break;case"dimensions":if(gn(a)&&(typeof s.dimensions<"u"&&(a.dimensions=s.dimensions),typeof s.updateStyle<"u"&&s.updateStyle&&(a.style={...a.style||{},width:`${(n=s.dimensions)==null?void 0:n.width}px`,height:`${(o=s.dimensions)==null?void 0:o.height}px`}),typeof s.resizing<"u"&&(a.resizing=s.resizing),a.expandParent&&a.parentNode)){const l=t[i.indexOf(a.parentNode)];l&&gn(l)&&(!!l.dimensions.width&&!!l.dimensions.height?Ao(a,l):wt(()=>{Ao(a,l)}))}break}return t}function It(e,t){return{id:e,type:"select",selected:t}}function li(e){return{item:e,type:"add"}}function ui(e){return{id:e,type:"remove"}}function di(e,t,n,o,r){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:r||null,type:"remove"}}function $t(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const a=t.has(r);!(i.selected===void 0&&!a)&&i.selected!==a&&(n&&(i.selected=a),o.push(It(i.id,a)))}return o}const ci=()=>{};function ne(e){const t=new Set;let n=ci,o=()=>!1;const r=()=>t.size>0||o(),i=v=>{n=v},a=()=>{n=ci},s=v=>{o=v},l=()=>{o=()=>!1},u=v=>{t.delete(v)};return{on:v=>{t.add(v);const m=()=>u(v);return bn(m),{off:m}},off:u,trigger:v=>{const m=[n];return r()?m.push(...t):e&&m.push(e),Promise.allSettled(m.map(M=>M(v)))},hasListeners:r,listeners:t,setEmitter:i,removeEmitter:a,setHasEmitListeners:s,removeHasEmitListeners:l}}function fi(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function _c(e,t,n,o){var r,i;const a=new Map;for(const[s,l]of e)(l.selected||l.id===o)&&(!l.parentNode||!_a(l,e))&&(l.draggable||t&&typeof l.draggable>"u")&&e.get(s)&&a.set(s,{id:l.id,position:l.position||{x:0,y:0},distance:{x:n.x-((r=l.computedPosition)==null?void 0:r.x)||0,y:n.y-((i=l.computedPosition)==null?void 0:i.y)||0},from:{x:l.computedPosition.x,y:l.computedPosition.y},extent:l.extent,parentNode:l.parentNode,dimensions:{...l.dimensions},expandParent:l.expandParent});return Array.from(a.values())}function Wo({id:e,dragItems:t,findNode:n}){const o=[];for(const r of t){const i=n(r.id);i&&o.push(i)}return[e?o.find(r=>r.id===e):o[0],o]}function Sa(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function kc(e,t,n){const[o,r,i,a]=typeof e!="string"?Sa(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+a,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-r,n.computedPosition.y+n.dimensions.height-i]]:!1}function Sc(e,t,n,o){let r=e.extent||n;if((r==="parent"||!Array.isArray(r)&&r?.range==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const i=kc(r,e,o);i&&(r=i)}else t(new Ze(Fe.NODE_EXTENT_INVALID,e.id)),r=n;else if(Array.isArray(r)){const i=o?.computedPosition.x||0,a=o?.computedPosition.y||0;r=[[r[0][0]+i,r[0][1]+a],[r[1][0]+i,r[1][1]+a]]}else if(r!=="parent"&&r?.range&&Array.isArray(r.range)){const[i,a,s,l]=Sa(r.padding),u=o?.computedPosition.x||0,d=o?.computedPosition.y||0;r=[[r.range[0][0]+u+l,r.range[0][1]+d+i],[r.range[1][0]+u-a,r.range[1][1]+d-s]]}return r==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:r}function Ec({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function gr(e,t,n,o,r){const i=Ec(e.dimensions,Sc(e,n,o,r)),a=ha(t,i);return{position:{x:a.x-(r?.computedPosition.x||0),y:a.y-(r?.computedPosition.y||0)},computedPosition:a}}function sn(e,t,n=fe.Left,o=!1){const r=(t?.x??0)+e.computedPosition.x,i=(t?.y??0)+e.computedPosition.y,{width:a,height:s}=t??Cc(e);if(o)return{x:r+a/2,y:i+s/2};switch(t?.position??n){case fe.Top:return{x:r+a/2,y:i};case fe.Right:return{x:r+a,y:i+s/2};case fe.Bottom:return{x:r+a/2,y:i+s};case fe.Left:return{x:r,y:i+s/2}}}function pi(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Nc({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:a,height:s,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=ya({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:a/l.zoom,height:s/l.zoom}),p=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),v=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(p*v)>0}function Ic(e,t,n=!1){const o=typeof e.zIndex=="number";let r=o?e.zIndex:0;const i=t(e.source),a=t(e.target);return!i||!a?0:(n&&(r=o?e.zIndex:Math.max(i.computedPosition.z||0,a.computedPosition.z||0)),r)}var Fe=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Fe||{});const hi={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class Ze extends Error{constructor(t,...n){var o;super((o=hi[t])==null?void 0:o.call(hi,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function vr(e){return"clientX"in e}function $c(e){return"sourceEvent"in e}function dt(e,t){const n=vr(e);let o,r;return n?(o=e.clientX,r=e.clientY):"touches"in e&&e.touches.length>0?(o=e.touches[0].clientX,r=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(o=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY):(o=0,r=0),{x:o-(t?.left??0),y:r-(t?.top??0)}}const uo=()=>{var e;return typeof navigator<"u"&&((e=navigator?.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Cc(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function yo(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const Dc=()=>!0;function Bo(e){e?.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function Mc(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())lo(r,so(i))>0&&o.push(i);return o}const Tc=250;function Pc(e,t,n,o){var r,i;let a=[],s=Number.POSITIVE_INFINITY;const l=Mc(e,n,t+Tc);for(const u of l){const d=[...((r=u.handleBounds)==null?void 0:r.source)??[],...((i=u.handleBounds)==null?void 0:i.target)??[]];for(const p of d){if(o.nodeId===p.nodeId&&o.type===p.type&&o.id===p.id)continue;const{x:v,y:m}=sn(u,p,p.position,!0),M=Math.sqrt((v-e.x)**2+(m-e.y)**2);M>t||(M<s?(a=[{...p,x:v,y:m}],s=M):M===s&&a.push({...p,x:v,y:m}))}}if(!a.length)return null;if(a.length>1){const u=o.type==="source"?"target":"source";return a.find(d=>d.type===u)??a[0]}return a[0]}function gi(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:a,lib:s,flowId:l,isValidConnection:u=Dc},d,p,v,m){const M=i==="target",E=t?a.querySelector(`.${s}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:N,y:T}=dt(e),z=a.elementFromPoint(N,T),x=z?.classList.contains(`${s}-flow__handle`)?z:E,C={handleDomNode:x,isValid:!1,connection:null,toHandle:null};if(x){const D=Ea(void 0,x),O=x.getAttribute("data-nodeid"),H=x.getAttribute("data-handleid"),Y=x.classList.contains("connectable"),I=x.classList.contains("connectableend");if(!O||!D)return C;const U={source:M?O:o,sourceHandle:M?H:r,target:M?o:O,targetHandle:M?r:H};C.connection=U;const _=Y&&I&&(n===Dt.Strict?M&&D==="source"||!M&&D==="target":O!==o||H!==r);C.isValid=_&&u(U,{nodes:p,edges:d,sourceNode:v(U.source),targetNode:v(U.target)}),C.toHandle=Na(O,D,H,m,n,!0)}return C}function Ea(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function zc(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Oc(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function Na(e,t,n,o,r,i=!1){var a,s,l;const u=o.get(e);if(!u)return null;const d=r===Dt.Strict?(a=u.handleBounds)==null?void 0:a[t]:[...((s=u.handleBounds)==null?void 0:s.source)??[],...((l=u.handleBounds)==null?void 0:l.target)??[]],p=(n?d?.find(v=>v.id===n):d?.[0])??null;return p&&i?{...p,...sn(u,p,p.position,!0)}:p}const tr={[fe.Left]:fe.Right,[fe.Right]:fe.Left,[fe.Top]:fe.Bottom,[fe.Bottom]:fe.Top},Ac=["production","prod"];function Dn(e,...t){Ia()&&console.warn(`[Vue Flow]: ${e}`,...t)}function Ia(){return!Ac.includes("production")}function vi(e,t,n,o,r){const i=t.querySelectorAll(`.vue-flow__handle.${e}`);return i?.length?Array.from(i).map(a=>{const s=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),type:e,nodeId:r,position:a.getAttribute("data-handlepos"),x:(s.left-n.left)/o,y:(s.top-n.top)/o,...mo(a)}}):null}function nr(e,t,n,o,r,i=!1,a){r.value=!1,e.selected?(i||e.selected&&t)&&(o([e]),wt(()=>{a.blur()})):n([e])}function Xe(e){return typeof g(e)<"u"}function Wc(e,t,n,o){if(!e||!e.source||!e.target)return n(new Ze(Fe.EDGE_INVALID,e?.id??"[ID UNKNOWN]")),!1;let r;return Mt(e)?r=e:r={...e,id:ma(e)},r=ga(r,void 0,o),vc(r,t)?!1:r}function Bc(e,t,n,o,r){if(!t.source||!t.target)return r(new Ze(Fe.EDGE_INVALID,e.id)),!1;if(!n)return r(new Ze(Fe.EDGE_NOT_FOUND,e.id)),!1;const{id:i,...a}=e;return{...a,id:o?ma(t):i,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function mi(e,t,n){const o={},r=[];for(let i=0;i<e.length;++i){const a=e[i];if(!Ht(a)){n(new Ze(Fe.NODE_INVALID,a?.id)||`[ID UNKNOWN|INDEX ${i}]`);continue}const s=pc(a,t(a.id),a.parentNode);a.parentNode&&(o[a.parentNode]=!0),r[i]=s}for(const i of r){const a=t(i.parentNode)||r.find(s=>s.id===i.parentNode);i.parentNode&&!a&&n(new Ze(Fe.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||o[i.id])&&(o[i.id]&&(i.isParent=!0),a&&(a.isParent=!0))}return r}function yi(e,t,n,o,r,i){let a=r;const s=o.get(a)||new Map;o.set(a,s.set(n,t)),a=`${r}-${e}`;const l=o.get(a)||new Map;if(o.set(a,l.set(n,t)),i){a=`${r}-${e}-${i}`;const u=o.get(a)||new Map;o.set(a,u.set(n,t))}}function Ho(e,t,n){e.clear();for(const o of n){const{source:r,target:i,sourceHandle:a=null,targetHandle:s=null}=o,l={edgeId:o.id,source:r,target:i,sourceHandle:a,targetHandle:s},u=`${r}-${a}--${i}-${s}`,d=`${i}-${s}--${r}-${a}`;yi("source",l,d,e,r,a),yi("target",l,u,e,i,s)}}function wi(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Lo(e,t,n,o,r,i,a,s){const l=[];for(const u of e){const d=Mt(u)?u:Wc(u,s,r,i);if(!d)continue;const p=n(d.source),v=n(d.target);if(!p||!v){r(new Ze(Fe.EDGE_SOURCE_TARGET_MISSING,d.id,d.source,d.target));continue}if(!p){r(new Ze(Fe.EDGE_SOURCE_MISSING,d.id,d.source));continue}if(!v){r(new Ze(Fe.EDGE_TARGET_MISSING,d.id,d.target));continue}if(t&&!t(d,{edges:s,nodes:a,sourceNode:p,targetNode:v})){r(new Ze(Fe.EDGE_INVALID,d.id));continue}const m=o(d.id);l.push({...ga(d,m,i),sourceNode:p,targetNode:v})}return l}const bi=Symbol("vueFlow"),$a=Symbol("nodeId"),Ca=Symbol("nodeRef"),Hc=Symbol("edgeId"),Lc=Symbol("edgeRef"),wo=Symbol("slots");function Da(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:r,nodeLookup:i,nodeExtent:a,nodeDragThreshold:s,viewport:l,autoPanOnNodeDrag:u,autoPanSpeed:d,nodesDraggable:p,panBy:v,findNode:m,multiSelectionActive:M,nodesSelectionActive:E,selectNodesOnDrag:N,removeSelectedElements:T,addSelectedNodes:z,updateNodePositions:x,emits:C}=He(),{onStart:D,onDrag:O,onStop:H,onClick:Y,el:I,disabled:U,id:K,selectable:_,dragHandle:te}=e,w=Ct(!1);let B=[],$,F=null,q={x:void 0,y:void 0},Q={x:0,y:0},ee=null,se=!1,le=!1,ye=0,xe=!1;const oe=Yc(),P=({x:ge,y:ke})=>{q={x:ge,y:ke};let b=!1;if(B=B.map(h=>{const k={x:ge-h.distance.x,y:ke-h.distance.y},{computedPosition:y}=gr(h,n.value?yo(k,o.value):k,C.error,a.value,h.parentNode?m(h.parentNode):void 0);return b=b||h.position.x!==y.x||h.position.y!==y.y,h.position=y,h}),le=le||b,!!b&&(x(B,!0,!0),w.value=!0,ee)){const[h,k]=Wo({id:K,dragItems:B,findNode:m});O({event:ee,node:h,nodes:k})}},G=()=>{if(!F)return;const[ge,ke]=ka(Q,F,d.value);if(ge!==0||ke!==0){const b={x:(q.x??0)-ge/l.value.zoom,y:(q.y??0)-ke/l.value.zoom};v({x:ge,y:ke})&&P(b)}ye=requestAnimationFrame(G)},ve=(ge,ke)=>{se=!0;const b=m(K);!N.value&&!M.value&&b&&(b.selected||T()),b&&Ie(_)&&N.value&&nr(b,M.value,z,T,E,!1,ke);const h=oe(ge.sourceEvent);if(q=h,B=_c(i.value,p.value,h,K),B.length){const[k,y]=Wo({id:K,dragItems:B,findNode:m});D({event:ge.sourceEvent,node:k,nodes:y})}},we=(ge,ke)=>{var b;ge.sourceEvent.type==="touchmove"&&ge.sourceEvent.touches.length>1||(le=!1,s.value===0&&ve(ge,ke),q=oe(ge.sourceEvent),F=((b=t.value)==null?void 0:b.getBoundingClientRect())||null,Q=dt(ge.sourceEvent,F))},_e=(ge,ke)=>{const b=oe(ge.sourceEvent);if(!xe&&se&&u.value&&(xe=!0,G()),!se){const h=b.xSnapped-(q.x??0),k=b.ySnapped-(q.y??0);Math.sqrt(h*h+k*k)>s.value&&ve(ge,ke)}(q.x!==b.xSnapped||q.y!==b.ySnapped)&&B.length&&se&&(ee=ge.sourceEvent,Q=dt(ge.sourceEvent,F),P(b))},Me=ge=>{let ke=!1;if(!se&&!w.value&&!M.value){const b=ge.sourceEvent,h=oe(b),k=h.xSnapped-(q.x??0),y=h.ySnapped-(q.y??0),A=Math.sqrt(k*k+y*y);A!==0&&A<=s.value&&(Y?.(b),ke=!0)}if(B.length&&!ke){le&&(x(B,!1,!1),le=!1);const[b,h]=Wo({id:K,dragItems:B,findNode:m});H({event:ge.sourceEvent,node:b,nodes:h})}B=[],w.value=!1,xe=!1,se=!1,q={x:void 0,y:void 0},cancelAnimationFrame(ye)};return Te([()=>Ie(U),I],([ge,ke],b,h)=>{if(ke){const k=ot(ke);ge||($=fu().on("start",y=>we(y,ke)).on("drag",y=>_e(y,ke)).on("end",y=>Me(y)).filter(y=>{const A=y.target,ae=Ie(te);return!y.button&&(!r.value||!fi(A,`.${r.value}`,ke)&&(!ae||fi(A,ae,ke)))}),k.call($)),h(()=>{k.on(".drag",null),$&&($.on("start",null),$.on("drag",null),$.on("end",null))})}}),w}function Vc(){return{doubleClick:ne(),click:ne(),mouseEnter:ne(),mouseMove:ne(),mouseLeave:ne(),contextMenu:ne(),updateStart:ne(),update:ne(),updateEnd:ne()}}function Rc(e,t){const n=Vc();return n.doubleClick.on(o=>{var r,i;t.edgeDoubleClick(o),(i=(r=e.events)==null?void 0:r.doubleClick)==null||i.call(r,o)}),n.click.on(o=>{var r,i;t.edgeClick(o),(i=(r=e.events)==null?void 0:r.click)==null||i.call(r,o)}),n.mouseEnter.on(o=>{var r,i;t.edgeMouseEnter(o),(i=(r=e.events)==null?void 0:r.mouseEnter)==null||i.call(r,o)}),n.mouseMove.on(o=>{var r,i;t.edgeMouseMove(o),(i=(r=e.events)==null?void 0:r.mouseMove)==null||i.call(r,o)}),n.mouseLeave.on(o=>{var r,i;t.edgeMouseLeave(o),(i=(r=e.events)==null?void 0:r.mouseLeave)==null||i.call(r,o)}),n.contextMenu.on(o=>{var r,i;t.edgeContextMenu(o),(i=(r=e.events)==null?void 0:r.contextMenu)==null||i.call(r,o)}),n.updateStart.on(o=>{var r,i;t.edgeUpdateStart(o),(i=(r=e.events)==null?void 0:r.updateStart)==null||i.call(r,o)}),n.update.on(o=>{var r,i;t.edgeUpdate(o),(i=(r=e.events)==null?void 0:r.update)==null||i.call(r,o)}),n.updateEnd.on(o=>{var r,i;t.edgeUpdateEnd(o),(i=(r=e.events)==null?void 0:r.updateEnd)==null||i.call(r,o)}),Object.entries(n).reduce((o,[r,i])=>(o.emit[r]=i.trigger,o.on[r]=i.on,o),{emit:{},on:{}})}function Yc(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:o}=He();return r=>{var i;const a=((i=o.value)==null?void 0:i.getBoundingClientRect())??{left:0,top:0},s=$c(r)?r.sourceEvent:r,{x:l,y:u}=dt(s,a),d=Nn({x:l,y:u},e.value),{x:p,y:v}=n.value?yo(d,t.value):d;return{xSnapped:p,ySnapped:v,...d}}}function Yn(){return!0}function Ma({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:r,onEdgeUpdate:i,onEdgeUpdateEnd:a}){const{id:s,vueFlowRef:l,connectionMode:u,connectionRadius:d,connectOnClick:p,connectionClickStartHandle:v,nodesConnectable:m,autoPanOnConnect:M,autoPanSpeed:E,findNode:N,panBy:T,startConnection:z,updateConnection:x,endConnection:C,emits:D,viewport:O,edges:H,nodes:Y,isValidConnection:I,nodeLookup:U}=He();let K=null,_=!1,te=null;function w($){var F;const q=Ie(n)==="target",Q=vr($),ee=oi($.target),se=$.currentTarget;if(se&&(Q&&$.button===0||!Q)){let le=function(ce){b=dt(ce,Me),P=Pc(Nn(b,O.value,!1,[1,1]),d.value,U.value,y),h||(k(),h=!0);const be=gi(ce,{handle:P,connectionMode:u.value,fromNodeId:Ie(t),fromHandleId:Ie(e),fromType:q?"target":"source",isValidConnection:oe,doc:ee,lib:"vue",flowId:s,nodeLookup:U.value},H.value,Y.value,N,U.value);te=be.handleDomNode,K=be.connection,_=Oc(!!P,be.isValid);const Ne={...ie,isValid:_,to:be.toHandle&&_?En({x:be.toHandle.x,y:be.toHandle.y},O.value):b,toHandle:be.toHandle,toPosition:_&&be.toHandle?be.toHandle.position:tr[y.position],toNode:be.toHandle?U.value.get(be.toHandle.nodeId):null};if(_&&P&&ie?.toHandle&&Ne.toHandle&&ie.toHandle.type===Ne.toHandle.type&&ie.toHandle.nodeId===Ne.toHandle.nodeId&&ie.toHandle.id===Ne.toHandle.id&&ie.to.x===Ne.to.x&&ie.to.y===Ne.to.y)return;const $e=P??be.toHandle;if(x($e&&_?En({x:$e.x,y:$e.y},O.value):b,$e,zc(!!$e,_)),ie=Ne,!P&&!_&&!te)return Bo(ke);K&&K.source!==K.target&&te&&(Bo(ke),ke=te,te.classList.add("connecting","vue-flow__handle-connecting"),te.classList.toggle("valid",!!_),te.classList.toggle("vue-flow__handle-valid",!!_))},ye=function(ce){"touches"in ce&&ce.touches.length>0||((P||te)&&K&&_&&(i?i(ce,K):D.connect(K)),D.connectEnd(ce),r&&a?.(ce),Bo(ke),cancelAnimationFrame(G),C(ce),h=!1,_=!1,K=null,te=null,ee.removeEventListener("mousemove",le),ee.removeEventListener("mouseup",ye),ee.removeEventListener("touchmove",le),ee.removeEventListener("touchend",ye))};const xe=N(Ie(t));let oe=Ie(o)||I.value||Yn;!oe&&xe&&(oe=(q?xe.isValidSourcePos:xe.isValidTargetPos)||Yn);let P,G=0;const{x:ve,y:we}=dt($),_e=Ea(Ie(r),se),Me=(F=l.value)==null?void 0:F.getBoundingClientRect();if(!Me||!_e)return;const ge=Na(Ie(t),_e,Ie(e),U.value,u.value);if(!ge)return;let ke,b=dt($,Me),h=!1;const k=()=>{if(!M.value)return;const[ce,be]=ka(b,Me,E.value);T({x:ce,y:be}),G=requestAnimationFrame(k)},y={...ge,nodeId:Ie(t),type:_e,position:ge.position},A=U.value.get(Ie(t)),re={inProgress:!0,isValid:null,from:sn(A,y,fe.Left,!0),fromHandle:y,fromPosition:y.position,fromNode:A,to:b,toHandle:null,toPosition:tr[y.position],toNode:null};z({nodeId:Ie(t),id:Ie(e),type:_e,position:se?.getAttribute("data-handlepos")||fe.Top,...b},{x:ve-Me.left,y:we-Me.top}),D.connectStart({event:$,nodeId:Ie(t),handleId:Ie(e),handleType:_e});let ie=re;ee.addEventListener("mousemove",le),ee.addEventListener("mouseup",ye),ee.addEventListener("touchmove",le),ee.addEventListener("touchend",ye)}}function B($){var F,q;if(!p.value)return;const Q=Ie(n)==="target";if(!v.value){D.clickConnectStart({event:$,nodeId:Ie(t),handleId:Ie(e)}),z({nodeId:Ie(t),type:Ie(n),id:Ie(e),position:fe.Top,...dt($)},void 0,!0);return}let ee=Ie(o)||I.value||Yn;const se=N(Ie(t));if(!ee&&se&&(ee=(Q?se.isValidSourcePos:se.isValidTargetPos)||Yn),se&&(typeof se.connectable>"u"?m.value:se.connectable)===!1)return;const le=oi($.target),ye=gi($,{handle:{nodeId:Ie(t),id:Ie(e),type:Ie(n),position:fe.Top,...dt($)},connectionMode:u.value,fromNodeId:v.value.nodeId,fromHandleId:v.value.id??null,fromType:v.value.type,isValidConnection:ee,doc:le,lib:"vue",flowId:s,nodeLookup:U.value},H.value,Y.value,N,U.value),xe=((F=ye.connection)==null?void 0:F.source)===((q=ye.connection)==null?void 0:q.target);ye.isValid&&ye.connection&&!xe&&D.connect(ye.connection),D.clickConnectEnd($),C($,!0)}return{handlePointerDown:w,handleClick:B}}function Xc(){return un($a,"")}function Ta(e){const t=e??Xc()??"",n=un(Ca,J(null)),{findNode:o,edges:r,emits:i}=He(),a=o(t);return a||i.error(new Ze(Fe.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:a,parentNode:de(()=>o(a.parentNode)),connectedEdges:de(()=>xa([a],r.value))}}function Fc(){return{doubleClick:ne(),click:ne(),mouseEnter:ne(),mouseMove:ne(),mouseLeave:ne(),contextMenu:ne(),dragStart:ne(),drag:ne(),dragStop:ne()}}function Gc(e,t){const n=Fc();return n.doubleClick.on(o=>{var r,i;t.nodeDoubleClick(o),(i=(r=e.events)==null?void 0:r.doubleClick)==null||i.call(r,o)}),n.click.on(o=>{var r,i;t.nodeClick(o),(i=(r=e.events)==null?void 0:r.click)==null||i.call(r,o)}),n.mouseEnter.on(o=>{var r,i;t.nodeMouseEnter(o),(i=(r=e.events)==null?void 0:r.mouseEnter)==null||i.call(r,o)}),n.mouseMove.on(o=>{var r,i;t.nodeMouseMove(o),(i=(r=e.events)==null?void 0:r.mouseMove)==null||i.call(r,o)}),n.mouseLeave.on(o=>{var r,i;t.nodeMouseLeave(o),(i=(r=e.events)==null?void 0:r.mouseLeave)==null||i.call(r,o)}),n.contextMenu.on(o=>{var r,i;t.nodeContextMenu(o),(i=(r=e.events)==null?void 0:r.contextMenu)==null||i.call(r,o)}),n.dragStart.on(o=>{var r,i;t.nodeDragStart(o),(i=(r=e.events)==null?void 0:r.dragStart)==null||i.call(r,o)}),n.drag.on(o=>{var r,i;t.nodeDrag(o),(i=(r=e.events)==null?void 0:r.drag)==null||i.call(r,o)}),n.dragStop.on(o=>{var r,i;t.nodeDragStop(o),(i=(r=e.events)==null?void 0:r.dragStop)==null||i.call(r,o)}),Object.entries(n).reduce((o,[r,i])=>(o.emit[r]=i.trigger,o.on[r]=i.on,o),{emit:{},on:{}})}function Pa(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:r,snapToGrid:i,nodesDraggable:a,emits:s}=He();return(l,u=!1)=>{const d=i.value?r.value[0]:5,p=i.value?r.value[1]:5,v=u?4:1,m=l.x*d*v,M=l.y*p*v,E=[];for(const N of e.value)if(N.draggable||a&&typeof N.draggable>"u"){const T={x:N.computedPosition.x+m,y:N.computedPosition.y+M},{position:z}=gr(N,T,s.error,t.value,N.parentNode?o(N.parentNode):void 0);E.push({id:N.id,position:z,from:N.position,distance:{x:l.x,y:l.y},dimensions:N.dimensions})}n(E,!0,!1)}}const Xn=.1,Uc=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function Nt(){return Dn("Viewport not initialized yet."),Promise.resolve(!1)}const Zc={zoomIn:Nt,zoomOut:Nt,zoomTo:Nt,fitView:Nt,setCenter:Nt,fitBounds:Nt,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:Nt,setTransform:Nt,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function Kc(e){function t(o,r){return new Promise(i=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(r?.interpolate==="linear"?mn:qn).scaleBy(Vo(e.d3Selection,r?.duration,r?.ease,()=>{i(!0)}),o):i(!1)})}function n(o,r,i,a){return new Promise(s=>{var l;const{x:u,y:d}=ha({x:-o,y:-r},e.translateExtent),p=an.translate(-u,-d).scale(i);e.d3Selection&&e.d3Zoom?(l=e.d3Zoom)==null||l.interpolate(a?.interpolate==="linear"?mn:qn).transform(Vo(e.d3Selection,a?.duration,a?.ease,()=>{s(!0)}),p):s(!1)})}return de(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:r=>t(1.2,r),zoomOut:r=>t(1/1.2,r),zoomTo:(r,i)=>new Promise(a=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(i?.interpolate==="linear"?mn:qn).scaleTo(Vo(e.d3Selection,i?.duration,i?.ease,()=>{a(!0)}),r):a(!1)}),setViewport:(r,i)=>n(r.x,r.y,r.zoom,i),setTransform:(r,i)=>n(r.x,r.y,r.zoom,i),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(r={padding:Xn,includeHiddenNodes:!1,duration:0})=>{var i,a;const s=[];for(const v of e.nodes)v.dimensions.width&&v.dimensions.height&&(r?.includeHiddenNodes||!v.hidden)&&(!((i=r.nodes)!=null&&i.length)||(a=r.nodes)!=null&&a.length&&r.nodes.includes(v.id))&&s.push(v);if(!s.length)return Promise.resolve(!1);const l=wa(s),{x:u,y:d,zoom:p}=ri(l,e.dimensions.width,e.dimensions.height,r.minZoom??e.minZoom,r.maxZoom??e.maxZoom,r.padding??Xn);return n(u,d,p,r)},setCenter:(r,i,a)=>{const s=typeof a?.zoom<"u"?a.zoom:e.maxZoom,l=e.dimensions.width/2-r*s,u=e.dimensions.height/2-i*s;return n(l,u,s,a)},fitBounds:(r,i={padding:Xn})=>{const{x:a,y:s,zoom:l}=ri(r,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,i.padding??Xn);return n(a,s,l,i)},project:r=>Nn(r,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:a}=e.vueFlowRef.getBoundingClientRect(),s={x:r.x-i,y:r.y-a};return Nn(s,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:a}=e.vueFlowRef.getBoundingClientRect(),s={x:r.x+i,y:r.y+a};return En(s,e.viewport)}return{x:0,y:0}}}:Zc)}function Vo(e,t=0,n=Uc,o=()=>{}){const r=typeof t=="number"&&t>0;return r||o(),r?e.transition().duration(t).ease(n).on("end",o):e}function qc(e,t,n){const o=Ii(!0);return o.run(()=>{const r=()=>{o.run(()=>{let E,N,T=!!(n.nodes.value.length||n.edges.value.length);E=Kt([e.modelValue,()=>{var z,x;return(x=(z=e.modelValue)==null?void 0:z.value)==null?void 0:x.length}],([z])=>{z&&Array.isArray(z)&&(N?.pause(),n.setElements(z),!N&&!T&&z.length?T=!0:N?.resume())}),N=Kt([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([z,x])=>{var C;(C=e.modelValue)!=null&&C.value&&Array.isArray(e.modelValue.value)&&(E?.pause(),e.modelValue.value=[...z,...x],wt(()=>{E?.resume()}))},{immediate:T}),Un(()=>{E?.stop(),N?.stop()})})},i=()=>{o.run(()=>{let E,N,T=!!n.nodes.value.length;E=Kt([e.nodes,()=>{var z,x;return(x=(z=e.nodes)==null?void 0:z.value)==null?void 0:x.length}],([z])=>{z&&Array.isArray(z)&&(N?.pause(),n.setNodes(z),!N&&!T&&z.length?T=!0:N?.resume())}),N=Kt([n.nodes,()=>n.nodes.value.length],([z])=>{var x;(x=e.nodes)!=null&&x.value&&Array.isArray(e.nodes.value)&&(E?.pause(),e.nodes.value=[...z],wt(()=>{E?.resume()}))},{immediate:T}),Un(()=>{E?.stop(),N?.stop()})})},a=()=>{o.run(()=>{let E,N,T=!!n.edges.value.length;E=Kt([e.edges,()=>{var z,x;return(x=(z=e.edges)==null?void 0:z.value)==null?void 0:x.length}],([z])=>{z&&Array.isArray(z)&&(N?.pause(),n.setEdges(z),!N&&!T&&z.length?T=!0:N?.resume())}),N=Kt([n.edges,()=>n.edges.value.length],([z])=>{var x;(x=e.edges)!=null&&x.value&&Array.isArray(e.edges.value)&&(E?.pause(),e.edges.value=[...z],wt(()=>{E?.resume()}))},{immediate:T}),Un(()=>{E?.stop(),N?.stop()})})},s=()=>{o.run(()=>{Te(()=>t.maxZoom,()=>{t.maxZoom&&Xe(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},l=()=>{o.run(()=>{Te(()=>t.minZoom,()=>{t.minZoom&&Xe(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{Te(()=>t.translateExtent,()=>{t.translateExtent&&Xe(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},d=()=>{o.run(()=>{Te(()=>t.nodeExtent,()=>{t.nodeExtent&&Xe(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},p=()=>{o.run(()=>{Te(()=>t.applyDefault,()=>{Xe(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},v=()=>{o.run(()=>{const E=async N=>{let T=N;typeof t.autoConnect=="function"&&(T=await t.autoConnect(N)),T!==!1&&n.addEdges([T])};Te(()=>t.autoConnect,()=>{Xe(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),Te(n.autoConnect,(N,T,z)=>{N?n.onConnect(E):n.hooks.value.connect.off(E),z(()=>{n.hooks.value.connect.off(E)})},{immediate:!0})})},m=()=>{const E=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const N of Object.keys(t)){const T=N;if(!E.includes(T)){const z=Be(()=>t[T]),x=n[T];ir(x)&&o.run(()=>{Te(z,C=>{Xe(C)&&(x.value=C)},{immediate:!0})})}}};r(),i(),a(),l(),s(),u(),d(),p(),v(),m()}),()=>o.stop()}function jc(){return{edgesChange:ne(),nodesChange:ne(),nodeDoubleClick:ne(),nodeClick:ne(),nodeMouseEnter:ne(),nodeMouseMove:ne(),nodeMouseLeave:ne(),nodeContextMenu:ne(),nodeDragStart:ne(),nodeDrag:ne(),nodeDragStop:ne(),nodesInitialized:ne(),miniMapNodeClick:ne(),miniMapNodeDoubleClick:ne(),miniMapNodeMouseEnter:ne(),miniMapNodeMouseMove:ne(),miniMapNodeMouseLeave:ne(),connect:ne(),connectStart:ne(),connectEnd:ne(),clickConnectStart:ne(),clickConnectEnd:ne(),paneReady:ne(),init:ne(),move:ne(),moveStart:ne(),moveEnd:ne(),selectionDragStart:ne(),selectionDrag:ne(),selectionDragStop:ne(),selectionContextMenu:ne(),selectionStart:ne(),selectionEnd:ne(),viewportChangeStart:ne(),viewportChange:ne(),viewportChangeEnd:ne(),paneScroll:ne(),paneClick:ne(),paneContextMenu:ne(),paneMouseEnter:ne(),paneMouseMove:ne(),paneMouseLeave:ne(),edgeContextMenu:ne(),edgeMouseEnter:ne(),edgeMouseMove:ne(),edgeMouseLeave:ne(),edgeDoubleClick:ne(),edgeClick:ne(),edgeUpdateStart:ne(),edgeUpdate:ne(),edgeUpdateEnd:ne(),updateNodeInternals:ne(),error:ne(e=>Dn(e.message))}}function Jc(e,t){const n=ln();os(()=>{for(const[r,i]of Object.entries(t.value)){const a=s=>{e(r,s)};i.setEmitter(a),bn(i.removeEmitter),i.setHasEmitListeners(()=>o(r)),bn(i.removeHasEmitListeners)}});function o(r){var i;const a=Qc(r);return!!((i=n?.vnode.props)==null?void 0:i[a])}}function Qc(e){const[t,...n]=e.split(":");return`on${t.replace(/(?:^|-)(\w)/g,(r,i)=>i.toUpperCase())}${n.length?`:${n.join(":")}`:""}`}function za(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:hr.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:yn.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Ot.Bezier,style:{}},connectionMode:Dt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:uo()?"Meta":"Control",zoomActivationKeyCode:uo()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:jc(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const ef=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function tf(e,t,n){const o=Kc(e),r=b=>{const h=b??[];e.hooks.updateNodeInternals.trigger(h)},i=b=>gc(b,e.nodes,e.edges),a=b=>hc(b,e.nodes,e.edges),s=b=>xa(b,e.edges),l=({id:b,type:h,nodeId:k})=>{var y;const A=b?`-${h}-${b}`:`-${h}`;return Array.from(((y=e.connectionLookup.get(`${k}${A}`))==null?void 0:y.values())??[])},u=b=>{if(b)return t.value.get(b)},d=b=>{if(b)return n.value.get(b)},p=(b,h,k)=>{var y,A;const ae=[];for(const re of b){const ie={id:re.id,type:"position",dragging:k,from:re.from};if(h&&(ie.position=re.position,re.parentNode)){const ce=u(re.parentNode);ie.position={x:ie.position.x-(((y=ce?.computedPosition)==null?void 0:y.x)??0),y:ie.position.y-(((A=ce?.computedPosition)==null?void 0:A.y)??0)}}ae.push(ie)}ae?.length&&e.hooks.nodesChange.trigger(ae)},v=b=>{if(!e.vueFlowRef)return;const h=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!h)return;const k=window.getComputedStyle(h),{m22:y}=new window.DOMMatrixReadOnly(k.transform),A=[];for(const ae of b){const re=ae,ie=u(re.id);if(ie){const ce=mo(re.nodeElement);if(!!(ce.width&&ce.height&&(ie.dimensions.width!==ce.width||ie.dimensions.height!==ce.height||re.forceUpdate))){const Ne=re.nodeElement.getBoundingClientRect();ie.dimensions=ce,ie.handleBounds.source=vi("source",re.nodeElement,Ne,y,ie.id),ie.handleBounds.target=vi("target",re.nodeElement,Ne,y,ie.id),A.push({id:ie.id,type:"dimensions",dimensions:ce})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),A.length&&e.hooks.nodesChange.trigger(A)},m=(b,h)=>{const k=new Set,y=new Set;for(const re of b)Ht(re)?k.add(re.id):Mt(re)&&y.add(re.id);const A=$t(t.value,k,!0),ae=$t(n.value,y);if(e.multiSelectionActive){for(const re of k)A.push(It(re,h));for(const re of y)ae.push(It(re,h))}A.length&&e.hooks.nodesChange.trigger(A),ae.length&&e.hooks.edgesChange.trigger(ae)},M=b=>{if(e.multiSelectionActive){const h=b.map(k=>It(k.id,!0));e.hooks.nodesChange.trigger(h);return}e.hooks.nodesChange.trigger($t(t.value,new Set(b.map(h=>h.id)),!0)),e.hooks.edgesChange.trigger($t(n.value))},E=b=>{if(e.multiSelectionActive){const h=b.map(k=>It(k.id,!0));e.hooks.edgesChange.trigger(h);return}e.hooks.edgesChange.trigger($t(n.value,new Set(b.map(h=>h.id)))),e.hooks.nodesChange.trigger($t(t.value,new Set,!0))},N=b=>{m(b,!0)},T=b=>{const k=(b||e.nodes).map(y=>(y.selected=!1,It(y.id,!1)));e.hooks.nodesChange.trigger(k)},z=b=>{const k=(b||e.edges).map(y=>(y.selected=!1,It(y.id,!1)));e.hooks.edgesChange.trigger(k)},x=b=>{if(!b||!b.length)return m([],!1);const h=b.reduce((k,y)=>{const A=It(y.id,!1);return Ht(y)?k.nodes.push(A):k.edges.push(A),k},{nodes:[],edges:[]});h.nodes.length&&e.hooks.nodesChange.trigger(h.nodes),h.edges.length&&e.hooks.edgesChange.trigger(h.edges)},C=b=>{var h;(h=e.d3Zoom)==null||h.scaleExtent([b,e.maxZoom]),e.minZoom=b},D=b=>{var h;(h=e.d3Zoom)==null||h.scaleExtent([e.minZoom,b]),e.maxZoom=b},O=b=>{var h;(h=e.d3Zoom)==null||h.translateExtent(b),e.translateExtent=b},H=b=>{e.nodeExtent=b,r()},Y=b=>{var h;(h=e.d3Zoom)==null||h.clickDistance(b)},I=b=>{e.nodesDraggable=b,e.nodesConnectable=b,e.elementsSelectable=b},U=b=>{const h=b instanceof Function?b(e.nodes):b;!e.initialized&&!h.length||(e.nodes=mi(h,u,e.hooks.error.trigger))},K=b=>{const h=b instanceof Function?b(e.edges):b;if(!e.initialized&&!h.length)return;const k=Lo(h,e.isValidConnection,u,d,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);Ho(e.connectionLookup,n.value,k),e.edges=k},_=b=>{const h=b instanceof Function?b([...e.nodes,...e.edges]):b;!e.initialized&&!h.length||(U(h.filter(Ht)),K(h.filter(Mt)))},te=b=>{let h=b instanceof Function?b(e.nodes):b;h=Array.isArray(h)?h:[h];const k=mi(h,u,e.hooks.error.trigger),y=[];for(const A of k)y.push(li(A));y.length&&e.hooks.nodesChange.trigger(y)},w=b=>{let h=b instanceof Function?b(e.edges):b;h=Array.isArray(h)?h:[h];const k=Lo(h,e.isValidConnection,u,d,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),y=[];for(const A of k)y.push(li(A));y.length&&e.hooks.edgesChange.trigger(y)},B=(b,h=!0,k=!1)=>{const y=b instanceof Function?b(e.nodes):b,A=Array.isArray(y)?y:[y],ae=[],re=[];function ie(be){const Ne=s(be);for(const $e of Ne)(!Xe($e.deletable)||$e.deletable)&&re.push(di($e.id,$e.source,$e.target,$e.sourceHandle,$e.targetHandle))}function ce(be){const Ne=[];for(const $e of e.nodes)$e.parentNode===be&&Ne.push($e);if(Ne.length){for(const $e of Ne)ae.push(ui($e.id));h&&ie(Ne);for(const $e of Ne)ce($e.id)}}for(const be of A){const Ne=typeof be=="string"?u(be):be;Ne&&(Xe(Ne.deletable)&&!Ne.deletable||(ae.push(ui(Ne.id)),h&&ie([Ne]),k&&ce(Ne.id)))}re.length&&e.hooks.edgesChange.trigger(re),ae.length&&e.hooks.nodesChange.trigger(ae)},$=b=>{const h=b instanceof Function?b(e.edges):b,k=Array.isArray(h)?h:[h],y=[];for(const A of k){const ae=typeof A=="string"?d(A):A;ae&&(Xe(ae.deletable)&&!ae.deletable||y.push(di(typeof A=="string"?A:A.id,ae.source,ae.target,ae.sourceHandle,ae.targetHandle)))}e.hooks.edgesChange.trigger(y)},F=(b,h,k=!0)=>{const y=d(b.id);if(!y)return!1;const A=e.edges.indexOf(y),ae=Bc(b,h,y,k,e.hooks.error.trigger);if(ae){const[re]=Lo([ae],e.isValidConnection,u,d,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((ie,ce)=>ce===A?re:ie),Ho(e.connectionLookup,n.value,[re]),re}return!1},q=(b,h,k={replace:!1})=>{const y=d(b);if(!y)return;const A=typeof h=="function"?h(y):h;y.data=k.replace?A:{...y.data,...A}},Q=b=>si(b,e.nodes),ee=b=>{const h=si(b,e.edges);return Ho(e.connectionLookup,n.value,h),h},se=(b,h,k={replace:!1})=>{const y=u(b);if(!y)return;const A=typeof h=="function"?h(y):h;k.replace?e.nodes.splice(e.nodes.indexOf(y),1,A):Object.assign(y,A)},le=(b,h,k={replace:!1})=>{const y=u(b);if(!y)return;const A=typeof h=="function"?h(y):h;y.data=k.replace?A:{...y.data,...A}},ye=(b,h,k=!1)=>{k?e.connectionClickStartHandle=b:e.connectionStartHandle=b,e.connectionEndHandle=null,e.connectionStatus=null,h&&(e.connectionPosition=h)},xe=(b,h=null,k=null)=>{e.connectionStartHandle&&(e.connectionPosition=b,e.connectionEndHandle=h,e.connectionStatus=k)},oe=(b,h)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,h?e.connectionClickStartHandle=null:e.connectionStartHandle=null},P=b=>{const h=fc(b),k=h?null:gn(b)?b:u(b.id);return!h&&!k?[null,null,h]:[h?b:so(k),k,h]},G=(b,h=!0,k=e.nodes)=>{const[y,A,ae]=P(b);if(!y)return[];const re=[];for(const ie of k||e.nodes){if(!ae&&(ie.id===A.id||!ie.computedPosition))continue;const ce=so(ie),be=lo(ce,y);(h&&be>0||be>=ce.width*ce.height||be>=Number(y.width)*Number(y.height))&&re.push(ie)}return re},ve=(b,h,k=!0)=>{const[y]=P(b);if(!y)return!1;const A=lo(y,h);return k&&A>0||A>=Number(y.width)*Number(y.height)},we=b=>{const{viewport:h,dimensions:k,d3Zoom:y,d3Selection:A,translateExtent:ae}=e;if(!y||!A||!b.x&&!b.y)return!1;const re=an.translate(h.x+b.x,h.y+b.y).scale(h.zoom),ie=[[0,0],[k.width,k.height]],ce=y.constrain()(re,ie,ae),be=e.viewport.x!==ce.x||e.viewport.y!==ce.y||e.viewport.zoom!==ce.k;return y.transform(A,ce),be},_e=b=>{const h=b instanceof Function?b(e):b,k=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Xe(h.defaultEdgeOptions)&&(e.defaultEdgeOptions=h.defaultEdgeOptions);const y=h.modelValue||h.nodes||h.edges?[]:void 0;y&&(h.modelValue&&y.push(...h.modelValue),h.nodes&&y.push(...h.nodes),h.edges&&y.push(...h.edges),_(y));const A=()=>{Xe(h.maxZoom)&&D(h.maxZoom),Xe(h.minZoom)&&C(h.minZoom),Xe(h.translateExtent)&&O(h.translateExtent)};for(const ae of Object.keys(h)){const re=ae,ie=h[re];![...ef,...k].includes(re)&&Xe(ie)&&(e[re]=ie)}Xo(()=>e.d3Zoom).not.toBeNull().then(A),e.initialized||(e.initialized=!0)};return{updateNodePositions:p,updateNodeDimensions:v,setElements:_,setNodes:U,setEdges:K,addNodes:te,addEdges:w,removeNodes:B,removeEdges:$,findNode:u,findEdge:d,updateEdge:F,updateEdgeData:q,updateNode:se,updateNodeData:le,applyEdgeChanges:ee,applyNodeChanges:Q,addSelectedElements:N,addSelectedNodes:M,addSelectedEdges:E,setMinZoom:C,setMaxZoom:D,setTranslateExtent:O,setNodeExtent:H,setPaneClickDistance:Y,removeSelectedElements:x,removeSelectedNodes:T,removeSelectedEdges:z,startConnection:ye,updateConnection:xe,endConnection:oe,setInteractive:I,setState:_e,getIntersectingNodes:G,getIncomers:i,getOutgoers:a,getConnectedEdges:s,getHandleConnections:l,isNodeIntersecting:ve,panBy:we,fitView:b=>o.value.fitView(b),zoomIn:b=>o.value.zoomIn(b),zoomOut:b=>o.value.zoomOut(b),zoomTo:(b,h)=>o.value.zoomTo(b,h),setViewport:(b,h)=>o.value.setViewport(b,h),setTransform:(b,h)=>o.value.setTransform(b,h),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(b,h,k)=>o.value.setCenter(b,h,k),fitBounds:(b,h)=>o.value.fitBounds(b,h),project:b=>o.value.project(b),screenToFlowCoordinate:b=>o.value.screenToFlowCoordinate(b),flowToScreenCoordinate:b=>o.value.flowToScreenCoordinate(b),toObject:()=>{const b=[],h=[];for(const k of e.nodes){const{computedPosition:y,handleBounds:A,selected:ae,dimensions:re,isParent:ie,resizing:ce,dragging:be,events:Ne,...$e}=k;b.push($e)}for(const k of e.edges){const{selected:y,sourceNode:A,targetNode:ae,events:re,...ie}=k;h.push(ie)}return JSON.parse(JSON.stringify({nodes:b,edges:h,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:b=>new Promise(h=>{const{nodes:k,edges:y,position:A,zoom:ae,viewport:re}=b;k&&U(k),y&&K(y);const[ie,ce]=re?.x&&re?.y?[re.x,re.y]:A??[null,null];if(ie&&ce){const be=re?.zoom||ae||e.viewport.zoom;return Xo(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:ie,y:ce,zoom:be}).then(()=>{h(!0)})})}else h(!0)}),updateNodeInternals:r,viewportHelper:o,$reset:()=>{const b=za();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const h=an.translate(b.defaultViewport.x??0,b.defaultViewport.y??0).scale(Rt(b.defaultViewport.zoom??1,b.minZoom,b.maxZoom)),k=e.viewportRef.getBoundingClientRect(),y=[[0,0],[k.width,k.height]],A=e.d3Zoom.constrain()(h,y,b.translateExtent);e.d3Zoom.transform(e.d3Selection,A)}_e(b)},$destroy:()=>{}}}const nf=["data-id","data-handleid","data-nodeid","data-handlepos"],of={name:"Handle",compatConfig:{MODE:3}},co=We({...of,props:{id:{default:null},type:{},position:{default:()=>fe.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=ls(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Be(()=>n.type??"source"),r=Be(()=>n.isValidConnection??null),{id:i,connectionStartHandle:a,connectionClickStartHandle:s,connectionEndHandle:l,vueFlowRef:u,nodesConnectable:d,noDragClassName:p,noPanClassName:v}=He(),{id:m,node:M,nodeEl:E,connectedEdges:N}=Ta(),T=J(),z=Be(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),x=Be(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),C=Be(()=>{var K,_,te,w,B,$;return((K=a.value)==null?void 0:K.nodeId)===m&&((_=a.value)==null?void 0:_.id)===e.id&&((te=a.value)==null?void 0:te.type)===o.value||((w=l.value)==null?void 0:w.nodeId)===m&&((B=l.value)==null?void 0:B.id)===e.id&&(($=l.value)==null?void 0:$.type)===o.value}),D=Be(()=>{var K,_,te;return((K=s.value)==null?void 0:K.nodeId)===m&&((_=s.value)==null?void 0:_.id)===e.id&&((te=s.value)==null?void 0:te.type)===o.value}),{handlePointerDown:O,handleClick:H}=Ma({nodeId:m,handleId:e.id,isValidConnection:r,type:o}),Y=de(()=>typeof e.connectable=="string"&&e.connectable==="single"?!N.value.some(K=>{const _=K[`${o.value}Handle`];return K[o.value]!==m?!1:_?_===e.id:!0}):typeof e.connectable=="number"?N.value.filter(K=>{const _=K[`${o.value}Handle`];return K[o.value]!==m?!1:_?_===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(M,N.value):Xe(e.connectable)?e.connectable:d.value);xt(()=>{var K;if(!M.dimensions.width||!M.dimensions.height)return;const _=(K=M.handleBounds[o.value])==null?void 0:K.find(Q=>Q.id===e.id);if(!u.value||_)return;const te=u.value.querySelector(".vue-flow__transformationpane");if(!E.value||!T.value||!te||!e.id)return;const w=E.value.getBoundingClientRect(),B=T.value.getBoundingClientRect(),$=window.getComputedStyle(te),{m22:F}=new window.DOMMatrixReadOnly($.transform),q={id:e.id,position:e.position,x:(B.left-w.left)/F,y:(B.top-w.top)/F,type:o.value,nodeId:m,...mo(T.value)};M.handleBounds[o.value]=[...M.handleBounds[o.value]??[],q]});function I(K){const _=vr(K);Y.value&&z.value&&(_&&K.button===0||!_)&&O(K)}function U(K){!m||!s.value&&!z.value||Y.value&&H(K)}return t({handleClick:H,handlePointerDown:O,onClick:U,onPointerDown:I}),(K,_)=>(R(),Z("div",{ref_key:"handle",ref:T,"data-id":`${g(i)}-${g(m)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":g(m),"data-handlepos":K.position,class:Ke(["vue-flow__handle",[`vue-flow__handle-${K.position}`,`vue-flow__handle-${e.id}`,g(p),g(v),o.value,{connectable:Y.value,connecting:D.value,connectablestart:z.value,connectableend:x.value,connectionindicator:Y.value&&(z.value&&!C.value||x.value&&C.value)}]]),onMousedown:I,onTouchstartPassive:I,onClick:U},[Ye(K.$slots,"default",{id:K.id})],42,nf))}}),bo=function({sourcePosition:e=fe.Bottom,targetPosition:t=fe.Top,label:n,connectable:o=!0,isValidTargetPos:r,isValidSourcePos:i,data:a}){const s=a.label??n;return[Ae(co,{type:"target",position:t,connectable:o,isValidConnection:r}),typeof s!="string"&&s?Ae(s):Ae(Se,[s]),Ae(co,{type:"source",position:e,connectable:o,isValidConnection:i})]};bo.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];bo.inheritAttrs=!1;bo.compatConfig={MODE:3};const rf=bo,xo=function({targetPosition:e=fe.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:r}){const i=r.label??t;return[Ae(co,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof i!="string"&&i?Ae(i):Ae(Se,[i])]};xo.props=["targetPosition","label","isValidTargetPos","connectable","data"];xo.inheritAttrs=!1;xo.compatConfig={MODE:3};const af=xo,_o=function({sourcePosition:e=fe.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:r}){const i=r.label??t;return[typeof i!="string"&&i?Ae(i):Ae(Se,[i]),Ae(co,{type:"source",position:e,connectable:n,isValidConnection:o})]};_o.props=["sourcePosition","label","isValidSourcePos","connectable","data"];_o.inheritAttrs=!1;_o.compatConfig={MODE:3};const sf=_o,lf=["transform"],uf=["width","height","x","y","rx","ry"],df=["y"],cf={name:"EdgeText",compatConfig:{MODE:3}},ff=We({...cf,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=J({x:0,y:0,width:0,height:0}),n=J(null),o=de(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);xt(r),Te([()=>e.x,()=>e.y,n,()=>e.label],r);function r(){if(!n.value)return;const i=n.value.getBBox();(i.width!==t.value.width||i.height!==t.value.height)&&(t.value=i)}return(i,a)=>(R(),Z("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[i.labelShowBg?(R(),Z("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*i.labelBgPadding[0]}px`,height:`${t.value.height+2*i.labelBgPadding[1]}px`,x:-i.labelBgPadding[0],y:-i.labelBgPadding[1],style:Oe(i.labelBgStyle),rx:i.labelBgBorderRadius,ry:i.labelBgBorderRadius},null,12,uf)):Ee("",!0),V("text",Pi(i.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:i.labelStyle}),[Ye(i.$slots,"default",{},()=>[typeof i.label!="string"?(R(),je(Jt(i.label),{key:0})):(R(),Z(Se,{key:1},[ze(Ce(i.label),1)],64))])],16,df)],8,lf))}}),pf=["id","d","marker-end","marker-start"],hf=["d","stroke-width"],gf={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},ko=We({...gf,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=J(null),o=J(null),r=J(null),i=ss();return t({pathEl:n,interactionEl:o,labelEl:r}),(a,s)=>(R(),Z(Se,null,[V("path",Pi(g(i),{id:a.id,ref_key:"pathEl",ref:n,d:a.path,class:"vue-flow__edge-path","marker-end":a.markerEnd,"marker-start":a.markerStart}),null,16,pf),a.interactionWidth?(R(),Z("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:a.path,"stroke-width":a.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,hf)):Ee("",!0),a.label&&a.labelX&&a.labelY?(R(),je(ff,{key:1,ref_key:"labelEl",ref:r,x:a.labelX,y:a.labelY,label:a.label,"label-show-bg":a.labelShowBg,"label-bg-style":a.labelBgStyle,"label-bg-padding":a.labelBgPadding,"label-bg-border-radius":a.labelBgBorderRadius,"label-style":a.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):Ee("",!0)],64))}});function Oa({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,a=Math.abs(o-t)/2,s=o<t?o+a:o-a;return[i,s,r,a]}function Aa({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:a,targetControlY:s}){const l=e*.125+r*.375+a*.375+n*.125,u=t*.125+i*.375+s*.375+o*.125,d=Math.abs(l-e),p=Math.abs(u-t);return[l,u,d,p]}function Fn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function xi({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){let a,s;switch(e){case fe.Left:a=t-Fn(t-o,i),s=n;break;case fe.Right:a=t+Fn(o-t,i),s=n;break;case fe.Top:a=t,s=n-Fn(n-r,i);break;case fe.Bottom:a=t,s=n+Fn(r-n,i);break}return[a,s]}function Wa(e){const{sourceX:t,sourceY:n,sourcePosition:o=fe.Bottom,targetX:r,targetY:i,targetPosition:a=fe.Top,curvature:s=.25}=e,[l,u]=xi({pos:o,x1:t,y1:n,x2:r,y2:i,c:s}),[d,p]=xi({pos:a,x1:r,y1:i,x2:t,y2:n,c:s}),[v,m,M,E]=Aa({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:p});return[`M${t},${n} C${l},${u} ${d},${p} ${r},${i}`,v,m,M,E]}function _i({pos:e,x1:t,y1:n,x2:o,y2:r}){let i,a;switch(e){case fe.Left:case fe.Right:i=.5*(t+o),a=n;break;case fe.Top:case fe.Bottom:i=t,a=.5*(n+r);break}return[i,a]}function Ba(e){const{sourceX:t,sourceY:n,sourcePosition:o=fe.Bottom,targetX:r,targetY:i,targetPosition:a=fe.Top}=e,[s,l]=_i({pos:o,x1:t,y1:n,x2:r,y2:i}),[u,d]=_i({pos:a,x1:r,y1:i,x2:t,y2:n}),[p,v,m,M]=Aa({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:s,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${t},${n} C${s},${l} ${u},${d} ${r},${i}`,p,v,m,M]}const ki={[fe.Left]:{x:-1,y:0},[fe.Right]:{x:1,y:0},[fe.Top]:{x:0,y:-1},[fe.Bottom]:{x:0,y:1}};function vf({source:e,sourcePosition:t=fe.Bottom,target:n}){return t===fe.Left||t===fe.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Si(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function mf({source:e,sourcePosition:t=fe.Bottom,target:n,targetPosition:o=fe.Top,center:r,offset:i}){const a=ki[t],s=ki[o],l={x:e.x+a.x*i,y:e.y+a.y*i},u={x:n.x+s.x*i,y:n.y+s.y*i},d=vf({source:l,sourcePosition:t,target:u}),p=d.x!==0?"x":"y",v=d[p];let m,M,E;const N={x:0,y:0},T={x:0,y:0},[z,x,C,D]=Oa({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[p]*s[p]===-1){M=r.x??z,E=r.y??x;const H=[{x:M,y:l.y},{x:M,y:u.y}],Y=[{x:l.x,y:E},{x:u.x,y:E}];a[p]===v?m=p==="x"?H:Y:m=p==="x"?Y:H}else{const H=[{x:l.x,y:u.y}],Y=[{x:u.x,y:l.y}];if(p==="x"?m=a.x===v?Y:H:m=a.y===v?H:Y,t===o){const te=Math.abs(e[p]-n[p]);if(te<=i){const w=Math.min(i-1,i-te);a[p]===v?N[p]=(l[p]>e[p]?-1:1)*w:T[p]=(u[p]>n[p]?-1:1)*w}}if(t!==o){const te=p==="x"?"y":"x",w=a[p]===s[te],B=l[te]>u[te],$=l[te]<u[te];(a[p]===1&&(!w&&B||w&&$)||a[p]!==1&&(!w&&$||w&&B))&&(m=p==="x"?H:Y)}const I={x:l.x+N.x,y:l.y+N.y},U={x:u.x+T.x,y:u.y+T.y},K=Math.max(Math.abs(I.x-m[0].x),Math.abs(U.x-m[0].x)),_=Math.max(Math.abs(I.y-m[0].y),Math.abs(U.y-m[0].y));K>=_?(M=(I.x+U.x)/2,E=m[0].y):(M=m[0].x,E=(I.y+U.y)/2)}return[[e,{x:l.x+N.x,y:l.y+N.y},...m,{x:u.x+T.x,y:u.y+T.y},n],M,E,C,D]}function yf(e,t,n,o){const r=Math.min(Si(e,t)/2,Si(t,n)/2,o),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${i+r*u},${a}Q ${i},${a} ${i},${a+r*d}`}const s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${a+r*l}Q ${i},${a} ${i+r*s},${a}`}function or(e){const{sourceX:t,sourceY:n,sourcePosition:o=fe.Bottom,targetX:r,targetY:i,targetPosition:a=fe.Top,borderRadius:s=5,centerX:l,centerY:u,offset:d=20}=e,[p,v,m,M,E]=mf({source:{x:t,y:n},sourcePosition:o,target:{x:r,y:i},targetPosition:a,center:{x:l,y:u},offset:d});return[p.reduce((T,z,x)=>{let C;return x>0&&x<p.length-1?C=yf(p[x-1],z,p[x+1],s):C=`${x===0?"M":"L"}${z.x} ${z.y}`,T+=C,T},""),v,m,M,E]}function wf(e){const{sourceX:t,sourceY:n,targetX:o,targetY:r}=e,[i,a,s,l]=Oa({sourceX:t,sourceY:n,targetX:o,targetY:r});return[`M ${t},${n}L ${o},${r}`,i,a,s,l]}const bf=We({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=wf(e);return Ae(ko,{path:n,labelX:o,labelY:r,...t,...e})}}}),xf=bf,_f=We({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=or({...e,sourcePosition:e.sourcePosition??fe.Bottom,targetPosition:e.targetPosition??fe.Top});return Ae(ko,{path:n,labelX:o,labelY:r,...t,...e})}}}),Ha=_f,kf=We({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>Ae(Ha,{...e,...t,borderRadius:0})}}),Sf=kf,Ef=We({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=Wa({...e,sourcePosition:e.sourcePosition??fe.Bottom,targetPosition:e.targetPosition??fe.Top});return Ae(ko,{path:n,labelX:o,labelY:r,...t,...e})}}}),Nf=Ef,If=We({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=Ba({...e,sourcePosition:e.sourcePosition??fe.Bottom,targetPosition:e.targetPosition??fe.Top});return Ae(ko,{path:n,labelX:o,labelY:r,...t,...e})}}}),$f=If,Cf={input:sf,default:rf,output:af},Df={default:Nf,straight:xf,step:Sf,smoothstep:Ha,simplebezier:$f};function Mf(e,t,n){const o=de(()=>E=>t.value.get(E)),r=de(()=>E=>n.value.get(E)),i=de(()=>{const E={...Df,...e.edgeTypes},N=Object.keys(E);for(const T of e.edges)T.type&&!N.includes(T.type)&&(E[T.type]=T.type);return E}),a=de(()=>{const E={...Cf,...e.nodeTypes},N=Object.keys(E);for(const T of e.nodes)T.type&&!N.includes(T.type)&&(E[T.type]=T.type);return E}),s=de(()=>e.onlyRenderVisibleElements?ba(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),l=de(()=>{if(e.onlyRenderVisibleElements){const E=[];for(const N of e.edges){const T=t.value.get(N.source),z=t.value.get(N.target);Nc({sourcePos:T.computedPosition||{x:0,y:0},targetPos:z.computedPosition||{x:0,y:0},sourceWidth:T.dimensions.width,sourceHeight:T.dimensions.height,targetWidth:z.dimensions.width,targetHeight:z.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&E.push(N)}return E}return e.edges}),u=de(()=>[...s.value,...l.value]),d=de(()=>{const E=[];for(const N of e.nodes)N.selected&&E.push(N);return E}),p=de(()=>{const E=[];for(const N of e.edges)N.selected&&E.push(N);return E}),v=de(()=>[...d.value,...p.value]),m=de(()=>{const E=[];for(const N of e.nodes)N.dimensions.width&&N.dimensions.height&&N.handleBounds!==void 0&&E.push(N);return E}),M=de(()=>s.value.length>0&&m.value.length===s.value.length);return{getNode:o,getEdge:r,getElements:u,getEdgeTypes:i,getNodeTypes:a,getEdges:l,getNodes:s,getSelectedElements:v,getSelectedNodes:d,getSelectedEdges:p,getNodesInitialized:m,areNodesInitialized:M}}class At{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=ln())==null?void 0:t.appContext.app,o=n?.config.globalProperties.$vueFlowStorage??At.instance;return At.instance=o??new At,n&&(n.config.globalProperties.$vueFlowStorage=At.instance),At.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=za(),r=Ci(o),i={};for(const[v,m]of Object.entries(r.hooks)){const M=`on${v.charAt(0).toUpperCase()+v.slice(1)}`;i[M]=m.on}const a={};for(const[v,m]of Object.entries(r.hooks))a[v]=m.trigger;const s=de(()=>{const v=new Map;for(const m of r.nodes)v.set(m.id,m);return v}),l=de(()=>{const v=new Map;for(const m of r.edges)v.set(m.id,m);return v}),u=Mf(r,s,l),d=tf(r,s,l);d.setState({...r,...n});const p={...i,...u,...d,...xs(r),nodeLookup:s,edgeLookup:l,emits:a,id:t,vueFlowVersion:"1.48.1",$destroy:()=>{this.remove(t)}};return this.set(t,p),p}getId(){return`vue-flow-${this.currentId++}`}}function He(e){const t=At.getInstance(),n=Mi(),o=typeof e=="object",r=o?e:{id:e},i=r.id,a=i??n?.vueFlowId;let s;if(n){const l=un(bi,null);typeof l<"u"&&l!==null&&(!a||l.id===a)&&(s=l)}if(s||a&&(s=t.get(a)),!s||a&&s.id!==a){const l=i??t.getId(),u=t.create(l,r);s=u,(n??Ii(!0)).run(()=>{Te(u.applyDefault,(p,v,m)=>{const M=N=>{u.applyNodeChanges(N)},E=N=>{u.applyEdgeChanges(N)};p?(u.onNodesChange(M),u.onEdgesChange(E)):(u.hooks.value.nodesChange.off(M),u.hooks.value.edgesChange.off(E)),m(()=>{u.hooks.value.nodesChange.off(M),u.hooks.value.edgesChange.off(E)})},{immediate:!0}),bn(()=>{if(s){const p=t.get(s.id);p?p.$destroy():Dn(`No store instance found for id ${s.id} in storage.`)}})})}else o&&s.setState(r);if(n&&(nn(bi,s),n.vueFlowId=s.id),o){const l=ln();l?.type.name!=="VueFlow"&&s.emits.error(new Ze(Fe.USEVUEFLOW_OPTIONS))}return s}function Tf(e){const{emits:t,dimensions:n}=He();let o;xt(()=>{const r=()=>{var i,a;if(!e.value||!(((a=(i=e.value).checkVisibility)==null?void 0:a.call(i))??!0))return;const s=mo(e.value);(s.width===0||s.height===0)&&t.error(new Ze(Fe.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:s.width||500,height:s.height||500}};r(),window.addEventListener("resize",r),e.value&&(o=new ResizeObserver(()=>r()),o.observe(e.value)),Di(()=>{window.removeEventListener("resize",r),o&&e.value&&o.unobserve(e.value)})})}const Pf={name:"UserSelection",compatConfig:{MODE:3}},zf=We({...Pf,props:{userSelectionRect:{}},setup(e){return(t,n)=>(R(),Z("div",{class:"vue-flow__selection vue-flow__container",style:Oe({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),Of=["tabIndex"],Af={name:"NodesSelection",compatConfig:{MODE:3}},Wf=We({...Af,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:r,disableKeyboardA11y:i,userSelectionActive:a}=He(),s=Pa(),l=J(null),u=Da({el:l,onStart(M){t.selectionDragStart(M),t.nodeDragStart(M)},onDrag(M){t.selectionDrag(M),t.nodeDrag(M)},onStop(M){t.selectionDragStop(M),t.nodeDragStop(M)}});xt(()=>{var M;i.value||(M=l.value)==null||M.focus({preventScroll:!0})});const d=de(()=>wa(o.value)),p=de(()=>({width:`${d.value.width}px`,height:`${d.value.height}px`,top:`${d.value.y}px`,left:`${d.value.x}px`}));function v(M){t.selectionContextMenu({event:M,nodes:o.value})}function m(M){i.value||tn[M.key]&&(M.preventDefault(),s({x:tn[M.key].x,y:tn[M.key].y},M.shiftKey))}return(M,E)=>!g(a)&&d.value.width&&d.value.height?(R(),Z("div",{key:0,class:Ke(["vue-flow__nodesselection vue-flow__container",g(r)]),style:Oe({transform:`translate(${g(n).x}px,${g(n).y}px) scale(${g(n).zoom})`})},[V("div",{ref_key:"el",ref:l,class:Ke([{dragging:g(u)},"vue-flow__nodesselection-rect"]),style:Oe(p.value),tabIndex:g(i)?void 0:-1,onContextmenu:v,onKeydown:m},null,46,Of)],6)):Ee("",!0)}});function Bf(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Hf={name:"Pane",compatConfig:{MODE:3}},Lf=We({...Hf,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:r,userSelectionActive:i,removeSelectedElements:a,userSelectionRect:s,elementsSelectable:l,nodesSelectionActive:u,getSelectedEdges:d,getSelectedNodes:p,removeNodes:v,removeEdges:m,selectionMode:M,deleteKeyCode:E,multiSelectionKeyCode:N,multiSelectionActive:T,edgeLookup:z,nodeLookup:x,connectionLookup:C,defaultEdgeOptions:D,connectionStartHandle:O,panOnDrag:H}=He(),Y=Ct(null),I=Ct(new Set),U=Ct(new Set),K=Ct(null),_=Be(()=>l.value&&(e.isSelecting||i.value)),te=Be(()=>O.value!==null);let w=!1,B=!1;const $=wn(E,{actInsideInputWithModifier:!1}),F=wn(N);Te($,oe=>{oe&&(v(p.value),m(d.value),u.value=!1)}),Te(F,oe=>{T.value=oe});function q(oe,P){return G=>{G.target===P&&oe?.(G)}}function Q(oe){if(w||te.value){w=!1;return}r.paneClick(oe),a(),u.value=!1}function ee(oe){var P;if(Array.isArray(H.value)&&((P=H.value)!=null&&P.includes(2))){oe.preventDefault();return}r.paneContextMenu(oe)}function se(oe){r.paneScroll(oe)}function le(oe){var P,G,ve;if(K.value=((P=t.value)==null?void 0:P.getBoundingClientRect())??null,!l.value||!e.isSelecting||oe.button!==0||oe.target!==Y.value||!K.value)return;(ve=(G=oe.target)==null?void 0:G.setPointerCapture)==null||ve.call(G,oe.pointerId);const{x:we,y:_e}=Bf(oe,K.value);B=!0,w=!1,a(),s.value={width:0,height:0,startX:we,startY:_e,x:we,y:_e},r.selectionStart(oe)}function ye(oe){var P;if(!K.value||!s.value)return;w=!0;const{x:G,y:ve}=dt(oe,K.value),{startX:we=0,startY:_e=0}=s.value,Me={startX:we,startY:_e,x:G<we?G:we,y:ve<_e?ve:_e,width:Math.abs(G-we),height:Math.abs(ve-_e)},ge=I.value,ke=U.value;I.value=new Set(ba(n.value,Me,o.value,M.value===hr.Partial,!0).map(h=>h.id)),U.value=new Set;const b=((P=D.value)==null?void 0:P.selectable)??!0;for(const h of I.value){const k=C.value.get(h);if(k)for(const{edgeId:y}of k.values()){const A=z.value.get(y);A&&(A.selectable??b)&&U.value.add(y)}}if(!wi(ge,I.value)){const h=$t(x.value,I.value,!0);r.nodesChange(h)}if(!wi(ke,U.value)){const h=$t(z.value,U.value);r.edgesChange(h)}s.value=Me,i.value=!0,u.value=!1}function xe(oe){var P;oe.button!==0||!B||((P=oe.target)==null||P.releasePointerCapture(oe.pointerId),!i.value&&s.value&&oe.target===Y.value&&Q(oe),i.value=!1,s.value=null,u.value=I.value.size>0,r.selectionEnd(oe),e.selectionKeyPressed&&(w=!1),B=!1)}return(oe,P)=>(R(),Z("div",{ref_key:"container",ref:Y,class:Ke(["vue-flow__pane vue-flow__container",{selection:oe.isSelecting}]),onClick:P[0]||(P[0]=G=>_.value?void 0:q(Q,Y.value)(G)),onContextmenu:P[1]||(P[1]=G=>q(ee,Y.value)(G)),onWheelPassive:P[2]||(P[2]=G=>q(se,Y.value)(G)),onPointerenter:P[3]||(P[3]=G=>_.value?void 0:g(r).paneMouseEnter(G)),onPointerdown:P[4]||(P[4]=G=>_.value?le(G):g(r).paneMouseMove(G)),onPointermove:P[5]||(P[5]=G=>_.value?ye(G):g(r).paneMouseMove(G)),onPointerup:P[6]||(P[6]=G=>_.value?xe(G):void 0),onPointerleave:P[7]||(P[7]=G=>g(r).paneMouseLeave(G))},[Ye(oe.$slots,"default"),g(i)&&g(s)?(R(),je(zf,{key:0,"user-selection-rect":g(s)},null,8,["user-selection-rect"])):Ee("",!0),g(u)&&g(p).length?(R(),je(Wf,{key:1})):Ee("",!0)],34))}}),Vf={name:"Transform",compatConfig:{MODE:3}},Rf=We({...Vf,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=He(),r=de(()=>n.value?!o.value:!1),i=de(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(a,s)=>(R(),Z("div",{class:"vue-flow__transformationpane vue-flow__container",style:Oe({transform:i.value,opacity:r.value?0:void 0})},[Ye(a.$slots,"default")],4))}}),Yf={name:"Viewport",compatConfig:{MODE:3}},Xf=We({...Yf,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:r,zoomActivationKeyCode:i,selectionKeyCode:a,panActivationKeyCode:s,panOnScroll:l,panOnScrollMode:u,panOnScrollSpeed:d,panOnDrag:p,zoomOnDoubleClick:v,zoomOnPinch:m,zoomOnScroll:M,preventScrolling:E,noWheelClassName:N,noPanClassName:T,emits:z,connectionStartHandle:x,userSelectionActive:C,paneDragging:D,d3Zoom:O,d3Selection:H,d3ZoomHandler:Y,viewport:I,viewportRef:U,paneClickDistance:K}=He();Tf(U);const _=Ct(!1),te=Ct(!1);let w=null,B=!1,$=0,F={x:0,y:0,zoom:0};const q=wn(s),Q=wn(a),ee=wn(i),se=Be(()=>(!Q.value||Q.value&&a.value===!0)&&(q.value||p.value)),le=Be(()=>q.value||l.value),ye=Be(()=>Q.value||a.value===!0&&se.value!==!0),xe=Be(()=>x.value!==null);xt(()=>{if(!U.value){Dn("Viewport element is missing");return}const we=U.value,_e=we.getBoundingClientRect(),Me=ic().clickDistance(K.value).scaleExtent([t.value,n.value]).translateExtent(r.value),ge=ot(we).call(Me),ke=ge.on("wheel.zoom"),b=an.translate(o.value.x??0,o.value.y??0).scale(Rt(o.value.zoom??1,t.value,n.value)),h=[[0,0],[_e.width,_e.height]],k=Me.constrain()(b,h,r.value);Me.transform(ge,k),Me.wheelDelta(ii),O.value=Me,H.value=ge,Y.value=ke,I.value={x:k.x,y:k.y,zoom:k.k},Me.on("start",y=>{var A;if(!y.sourceEvent)return null;$=y.sourceEvent.button,_.value=!0;const ae=G(y.transform);((A=y.sourceEvent)==null?void 0:A.type)==="mousedown"&&(D.value=!0),F=ae,z.viewportChangeStart(ae),z.moveStart({event:y,flowTransform:ae})}),Me.on("end",y=>{if(!y.sourceEvent)return null;if(_.value=!1,D.value=!1,oe(se.value,$??0)&&!B&&z.paneContextMenu(y.sourceEvent),B=!1,P(F,y.transform)){const A=G(y.transform);F=A,z.viewportChangeEnd(A),z.moveEnd({event:y,flowTransform:A})}}),Me.filter(y=>{var A;const ae=ee.value||M.value,re=m.value&&y.ctrlKey,ie=y.button,ce=y.type==="wheel";if(ie===1&&y.type==="mousedown"&&(ve(y,"vue-flow__node")||ve(y,"vue-flow__edge")))return!0;if(!se.value&&!ae&&!le.value&&!v.value&&!m.value||C.value||xe.value&&!ce||!v.value&&y.type==="dblclick"||ve(y,N.value)&&ce||ve(y,T.value)&&(!ce||le.value&&ce&&!ee.value)||!m.value&&y.ctrlKey&&ce||!ae&&!le.value&&!re&&ce)return!1;if(!m&&y.type==="touchstart"&&((A=y.touches)==null?void 0:A.length)>1)return y.preventDefault(),!1;if(!se.value&&(y.type==="mousedown"||y.type==="touchstart")||a.value===!0&&Array.isArray(p.value)&&p.value.includes(0)&&ie===0||Array.isArray(p.value)&&!p.value.includes(ie)&&(y.type==="mousedown"||y.type==="touchstart"))return!1;const be=Array.isArray(p.value)&&p.value.includes(ie)||a.value===!0&&Array.isArray(p.value)&&!p.value.includes(0)||!ie||ie<=1;return(!y.ctrlKey||q.value||ce)&&be}),Te([C,se],()=>{C.value&&!_.value?Me.on("zoom",null):C.value||Me.on("zoom",y=>{I.value={x:y.transform.x,y:y.transform.y,zoom:y.transform.k};const A=G(y.transform);B=oe(se.value,$??0),z.viewportChange(A),z.move({event:y,flowTransform:A})})},{immediate:!0}),Te([C,le,u,ee,m,E,N],()=>{le.value&&!ee.value&&!C.value?ge.on("wheel.zoom",y=>{if(ve(y,N.value))return!1;const A=ee.value||M.value,ae=m.value&&y.ctrlKey;if(!(!E.value||le.value||A||ae))return!1;y.preventDefault(),y.stopImmediatePropagation();const ie=ge.property("__zoom").k||1,ce=uo();if(!q.value&&y.ctrlKey&&m.value&&ce){const Pt=lt(y),So=ii(y),Mn=ie*2**So;Me.scaleTo(ge,Mn,Pt,y);return}const be=y.deltaMode===1?20:1;let Ne=u.value===yn.Vertical?0:y.deltaX*be,$e=u.value===yn.Horizontal?0:y.deltaY*be;!ce&&y.shiftKey&&u.value!==yn.Vertical&&!Ne&&$e&&(Ne=$e,$e=0),Me.translateBy(ge,-(Ne/ie)*d.value,-($e/ie)*d.value);const qe=G(ge.property("__zoom"));w&&clearTimeout(w),te.value?(z.move({event:y,flowTransform:qe}),z.viewportChange(qe),w=setTimeout(()=>{z.moveEnd({event:y,flowTransform:qe}),z.viewportChangeEnd(qe),te.value=!1},150)):(te.value=!0,z.moveStart({event:y,flowTransform:qe}),z.viewportChangeStart(qe))},{passive:!1}):typeof ke<"u"&&ge.on("wheel.zoom",function(y,A){const ae=!E.value&&y.type==="wheel"&&!y.ctrlKey,re=ee.value||M.value,ie=m.value&&y.ctrlKey;if(!re&&!l.value&&!ie&&y.type==="wheel"||ae||ve(y,N.value))return null;y.preventDefault(),ke.call(this,y,A)},{passive:!1})},{immediate:!0})});function oe(we,_e){return _e===2&&Array.isArray(we)&&we.includes(2)}function P(we,_e){return we.x!==_e.x&&!Number.isNaN(_e.x)||we.y!==_e.y&&!Number.isNaN(_e.y)||we.zoom!==_e.k&&!Number.isNaN(_e.k)}function G(we){return{x:we.x,y:we.y,zoom:we.k}}function ve(we,_e){return we.target.closest(`.${_e}`)}return(we,_e)=>(R(),Z("div",{ref_key:"viewportRef",ref:U,class:"vue-flow__viewport vue-flow__container"},[ue(Lf,{"is-selecting":ye.value,"selection-key-pressed":g(Q),class:Ke({connecting:xe.value,dragging:g(D),draggable:g(p)===!0||Array.isArray(g(p))&&g(p).includes(0)})},{default:he(()=>[ue(Rf,null,{default:he(()=>[Ye(we.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),Ff=["id"],Gf=["id"],Uf=["id"],Zf={name:"A11yDescriptions",compatConfig:{MODE:3}},Kf=We({...Zf,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=He();return(r,i)=>(R(),Z(Se,null,[V("div",{id:`${g(ca)}-${g(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+Ce(g(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Ff),V("div",{id:`${g(fa)}-${g(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Gf),g(n)?Ee("",!0):(R(),Z("div",{key:0,id:`${g(cc)}-${g(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},Ce(g(o)),9,Uf))],64))}});function qf(){const e=He();Te(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function jf(e,t,n){return n===fe.Left?e-t:n===fe.Right?e+t:e}function Jf(e,t,n){return n===fe.Top?e-t:n===fe.Bottom?e+t:e}const mr=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=fe.Top,type:r}){return Ae("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${r}`,cx:jf(t,e,o),cy:Jf(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};mr.props=["radius","centerX","centerY","position","type"];mr.compatConfig={MODE:3};const Ei=mr,Qf=We({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:r,emits:i,nodesSelectionActive:a,noPanClassName:s,getEdgeTypes:l,removeSelectedEdges:u,findEdge:d,findNode:p,isValidConnection:v,multiSelectionActive:m,disableKeyboardA11y:M,elementsSelectable:E,edgesUpdatable:N,edgesFocusable:T,hooks:z}=He(),x=de(()=>d(e.id)),{emit:C,on:D}=Rc(x.value,i),O=un(wo),H=ln(),Y=J(!1),I=J(!1),U=J(""),K=J(null),_=J("source"),te=J(null),w=Be(()=>typeof x.value.selectable>"u"?E.value:x.value.selectable),B=Be(()=>typeof x.value.updatable>"u"?N.value:x.value.updatable),$=Be(()=>typeof x.value.focusable>"u"?T.value:x.value.focusable);nn(Hc,e.id),nn(Lc,te);const F=de(()=>x.value.class instanceof Function?x.value.class(x.value):x.value.class),q=de(()=>x.value.style instanceof Function?x.value.style(x.value):x.value.style),Q=de(()=>{const h=x.value.type||"default",k=O?.[`edge-${h}`];if(k)return k;let y=x.value.template??l.value[h];if(typeof y=="string"&&H){const A=Object.keys(H.appContext.components);A&&A.includes(h)&&(y=Ti(h,!1))}return y&&typeof y!="string"?y:(i.error(new Ze(Fe.EDGE_TYPE_MISSING,y)),!1)}),{handlePointerDown:ee}=Ma({nodeId:U,handleId:K,type:_,isValidConnection:v,edgeUpdaterType:_,onEdgeUpdate:ye,onEdgeUpdateEnd:xe});return()=>{const h=p(x.value.source),k=p(x.value.target),y="pathOptions"in x.value?x.value.pathOptions:{};if(!h&&!k)return i.error(new Ze(Fe.EDGE_SOURCE_TARGET_MISSING,x.value.id,x.value.source,x.value.target)),null;if(!h)return i.error(new Ze(Fe.EDGE_SOURCE_MISSING,x.value.id,x.value.source)),null;if(!k)return i.error(new Ze(Fe.EDGE_TARGET_MISSING,x.value.id,x.value.target)),null;if(!x.value||x.value.hidden||h.hidden||k.hidden)return null;let A;o.value===Dt.Strict?A=h.handleBounds.source:A=[...h.handleBounds.source||[],...h.handleBounds.target||[]];const ae=pi(A,x.value.sourceHandle);let re;o.value===Dt.Strict?re=k.handleBounds.target:re=[...k.handleBounds.target||[],...k.handleBounds.source||[]];const ie=pi(re,x.value.targetHandle),ce=ae?.position||fe.Bottom,be=ie?.position||fe.Top,{x:Ne,y:$e}=sn(h,ae,ce),{x:qe,y:Pt}=sn(k,ie,be);return x.value.sourceX=Ne,x.value.sourceY=$e,x.value.targetX=qe,x.value.targetY=Pt,Ae("g",{ref:te,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${Q.value===!1?"default":x.value.type||"default"}`,s.value,F.value,{updating:Y.value,selected:x.value.selected,animated:x.value.animated,inactive:!w.value&&!z.value.edgeClick.hasListeners()}],tabIndex:$.value?0:void 0,"aria-label":x.value.ariaLabel===null?void 0:x.value.ariaLabel??`Edge from ${x.value.source} to ${x.value.target}`,"aria-describedby":$.value?`${fa}-${t}`:void 0,"aria-roledescription":"edge",role:$.value?"group":"img",...x.value.domAttributes,onClick:P,onContextmenu:G,onDblclick:ve,onMouseenter:we,onMousemove:_e,onMouseleave:Me,onKeyDown:$.value?b:void 0},[I.value?null:Ae(Q.value===!1?l.value.default:Q.value,{id:e.id,sourceNode:h,targetNode:k,source:x.value.source,target:x.value.target,type:x.value.type,updatable:B.value,selected:x.value.selected,animated:x.value.animated,label:x.value.label,labelStyle:x.value.labelStyle,labelShowBg:x.value.labelShowBg,labelBgStyle:x.value.labelBgStyle,labelBgPadding:x.value.labelBgPadding,labelBgBorderRadius:x.value.labelBgBorderRadius,data:x.value.data,events:{...x.value.events,...D},style:q.value,markerStart:`url('#${In(x.value.markerStart,t)}')`,markerEnd:`url('#${In(x.value.markerEnd,t)}')`,sourcePosition:ce,targetPosition:be,sourceX:Ne,sourceY:$e,targetX:qe,targetY:Pt,sourceHandleId:x.value.sourceHandle,targetHandleId:x.value.targetHandle,interactionWidth:x.value.interactionWidth,...y}),[B.value==="source"||B.value===!0?[Ae("g",{onMousedown:ge,onMouseenter:se,onMouseout:le},Ae(Ei,{position:ce,centerX:Ne,centerY:$e,radius:r.value,type:"source","data-type":"source"}))]:null,B.value==="target"||B.value===!0?[Ae("g",{onMousedown:ke,onMouseenter:se,onMouseout:le},Ae(Ei,{position:be,centerX:qe,centerY:Pt,radius:r.value,type:"target","data-type":"target"}))]:null]])};function se(){Y.value=!0}function le(){Y.value=!1}function ye(h,k){C.update({event:h,edge:x.value,connection:k})}function xe(h){C.updateEnd({event:h,edge:x.value}),I.value=!1}function oe(h,k){h.button===0&&(I.value=!0,U.value=k?x.value.target:x.value.source,K.value=(k?x.value.targetHandle:x.value.sourceHandle)??null,_.value=k?"target":"source",C.updateStart({event:h,edge:x.value}),ee(h))}function P(h){var k;const y={event:h,edge:x.value};w.value&&(a.value=!1,x.value.selected&&m.value?(u([x.value]),(k=te.value)==null||k.blur()):n([x.value])),C.click(y)}function G(h){C.contextMenu({event:h,edge:x.value})}function ve(h){C.doubleClick({event:h,edge:x.value})}function we(h){C.mouseEnter({event:h,edge:x.value})}function _e(h){C.mouseMove({event:h,edge:x.value})}function Me(h){C.mouseLeave({event:h,edge:x.value})}function ge(h){oe(h,!0)}function ke(h){oe(h,!1)}function b(h){var k;!M.value&&pa.includes(h.key)&&w.value&&(h.key==="Escape"?((k=te.value)==null||k.blur(),u([d(e.id)])):n([d(e.id)]))}}}),ep=Qf,tp=We({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:r,connectionPosition:i,connectionLineType:a,connectionLineStyle:s,connectionLineOptions:l,connectionStatus:u,viewport:d,findNode:p}=He(),v=(e=un(wo))==null?void 0:e["connection-line"],m=de(()=>{var z;return p((z=o.value)==null?void 0:z.nodeId)}),M=de(()=>{var z;return p((z=r.value)==null?void 0:z.nodeId)??null}),E=de(()=>({x:(i.value.x-d.value.x)/d.value.zoom,y:(i.value.y-d.value.y)/d.value.zoom})),N=de(()=>l.value.markerStart?`url(#${In(l.value.markerStart,t)})`:""),T=de(()=>l.value.markerEnd?`url(#${In(l.value.markerEnd,t)})`:"");return()=>{var z,x,C;if(!m.value||!o.value)return null;const D=o.value.id,O=o.value.type,H=m.value.handleBounds;let Y=H?.[O]??[];if(n.value===Dt.Loose){const q=H?.[O==="source"?"target":"source"]??[];Y=[...Y,...q]}if(!Y)return null;const I=(D?Y.find(q=>q.id===D):Y[0])??null,U=I?.position??fe.Top,{x:K,y:_}=sn(m.value,I,U);let te=null;M.value&&(n.value===Dt.Strict?te=((z=M.value.handleBounds[O==="source"?"target":"source"])==null?void 0:z.find(q=>{var Q;return q.id===((Q=r.value)==null?void 0:Q.id)}))||null:te=((x=[...M.value.handleBounds.source??[],...M.value.handleBounds.target??[]])==null?void 0:x.find(q=>{var Q;return q.id===((Q=r.value)==null?void 0:Q.id)}))||null);const w=((C=r.value)==null?void 0:C.position)??(U?tr[U]:null);if(!U||!w)return null;const B=a.value??l.value.type??Ot.Bezier;let $="";const F={sourceX:K,sourceY:_,sourcePosition:U,targetX:E.value.x,targetY:E.value.y,targetPosition:w};return B===Ot.Bezier?[$]=Wa(F):B===Ot.Step?[$]=or({...F,borderRadius:0}):B===Ot.SmoothStep?[$]=or(F):B===Ot.SimpleBezier?[$]=Ba(F):$=`M${K},${_} ${E.value.x},${E.value.y}`,Ae("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Ae("g",{class:"vue-flow__connection"},v?Ae(v,{sourceX:K,sourceY:_,sourcePosition:U,targetX:E.value.x,targetY:E.value.y,targetPosition:w,sourceNode:m.value,sourceHandle:I,targetNode:M.value,targetHandle:te,markerEnd:T.value,markerStart:N.value,connectionStatus:u.value}):Ae("path",{d:$,class:[l.value.class,u.value,"vue-flow__connection-path"],style:{...s.value,...l.value.style},"marker-end":T.value,"marker-start":N.value})))}}}),np=tp,op=["id","markerWidth","markerHeight","markerUnits","orient"],rp={name:"MarkerType",compatConfig:{MODE:3}},ip=We({...rp,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(R(),Z("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===g(Qo).ArrowClosed?(R(),Z("polyline",{key:0,style:Oe({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):Ee("",!0),t.type===g(Qo).Arrow?(R(),Z("polyline",{key:1,style:Oe({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):Ee("",!0)],8,op))}}),ap={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},sp={name:"MarkerDefinitions",compatConfig:{MODE:3}},lp=We({...sp,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:r}=He(),i=de(()=>{const a=new Set,s=[],l=u=>{if(u){const d=In(u,t);a.has(d)||(typeof u=="object"?s.push({...u,id:d,color:u.color||r.value}):s.push({id:d,color:r.value,type:u}),a.add(d))}};for(const u of[o.value.markerEnd,o.value.markerStart])l(u);for(const u of n.value)for(const d of[u.markerStart,u.markerEnd])l(d);return s.sort((u,d)=>u.id.localeCompare(d.id))});return(a,s)=>(R(),Z("svg",ap,[V("defs",null,[(R(!0),Z(Se,null,Ve(i.value,l=>(R(),je(ip,{id:l.id,key:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,"stroke-width":l.strokeWidth,orient:l.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),up={name:"Edges",compatConfig:{MODE:3}},dp=We({...up,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=He();return(r,i)=>(R(),Z(Se,null,[ue(lp),(R(!0),Z(Se,null,Ve(g(n),a=>(R(),Z("svg",{key:a.id,class:"vue-flow__edges vue-flow__container",style:Oe({zIndex:g(Ic)(a,g(t),g(o))})},[ue(g(ep),{id:a.id},null,8,["id"])],4))),128)),ue(g(np))],64))}}),cp=We({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:r,multiSelectionActive:i,emits:a,removeSelectedNodes:s,addSelectedNodes:l,updateNodeDimensions:u,onUpdateNodeInternals:d,getNodeTypes:p,nodeExtent:v,elevateNodesOnSelect:m,disableKeyboardA11y:M,ariaLiveMessage:E,snapToGrid:N,snapGrid:T,nodeDragThreshold:z,nodesDraggable:x,elementsSelectable:C,nodesConnectable:D,nodesFocusable:O,hooks:H}=He(),Y=J(null);nn(Ca,Y),nn($a,e.id);const I=un(wo),U=ln(),K=Pa(),{node:_,parentNode:te}=Ta(e.id),{emit:w,on:B}=Gc(_,a),$=Be(()=>typeof _.draggable>"u"?x.value:_.draggable),F=Be(()=>typeof _.selectable>"u"?C.value:_.selectable),q=Be(()=>typeof _.connectable>"u"?D.value:_.connectable),Q=Be(()=>typeof _.focusable>"u"?O.value:_.focusable),ee=de(()=>F.value||$.value||H.value.nodeClick.hasListeners()||H.value.nodeDoubleClick.hasListeners()||H.value.nodeMouseEnter.hasListeners()||H.value.nodeMouseMove.hasListeners()||H.value.nodeMouseLeave.hasListeners()),se=Be(()=>!!_.dimensions.width&&!!_.dimensions.height),le=de(()=>{const k=_.type||"default",y=I?.[`node-${k}`];if(y)return y;let A=_.template||p.value[k];if(typeof A=="string"&&U){const ae=Object.keys(U.appContext.components);ae&&ae.includes(k)&&(A=Ti(k,!1))}return A&&typeof A!="string"?A:(a.error(new Ze(Fe.NODE_TYPE_MISSING,A)),!1)}),ye=Da({id:e.id,el:Y,disabled:()=>!$.value,selectable:F,dragHandle:()=>_.dragHandle,onStart(k){w.dragStart(k)},onDrag(k){w.drag(k)},onStop(k){w.dragStop(k)},onClick(k){b(k)}}),xe=de(()=>_.class instanceof Function?_.class(_):_.class),oe=de(()=>{const k=(_.style instanceof Function?_.style(_):_.style)||{},y=_.width instanceof Function?_.width(_):_.width,A=_.height instanceof Function?_.height(_):_.height;return!k.width&&y&&(k.width=typeof y=="string"?y:`${y}px`),!k.height&&A&&(k.height=typeof A=="string"?A:`${A}px`),k}),P=Be(()=>Number(_.zIndex??oe.value.zIndex??0));return d(k=>{(k.includes(e.id)||!k.length)&&ve()}),xt(()=>{Te(()=>_.hidden,(k=!1,y,A)=>{!k&&Y.value&&(e.resizeObserver.observe(Y.value),A(()=>{Y.value&&e.resizeObserver.unobserve(Y.value)}))},{immediate:!0,flush:"post"})}),Te([()=>_.type,()=>_.sourcePosition,()=>_.targetPosition],()=>{wt(()=>{u([{id:e.id,nodeElement:Y.value,forceUpdate:!0}])})}),Te([()=>_.position.x,()=>_.position.y,()=>{var k;return(k=te.value)==null?void 0:k.computedPosition.x},()=>{var k;return(k=te.value)==null?void 0:k.computedPosition.y},()=>{var k;return(k=te.value)==null?void 0:k.computedPosition.z},P,()=>_.selected,()=>_.dimensions.height,()=>_.dimensions.width,()=>{var k;return(k=te.value)==null?void 0:k.dimensions.height},()=>{var k;return(k=te.value)==null?void 0:k.dimensions.width}],([k,y,A,ae,re,ie])=>{const ce={x:k,y,z:ie+(m.value&&_.selected?1e3:0)};typeof A<"u"&&typeof ae<"u"?_.computedPosition=xc({x:A,y:ae,z:re},ce):_.computedPosition=ce},{flush:"post",immediate:!0}),Te([()=>_.extent,v],([k,y],[A,ae])=>{(k!==A||y!==ae)&&G()}),_.extent==="parent"||typeof _.extent=="object"&&"range"in _.extent&&_.extent.range==="parent"?Xo(()=>se).toBe(!0).then(G):G(),()=>_.hidden?null:Ae("div",{ref:Y,"data-id":_.id,class:["vue-flow__node",`vue-flow__node-${le.value===!1?"default":_.type||"default"}`,{[n.value]:$.value,dragging:ye?.value,draggable:$.value,selected:_.selected,selectable:F.value,parent:_.isParent},xe.value],style:{visibility:se.value?"visible":"hidden",zIndex:_.computedPosition.z??P.value,transform:`translate(${_.computedPosition.x}px,${_.computedPosition.y}px)`,pointerEvents:ee.value?"all":"none",...oe.value},tabIndex:Q.value?0:void 0,role:Q.value?"group":void 0,"aria-describedby":M.value?void 0:`${ca}-${t}`,"aria-label":_.ariaLabel,"aria-roledescription":"node",..._.domAttributes,onMouseenter:we,onMousemove:_e,onMouseleave:Me,onContextmenu:ge,onClick:b,onDblclick:ke,onKeydown:h},[Ae(le.value===!1?p.value.default:le.value,{id:_.id,type:_.type,data:_.data,events:{..._.events,...B},selected:_.selected,resizing:_.resizing,dragging:ye.value,connectable:q.value,position:_.computedPosition,dimensions:_.dimensions,isValidTargetPos:_.isValidTargetPos,isValidSourcePos:_.isValidSourcePos,parent:_.parentNode,parentNodeId:_.parentNode,zIndex:_.computedPosition.z??P.value,targetPosition:_.targetPosition,sourcePosition:_.sourcePosition,label:_.label,dragHandle:_.dragHandle,onUpdateNodeInternals:ve})]);function G(){const k=_.computedPosition,{computedPosition:y,position:A}=gr(_,N.value?yo(k,T.value):k,a.error,v.value,te.value);(_.computedPosition.x!==y.x||_.computedPosition.y!==y.y)&&(_.computedPosition={..._.computedPosition,...y}),(_.position.x!==A.x||_.position.y!==A.y)&&(_.position=A)}function ve(){Y.value&&u([{id:e.id,nodeElement:Y.value,forceUpdate:!0}])}function we(k){ye?.value||w.mouseEnter({event:k,node:_})}function _e(k){ye?.value||w.mouseMove({event:k,node:_})}function Me(k){ye?.value||w.mouseLeave({event:k,node:_})}function ge(k){return w.contextMenu({event:k,node:_})}function ke(k){return w.doubleClick({event:k,node:_})}function b(k){F.value&&(!o.value||!$.value||z.value>0)&&nr(_,i.value,l,s,r,!1,Y.value),w.click({event:k,node:_})}function h(k){if(!(er(k)||M.value))if(pa.includes(k.key)&&F.value){const y=k.key==="Escape";nr(_,i.value,l,s,r,y,Y.value)}else $.value&&_.selected&&tn[k.key]&&(k.preventDefault(),E.value=`Moved selected node ${k.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~_.position.x}, y: ${~~_.position.y}`,K({x:tn[k.key].x,y:tn[k.key].y},k.shiftKey))}}}),fp=cp;function pp(e={includeHiddenNodes:!1}){const{nodes:t}=He();return de(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&(n?.handleBounds===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const hp={class:"vue-flow__nodes vue-flow__container"},gp={name:"Nodes",compatConfig:{MODE:3}},vp=We({...gp,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=He(),r=pp(),i=J();return Te(r,a=>{a&&wt(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),xt(()=>{i.value=new ResizeObserver(a=>{const s=a.map(l=>({id:l.target.getAttribute("data-id"),nodeElement:l.target,forceUpdate:!0}));wt(()=>n(s))})}),Di(()=>{var a;return(a=i.value)==null?void 0:a.disconnect()}),(a,s)=>(R(),Z("div",hp,[i.value?(R(!0),Z(Se,{key:0},Ve(g(t),(l,u,d,p)=>{const v=[l.id];if(p&&p.key===l.id&&rs(p,v))return p;const m=(R(),je(g(fp),{id:l.id,key:l.id,"resize-observer":i.value},null,8,["id","resize-observer"]));return m.memo=v,m},s,0),128)):Ee("",!0)]))}});function mp(){const{emits:e}=He();xt(()=>{if(Ia()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new Ze(Fe.MISSING_STYLES))}})}const yp=V("div",{class:"vue-flow__edge-labels"},null,-1),wp={name:"VueFlow",compatConfig:{MODE:3}},bp=We({...wp,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,r=ns(),i=Mo(o,"modelValue",n),a=Mo(o,"nodes",n),s=Mo(o,"edges",n),l=He(o),u=qc({modelValue:i,nodes:a,edges:s},o,l);return Jc(n,l.hooks),qf(),mp(),nn(wo,r),$i(u),t(l),(d,p)=>(R(),Z("div",{ref:g(l).vueFlowRef,class:"vue-flow"},[ue(Xf,null,{default:he(()=>[ue(dp),yp,ue(vp),Ye(d.$slots,"zoom-pane")]),_:3}),Ye(d.$slots,"default"),ue(Kf)],512))}}),xp={name:"Panel",compatConfig:{MODE:3}},_p=We({...xp,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=He(),o=de(()=>`${t.position}`.split("-"));return(r,i)=>(R(),Z("div",{class:Ke(["vue-flow__panel",o.value]),style:Oe({pointerEvents:g(n)?"none":"all"})},[Ye(r.$slots,"default")],6))}}),kp={name:"ControlButton",compatConfig:{MODE:3}},Sp=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},Ep={type:"button",class:"vue-flow__controls-button"};function Np(e,t,n,o,r,i){return R(),Z("button",Ep,[Ye(e.$slots,"default")])}const Gn=Sp(kp,[["render",Np]]),Ip={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},$p=V("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),Cp=[$p];function Dp(e,t){return R(),Z("svg",Ip,Cp)}const Mp={render:Dp},Tp={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Pp=V("path",{d:"M0 0h32v4.2H0z"},null,-1),zp=[Pp];function Op(e,t){return R(),Z("svg",Tp,zp)}const Ap={render:Op},Wp={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Bp=V("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),Hp=[Bp];function Lp(e,t){return R(),Z("svg",Wp,Hp)}const Vp={render:Lp},Rp={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Yp=V("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),Xp=[Yp];function Fp(e,t){return R(),Z("svg",Rp,Xp)}const Gp={render:Fp},Up={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Zp=V("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),Kp=[Zp];function qp(e,t){return R(),Z("svg",Up,Kp)}const jp={render:qp},Jp={name:"Controls",compatConfig:{MODE:3}},Qp=We({...Jp,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>da.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:o,elementsSelectable:r,setInteractive:i,zoomIn:a,zoomOut:s,fitView:l,viewport:u,minZoom:d,maxZoom:p}=He(),v=Be(()=>n.value||o.value||r.value),m=Be(()=>u.value.zoom<=d.value),M=Be(()=>u.value.zoom>=p.value);function E(){a(),t("zoomIn")}function N(){s(),t("zoomOut")}function T(){l(e.fitViewParams),t("fitView")}function z(){i(!v.value),t("interactionChange",!v.value)}return(x,C)=>(R(),je(g(_p),{class:"vue-flow__controls",position:x.position},{default:he(()=>[Ye(x.$slots,"top"),x.showZoom?(R(),Z(Se,{key:0},[Ye(x.$slots,"control-zoom-in",{},()=>[ue(Gn,{class:"vue-flow__controls-zoomin",disabled:M.value,onClick:E},{default:he(()=>[Ye(x.$slots,"icon-zoom-in",{},()=>[(R(),je(Jt(g(Mp))))])]),_:3},8,["disabled"])]),Ye(x.$slots,"control-zoom-out",{},()=>[ue(Gn,{class:"vue-flow__controls-zoomout",disabled:m.value,onClick:N},{default:he(()=>[Ye(x.$slots,"icon-zoom-out",{},()=>[(R(),je(Jt(g(Ap))))])]),_:3},8,["disabled"])])],64)):Ee("",!0),x.showFitView?Ye(x.$slots,"control-fit-view",{key:1},()=>[ue(Gn,{class:"vue-flow__controls-fitview",onClick:T},{default:he(()=>[Ye(x.$slots,"icon-fit-view",{},()=>[(R(),je(Jt(g(Vp))))])]),_:3})]):Ee("",!0),x.showInteractive?Ye(x.$slots,"control-interactive",{key:2},()=>[x.showInteractive?(R(),je(Gn,{key:0,class:"vue-flow__controls-interactive",onClick:z},{default:he(()=>[v.value?Ye(x.$slots,"icon-unlock",{key:0},()=>[(R(),je(Jt(g(jp))))]):Ee("",!0),v.value?Ee("",!0):Ye(x.$slots,"icon-lock",{key:1},()=>[(R(),je(Jt(g(Gp))))])]),_:3})):Ee("",!0)]):Ee("",!0),Ye(x.$slots,"default")]),_:3},8,["position"]))}}),vt={async getPathList(){const{data:e}=await Zt.get("/workPath/getWorkPathList");return e},async createPath(e){const{data:t}=await Zt.post("/workPath/createWorkPath",e);return t},async updateWorkPath(e,t){const{data:n}=await Zt.put(`/workPath/updateWorkPath/${e}`,t);return n},async deleteWorkPath(e){const{data:t}=await Zt.delete(`/workPath/deleteWorkPath/${e}`);return t},async optimizePaths(){const{data:e}=await Zt.post("/workPath/optimizePaths");return e},async optimizePath(e){const{data:t}=await Zt.post(`/workPath/optimizePath/${e}`);return t}},Tt=ar.chart,La=ds("chartConfig",()=>({config:Tt}));function rr(e){const t=new Date;t.setHours(0,0,0,0);const n=new Date(e);return n.setHours(0,0,0,0),Math.round((n.getTime()-t.getTime())/(1440*60*1e3))}function eh(e){const t=new Date;t.setHours(0,0,0,0);const n=new Date(t.getTime()+e*24*60*60*1e3);return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`}function fo(e){return rr(e)*Tt.pixelPerDay+Tt.nodePaddingX}function Ni(e){return e*Tt.pixelPerDay-2*Tt.nodePaddingX}function th(e,t){return(rr(t)-rr(e)+1)*Tt.pixelPerDay-2*Tt.nodePaddingX}function vn(e){const t=th(e.startDate,e.completionDate),n=Tt.nodeHeight,o={width:`${t}px`,height:`${n}px`,overflow:"visible",whiteSpace:"nowrap"};return e.isWorkingOnHoliday||(o.backgroundColor="#f3f4f6",o.borderColor="#d1d5db"),{id:`work-${e.workId}`,type:"default",position:{x:fo(e.startDate),y:e.positionY},data:{label:e.workName,work:e,originalX:fo(e.startDate),computedWidth:t,computedHeight:n},style:o,sourcePosition:fe.Right,targetPosition:fe.Left,connectable:!0}}function nh(e){return e.map(t=>vn(t))}function oh(e){return e.isActivated?e.isHoliday?"holiday":"normal":"deactivated"}const rh=["","","","","","",""],st=20,jt=st*5;function Ro(e,t,n){if(e.length===0)return[];const o=[];let r=e[0][t],i=e[0].dayIndex,a=1;for(let s=1;s<e.length;s++){const l=e[s];l[t]===r?a++:(o.push({startIndex:i,span:a,label:n(e[s-1])}),r=l[t],i=l.dayIndex,a=1)}return o.push({startIndex:i,span:a,label:n(e[e.length-1])}),o}function ih(e,t,n){const o=new Date(e.date),r=oh(e);return{date:o,dateString:e.date,dayIndex:t,dayOfMonth:o.getDate(),dayName:rh[e.dayOfWeek],isHoliday:r==="holiday",holidayName:e.holidayName,isDeactivated:r==="deactivated",deactivatedReason:e.deactivatedReason,isToday:e.date===n,year:o.getFullYear(),month:o.getMonth()+1,weekNumber:e.weekNumber}}function ah(e,t){const n=La(),o=de(()=>n.config.pixelPerDay),r=J(null),i=J(0);let a=null;const s=new Date,l=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,u=de(()=>{if(!t.value?.dates.length)return 0;const D=t.value.dates.findIndex(O=>O.date===l);return D>=0?D:0}),d=de(()=>t.value?.dates.length?t.value.dates.map((D,O)=>{const H=O-u.value;return ih(D,H,l)}):[]),p=de(()=>{if(!i.value||d.value.length===0)return[];const D=e.value,O=-D.x/D.zoom,H=O+i.value/D.zoom,Y=Math.floor(O/o.value),I=Math.ceil(H/o.value);return d.value.filter(U=>U.dayIndex>=Y&&U.dayIndex<=I)}),v=de(()=>{if(d.value.length===0)return{startX:0,endX:0,width:0};const D=d.value[0],O=d.value[d.value.length-1],H=D.dayIndex*o.value,Y=(O.dayIndex+1)*o.value;return{startX:H,endX:Y,width:Y-H}}),m=de(()=>Ro(p.value,"year",D=>`${D.year}`)),M=de(()=>Ro(p.value,"month",D=>`${D.month}`)),E=de(()=>Ro(p.value,"weekNumber",D=>`W${D.weekNumber}`)),N=de(()=>d.value.filter(D=>D.isHoliday).map(D=>D.dayIndex)),T=de(()=>d.value.filter(D=>D.isDeactivated).map(D=>D.dayIndex)),z=de(()=>{const D=d.value.find(O=>O.isToday);return D?D.dayIndex:null});return{containerRef:r,containerWidth:i,DAY_WIDTH:o,allProjectDates:d,visibleDates:p,projectGridBounds:v,yearCells:m,monthCells:M,weekCells:E,holidayIndices:N,deactivatedIndices:T,todayInProject:z,setupResizeObserver:()=>{r.value&&(a=new ResizeObserver(D=>{const O=D[0];O&&(i.value=O.contentRect.width)}),a.observe(r.value))},cleanupResizeObserver:()=>{a&&(a.disconnect(),a=null)}}}function sh(e){if(e.length===0)return[];const t=new Set(e.map(s=>s.sourceWorkId)),n=new Set(e.map(s=>s.targetWorkId));let o=null;for(const s of t)if(!n.has(s)){o=s;break}o||(o=e[0].sourceWorkId);const r=new Map(e.map(s=>[s.sourceWorkId,s.targetWorkId])),i=[o];let a=o;for(;r.has(a);){const s=r.get(a);if(i.includes(s))break;i.push(s),a=s}return i}function lh(e){const t=[];for(let n=0;n<e.length-1;n++)t.push({sourceWorkId:e[n],targetWorkId:e[n+1]});return t}function uh(e,t,n,o){const r=J(null),i=J([]),a=J(!1),s=de(()=>r.value!==null),l=de(()=>r.value?n.value.find(O=>O.workPathId===r.value)?.workPathColor||"#3b82f6":null),u=de(()=>{if(i.value.length===0)return[];const D=new Set(i.value.map(_=>_.sourceWorkId)),O=new Set(i.value.map(_=>_.targetWorkId));let H=null;for(const _ of D)if(!O.has(_)){H=_;break}if(H===null&&i.value.length>0&&(H=i.value[0].sourceWorkId),H===null)return[];const Y=new Map;i.value.forEach(_=>{Y.set(_.sourceWorkId,_.targetWorkId)});const I=[H];let U=H;const K=new Set([H]);for(;Y.has(U);){const _=Y.get(U);if(K.has(_))break;I.push(_),K.add(_),U=_}return I.map(_=>{const te=e.value.find(w=>w.id===`work-${_}`);return{workId:_,workName:te?.data.work?.workName||`Work ${_}`}})}),d=de(()=>{const D=new Set;return i.value.forEach(O=>{D.add(O.sourceWorkId),D.add(O.targetWorkId)}),D}),p=de(()=>s.value?Array.from(d.value).map(D=>{const O=e.value.find(H=>H.id===`work-${D}`);return O?{workId:D,x:O.position.x+O.data.computedWidth,y:O.position.y}:null}).filter(D=>D!==null):[]),v=de(()=>{if(!r.value)return t.value.map(I=>{const U=I.data?.offset||0;return{...I,style:{stroke:I.style?.stroke,transform:`translate(${U}px, ${U}px)`}}});const O=n.value.find(I=>I.workPathId===r.value)?.workPathColor||"#3b82f6",H=t.value.filter(I=>I.data?.pathId!==r.value).map(I=>{const U=I.data?.offset||0;return{...I,style:{stroke:"#9ca3af",strokeWidth:1,transform:`translate(${U}px, ${U}px)`}}}),Y=i.value.map((I,U)=>({id:`editing-${r.value}-${I.sourceWorkId}-${I.targetWorkId}-${U}`,source:`work-${I.sourceWorkId}`,target:`work-${I.targetWorkId}`,type:"smoothstep",pathOptions:{borderRadius:20,offset:15},style:{stroke:O,strokeWidth:2},data:{pathId:r.value,editing:!0}}));return[...H,...Y]}),m=D=>{if(r.value===D)return;r.value=D;const O=n.value.find(H=>H.workPathId===D);i.value=O?.edges?[...O.edges]:[]};return{selectedPathId:r,editingPathEdges:i,isUpdatingPath:a,isPathEditMode:s,selectedPathColor:l,orderedChainNodes:u,pathNodeIds:d,deleteButtonNodes:p,styledEdges:v,selectPath:m,togglePathSelection:D=>{r.value===D?(r.value=null,i.value=[]):m(D)},submitPathUpdate:async()=>{if(r.value){a.value=!0;try{const D=await vt.updateWorkPath(r.value,{edges:i.value});o(D),r.value=null,i.value=[]}catch(D){console.error("  :",D);const O=D,H=O.response?.data?.message||O.message;alert(H)}finally{a.value=!1}}},savePathEdges:async()=>{if(r.value){a.value=!0;try{const D=await vt.updateWorkPath(r.value,{edges:i.value});o(D)}catch(D){console.error("  :",D);const O=D,H=O.response?.data?.message||O.message;alert(H)}finally{a.value=!1}}},cancelPathEdit:()=>{r.value=null,i.value=[]},onConnect:D=>{const O=parseInt(D.source.replace("work-","")),H=parseInt(D.target.replace("work-",""));if(O===H)return null;if(!s.value)return{sourceWorkId:O,targetWorkId:H};if(i.value.some(w=>w.sourceWorkId===O&&w.targetWorkId===H))return null;const I=sh(i.value),U=I.indexOf(O),K=I.indexOf(H);let _;if(U===-1&&K===-1)return i.value.push({sourceWorkId:O,targetWorkId:H}),null;if(U===-1)_=[...I],_.splice(K,0,O);else if(K===-1)_=[...I],_.splice(U+1,0,H);else{if(U+1===K)return null;{_=I.filter(B=>B!==H);const w=_.indexOf(O);_.splice(w+1,0,H)}}const te=new Map;return i.value.forEach(w=>{w.lagDays!=null&&te.set(`${w.sourceWorkId}-${w.targetWorkId}`,w.lagDays)}),i.value=lh(_).map(w=>{const B=te.get(`${w.sourceWorkId}-${w.targetWorkId}`);return B!=null?{...w,lagDays:B}:w}),null},removeNodeFromPath:D=>{const O=i.value.find(Y=>Y.targetWorkId===D),H=i.value.find(Y=>Y.sourceWorkId===D);i.value=i.value.filter(Y=>Y.sourceWorkId!==D&&Y.targetWorkId!==D),O&&H&&i.value.push({sourceWorkId:O.sourceWorkId,targetWorkId:H.targetWorkId})},clearPathEditMode:()=>{r.value=null,i.value=[]}}}function dh(e,t){const n=J(null),o=J(!1),r=J({startDate:"",workLeadTime:1,isWorkingOnHoliday:!0}),i=de(()=>n.value?e.value.find(d=>d.id===`work-${n.value}`)?.data.work:null);return Te(i,u=>{u&&(r.value={startDate:u.startDate,workLeadTime:u.workLeadTime,isWorkingOnHoliday:u.isWorkingOnHoliday})}),{selectedWorkId:n,isUpdatingWork:o,workEditForm:r,selectedWork:i,submitWorkUpdate:async()=>{if(n.value){o.value=!0;try{const u=i.value,d={};u&&r.value.startDate!==u.startDate&&(d.startDate=r.value.startDate),u&&r.value.workLeadTime!==u.workLeadTime&&(d.workLeadTime=r.value.workLeadTime),u&&r.value.isWorkingOnHoliday!==u.isWorkingOnHoliday&&(d.isWorkingOnHoliday=r.value.isWorkingOnHoliday);const p=await nt.updateWork(n.value,d);t(p),n.value=null}catch(u){console.error("  :",u);const d=u,p=d.response?.data?.message||d.message;alert(p)}finally{o.value=!1}}},clearSelection:()=>{n.value=null},selectWork:u=>{n.value=u}}}function ch(){const e=J([]),t=J([]),n=J([]),o=J([]),r=J([]),i=J([]),a=J([]),s=J([]),l=J(!1),u=J(null),d=J(!1),p=J(""),v=J(0),m=J(""),M=J(""),E=J(""),N=J([]),T=J([]),z=J([]),x=J([]),C=J([]),D=J(""),O=J(""),H=J(1),Y=J(!1),I=J(!1),U=J(!1),K=async()=>{try{const[P,G,ve,we,_e,Me]=await Promise.all([at.getDivisionList(),at.getZoneList(),at.getFloorList(),at.getSectionList(),at.getUsageList(),at.getComponentTypeList()]);e.value=P,o.value=G,r.value=ve,i.value=we,a.value=_e,s.value=Me}catch(P){console.error("   :",P)}},_=async P=>{u.value=P.workId,await B(P),l.value=!0},te=()=>{l.value=!1,u.value=null,d.value=!1},w=(P,G)=>{d.value=!0,u.value=null,p.value=P,v.value=G,m.value="",M.value="",E.value="",N.value=[],T.value=[],z.value=[],x.value=[],C.value=[],D.value="",t.value=[],n.value=[],l.value=!0},B=async P=>{const G=e.value.find(ve=>ve.name===P.division);if(m.value=G?String(G.id):"",t.value=[],n.value=[],M.value="",E.value=P.subWorkTypeId?String(P.subWorkTypeId):"",G){Y.value=!0;try{t.value=await at.getWorkTypeList(G.id);const ve=t.value.find(we=>we.name===P.workType);if(M.value=ve?String(ve.id):"",ve){I.value=!0;try{n.value=await at.getSubWorkTypeList(ve.id)}finally{I.value=!1}}}finally{Y.value=!1}}O.value=P.startDate,H.value=P.workLeadTime,N.value=P.zoneIds??[],T.value=P.floorIds??[],z.value=P.sectionIds??[],x.value=P.usageIds??[],C.value=P.componentTypeIds?[...P.componentTypeIds]:[],D.value=P.annotation||""};return{divisions:e,tooltipWorkTypes:t,tooltipSubWorkTypes:n,zones:o,floors:r,sections:i,usages:a,componentTypes:s,showDialog:l,editingWorkId:u,isCreateMode:d,createPositionY:v,editDivisionId:m,editWorkTypeId:M,editSubWorkTypeId:E,editZoneIds:N,editFloorIds:T,editSectionIds:z,editUsageIds:x,editComponentTypeIds:C,editAnnotation:D,editStartDate:O,editWorkLeadTime:H,isLoadingTooltipWorkTypes:Y,isLoadingTooltipSubWorkTypes:I,isSavingDetails:U,loadReferenceData:K,openDialog:_,openCreateDialog:w,closeDialog:te,initFromWork:B,handleTooltipDivisionChange:async P=>{const G=String(P??"");if(m.value=G,M.value="",E.value="",t.value=[],n.value=[],!!G){Y.value=!0;try{t.value=await at.getWorkTypeList(Number(G))}finally{Y.value=!1}}},handleTooltipWorkTypeChange:async P=>{const G=String(P??"");if(M.value=G,E.value="",n.value=[],!!G){I.value=!0;try{n.value=await at.getSubWorkTypeList(Number(G))}finally{I.value=!1}}},handleTooltipSubWorkTypeChange:P=>{E.value=String(P??"")},toggleZone:P=>{N.value=N.value.includes(P)?N.value.filter(G=>G!==P):[...N.value,P]},toggleFloor:P=>{T.value=T.value.includes(P)?T.value.filter(G=>G!==P):[...T.value,P]},toggleSection:P=>{z.value=z.value.includes(P)?z.value.filter(G=>G!==P):[...z.value,P]},toggleUsage:P=>{x.value=x.value.includes(P)?x.value.filter(G=>G!==P):[...x.value,P]},toggleComponentType:P=>{C.value=C.value.includes(P)?C.value.filter(G=>G!==P):[...C.value,P]},submitCreate:async()=>{U.value=!0;try{const P={subWorkTypeId:Number(E.value),startDate:p.value,workLeadTime:ar.work.defaultLeadTime,isWorkingOnHoliday:!0,zoneIds:N.value,floorIds:T.value,sectionIds:z.value,usageIds:x.value};C.value.length>0&&(P.componentTypeIds=C.value),D.value&&(P.annotation=D.value);const G=await nt.createWork(P);return te(),G}catch(P){console.error("  :",P);const G=P.response?.data?.message||P.message;return alert(G),null}finally{U.value=!1}},submitEdit:async()=>{if(!u.value)return null;U.value=!0;try{const P={startDate:O.value,workLeadTime:H.value,zoneIds:N.value,floorIds:T.value,sectionIds:z.value,usageIds:x.value,componentTypeIds:C.value,annotation:D.value};E.value&&(P.subWorkTypeId=Number(E.value));const G=await nt.updateWork(u.value,P);return te(),G}catch(P){console.error("  :",P);const G=P.response?.data?.message||P.message;return alert(G),null}finally{U.value=!1}}}}const fh={class:"h-full"},ph={style:{position:"absolute",width:"100%",height:"100%","pointer-events":"none","z-index":"0"}},hh=["transform"],gh=["x","width"],vh=["x","width"],mh=["x","width"],yh=["x","width"],wh={key:1},bh=["x","y","width","height","fill","stroke"],xh=["x","y","width","height","fill","stroke"],_h=["x"],kh=["onMousedown","onClick"],Sh=["onMousedown","onClick"],Eh=["onMousedown","onClick"],Nh=["onMousedown","onClick"],Ih=["onMousedown","onClick"],$h={class:"px-3 py-2 text-sm bg-popover border border-border rounded-lg shadow-lg space-y-2"},Ch={class:"text-xs font-medium"},Dh={class:"text-muted-foreground"},Mh={class:"text-[11px] text-muted-foreground"},Th={class:"font-medium text-foreground"},Ph={class:"text-[11px] text-muted-foreground"},zh={class:"font-medium text-foreground"},Oh={class:"text-[11px] text-muted-foreground"},Ah={class:"font-medium text-foreground"},Wh={key:0,class:"space-y-1.5 pt-1 border-t border-border"},Bh={class:"text-[11px] text-muted-foreground"},Hh={class:"font-medium text-foreground"},Lh={class:"ml-1 text-[10px]"},Vh={class:"flex items-center gap-1"},Rh=["value","onChange"],Yh=["onClick"],Xh={class:"flex rounded-md border border-border overflow-hidden"},Fh=["onClick"],Gh={key:0,"data-group-toggle":"",class:"absolute bottom-4 right-4 z-30 flex flex-col gap-1 bg-background/80 backdrop-blur-sm rounded-md border border-border px-2 py-1.5"},Uh={class:"flex items-center gap-1.5 cursor-pointer"},Zh={class:"flex items-center gap-1.5 cursor-pointer"},Kh={class:"absolute bottom-4 left-4 z-30 flex items-center gap-3"},qh={class:"space-y-3"},jh={class:"space-y-1"},Jh={class:"space-y-1"},Qh={class:"flex items-center gap-1.5"},eg={class:"flex rounded-md border border-border overflow-hidden"},tg={class:"space-y-4"},ng={class:"space-y-1.5"},og=["value"],rg={class:"space-y-1.5"},ig={class:"flex items-center gap-1"},ag=["disabled"],sg={class:"h-8 flex-1 flex items-center justify-center text-sm font-medium rounded-md border border-border bg-background"},lg={class:"space-y-1.5"},ug={class:"space-y-1.5"},dg={class:"grid grid-cols-2 gap-3"},cg={key:0,class:"space-y-1"},fg={class:"flex flex-wrap gap-x-3 gap-y-1"},pg={key:1,class:"space-y-1"},hg={class:"flex flex-wrap gap-x-3 gap-y-1"},gg={key:2,class:"space-y-1"},vg={class:"flex flex-wrap gap-x-3 gap-y-1"},mg={key:3,class:"space-y-1"},yg={class:"flex flex-wrap gap-x-3 gap-y-1"},wg={key:1,class:"space-y-1.5"},bg={class:"flex flex-wrap gap-x-4 gap-y-1.5"},xg={class:"space-y-1.5"},_g=We({__name:"Viewer2dArea",emits:["works-loaded"],setup(e,{emit:t}){const n=t,o=J([]),r=J([]),{zoomIn:i,zoomOut:a,viewport:s}=He(),l=J([]),u=J(!1),d=J(!1),p=J(!1),v=J(null),m=J(!1),M=J(0),E=J(new Map),N=(S,f)=>{f.stopPropagation(),v.value=S},T=(S,f)=>{f.preventDefault(),f.stopPropagation(),v.value!==S&&(v.value=S);const c=te.value[S];if(!c)return;m.value=!0,M.value=f.clientY;const W=new Map;o.value.filter(De=>De.id.startsWith("work-")).forEach(De=>{const Le=De.data.work;(c.level==="workType"?Le.workType||"":Le.subWorkType||"")===c.label&&W.set(Le.workId,De.position.y)}),E.value=W;const j=$.config,X=j.nodeHeight+2*j.nodePaddingY,me=De=>{const et=(De.clientY-M.value)/s.value.zoom,Ge=Math.round(et/X)*X;Ge===0&&Math.abs(et)<X/2||W.forEach((Je,ht)=>{const kt=o.value.find(St=>St.id===`work-${ht}`);kt&&(kt.position.y=Je+Ge)})},Pe=async()=>{window.removeEventListener("mousemove",me),window.removeEventListener("mouseup",Pe),m.value=!1;const De=[];W.forEach((Le,et)=>{const Ge=o.value.find(kt=>kt.id===`work-${et}`);if(!Ge)return;const Je=Math.floor(Ge.position.y/X)*X;Ge.position.y=Je;const ht=Ge.data.work;Je!==Le&&De.push(nt.updateWork(ht.workId,{positionY:Je}).then(()=>{Ge.data.work={...ht,positionY:Je}}).catch(kt=>{console.error("   :",kt),Ge.position.y=Le}))}),await Promise.all(De)};window.addEventListener("mousemove",me),window.addEventListener("mouseup",Pe)},z=J(!1),x=J("work"),C=J(!1),D=J(!1),O=J(!1),H=J("all"),Y=async()=>{O.value=!0;try{const S=H.value==="current"?await vt.optimizePath(A.value):await vt.optimizePaths();le(S),D.value=!1,dn.value=!1}catch(S){console.error("  :",S);const f=S.response?.data?.message||S.message;alert(f)}finally{O.value=!1}},I=J({visible:!1,nodeX:0,nodeY:0,workId:null,workName:"",startDate:"",workLeadTime:0,completionDate:"",isWorkingOnHoliday:!0}),U=de(()=>{const S=I.value.workId;return S?l.value.flatMap(f=>f.edges.filter(W=>W.targetWorkId===S).map(W=>{const j=o.value.find(X=>X.id===`work-${W.sourceWorkId}`)?.data.work;return{pathId:f.workPathId,pathName:f.workPathName,pathColor:f.workPathColor,workId:W.sourceWorkId,workName:j?.workName||`Work ${W.sourceWorkId}`,lagDays:W.lagDays??0,isFollowing:W.lagDays!==void 0&&W.lagDays!==null}})):[]}),K=[{bg:"rgba(59, 130, 246, 0.06)",border:"rgba(59, 130, 246, 0.25)",subBg:"rgba(59, 130, 246, 0.08)",subBorder:"rgba(59, 130, 246, 0.35)"},{bg:"rgba(16, 185, 129, 0.06)",border:"rgba(16, 185, 129, 0.25)",subBg:"rgba(16, 185, 129, 0.08)",subBorder:"rgba(16, 185, 129, 0.35)"},{bg:"rgba(245, 158, 11, 0.06)",border:"rgba(245, 158, 11, 0.25)",subBg:"rgba(245, 158, 11, 0.08)",subBorder:"rgba(245, 158, 11, 0.35)"},{bg:"rgba(168, 85, 247, 0.06)",border:"rgba(168, 85, 247, 0.25)",subBg:"rgba(168, 85, 247, 0.08)",subBorder:"rgba(168, 85, 247, 0.35)"},{bg:"rgba(236, 72, 153, 0.06)",border:"rgba(236, 72, 153, 0.25)",subBg:"rgba(236, 72, 153, 0.08)",subBorder:"rgba(236, 72, 153, 0.35)"},{bg:"rgba(6, 182, 212, 0.06)",border:"rgba(6, 182, 212, 0.25)",subBg:"rgba(6, 182, 212, 0.08)",subBorder:"rgba(6, 182, 212, 0.35)"}];function _(S){let f=1/0,c=1/0,W=-1/0,L=-1/0;return S.forEach(j=>{const X=j.data.computedWidth||0,me=j.data.computedHeight||0;f=Math.min(f,j.position.x),c=Math.min(c,j.position.y),W=Math.max(W,j.position.x+X),L=Math.max(L,j.position.y+me)}),{minX:f,minY:c,maxX:W,maxY:L}}const te=de(()=>{const S=o.value.filter(L=>L.id.startsWith("work-"));if(S.length===0)return[];const f=[],c=new Map;S.forEach(L=>{const X=L.data.work.workType||"";c.has(X)||c.set(X,[]),c.get(X).push(L)});let W=0;return c.forEach((L,j)=>{const X=K[W%K.length],me=new Map;if(L.forEach(Pe=>{const Le=Pe.data.work.subWorkType||"";me.has(Le)||me.set(Le,[]),me.get(Le).push(Pe)}),me.size>=2){const{minX:De,minY:Le,maxX:et,maxY:Ge}=_(L);f.push({level:"workType",label:j,x:De-15,y:Le-15,width:et-De+30,height:Ge-Le+30,fillColor:X.bg,borderColor:X.border});const Je=8;me.forEach((ht,kt)=>{const St=_(ht);f.push({level:"subWorkType",label:kt,x:St.minX-Je,y:St.minY-Je,width:St.maxX-St.minX+Je*2,height:St.maxY-St.minY+Je*2,fillColor:X.subBg,borderColor:X.subBorder})})}else{const Pe=me.keys().next().value||"",De=12,{minX:Le,minY:et,maxX:Ge,maxY:Je}=_(L);f.push({level:"subWorkType",label:Pe,x:Le-De,y:et-De,width:Ge-Le+De*2,height:Je-et+De*2,fillColor:X.subBg,borderColor:X.subBorder})}W++}),f}),w=cs(),B=fs(),$=La(),F=async()=>{w.selectedProjectId&&await B.getCalendar(w.selectedProjectId)},q=de(()=>B.calendarData),Q=async(S,f,c,W)=>{const L=l.value.find(X=>X.workPathId===S);if(!L)return;const j=L.edges.map(X=>X.sourceWorkId===f&&X.targetWorkId===c?{...X,lagDays:W}:X);try{const X=await vt.updateWorkPath(S,{edges:j});le(X)}catch(X){console.error("lagDays  :",X),alert(X.response?.data?.message||X.message)}},ee=(S,f,c,W)=>{const L=l.value.find(X=>X.workPathId===S);if(!L)return;const j=L.edges.findIndex(X=>X.sourceWorkId===f&&X.targetWorkId===c);j!==-1&&(L.edges[j]={...L.edges[j],lagDays:W},l.value=[...l.value])},se=async()=>{u.value=!0;try{const[S,f]=await Promise.all([nt.getWorkList(),vt.getPathList()]);o.value=nh(S),l.value=f;const c=new Map;if(r.value=f.flatMap(W=>W.edges.map(L=>{const j=`${L.sourceWorkId}-${L.targetWorkId}`,X=c.get(j)||0;c.set(j,X+1);const me=X,Pe=me===0?0:(me%2===1?1:-1)*Math.ceil(me/2)*3;return{id:`edge-${W.workPathId}-${L.sourceWorkId}-${L.targetWorkId}`,source:`work-${L.sourceWorkId}`,target:`work-${L.targetWorkId}`,type:"smoothstep",pathOptions:{borderRadius:20,offset:15},style:{stroke:W.workPathColor},data:{pathId:W.workPathId,pathName:W.workPathName,offset:Pe}}})),n("works-loaded",S),I.value.visible&&I.value.workId){const W=o.value.find(j=>j.id===`work-${I.value.workId}`),L=W?.data.work;W&&L?(I.value.workName=L.workName,I.value.startDate=L.startDate,I.value.workLeadTime=L.workLeadTime,I.value.completionDate=L.completionDate,I.value.isWorkingOnHoliday=L.isWorkingOnHoliday,I.value.nodeX=W.position.x+W.data.computedWidth/2,I.value.nodeY=W.position.y-8):I.value.visible=!1}}catch(S){console.error("  :",S)}finally{u.value=!1}},le=S=>{if(S.updatedWorks.length>0){const f=new Map(S.updatedWorks.map(c=>[c.workId,c]));if(o.value=o.value.map(c=>{const W=f.get(c.data.work.workId);if(!W)return c;const L=vn(W);return{...L,position:{...L.position,y:c.position.y}}}),I.value.visible&&I.value.workId){const c=f.get(I.value.workId);if(c){I.value.workName=c.workName,I.value.startDate=c.startDate,I.value.workLeadTime=c.workLeadTime,I.value.completionDate=c.completionDate,I.value.isWorkingOnHoliday=c.isWorkingOnHoliday;const W=o.value.find(L=>L.id===`work-${c.workId}`);W&&(I.value.nodeX=W.position.x+W.data.computedWidth/2,I.value.nodeY=W.position.y-8)}}n("works-loaded",o.value.map(c=>c.data.work))}if(S.updatedWorkPaths.length>0){const f=new Set(S.updatedWorkPaths.map(j=>j.workPathId)),c=new Map(S.updatedWorkPaths.map(j=>[j.workPathId,j]));l.value=l.value.map(j=>c.get(j.workPathId)??j),r.value=r.value.filter(j=>!f.has(j.data?.pathId));const W=new Map;r.value.forEach(j=>{const X=`${j.source}-${j.target}`;W.set(X,(W.get(X)||0)+1)});const L=S.updatedWorkPaths.flatMap(j=>j.edges.map(X=>{const me=`work-${X.sourceWorkId}-work-${X.targetWorkId}`,Pe=W.get(me)||0;W.set(me,Pe+1);const De=Pe===0?0:(Pe%2===1?1:-1)*Math.ceil(Pe/2)*3;return{id:`edge-${j.workPathId}-${X.sourceWorkId}-${X.targetWorkId}`,source:`work-${X.sourceWorkId}`,target:`work-${X.targetWorkId}`,type:"smoothstep",pathOptions:{borderRadius:20,offset:15},style:{stroke:j.workPathColor},data:{pathId:j.workPathId,pathName:j.workPathName,offset:De}}}));r.value=[...r.value,...L]}},ye=S=>{x.value=S,z.value=!0},xe=async()=>{C.value=!0;try{if(x.value==="work"&&_t.value){const S=await nt.deleteWork(_t.value),f=`work-${_t.value}`;r.value=r.value.filter(c=>c.source!==f&&c.target!==f),o.value=o.value.filter(c=>c.id!==f),le(S),Ft(),I.value.visible=!1,n("works-loaded",o.value.map(c=>c.data.work))}else if(x.value==="path"&&A.value){await vt.deleteWorkPath(A.value);const S=A.value;r.value=r.value.filter(f=>f.data?.pathId!==S),l.value=l.value.filter(f=>f.workPathId!==S),qe()}z.value=!1}catch(S){console.error(" :",S);const f=S,c=f.response?.data?.message||f.message;alert(c)}finally{C.value=!1}},{containerRef:oe,DAY_WIDTH:P,allProjectDates:G,visibleDates:ve,projectGridBounds:we,yearCells:_e,monthCells:Me,weekCells:ge,holidayIndices:ke,deactivatedIndices:b,todayInProject:h,setupResizeObserver:k,cleanupResizeObserver:y}=ah(s,q),{selectedPathId:A,editingPathEdges:ae,isPathEditMode:re,selectedPathColor:ie,pathNodeIds:ce,deleteButtonNodes:be,styledEdges:Ne,selectPath:$e,cancelPathEdit:qe,onConnect:Pt,removeNodeFromPath:So,savePathEdges:Mn}=uh(o,r,l,le),Yt=J(!1),Re=de(()=>Yt.value||re.value);Te(Yt,S=>{!S&&re.value&&(qe(),I.value.visible=!1)}),Te([Re,ie,ce],([S,f,c])=>{o.value=o.value.map(W=>{const L=parseInt(W.id.replace("work-","")),j=W.data.work,X={width:`${W.data.computedWidth}px`,height:`${W.data.computedHeight}px`,overflow:"visible",whiteSpace:"nowrap"};return j.isWorkingOnHoliday||(X.backgroundColor="#f3f4f6",X.borderColor="#d1d5db"),S&&f&&c.has(L)?{...W,style:{...X,border:`2px solid ${f}`,boxShadow:`0 0 8px ${f}50`}}:{...W,style:X}})},{deep:!0});const{selectedWorkId:_t,workEditForm:Xt,clearSelection:Ft,selectWork:yr}=dh(o,le),pe=Ci(ch()),Tn=J(""),Gt=J(""),Ut=J(!1),Pn=J(!1);Te(A,S=>{if(S){const f=l.value.find(c=>c.workPathId===S);f&&(Tn.value=f.workPathName??"",Gt.value=f.workPathColor,Ut.value=f.critical)}});const Va=async()=>{if(A.value){Pn.value=!0;try{const S=await vt.updateWorkPath(A.value,{workPathName:Tn.value,workPathColor:Gt.value,critical:Ut.value,edges:ae.value});le(S),qe()}catch(S){console.error("  :",S);const f=S.response?.data?.message||S.message;alert(f)}finally{Pn.value=!1}}},zt=J(null),pt=de(()=>{if(!_t.value)return null;const S=o.value.find(W=>W.id===`work-${_t.value}`);if(!S)return null;const f=S.data.computedWidth,c=S.data.computedHeight;return{left:{x:S.position.x,y:S.position.y+c/2},right:{x:S.position.x+f,y:S.position.y+c/2}}}),Ra=S=>{const f=S.node.data.work;if(f){if(I.value.visible&&I.value.workId===f.workId){Re.value||Ft(),I.value.visible=!1,I.value.workId=null;return}Re.value||yr(f.workId),I.value={visible:!0,nodeX:S.node.position.x+S.node.data.computedWidth/2,nodeY:S.node.position.y-8,workId:f.workId,workName:f.workName,startDate:f.startDate,workLeadTime:f.workLeadTime,completionDate:f.completionDate,isWorkingOnHoliday:f.isWorkingOnHoliday}}},wr=S=>`${S.getFullYear()}-${String(S.getMonth()+1).padStart(2,"0")}-${String(S.getDate()).padStart(2,"0")}`,br=async S=>{if(!I.value.workId)return;const f={startDate:I.value.startDate,workLeadTime:I.value.workLeadTime,isWorkingOnHoliday:I.value.isWorkingOnHoliday};S.startDate!==void 0&&(I.value.startDate=S.startDate),S.workLeadTime!==void 0&&(I.value.workLeadTime=S.workLeadTime),S.isWorkingOnHoliday!==void 0&&(I.value.isWorkingOnHoliday=S.isWorkingOnHoliday);try{const c=await nt.updateWork(I.value.workId,S);Xt.value.startDate=I.value.startDate,Xt.value.workLeadTime=I.value.workLeadTime,Xt.value.isWorkingOnHoliday=I.value.isWorkingOnHoliday,le(c)}catch(c){console.error("  :",c);const W=c.response?.data?.message||c.message;alert(W),I.value.startDate=f.startDate,I.value.workLeadTime=f.workLeadTime,I.value.isWorkingOnHoliday=f.isWorkingOnHoliday}},dn=J(!1),Ya=async S=>{const f=Pt(S);if(!f){re.value&&Mn();return}try{const c=await vt.createPath(f),W=c.updatedWorkPaths[0];l.value=[...l.value,W];const L=new Map;r.value.forEach(X=>{const me=`${X.source}-${X.target}`;L.set(me,(L.get(me)||0)+1)});const j=W.edges.map(X=>{const me=`work-${X.sourceWorkId}-work-${X.targetWorkId}`,Pe=L.get(me)||0;L.set(me,Pe+1);const De=Pe===0?0:(Pe%2===1?1:-1)*Math.ceil(Pe/2)*3;return{id:`edge-${W.workPathId}-${X.sourceWorkId}-${X.targetWorkId}`,source:`work-${X.sourceWorkId}`,target:`work-${X.targetWorkId}`,type:"smoothstep",pathOptions:{borderRadius:20,offset:15},style:{stroke:W.workPathColor},data:{pathId:W.workPathId,pathName:W.workPathName,offset:De}}});r.value=[...r.value,...j],le(c),$e(W.workPathId)}catch(c){console.error("  :",c);const W=c.response?.data?.message||c.message;alert(W)}},Xa=S=>{if(!Re.value)return;const f=S.edge.data?.pathId;f&&($e(f),Ft(),I.value.visible=!1)},Fa=S=>{if(!Re.value)return;const f=S.edge.data?.pathId;f&&($e(f),dn.value=!0)},Ga=S=>{const f=S.node.data.work;!f||Re.value||pe.openDialog(f)},Ua=async()=>{if(pe.isCreateMode){const S=await pe.submitCreate();if(!S)return;const f=S.updatedWorks[0],c=vn(f);c.position.y=pe.createPositionY,o.value=[...o.value,c],nt.updateWork(f.workId,{positionY:pe.createPositionY}),yr(f.workId),I.value={visible:!0,nodeX:c.position.x+c.data.computedWidth/2,nodeY:c.position.y-8,workId:f.workId,workName:f.workName,startDate:f.startDate,workLeadTime:f.workLeadTime,completionDate:f.completionDate,isWorkingOnHoliday:f.isWorkingOnHoliday}}else{const S=await pe.submitEdit();if(!S)return;const f=S.updatedWorks.find(L=>L.workId===pe.editingWorkId),c=vn(f);o.value=o.value.map(L=>L.id!==`work-${f.workId}`?L:{...c,position:{...c.position,y:L.position.y}});const W=S.updatedWorks.filter(L=>L.workId!==f.workId);if(W.length>0){const L=new Map(W.map(j=>[j.workId,j]));o.value=o.value.map(j=>{const X=L.get(j.data.work.workId);if(!X)return j;const me=vn(X);return{...me,position:{...me.position,y:j.position.y}}})}if(S.updatedWorkPaths.length>0&&le({updatedWorks:[],updatedWorkPaths:S.updatedWorkPaths}),I.value.visible&&I.value.workId===f.workId){const L=o.value.find(j=>j.id===`work-${f.workId}`);L&&(I.value.workName=f.workName,I.value.startDate=f.startDate,I.value.workLeadTime=f.workLeadTime,I.value.completionDate=f.completionDate,I.value.isWorkingOnHoliday=f.isWorkingOnHoliday,I.value.nodeX=L.position.x+L.data.computedWidth/2,I.value.nodeY=L.position.y-8)}}n("works-loaded",o.value.map(S=>S.data.work))},Za=()=>{I.value.visible=!1,v.value=null,re.value&&qe(),Re.value||Ft()},Ka=S=>{const f=S.target;f.closest(".vue-flow__node")||f.closest("[data-tooltip-balloon]")||f.closest("[data-group-toggle]")||qa(S)},qa=S=>{if(Re.value)return;const f=oe.value;if(!f)return;const c=f.getBoundingClientRect(),W=(S.clientX-c.left-s.value.x)/s.value.zoom,L=(S.clientY-c.top-s.value.y)/s.value.zoom,j=Math.floor(W/ar.chart.pixelPerDay),X=eh(j),me=$.config,Pe=me.nodeHeight+2*me.nodePaddingY,De=Math.floor(L/Pe)*Pe;pe.openCreateDialog(X,De)},ja=async S=>{const f=S.node.data.work;if(!f)return;if(_t.value===f.workId){const X=$.config,me=S.node.data.originalX,Pe=Math.round((S.node.position.x-me)/X.pixelPerDay);if(Pe===0){S.node.position.x=me;return}const De=new Date(f.startDate);De.setHours(0,0,0,0),De.setDate(De.getDate()+Pe);const Le=wr(De),et=fo(Le);S.node.position.x=et,S.node.data.originalX=et;try{const Ge=await nt.updateWork(f.workId,{startDate:Le});Xt.value.startDate=Le,le(Ge)}catch(Ge){console.error("  :",Ge);const Je=Ge.response?.data?.message||Ge.message;alert(Je);const ht=fo(f.startDate);S.node.position.x=ht,S.node.data.originalX=ht}return}const W=$.config,L=W.nodeHeight+2*W.nodePaddingY,j=Math.floor(S.node.position.y/L)*L;if(S.node.position.y=j,j!==f.positionY)try{await nt.updateWork(f.workId,{positionY:j}),S.node.data.work={...f,positionY:j}}catch(X){console.error("  :",X);const me=X.response?.data?.message||X.message;alert(me),S.node.position.y=f.positionY}},zn=(S,f)=>{const c=o.value.find(L=>L.id===`work-${_t.value}`),W=c?.data.work;!c||!W||(f.stopPropagation(),zt.value={side:S,workId:W.workId,startMouseX:f.clientX,origStartDate:W.startDate,origLeadTime:W.workLeadTime,origNodeX:c.position.x,origNodeWidth:c.data.computedWidth},document.addEventListener("mousemove",xr),document.addEventListener("mouseup",_r))},xr=S=>{if(!zt.value)return;const f=zt.value,c=$.config,L=(S.clientX-f.startMouseX)/s.value.zoom,j=Math.round(L/c.pixelPerDay),X=o.value.find(me=>me.id===`work-${f.workId}`);if(X)if(f.side==="left"){const me=Math.min(j,f.origLeadTime-1),Pe=f.origLeadTime-me,De=f.origNodeX+me*c.pixelPerDay,Le=Ni(Pe);X.position.x=De,X.style={...X.style,width:`${Le}px`},X.data.computedWidth=Le}else{const me=Math.max(j,-(f.origLeadTime-1)),Pe=f.origLeadTime+me,De=Ni(Pe);X.style={...X.style,width:`${De}px`},X.data.computedWidth=De}},_r=async()=>{if(document.removeEventListener("mousemove",xr),document.removeEventListener("mouseup",_r),!zt.value)return;const S=zt.value,f=$.config,c=o.value.find(j=>j.id===`work-${S.workId}`);if(zt.value=null,!c)return;let W=S.origStartDate,L=S.origLeadTime;if(S.side==="left"){const j=c.position.x-S.origNodeX,X=Math.round(j/f.pixelPerDay);if(L=S.origLeadTime-X,X!==0){const me=new Date(S.origStartDate);me.setHours(0,0,0,0),me.setDate(me.getDate()+X),W=wr(me)}}else{const j=c.data.computedWidth-S.origNodeWidth,X=Math.round(j/f.pixelPerDay);L=S.origLeadTime+X}if(W===S.origStartDate&&L===S.origLeadTime){c.position.x=S.origNodeX,c.style={...c.style,width:`${S.origNodeWidth}px`},c.data.computedWidth=S.origNodeWidth;return}try{const j={};W!==S.origStartDate&&(j.startDate=W),L!==S.origLeadTime&&(j.workLeadTime=L);const X=await nt.updateWork(S.workId,j);Xt.value.startDate=W,Xt.value.workLeadTime=L,le(X)}catch(j){console.error(" :",j);const X=j.response?.data?.message||j.message;alert(X),c.position.x=S.origNodeX,c.style={...c.style,width:`${S.origNodeWidth}px`},c.data.computedWidth=S.origNodeWidth,c.data.originalX=S.origNodeX}},Ja=S=>{if(zt.value){S.node.position.x=S.node.data.originalX,S.node.position.y=S.node.data.work.positionY;return}const f=S.node.data.originalX,c=S.node.data.work,W=c&&_t.value===c.workId;if(Re.value){c&&(S.node.position.y=c.positionY),f!==void 0&&(S.node.position.x=f);return}if(W){S.node.position.y=c.positionY;const L=$.config,j=S.node.data.originalX,X=Math.round((S.node.position.x-j)/L.pixelPerDay);S.node.position.x=j+X*L.pixelPerDay}else{f!==void 0&&S.node.position.x!==f&&(S.node.position.x=f);const L=$.config,j=L.nodeHeight+2*L.nodePaddingY;S.node.position.y=Math.floor(S.node.position.y/j)*j}c&&I.value.visible&&I.value.workId===c.workId&&(I.value.nodeX=S.node.position.x+S.node.data.computedWidth/2,I.value.nodeY=S.node.position.y-8)},Qa=S=>{S.preventDefault(),S.deltaY<0?i():a()},kr=S=>{const f=S.target.tagName;f==="INPUT"||f==="SELECT"||f==="TEXTAREA"||(S.key==="1"?Re.value&&(Yt.value=!1,qe(),I.value.visible=!1):S.key==="2"&&(Re.value||(Yt.value=!0,Ft(),I.value.visible=!1)))};return xt(async()=>{await F(),se(),pe.loadReferenceData(),k(),window.addEventListener("keydown",kr)}),$i(()=>{y(),window.removeEventListener("keydown",kr)}),(S,f)=>(R(),Z(Se,null,[V("div",fh,[V("div",{ref_key:"containerRef",ref:oe,class:"relative h-full min-w-0 border border-border rounded-lg overflow-hidden",onWheel:Qa,onDblclick:Ka},[V("div",{class:"absolute top-0 left-0 right-0 bg-muted/80 border-b border-border z-20 overflow-hidden",style:Oe({height:`${g(jt)}px`})},[V("div",{class:"absolute w-full h-full",style:Oe({transform:`translateX(${g(s).x}px)`})},[(R(!0),Z(Se,null,Ve(g(_e),c=>(R(),Z("div",{key:`year-${c.startIndex}`,class:"absolute flex items-center justify-center text-xs font-medium border border-border bg-muted/60",style:Oe({left:`${c.startIndex*g(P)*g(s).zoom}px`,width:`${c.span*g(P)*g(s).zoom}px`,height:`${g(st)}px`,top:"0px"})},Ce(c.label),5))),128)),(R(!0),Z(Se,null,Ve(g(Me),c=>(R(),Z("div",{key:`month-${c.startIndex}`,class:"absolute flex items-center justify-center text-xs font-medium border border-border",style:Oe({left:`${c.startIndex*g(P)*g(s).zoom}px`,width:`${c.span*g(P)*g(s).zoom}px`,height:`${g(st)}px`,top:`${g(st)}px`})},Ce(c.label),5))),128)),(R(!0),Z(Se,null,Ve(g(ge),c=>(R(),Z("div",{key:`week-${c.startIndex}`,class:"absolute flex items-center justify-center text-xs border border-border",style:Oe({left:`${c.startIndex*g(P)*g(s).zoom}px`,width:`${c.span*g(P)*g(s).zoom}px`,height:`${g(st)}px`,top:`${g(st)*2}px`})},Ce(c.label),5))),128)),(R(!0),Z(Se,null,Ve(g(ve),c=>(R(),Z("div",{key:`date-${c.dayIndex}`,class:Ke(["absolute flex items-center justify-center text-xs border-r border-b border-border/50",{"font-medium":c.isToday,"text-red-600":c.isHoliday&&!c.isDeactivated}]),style:Oe({left:`${c.dayIndex*g(P)*g(s).zoom}px`,width:`${g(P)*g(s).zoom}px`,height:`${g(st)}px`,top:`${g(st)*3}px`,backgroundColor:c.isToday?"rgba(59, 130, 246, 0.3)":c.isDeactivated?"rgba(107, 114, 128, 0.5)":c.isHoliday?"rgba(239, 68, 68, 0.3)":"#ffffff"})},Ce(c.dayOfMonth),7))),128)),(R(!0),Z(Se,null,Ve(g(ve),c=>(R(),Z("div",{key:`day-${c.dayIndex}`,class:Ke(["absolute flex items-center justify-center text-[10px] border-r border-border/50",{"font-medium":c.isToday,"text-red-600":c.isHoliday&&!c.isDeactivated}]),style:Oe({left:`${c.dayIndex*g(P)*g(s).zoom}px`,width:`${g(P)*g(s).zoom}px`,height:`${g(st)}px`,top:`${g(st)*4}px`,backgroundColor:c.isToday?"rgba(59, 130, 246, 0.3)":c.isDeactivated?"rgba(107, 114, 128, 0.5)":c.isHoliday?"rgba(239, 68, 68, 0.3)":"#ffffff"})},Ce(c.dayName),7))),128))],4)],4),ue(g(bp),{nodes:o.value,"onUpdate:nodes":f[12]||(f[12]=c=>o.value=c),edges:g(Ne),class:Ke(["w-full h-full",{"path-mode":Re.value}]),style:Oe({paddingTop:`${g(jt)}px`}),"fit-view-on-init":"","min-zoom":.5,"zoom-on-scroll":!1,"zoom-on-double-click":!1,"disable-keyboard-a11y":!0,onNodeClick:Ra,onNodeDoubleClick:Ga,onNodeDrag:Ja,onNodeDragStop:ja,onPaneClick:Za,onEdgeClick:Xa,onEdgeDoubleClick:Fa,onConnect:Ya},{default:he(()=>[(R(),Z("svg",ph,[f[38]||(f[38]=V("defs",null,[V("pattern",{id:"vertical-lines",x:"0",y:"0",width:"40",height:"100",patternUnits:"userSpaceOnUse"},[V("rect",{x:"0",y:"0",width:"0.2",height:"100",fill:"#999"})])],-1)),V("g",{transform:`translate(${g(s).x}, ${g(s).y}) scale(${g(s).zoom})`},[(R(!0),Z(Se,null,Ve(g(b),c=>(R(),Z("rect",{key:`deactivated-bg-${c}`,x:c*g(P),y:"-50000",width:g(P),height:"100000",fill:"rgba(107, 114, 128, 0.2)"},null,8,gh))),128)),(R(!0),Z(Se,null,Ve(g(ke),c=>(R(),Z("rect",{key:`holiday-bg-${c}`,x:c*g(P),y:"-50000",width:g(P),height:"100000",fill:"rgba(239, 68, 68, 0.1)"},null,8,vh))),128)),g(h)!==null?(R(),Z("rect",{key:0,x:g(h)*g(P),y:"-50000",width:g(P),height:"100000",fill:"rgba(59, 130, 246, 0.3)"},null,8,mh)):Ee("",!0),V("rect",{x:g(we).startX,y:"-50000",width:g(we).width,height:"100000",fill:"url(#vertical-lines)"},null,8,yh),Re.value?Ee("",!0):(R(),Z("g",wh,[d.value?(R(!0),Z(Se,{key:0},Ve(te.value,(c,W)=>(R(),Z(Se,{key:`group-wt-svg-${W}`},[c.level==="workType"?(R(),Z("rect",{key:0,x:c.x,y:c.y-g(jt)/g(s).zoom,width:c.width,height:c.height,fill:c.fillColor,stroke:c.borderColor,"stroke-width":"1",rx:"6",ry:"6"},null,8,bh)):Ee("",!0)],64))),128)):Ee("",!0),p.value?(R(!0),Z(Se,{key:1},Ve(te.value,(c,W)=>(R(),Z(Se,{key:`group-swt-svg-${W}`},[c.level==="subWorkType"?(R(),Z("rect",{key:0,x:c.x,y:c.y-g(jt)/g(s).zoom,width:c.width,height:c.height,fill:c.fillColor,stroke:c.borderColor,"stroke-width":"1",rx:"4",ry:"4","stroke-dasharray":"4 2"},null,8,xh)):Ee("",!0)],64))),128)):Ee("",!0)])),(R(!0),Z(Se,null,Ve(g(G),c=>(R(),Z(Se,{key:`reason-${c.dayIndex}`},[c.holidayName||c.deactivatedReason?(R(),Z("text",{key:0,x:c.dayIndex*g(P)+g(P)/2,y:"0",fill:"currentColor","fill-opacity":.3,"font-size":"11","text-anchor":"middle","dominant-baseline":"middle",style:{"writing-mode":"tb","glyph-orientation-vertical":"0"}},Ce(c.deactivatedReason||c.holidayName),9,_h)):Ee("",!0)],64))),128))],8,hh)])),Re.value?Ee("",!0):(R(!0),Z(Se,{key:0},Ve(te.value,(c,W)=>(R(),Z(Se,{key:`group-overlay-${W}`},[c.level==="workType"&&d.value||c.level==="subWorkType"&&p.value?(R(),Z("div",{key:0,class:"absolute z-[5]",style:Oe({left:`${c.x*g(s).zoom+g(s).x}px`,top:`${(c.y-g(jt)/g(s).zoom)*g(s).zoom+g(s).y+g(jt)}px`,width:`${c.width*g(s).zoom}px`,height:`${c.height*g(s).zoom}px`,pointerEvents:"none",borderRadius:c.level==="workType"?"6px":"4px"})},[V("div",{class:"absolute top-0 left-0 right-0 h-[8px]",style:{"pointer-events":"auto",cursor:"grab"},onMousedown:Ue(L=>T(W,L),["stop"]),onClick:Ue(L=>N(W,L),["stop"]),onDblclick:f[0]||(f[0]=Ue(()=>{},["stop"]))},null,40,kh),V("div",{class:"absolute bottom-0 left-0 right-0 h-[8px]",style:{"pointer-events":"auto",cursor:"grab"},onMousedown:Ue(L=>T(W,L),["stop"]),onClick:Ue(L=>N(W,L),["stop"]),onDblclick:f[1]||(f[1]=Ue(()=>{},["stop"]))},null,40,Sh),V("div",{class:"absolute top-0 bottom-0 left-0 w-[8px]",style:{"pointer-events":"auto",cursor:"grab"},onMousedown:Ue(L=>T(W,L),["stop"]),onClick:Ue(L=>N(W,L),["stop"]),onDblclick:f[2]||(f[2]=Ue(()=>{},["stop"]))},null,40,Eh),V("div",{class:"absolute top-0 bottom-0 right-0 w-[8px]",style:{"pointer-events":"auto",cursor:"grab"},onMousedown:Ue(L=>T(W,L),["stop"]),onClick:Ue(L=>N(W,L),["stop"]),onDblclick:f[3]||(f[3]=Ue(()=>{},["stop"]))},null,40,Nh),V("span",{class:"absolute text-[11px] font-semibold px-1 select-none",style:Oe([{"pointer-events":"auto",cursor:"grab"},{color:c.borderColor,top:"2px",left:"4px"}]),onMousedown:Ue(L=>T(W,L),["stop"]),onClick:Ue(L=>N(W,L),["stop"]),onDblclick:f[4]||(f[4]=Ue(()=>{},["stop"]))},Ce(c.label),45,Ih),v.value===W?(R(),Z("div",{key:0,class:"absolute inset-0",style:Oe({pointerEvents:"none",border:"2px solid rgba(59,130,246,0.8)",borderRadius:c.level==="workType"?"6px":"4px"})},null,4)):Ee("",!0)],4)):Ee("",!0)],64))),128)),I.value.visible?(R(),Z("div",{key:1,"data-tooltip-balloon":"",class:"absolute z-10",style:Oe({left:`${I.value.nodeX*g(s).zoom+g(s).x}px`,top:`${I.value.nodeY*g(s).zoom+g(s).y}px`,transform:`translateX(-50%) translateY(-100%) scale(${g(s).zoom})`,transformOrigin:"bottom center"})},[V("div",$h,[f[44]||(f[44]=V("div",{class:"absolute left-1/2 -bottom-2 -translate-x-1/2 border-l-8 border-r-8 border-t-8 border-transparent border-t-border"},null,-1)),f[45]||(f[45]=V("div",{class:"absolute left-1/2 -bottom-[7px] -translate-x-1/2 border-l-[7px] border-r-[7px] border-t-[7px] border-transparent border-t-popover"},null,-1)),V("p",Ch,[V("span",Dh,Ce(I.value.workId)+".",1),ze(" "+Ce(I.value.workName),1)]),V("p",Mh,[f[39]||(f[39]=ze(": ",-1)),V("span",Th,Ce(I.value.startDate),1)]),V("p",Ph,[f[40]||(f[40]=ze(": ",-1)),V("span",zh,Ce(I.value.workLeadTime)+"",1)]),V("p",Oh,[f[41]||(f[41]=ze(": ",-1)),V("span",Ah,Ce(I.value.completionDate),1)]),U.value.length>0?(R(),Z("div",Wh,[(R(!0),Z(Se,null,Ve(U.value,(c,W)=>(R(),Z("div",{key:`${c.pathId}-${c.workId}`,class:"space-y-0.5"},[V("p",Bh,[ze(" "+Ce(W+1)+": ",1),V("span",Hh,Ce(c.workId)+". "+Ce(c.workName),1),V("span",Lh,"("+Ce(c.pathName)+")",1)]),V("div",Vh,[ue(g(Et),{"model-value":c.isFollowing,class:"h-3.5 w-3.5","onUpdate:modelValue":L=>ee(c.pathId,c.workId,I.value.workId,L?0:null)},null,8,["model-value","onUpdate:modelValue"]),f[43]||(f[43]=V("label",{class:"text-[11px] text-muted-foreground"},"",-1)),c.isFollowing?(R(),Z(Se,{key:0},[V("input",{type:"number",value:c.lagDays,class:"w-12 h-5 text-[11px] text-center rounded border border-border bg-background",onChange:L=>ee(c.pathId,c.workId,I.value.workId,Number(L.target.value))},null,40,Rh),f[42]||(f[42]=V("span",{class:"text-[11px] text-muted-foreground"},"",-1)),V("span",{class:Ke(["text-[11px] font-medium",c.lagDays<0?"text-blue-500":c.lagDays>0?"text-orange-500":"text-muted-foreground"])},Ce(c.lagDays<0?`${Math.abs(c.lagDays)} `:c.lagDays===0?"":`${c.lagDays} `),3)],64)):Ee("",!0),V("button",{type:"button",class:"ml-auto px-1.5 py-0.5 text-[10px] font-medium rounded border border-primary/30 text-primary hover:bg-primary/10 transition-colors",onClick:L=>Q(c.pathId,c.workId,I.value.workId,c.isFollowing?c.lagDays:null)},"  ",8,Yh)])]))),128))])):Ee("",!0),V("div",Xh,[V("button",{type:"button",class:Ke(["flex-1 py-1 text-xs font-medium transition-colors",I.value.isWorkingOnHoliday?"bg-primary text-primary-foreground":"bg-background hover:bg-muted"]),onClick:f[5]||(f[5]=c=>br({isWorkingOnHoliday:!0}))},"   ",2),V("button",{type:"button",class:Ke(["flex-1 py-1 text-xs font-medium transition-colors border-l border-border",I.value.isWorkingOnHoliday?"bg-background hover:bg-muted":"bg-primary text-primary-foreground"]),onClick:f[6]||(f[6]=c=>br({isWorkingOnHoliday:!1}))},"   ",2)]),V("button",{type:"button",class:"w-full py-1 text-xs font-medium text-destructive hover:bg-destructive/10 rounded border border-destructive/30 transition-colors",onClick:f[7]||(f[7]=c=>ye("work"))},"  ")])],4)):Ee("",!0),pt.value&&!Re.value?(R(),Z(Se,{key:2},[V("div",{class:"absolute z-20 cursor-col-resize",style:Oe({left:`${(pt.value.left.x-3)*g(s).zoom+g(s).x}px`,top:`${pt.value.left.y*g(s).zoom+g(s).y}px`,transform:"translate(-100%, -50%)"}),onMousedown:f[8]||(f[8]=Ue(c=>zn("left",c),["stop"]))},[V("div",{style:Oe({borderTop:`${5*g(s).zoom}px solid transparent`,borderBottom:`${5*g(s).zoom}px solid transparent`,borderRight:`${5*g(s).zoom}px solid black`})},null,4)],36),V("div",{class:"absolute z-20 cursor-col-resize",style:Oe({left:`${(pt.value.left.x+3)*g(s).zoom+g(s).x}px`,top:`${pt.value.left.y*g(s).zoom+g(s).y}px`,transform:"translateY(-50%)"}),onMousedown:f[9]||(f[9]=Ue(c=>zn("left",c),["stop"]))},[V("div",{style:Oe({borderTop:`${5*g(s).zoom}px solid transparent`,borderBottom:`${5*g(s).zoom}px solid transparent`,borderLeft:`${5*g(s).zoom}px solid black`})},null,4)],36),V("div",{class:"absolute z-20 cursor-col-resize",style:Oe({left:`${(pt.value.right.x-3)*g(s).zoom+g(s).x}px`,top:`${pt.value.right.y*g(s).zoom+g(s).y}px`,transform:"translate(-100%, -50%)"}),onMousedown:f[10]||(f[10]=Ue(c=>zn("right",c),["stop"]))},[V("div",{style:Oe({borderTop:`${5*g(s).zoom}px solid transparent`,borderBottom:`${5*g(s).zoom}px solid transparent`,borderRight:`${5*g(s).zoom}px solid black`})},null,4)],36),V("div",{class:"absolute z-20 cursor-col-resize",style:Oe({left:`${(pt.value.right.x+3)*g(s).zoom+g(s).x}px`,top:`${pt.value.right.y*g(s).zoom+g(s).y}px`,transform:"translateY(-50%)"}),onMousedown:f[11]||(f[11]=Ue(c=>zn("right",c),["stop"]))},[V("div",{style:Oe({borderTop:`${5*g(s).zoom}px solid transparent`,borderBottom:`${5*g(s).zoom}px solid transparent`,borderLeft:`${5*g(s).zoom}px solid black`})},null,4)],36)],64)):Ee("",!0),g(re)?(R(!0),Z(Se,{key:3},Ve(g(be),c=>(R(),Z("button",{key:`delete-${c.workId}`,class:"absolute z-20 w-5 h-5 flex items-center justify-center bg-red-500 hover:bg-red-600 text-white rounded-full shadow-md transition-colors cursor-pointer",style:Oe({left:`${c.x*g(s).zoom+g(s).x}px`,top:`${c.y*g(s).zoom+g(s).y}px`,transform:`translate(-50%, -50%) scale(${Math.min(g(s).zoom,1)})`}),onClick:W=>{g(So)(c.workId),g(Mn)()}},[...f[46]||(f[46]=[V("span",{class:"text-xs font-bold"},"",-1)])],12,Fh))),128)):Ee("",!0),ue(g(Qp),{position:"bottom-right"})]),_:1},8,["nodes","edges","class","style"]),Re.value?Ee("",!0):(R(),Z("div",Gh,[V("label",Uh,[ue(g(Et),{"model-value":d.value,class:"h-3.5 w-3.5","onUpdate:modelValue":f[13]||(f[13]=c=>{d.value=!!c,c&&(p.value=!1)})},null,8,["model-value"]),f[47]||(f[47]=V("span",{class:"text-[11px] text-muted-foreground"}," ",-1))]),V("label",Zh,[ue(g(Et),{"model-value":p.value,class:"h-3.5 w-3.5","onUpdate:modelValue":f[14]||(f[14]=c=>{p.value=!!c,c&&(d.value=!1)})},null,8,["model-value"]),f[48]||(f[48]=V("span",{class:"text-[11px] text-muted-foreground"}," ",-1))])])),V("div",Kh,[V("button",{class:Ke(["flex items-center gap-2 px-4 py-2.5 rounded-md text-sm font-medium border transition-colors",Re.value?"bg-background text-muted-foreground border-border hover:bg-muted":"bg-primary text-primary-foreground border-primary"]),onClick:f[15]||(f[15]=c=>{Yt.value=!1,g(qe)(),I.value.visible=!1})},[V("kbd",{class:Ke(["px-1.5 py-0.5 rounded border text-xs font-mono",Re.value?"border-border":"border-primary-foreground/30"])},"1",2),f[49]||(f[49]=ze("  ",-1))],2),V("button",{class:Ke(["flex items-center gap-2 px-4 py-2.5 rounded-md text-sm font-medium border transition-colors",Re.value?"bg-primary text-primary-foreground border-primary":"bg-background text-muted-foreground border-border hover:bg-muted"]),onClick:f[16]||(f[16]=c=>{Yt.value=!0,g(Ft)(),I.value.visible=!1})},[V("kbd",{class:Ke(["px-1.5 py-0.5 rounded border text-xs font-mono",Re.value?"border-primary-foreground/30":"border-border"])},"2",2),f[50]||(f[50]=ze("  ",-1))],2)])],544)]),ue(g(Tr),{open:dn.value,"onUpdate:open":f[26]||(f[26]=c=>dn.value=c)},{default:he(()=>[ue(g(Pr),{class:"max-w-xs"},{default:he(()=>[ue(g(zr),null,{default:he(()=>[ue(g(Or),null,{default:he(()=>[...f[51]||(f[51]=[ze(" ",-1)])]),_:1})]),_:1}),V("div",qh,[V("div",jh,[f[52]||(f[52]=V("label",{class:"text-[11px] text-muted-foreground"},"",-1)),On(V("input",{"onUpdate:modelValue":f[17]||(f[17]=c=>Tn.value=c),class:"w-full h-8 text-sm rounded border border-border bg-background px-2"},null,512),[[An,Tn.value]])]),V("div",Jh,[f[53]||(f[53]=V("label",{class:"text-[11px] text-muted-foreground"},"",-1)),V("div",Qh,[On(V("input",{type:"color","onUpdate:modelValue":f[18]||(f[18]=c=>Gt.value=c),class:"h-8 w-8 rounded border border-border cursor-pointer p-0.5"},null,512),[[An,Gt.value]]),On(V("input",{"onUpdate:modelValue":f[19]||(f[19]=c=>Gt.value=c),class:"flex-1 h-8 text-sm rounded border border-border bg-background px-2 font-mono"},null,512),[[An,Gt.value]])])]),V("div",eg,[V("button",{type:"button",class:Ke(["flex-1 py-1.5 text-xs font-medium transition-colors",Ut.value?"bg-primary text-primary-foreground":"bg-background hover:bg-muted"]),onClick:f[20]||(f[20]=c=>Ut.value=!0)},"  ",2),V("button",{type:"button",class:Ke(["flex-1 py-1.5 text-xs font-medium transition-colors border-l border-border",Ut.value?"bg-background hover:bg-muted":"bg-primary text-primary-foreground"]),onClick:f[21]||(f[21]=c=>Ut.value=!1)},"  ",2)])]),ue(g(Ar),{class:"flex-col gap-1.5 sm:flex-col"},{default:he(()=>[ue(g(Eo),{size:"sm",class:"w-full",disabled:Pn.value,onClick:f[22]||(f[22]=c=>{Va(),dn.value=!1})},{default:he(()=>[ze(Ce(Pn.value?" ...":""),1)]),_:1},8,["disabled"]),V("button",{type:"button",class:"w-full py-1.5 text-xs font-medium text-destructive hover:bg-destructive/10 rounded border border-destructive/30 transition-colors",onClick:f[23]||(f[23]=c=>ye("path"))},"  "),V("button",{type:"button",class:"w-full py-1.5 text-xs font-medium text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-950 rounded border border-blue-300 dark:border-blue-700 transition-colors",onClick:f[24]||(f[24]=c=>{H.value="current",D.value=!0})},"    "),V("button",{type:"button",class:"w-full py-1.5 text-xs font-medium text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-950 rounded border border-blue-300 dark:border-blue-700 transition-colors",onClick:f[25]||(f[25]=c=>{H.value="all",D.value=!0})},"    ")]),_:1})]),_:1})]),_:1},8,["open"]),ue(g(Sr),{open:z.value,"onUpdate:open":f[27]||(f[27]=c=>z.value=c)},{default:he(()=>[ue(g(Er),null,{default:he(()=>[ue(g(Nr),null,{default:he(()=>[ue(g(Ir),null,{default:he(()=>[...f[54]||(f[54]=[ze(" ",-1)])]),_:1}),ue(g($r),null,{default:he(()=>[...f[55]||(f[55]=[ze("  ? ",-1)])]),_:1})]),_:1}),ue(g(Cr),null,{default:he(()=>[ue(g(Dr),{disabled:C.value},{default:he(()=>[...f[56]||(f[56]=[ze("",-1)])]),_:1},8,["disabled"]),ue(g(Mr),{disabled:C.value,onClick:xe},{default:he(()=>[ze(Ce(C.value?" ...":""),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),ue(g(Sr),{open:D.value,"onUpdate:open":f[28]||(f[28]=c=>D.value=c)},{default:he(()=>[ue(g(Er),null,{default:he(()=>[ue(g(Nr),null,{default:he(()=>[ue(g(Ir),null,{default:he(()=>[...f[57]||(f[57]=[ze(" ",-1)])]),_:1}),ue(g($r),null,{default:he(()=>[ze(Ce(H.value==="current"?"         .":"        .")+" ",1),f[58]||(f[58]=V("br",null,null,-1)),f[59]||(f[59]=ze("   ? ",-1))]),_:1})]),_:1}),ue(g(Cr),null,{default:he(()=>[ue(g(Dr),{disabled:O.value},{default:he(()=>[...f[60]||(f[60]=[ze("",-1)])]),_:1},8,["disabled"]),ue(g(Mr),{disabled:O.value,onClick:Y},{default:he(()=>[ze(Ce(O.value?" ...":""),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),ue(g(Tr),{open:pe.showDialog,"onUpdate:open":f[37]||(f[37]=c=>pe.showDialog=c)},{default:he(()=>[ue(g(Pr),{class:"max-w-md"},{default:he(()=>[ue(g(zr),null,{default:he(()=>[ue(g(Or),null,{default:he(()=>[ze(Ce(pe.isCreateMode?" ":" "),1)]),_:1})]),_:1}),V("div",tg,[pe.isCreateMode?Ee("",!0):(R(),Z(Se,{key:0},[V("div",ng,[f[61]||(f[61]=V("label",{class:"text-sm font-medium"},"",-1)),V("input",{type:"date",value:pe.editStartDate,class:"w-full h-8 text-sm rounded-md border border-border bg-background px-3",onChange:f[29]||(f[29]=c=>pe.editStartDate=c.target.value)},null,40,og)]),V("div",rg,[f[62]||(f[62]=V("label",{class:"text-sm font-medium"},"",-1)),V("div",ig,[V("button",{type:"button",class:"h-8 w-8 flex items-center justify-center rounded-md border border-border text-sm font-bold hover:bg-muted transition-colors",disabled:pe.editWorkLeadTime<=1,onClick:f[30]||(f[30]=c=>pe.editWorkLeadTime=Math.max(1,pe.editWorkLeadTime-1))},"",8,ag),V("span",sg,Ce(pe.editWorkLeadTime)+"",1),V("button",{type:"button",class:"h-8 w-8 flex items-center justify-center rounded-md border border-border text-sm font-bold hover:bg-muted transition-colors",onClick:f[31]||(f[31]=c=>pe.editWorkLeadTime=pe.editWorkLeadTime+1)},"+")])])],64)),V("div",lg,[f[63]||(f[63]=V("label",{class:"text-sm font-medium"},"",-1)),ue(g(No),{"model-value":pe.editDivisionId,"onUpdate:modelValue":f[32]||(f[32]=c=>pe.handleTooltipDivisionChange(c))},{default:he(()=>[ue(g(Io),{class:"h-8 text-sm"},{default:he(()=>[ue(g($o),{placeholder:" "})]),_:1}),ue(g(Co),null,{default:he(()=>[(R(!0),Z(Se,null,Ve(pe.divisions,c=>(R(),je(g(Do),{key:c.id,value:String(c.id)},{default:he(()=>[ze(Ce(c.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"]),ue(g(No),{"model-value":pe.editWorkTypeId,disabled:!pe.editDivisionId||pe.isLoadingTooltipWorkTypes,"onUpdate:modelValue":f[33]||(f[33]=c=>pe.handleTooltipWorkTypeChange(c))},{default:he(()=>[ue(g(Io),{class:"h-8 text-sm"},{default:he(()=>[ue(g($o),{placeholder:pe.isLoadingTooltipWorkTypes?"...":" "},null,8,["placeholder"])]),_:1}),ue(g(Co),null,{default:he(()=>[(R(!0),Z(Se,null,Ve(pe.tooltipWorkTypes,c=>(R(),je(g(Do),{key:c.id,value:String(c.id)},{default:he(()=>[ze(Ce(c.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),ue(g(No),{"model-value":pe.editSubWorkTypeId,disabled:!pe.editWorkTypeId||pe.isLoadingTooltipSubWorkTypes,"onUpdate:modelValue":f[34]||(f[34]=c=>pe.handleTooltipSubWorkTypeChange(c))},{default:he(()=>[ue(g(Io),{class:"h-8 text-sm"},{default:he(()=>[ue(g($o),{placeholder:pe.isLoadingTooltipSubWorkTypes?"...":" "},null,8,["placeholder"])]),_:1}),ue(g(Co),null,{default:he(()=>[(R(!0),Z(Se,null,Ve(pe.tooltipSubWorkTypes,c=>(R(),je(g(Do),{key:c.id,value:String(c.id)},{default:he(()=>[ze(Ce(c.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"])]),V("div",ug,[f[68]||(f[68]=V("label",{class:"text-sm font-medium"},"",-1)),V("div",dg,[pe.zones.length?(R(),Z("div",cg,[f[64]||(f[64]=V("span",{class:"text-xs text-muted-foreground"},"",-1)),V("div",fg,[(R(!0),Z(Se,null,Ve(pe.zones,c=>(R(),Z("label",{key:c.id,class:"flex items-center gap-1.5 text-sm cursor-pointer"},[ue(g(Et),{"model-value":pe.editZoneIds.includes(c.id),class:"h-4 w-4","onUpdate:modelValue":W=>pe.toggleZone(c.id)},null,8,["model-value","onUpdate:modelValue"]),ze(" "+Ce(c.name),1)]))),128))])])):Ee("",!0),pe.floors.length?(R(),Z("div",pg,[f[65]||(f[65]=V("span",{class:"text-xs text-muted-foreground"},"",-1)),V("div",hg,[(R(!0),Z(Se,null,Ve(pe.floors,c=>(R(),Z("label",{key:c.id,class:"flex items-center gap-1.5 text-sm cursor-pointer"},[ue(g(Et),{"model-value":pe.editFloorIds.includes(c.id),class:"h-4 w-4","onUpdate:modelValue":W=>pe.toggleFloor(c.id)},null,8,["model-value","onUpdate:modelValue"]),ze(" "+Ce(c.name),1)]))),128))])])):Ee("",!0),pe.sections.length?(R(),Z("div",gg,[f[66]||(f[66]=V("span",{class:"text-xs text-muted-foreground"},"",-1)),V("div",vg,[(R(!0),Z(Se,null,Ve(pe.sections,c=>(R(),Z("label",{key:c.id,class:"flex items-center gap-1.5 text-sm cursor-pointer"},[ue(g(Et),{"model-value":pe.editSectionIds.includes(c.id),class:"h-4 w-4","onUpdate:modelValue":W=>pe.toggleSection(c.id)},null,8,["model-value","onUpdate:modelValue"]),ze(" "+Ce(c.name),1)]))),128))])])):Ee("",!0),pe.usages.length?(R(),Z("div",mg,[f[67]||(f[67]=V("span",{class:"text-xs text-muted-foreground"},"",-1)),V("div",yg,[(R(!0),Z(Se,null,Ve(pe.usages,c=>(R(),Z("label",{key:c.id,class:"flex items-center gap-1.5 text-sm cursor-pointer"},[ue(g(Et),{"model-value":pe.editUsageIds.includes(c.id),class:"h-4 w-4","onUpdate:modelValue":W=>pe.toggleUsage(c.id)},null,8,["model-value","onUpdate:modelValue"]),ze(" "+Ce(c.name),1)]))),128))])])):Ee("",!0)])]),pe.componentTypes.length?(R(),Z("div",wg,[f[69]||(f[69]=V("label",{class:"text-sm font-medium"},"",-1)),V("div",bg,[(R(!0),Z(Se,null,Ve(pe.componentTypes,c=>(R(),Z("label",{key:c.id,class:"flex items-center gap-1.5 text-sm cursor-pointer"},[ue(g(Et),{"model-value":pe.editComponentTypeIds.includes(c.id),class:"h-4 w-4","onUpdate:modelValue":W=>pe.toggleComponentType(c.id)},null,8,["model-value","onUpdate:modelValue"]),ze(" "+Ce(c.name),1)]))),128))])])):Ee("",!0),V("div",xg,[f[70]||(f[70]=V("label",{class:"text-sm font-medium"},"",-1)),On(V("textarea",{"onUpdate:modelValue":f[35]||(f[35]=c=>pe.editAnnotation=c),class:"w-full text-sm rounded-md border border-border bg-background px-3 py-2 min-h-[60px] resize-none",placeholder:" "},null,512),[[An,pe.editAnnotation]])])]),ue(g(Ar),null,{default:he(()=>[ue(g(Eo),{variant:"outline",onClick:f[36]||(f[36]=c=>pe.closeDialog())},{default:he(()=>[...f[71]||(f[71]=[ze("",-1)])]),_:1}),ue(g(Eo),{disabled:pe.isSavingDetails,onClick:Ua},{default:he(()=>[ze(Ce(pe.isSavingDetails?" ...":""),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),kg=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},Sg=kg(_g,[["__scopeId","data-v-f09ca717"]]),Fg=We({__name:"Schedule2dPage",setup(e){return(t,n)=>(R(),je(es,{title:"2D"},{default:he(()=>[ue(ts,{height:"flex-1","min-height":"800px"},{default:he(()=>[ue(Sg)]),_:1})]),_:1}))}});export{Fg as default};
