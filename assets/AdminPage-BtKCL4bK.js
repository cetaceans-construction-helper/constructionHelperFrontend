import{_ as dt}from"./PageContainer.vue_vue_type_script_setup_true_lang-DRDIQ0kE.js";import{_ as ut}from"./AreaCard.vue_vue_type_script_setup_true_lang-DJ4lChFG.js";import{_ as ce}from"./Separator.vue_vue_type_script_setup_true_lang-lvcs7Xwk.js";import{r as n,D as oe,d as Te,i as Le,c as m,a as t,e as l,u as e,a8 as te,U as le,w as r,g as T,j as Z,F as B,n as q,t as h,o as i,q as we,k as Y,y as de,a6 as et,p as Q,E as tt,a9 as lt}from"./index-BfWxKujM.js";import{_ as J}from"./index-C7HMwd8y.js";import{_ as se}from"./Input.vue_vue_type_script_setup_true_lang-Dx8utq88.js";import{_ as Ae,a as Fe,b as ze,c as Ke,d as Ze,e as je,f as Re,g as Ee}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-Ba0kYQpB.js";import{r as g}from"./reference-FtYIgWLV.js";import{X as ae}from"./x-B4sIAsCH.js";import{_ as ye}from"./Checkbox.vue_vue_type_script_setup_true_lang-xA4yc8N6.js";import{_ as ge,a as xe,b as _e,c as ke,C as st,d as be}from"./SelectValue.vue_vue_type_script_setup_true_lang-CB0swD2u.js";import{_ as ct,a as pt,b as mt,c as vt,d as ft}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BwJ9g-xK.js";import{C as at,_ as yt}from"./DialogDescription.vue_vue_type_script_setup_true_lang-MqSsVIS_.js";import{c as gt}from"./createLucideIcon-BN78TdVt.js";import"./Collection-Czag8AmA.js";import"./index-nT69UIRx.js";import"./utils-BNW14Lxq.js";import"./DialogTitle-DtDnRnRg.js";import"./DialogDescription-CrmbOr-p.js";import"./apiClient-Cn64PT0n.js";import"./check-CqOsjgOL.js";const xt=gt("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function _t(){const K=n([]),N=n([]),S=n([]),V=n([]),$=n(null),C=n(null),_=n(null),F=n(""),w=n(""),y=n(""),D=n(""),U=n(!1),L=n(!1),R=async()=>{try{K.value=await g.getDivisionList()}catch(d){console.error("Division 목록 로드 실패:",d)}},P=async d=>{try{N.value=await g.getWorkTypeList(d)}catch(u){console.error("WorkType 목록 로드 실패:",u)}},x=async d=>{try{S.value=await g.getSubWorkTypeList(d)}catch(u){console.error("SubWorkType 목록 로드 실패:",u)}},b=async d=>{try{V.value=await g.getWorkStepList(d)}catch(u){console.error("WorkStep 목록 로드 실패:",u)}},I=d=>{$.value=d,C.value=null,_.value=null,S.value=[],V.value=[]},X=d=>{C.value=d,_.value=null,V.value=[]},O=d=>{_.value=d},E=async()=>{if(U.value)return;const d=F.value.trim();if(d){U.value=!0;try{await g.createDivision(d),F.value="",await R()}catch(u){console.error("Division 추가 실패:",u);const M=u;alert(M.response?.data?.message||M.message)}finally{U.value=!1}}},j=async()=>{if(U.value)return;const d=w.value.trim();if(!(!d||!$.value)){U.value=!0;try{await g.createWorkType($.value,d),w.value="",await P($.value)}catch(u){console.error("WorkType 추가 실패:",u);const M=u;alert(M.response?.data?.message||M.message)}finally{U.value=!1}}},v=async()=>{if(U.value)return;const d=y.value.trim();if(!(!d||!C.value)){U.value=!0;try{await g.createSubWorkType(C.value,d),y.value="",await x(C.value)}catch(u){console.error("SubWorkType 추가 실패:",u);const M=u;alert(M.response?.data?.message||M.message)}finally{U.value=!1}}},c=async()=>{if(U.value)return;const d=D.value.trim();if(!(!d||!_.value)){U.value=!0;try{await g.createWorkStep(_.value,d),D.value="",await b(_.value)}catch(u){console.error("WorkStep 추가 실패:",u);const M=u;alert(M.response?.data?.message||M.message)}finally{U.value=!1}}},f=async d=>{if(!L.value){L.value=!0;try{await g.deleteDivision(d),$.value===d&&($.value=null,C.value=null,_.value=null,N.value=[],S.value=[],V.value=[]),K.value=K.value.filter(u=>u.id!==d)}catch(u){console.error("Division 삭제 실패:",u);const M=u;alert(M.response?.data?.message||M.message)}finally{L.value=!1}}},A=async d=>{if(!L.value){L.value=!0;try{await g.deleteWorkType(d),C.value===d&&(C.value=null,_.value=null,S.value=[],V.value=[]),N.value=N.value.filter(u=>u.id!==d)}catch(u){console.error("WorkType 삭제 실패:",u);const M=u;alert(M.response?.data?.message||M.message)}finally{L.value=!1}}},H=async d=>{if(!L.value){L.value=!0;try{await g.deleteSubWorkType(d),_.value===d&&(_.value=null,V.value=[]),S.value=S.value.filter(u=>u.id!==d)}catch(u){console.error("SubWorkType 삭제 실패:",u);const M=u;alert(M.response?.data?.message||M.message)}finally{L.value=!1}}},G=async d=>{if(!L.value){L.value=!0;try{await g.deleteWorkStep(d),V.value=V.value.filter(u=>u.id!==d)}catch(u){console.error("WorkStep 삭제 실패:",u);const M=u;alert(M.response?.data?.message||M.message)}finally{L.value=!1}}};return oe($,d=>{N.value=[],d&&P(d)}),oe(C,d=>{S.value=[],d&&x(d)}),oe(_,d=>{V.value=[],d&&b(d)}),{divisions:K,workTypes:N,subWorkTypes:S,workSteps:V,selectedDivisionId:$,selectedWorkTypeId:C,selectedSubWorkTypeId:_,newDivisionName:F,newWorkTypeName:w,newSubWorkTypeName:y,newWorkStepName:D,isCreating:U,isDeleting:L,loadDivisions:R,selectDivision:I,selectWorkType:X,selectSubWorkType:O,addDivision:E,addWorkType:j,addSubWorkType:v,addWorkStep:c,deleteDivision:f,deleteWorkType:A,deleteSubWorkType:H,deleteWorkStep:G}}const kt={class:"grid grid-cols-4 gap-4"},bt={class:"space-y-2"},ht={class:"flex gap-1"},Ct={class:"space-y-1 max-h-48 overflow-y-auto"},wt=["onClick"],Tt={class:"flex-1 truncate"},St=["disabled","onClick"],$t={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Mt={class:"space-y-2"},Wt={class:"flex gap-1"},Vt={class:"space-y-1 max-h-48 overflow-y-auto"},Dt=["onClick"],It={class:"flex-1 truncate"},Ut=["disabled","onClick"],Nt={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Lt={key:1,class:"text-xs text-muted-foreground py-2 text-center"},At={class:"space-y-2"},Ft={class:"flex gap-1"},zt={class:"space-y-1 max-h-48 overflow-y-auto"},Kt=["onClick"],Zt={class:"flex-1 truncate"},jt=["disabled","onClick"],Rt={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Et={key:1,class:"text-xs text-muted-foreground py-2 text-center"},Bt={class:"space-y-2"},qt={class:"flex gap-1"},Ot={class:"space-y-1 max-h-48 overflow-y-auto"},Pt={class:"flex-1 truncate"},Ht=["disabled","onClick"],Xt={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Gt={key:1,class:"text-xs text-muted-foreground py-2 text-center"},Jt=Te({__name:"WorkClassificationArea",setup(K){const{divisions:N,workTypes:S,subWorkTypes:V,workSteps:$,selectedDivisionId:C,selectedWorkTypeId:_,selectedSubWorkTypeId:F,newDivisionName:w,newWorkTypeName:y,newSubWorkTypeName:D,newWorkStepName:U,isCreating:L,isDeleting:R,loadDivisions:P,selectDivision:x,selectWorkType:b,selectSubWorkType:I,addDivision:X,addWorkType:O,addSubWorkType:E,addWorkStep:j,deleteDivision:v,deleteWorkType:c,deleteSubWorkType:f,deleteWorkStep:A}=_t();Le(()=>{P()});const H=n(!1),G=n(null),d=n(""),u=n(null);function M(ue,W,k){G.value=ue,d.value=W,u.value=k,H.value=!0}async function ne(){G.value!=null&&u.value&&await u.value(G.value),H.value=!1}return(ue,W)=>(i(),m("div",null,[W[16]||(W[16]=t("h3",{class:"text-sm font-semibold mb-3"},"공종분류",-1)),t("div",kt,[t("div",bt,[W[6]||(W[6]=t("p",{class:"text-xs text-muted-foreground font-medium"},"분류 (Division)",-1)),t("div",ht,[l(e(se),{modelValue:e(w),"onUpdate:modelValue":W[0]||(W[0]=k=>le(w)?w.value=k:null),placeholder:"이름 입력",class:"h-8 text-sm",onKeyup:te(e(X),["enter"])},null,8,["modelValue","onKeyup"]),l(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(L)||!e(w).trim(),onClick:e(X)},{default:r(()=>[...W[5]||(W[5]=[T(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",Ct,[(i(!0),m(B,null,q(e(N),k=>(i(),m("div",{key:k.id,class:we(["flex items-center px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(C)===k.id,"border-border hover:bg-muted/50":e(C)!==k.id}]),onClick:ee=>e(x)(k.id)},[t("span",Tt,h(k.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(R),onClick:Y(ee=>M(k.id,k.name,e(v)),["stop"])},[l(e(ae),{class:"w-3 h-3"})],8,St)],10,wt))),128)),e(N).length===0?(i(),m("p",$t," 항목 없음 ")):Z("",!0)])]),t("div",Mt,[W[8]||(W[8]=t("p",{class:"text-xs text-muted-foreground font-medium"},"공종 (WorkType)",-1)),t("div",Wt,[l(e(se),{modelValue:e(y),"onUpdate:modelValue":W[1]||(W[1]=k=>le(y)?y.value=k:null),placeholder:"이름 입력",class:"h-8 text-sm",disabled:!e(C),onKeyup:te(e(O),["enter"])},null,8,["modelValue","disabled","onKeyup"]),l(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(L)||!e(y).trim()||!e(C),onClick:e(O)},{default:r(()=>[...W[7]||(W[7]=[T(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",Vt,[(i(!0),m(B,null,q(e(S),k=>(i(),m("div",{key:k.id,class:we(["flex items-center px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(_)===k.id,"border-border hover:bg-muted/50":e(_)!==k.id}]),onClick:ee=>e(b)(k.id)},[t("span",It,h(k.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(R),onClick:Y(ee=>M(k.id,k.name,e(c)),["stop"])},[l(e(ae),{class:"w-3 h-3"})],8,Ut)],10,Dt))),128)),e(C)&&e(S).length===0?(i(),m("p",Nt," 항목 없음 ")):Z("",!0),e(C)?Z("",!0):(i(),m("p",Lt," 분류를 선택하세요 "))])]),t("div",At,[W[10]||(W[10]=t("p",{class:"text-xs text-muted-foreground font-medium"},"세부공종 (SubWorkType)",-1)),t("div",Ft,[l(e(se),{modelValue:e(D),"onUpdate:modelValue":W[2]||(W[2]=k=>le(D)?D.value=k:null),placeholder:"이름 입력",class:"h-8 text-sm",disabled:!e(_),onKeyup:te(e(E),["enter"])},null,8,["modelValue","disabled","onKeyup"]),l(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(L)||!e(D).trim()||!e(_),onClick:e(E)},{default:r(()=>[...W[9]||(W[9]=[T(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",zt,[(i(!0),m(B,null,q(e(V),k=>(i(),m("div",{key:k.id,class:we(["flex items-center px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(F)===k.id,"border-border hover:bg-muted/50":e(F)!==k.id}]),onClick:ee=>e(I)(k.id)},[t("span",Zt,h(k.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(R),onClick:Y(ee=>M(k.id,k.name,e(f)),["stop"])},[l(e(ae),{class:"w-3 h-3"})],8,jt)],10,Kt))),128)),e(_)&&e(V).length===0?(i(),m("p",Rt," 항목 없음 ")):Z("",!0),e(_)?Z("",!0):(i(),m("p",Et," 공종을 선택하세요 "))])]),t("div",Bt,[W[12]||(W[12]=t("p",{class:"text-xs text-muted-foreground font-medium"},"작업절차 (WorkStep)",-1)),t("div",qt,[l(e(se),{modelValue:e(U),"onUpdate:modelValue":W[3]||(W[3]=k=>le(U)?U.value=k:null),placeholder:"이름 입력",class:"h-8 text-sm",disabled:!e(F),onKeyup:te(e(j),["enter"])},null,8,["modelValue","disabled","onKeyup"]),l(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(L)||!e(U).trim()||!e(F),onClick:e(j)},{default:r(()=>[...W[11]||(W[11]=[T(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",Ot,[(i(!0),m(B,null,q(e($),k=>(i(),m("div",{key:k.id,class:"flex items-center px-3 py-2 border rounded-md text-sm border-border"},[t("span",Pt,h(k.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(R),onClick:Y(ee=>M(k.id,k.name,e(A)),["stop"])},[l(e(ae),{class:"w-3 h-3"})],8,Ht)]))),128)),e(F)&&e($).length===0?(i(),m("p",Xt," 항목 없음 ")):Z("",!0),e(F)?Z("",!0):(i(),m("p",Gt," 세부공종을 선택하세요 "))])])]),l(e(Ae),{open:H.value,"onUpdate:open":W[4]||(W[4]=k=>H.value=k)},{default:r(()=>[l(e(Fe),null,{default:r(()=>[l(e(ze),null,{default:r(()=>[l(e(Ke),null,{default:r(()=>[...W[13]||(W[13]=[T("삭제 확인",-1)])]),_:1}),l(e(Ze),null,{default:r(()=>[T(" '"+h(d.value)+"' 항목을 삭제하시겠습니까? ",1)]),_:1})]),_:1}),l(e(je),null,{default:r(()=>[l(e(Re),null,{default:r(()=>[...W[14]||(W[14]=[T("취소",-1)])]),_:1}),l(e(Ee),{onClick:ne},{default:r(()=>[...W[15]||(W[15]=[T("삭제",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}});function Qt(){const K=n([]),N=n([]),S=n(null),V=n(""),$=n(""),C=n(""),_=n(!1),F=n(!1),w=async()=>{try{K.value=await g.getMaterialTypeList()}catch(x){console.error("MaterialType 목록 로드 실패:",x)}},y=async x=>{try{N.value=await g.getMaterialSpecList(x)}catch(b){console.error("MaterialSpec 목록 로드 실패:",b)}},D=x=>{S.value=x},U=async()=>{if(_.value)return;const x=V.value.trim();if(x){_.value=!0;try{const b=$.value.trim()||void 0;await g.createMaterialType(x,b),V.value="",$.value="",await w()}catch(b){console.error("MaterialType 추가 실패:",b);const I=b;alert(I.response?.data?.message||I.message)}finally{_.value=!1}}},L=async()=>{if(_.value)return;const x=C.value.trim();if(!(!x||!S.value)){_.value=!0;try{await g.createMaterialSpec(S.value,x),C.value="",await y(S.value)}catch(b){console.error("MaterialSpec 추가 실패:",b);const I=b;alert(I.response?.data?.message||I.message)}finally{_.value=!1}}},R=async x=>{if(!F.value){F.value=!0;try{await g.deleteMaterialType(x),S.value===x&&(S.value=null,N.value=[]),K.value=K.value.filter(b=>b.id!==x)}catch(b){console.error("MaterialType 삭제 실패:",b);const I=b;alert(I.response?.data?.message||I.message)}finally{F.value=!1}}},P=async x=>{if(!F.value){F.value=!0;try{await g.deleteMaterialSpec(x),N.value=N.value.filter(b=>b.id!==x)}catch(b){console.error("MaterialSpec 삭제 실패:",b);const I=b;alert(I.response?.data?.message||I.message)}finally{F.value=!1}}};return oe(S,x=>{N.value=[],x&&y(x)}),{materialTypes:K,materialSpecs:N,selectedMaterialTypeId:S,newMaterialTypeName:V,newMaterialTypeUnit:$,newMaterialSpecName:C,isCreating:_,isDeleting:F,loadMaterialTypes:w,selectMaterialType:D,addMaterialType:U,addMaterialSpec:L,deleteMaterialType:R,deleteMaterialSpec:P}}const Yt={class:"grid grid-cols-2 gap-4"},el={class:"space-y-2"},tl={class:"flex gap-1"},ll={class:"space-y-1 max-h-48 overflow-y-auto"},sl=["onClick"],al={class:"flex-1 truncate"},ol={key:0,class:"text-muted-foreground"},nl=["disabled","onClick"],rl={key:0,class:"text-xs text-muted-foreground py-2 text-center"},il={class:"space-y-2"},dl={class:"flex gap-1"},ul={class:"space-y-1 max-h-48 overflow-y-auto"},cl={class:"flex-1 truncate"},pl=["disabled","onClick"],ml={key:0,class:"text-xs text-muted-foreground py-2 text-center"},vl={key:1,class:"text-xs text-muted-foreground py-2 text-center"},fl=Te({__name:"MaterialMasterArea",setup(K){const{materialTypes:N,materialSpecs:S,selectedMaterialTypeId:V,newMaterialTypeName:$,newMaterialTypeUnit:C,newMaterialSpecName:_,isCreating:F,isDeleting:w,loadMaterialTypes:y,selectMaterialType:D,addMaterialType:U,addMaterialSpec:L,deleteMaterialType:R,deleteMaterialSpec:P}=Qt();Le(()=>{y()});const x=n(!1),b=n(null),I=n(""),X=n(null);function O(j,v,c){b.value=j,I.value=v,X.value=c,x.value=!0}async function E(){b.value!=null&&X.value&&await X.value(b.value),x.value=!1}return(j,v)=>(i(),m("div",null,[v[11]||(v[11]=t("h3",{class:"text-sm font-semibold mb-3"},"자재분류",-1)),t("div",Yt,[t("div",el,[v[5]||(v[5]=t("p",{class:"text-xs text-muted-foreground font-medium"},"자재유형 (MaterialType)",-1)),t("div",tl,[l(e(se),{modelValue:e($),"onUpdate:modelValue":v[0]||(v[0]=c=>le($)?$.value=c:null),placeholder:"이름 입력",class:"h-8 text-sm flex-1",onKeyup:te(e(U),["enter"])},null,8,["modelValue","onKeyup"]),l(e(se),{modelValue:e(C),"onUpdate:modelValue":v[1]||(v[1]=c=>le(C)?C.value=c:null),placeholder:"단위",class:"h-8 text-sm w-20",onKeyup:te(e(U),["enter"])},null,8,["modelValue","onKeyup"]),l(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(F)||!e($).trim(),onClick:e(U)},{default:r(()=>[...v[4]||(v[4]=[T(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",ll,[(i(!0),m(B,null,q(e(N),c=>(i(),m("div",{key:c.id,class:we(["flex items-center px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(V)===c.id,"border-border hover:bg-muted/50":e(V)!==c.id}]),onClick:f=>e(D)(c.id)},[t("span",al,[T(h(c.name)+" ",1),c.unit?(i(),m("span",ol,"("+h(c.unit)+")",1)):Z("",!0)]),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(w),onClick:Y(f=>O(c.id,c.name,e(R)),["stop"])},[l(e(ae),{class:"w-3 h-3"})],8,nl)],10,sl))),128)),e(N).length===0?(i(),m("p",rl," 항목 없음 ")):Z("",!0)])]),t("div",il,[v[7]||(v[7]=t("p",{class:"text-xs text-muted-foreground font-medium"},"자재규격 (MaterialSpec)",-1)),t("div",dl,[l(e(se),{modelValue:e(_),"onUpdate:modelValue":v[2]||(v[2]=c=>le(_)?_.value=c:null),placeholder:"이름 입력",class:"h-8 text-sm",disabled:!e(V),onKeyup:te(e(L),["enter"])},null,8,["modelValue","disabled","onKeyup"]),l(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(F)||!e(_).trim()||!e(V),onClick:e(L)},{default:r(()=>[...v[6]||(v[6]=[T(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",ul,[(i(!0),m(B,null,q(e(S),c=>(i(),m("div",{key:c.id,class:"flex items-center px-3 py-2 border rounded-md text-sm border-border"},[t("span",cl,h(c.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(w),onClick:Y(f=>O(c.id,c.name,e(P)),["stop"])},[l(e(ae),{class:"w-3 h-3"})],8,pl)]))),128)),e(V)&&e(S).length===0?(i(),m("p",ml," 항목 없음 ")):Z("",!0),e(V)?Z("",!0):(i(),m("p",vl," 자재유형을 선택하세요 "))])])]),l(e(Ae),{open:x.value,"onUpdate:open":v[3]||(v[3]=c=>x.value=c)},{default:r(()=>[l(e(Fe),null,{default:r(()=>[l(e(ze),null,{default:r(()=>[l(e(Ke),null,{default:r(()=>[...v[8]||(v[8]=[T("삭제 확인",-1)])]),_:1}),l(e(Ze),null,{default:r(()=>[T(" '"+h(I.value)+"' 항목을 삭제하시겠습니까? ",1)]),_:1})]),_:1}),l(e(je),null,{default:r(()=>[l(e(Re),null,{default:r(()=>[...v[9]||(v[9]=[T("취소",-1)])]),_:1}),l(e(Ee),{onClick:E},{default:r(()=>[...v[10]||(v[10]=[T("삭제",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}});function yl(){const K=n([]),N=n([]),S=n([]),V=n([]),$=n(""),C=n(""),_=n(""),F=n(""),w=n({zone:!1,floor:!1,section:!1,usage:!1}),y=n({zone:!1,floor:!1,section:!1,usage:!1}),D=async()=>{try{K.value=await g.getZoneList()}catch(c){console.error("Zone 목록 로드 실패:",c)}},U=async()=>{try{N.value=await g.getFloorList()}catch(c){console.error("Floor 목록 로드 실패:",c)}},L=async()=>{try{S.value=await g.getSectionList()}catch(c){console.error("Section 목록 로드 실패:",c)}},R=async()=>{try{V.value=await g.getUsageList()}catch(c){console.error("Usage 목록 로드 실패:",c)}};return{zones:K,floors:N,sections:S,usages:V,newZone:$,newFloor:C,newSection:_,newUsage:F,isCreating:w,isDeleting:y,loadAll:async()=>{await Promise.all([D(),U(),L(),R()])},addZone:async()=>{if(w.value.zone)return;const c=$.value.trim();if(c){w.value.zone=!0;try{await g.createZone(c),$.value="",await D()}catch(f){console.error("Zone 추가 실패:",f);const A=f;alert(A.response?.data?.message||A.message)}finally{w.value.zone=!1}}},addFloor:async()=>{if(w.value.floor)return;const c=C.value.trim();if(c){w.value.floor=!0;try{await g.createFloor(c),C.value="",await U()}catch(f){console.error("Floor 추가 실패:",f);const A=f;alert(A.response?.data?.message||A.message)}finally{w.value.floor=!1}}},addSection:async()=>{if(w.value.section)return;const c=_.value.trim();if(c){w.value.section=!0;try{await g.createSection(c),_.value="",await L()}catch(f){console.error("Section 추가 실패:",f);const A=f;alert(A.response?.data?.message||A.message)}finally{w.value.section=!1}}},addUsage:async()=>{if(w.value.usage)return;const c=F.value.trim();if(c){w.value.usage=!0;try{await g.createUsage(c),F.value="",await R()}catch(f){console.error("Usage 추가 실패:",f);const A=f;alert(A.response?.data?.message||A.message)}finally{w.value.usage=!1}}},deleteZone:async c=>{if(!y.value.zone){y.value.zone=!0;try{await g.deleteZone(c),K.value=K.value.filter(f=>f.id!==c)}catch(f){console.error("Zone 삭제 실패:",f);const A=f;alert(A.response?.data?.message||A.message)}finally{y.value.zone=!1}}},deleteFloor:async c=>{if(!y.value.floor){y.value.floor=!0;try{await g.deleteFloor(c),N.value=N.value.filter(f=>f.id!==c)}catch(f){console.error("Floor 삭제 실패:",f);const A=f;alert(A.response?.data?.message||A.message)}finally{y.value.floor=!1}}},deleteSection:async c=>{if(!y.value.section){y.value.section=!0;try{await g.deleteSection(c),S.value=S.value.filter(f=>f.id!==c)}catch(f){console.error("Section 삭제 실패:",f);const A=f;alert(A.response?.data?.message||A.message)}finally{y.value.section=!1}}},deleteUsage:async c=>{if(!y.value.usage){y.value.usage=!0;try{await g.deleteUsage(c),V.value=V.value.filter(f=>f.id!==c)}catch(f){console.error("Usage 삭제 실패:",f);const A=f;alert(A.response?.data?.message||A.message)}finally{y.value.usage=!1}}}}}const gl={class:"grid grid-cols-4 gap-4"},xl={class:"text-xs text-muted-foreground font-medium"},_l={class:"flex gap-1"},kl={class:"space-y-1 max-h-48 overflow-y-auto"},bl={class:"flex-1 truncate"},hl=["disabled","onClick"],Cl={key:0,class:"text-xs text-muted-foreground py-2 text-center"},wl=Te({__name:"LocationMasterArea",setup(K){const{zones:N,floors:S,sections:V,usages:$,newZone:C,newFloor:_,newSection:F,newUsage:w,isCreating:y,isDeleting:D,loadAll:U,addZone:L,addFloor:R,addSection:P,addUsage:x,deleteZone:b,deleteFloor:I,deleteSection:X,deleteUsage:O}=yl();Le(()=>{U()});const E=[{label:"Zone",items:N,input:C,creating:"zone",deleting:"zone",add:L,deleteFn:b},{label:"Floor",items:S,input:_,creating:"floor",deleting:"floor",add:R,deleteFn:I},{label:"Section",items:V,input:F,creating:"section",deleting:"section",add:P,deleteFn:X},{label:"Usage",items:$,input:w,creating:"usage",deleting:"usage",add:x,deleteFn:O}],j=n(!1),v=n(null),c=n(""),f=n(null);function A(G,d,u){v.value=G,c.value=d,f.value=u,j.value=!0}async function H(){v.value!=null&&f.value&&await f.value(v.value),j.value=!1}return(G,d)=>(i(),m("div",null,[d[5]||(d[5]=t("h3",{class:"text-sm font-semibold mb-3"},"위치분류",-1)),t("div",gl,[(i(),m(B,null,q(E,u=>t("div",{key:u.label,class:"space-y-2"},[t("p",xl,h(u.label),1),t("div",_l,[l(e(se),{modelValue:u.input.value,"onUpdate:modelValue":M=>u.input.value=M,placeholder:"이름 입력",class:"h-8 text-sm",onKeyup:te(u.add,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),l(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(y)[u.creating]||!u.input.value.trim(),onClick:u.add},{default:r(()=>[...d[1]||(d[1]=[T(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",kl,[(i(!0),m(B,null,q(u.items.value,M=>(i(),m("div",{key:M.id,class:"flex items-center px-3 py-2 border border-border rounded-md text-sm"},[t("span",bl,h(M.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(D)[u.deleting],onClick:Y(ne=>A(M.id,M.name,u.deleteFn),["stop"])},[l(e(ae),{class:"w-3 h-3"})],8,hl)]))),128)),u.items.value.length===0?(i(),m("p",Cl," 항목 없음 ")):Z("",!0)])])),64))]),l(e(Ae),{open:j.value,"onUpdate:open":d[0]||(d[0]=u=>j.value=u)},{default:r(()=>[l(e(Fe),null,{default:r(()=>[l(e(ze),null,{default:r(()=>[l(e(Ke),null,{default:r(()=>[...d[2]||(d[2]=[T("삭제 확인",-1)])]),_:1}),l(e(Ze),null,{default:r(()=>[T(" '"+h(c.value)+"' 항목을 삭제하시겠습니까? ",1)]),_:1})]),_:1}),l(e(je),null,{default:r(()=>[l(e(Re),null,{default:r(()=>[...d[3]||(d[3]=[T("취소",-1)])]),_:1}),l(e(Ee),{onClick:H},{default:r(()=>[...d[4]||(d[4]=[T("삭제",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}});function Tl(){const K=n([]),N=n(""),S=n(!1),V=n(!1),$=n([]),C=n(null),_=n(""),F=n(!1),w=n(!1),y=n([]),D=n([]),U=n(!1),L=n(!1),R=n([]),P=n([]),x=n([]),b=n([]),I=n([]),X=n([]),O=n([]),E=n({divisionId:"",workTypeId:"",subWorkTypeId:""}),j=n({materialTypeId:"",materialSpecId:""}),v=n([]),c=n(!1),f=n(!1),A=n(!1),H=n(!1),G=n(!1),d=n(!1),u=n(null),M=n(!1),ne=async()=>{try{K.value=await g.getComponentTypeList()}catch(a){console.error("ComponentType 목록 로드 실패:",a)}},ue=async()=>{if(S.value)return;const a=N.value.trim();if(a){S.value=!0;try{await g.createComponentType(a),N.value="",await ne()}catch(p){console.error("ComponentType 추가 실패:",p);const z=p;alert(z.response?.data?.message||z.message)}finally{S.value=!1}}},W=async a=>{if(!V.value){V.value=!0;try{await g.deleteComponentType(a),C.value===a&&(C.value=null,$.value=[],D.value=[]),K.value=K.value.filter(p=>p.id!==a)}catch(p){console.error("ComponentType 삭제 실패:",p);const z=p;alert(z.response?.data?.message||z.message)}finally{V.value=!1}}},k=async a=>{try{$.value=await g.getComponentCodeList(a)}catch(p){console.error("ComponentCode 목록 로드 실패:",p),$.value=[]}},ee=async()=>{if(F.value||C.value==null)return;const a=_.value.trim();if(a){F.value=!0;try{await g.createComponentCode(C.value,a),_.value="",await k(C.value)}catch(p){console.error("ComponentCode 추가 실패:",p);const z=p;alert(z.response?.data?.message||z.message)}finally{F.value=!1}}},Se=async a=>{if(!w.value){w.value=!0;try{await g.deleteComponentCode(a),D.value=D.value.filter(p=>p!==a),$.value=$.value.filter(p=>p.id!==a)}catch(p){console.error("ComponentCode 삭제 실패:",p);const z=p;alert(z.response?.data?.message||z.message)}finally{w.value=!1}}},$e=de(()=>$.value.length===0?!1:$.value.every(a=>D.value.includes(a.id))),re=a=>{const p=D.value.indexOf(a);p===-1?D.value.push(a):D.value.splice(p,1)},Me=()=>{$e.value?D.value=[]:D.value=$.value.map(a=>a.id)},We=de(()=>b.value.length===0?!1:b.value.every(a=>I.value.includes(a.id))),Be=a=>{const p=I.value.indexOf(a);p===-1?I.value.push(a):I.value.splice(p,1)},he=()=>{We.value?I.value=[]:I.value=b.value.map(a=>a.id)},Ce=async()=>{try{y.value=await g.getComponentCodeMappingList(),v.value=[]}catch(a){console.error("전체 매핑 로드 실패:",a),y.value=[]}},pe=de(()=>{let a=y.value;if(C.value!=null&&$.value.length>0){const p=$.value.map(z=>z.id);a=a.filter(z=>p.includes(z.componentCodeId))}return D.value.length>0&&(a=a.filter(p=>D.value.includes(p.componentCodeId))),I.value.length>0&&(a=a.filter(p=>I.value.includes(p.workStepId))),a}),Ve=de(()=>pe.value.length===0?!1:pe.value.every(a=>v.value.includes(a.id))),ie=a=>{const p=v.value.indexOf(a);p===-1?v.value.push(a):v.value.splice(p,1)},qe=()=>{Ve.value?v.value=[]:v.value=pe.value.map(a=>a.id)},Oe=async()=>{try{R.value=await g.getDivisionList()}catch(a){console.error("Division 목록 로드 실패:",a)}},De=async()=>{try{X.value=await g.getMaterialTypeList()}catch(a){console.error("MaterialType 목록 로드 실패:",a)}},me=async()=>{if(!U.value&&D.value.length!==0&&I.value.length!==0){U.value=!0;try{let a=0,p=0;for(const He of D.value)for(const Xe of I.value)try{const Ie=await g.createComponentCodeMapping({componentCodeId:He,workStepId:Xe});a+=Ie.mappedCount,p+=Ie.skippedCount}catch{p+=1}const z=[];a>0&&z.push(`${a}개 매핑 생성`),p>0&&z.push(`${p}개 스킵(중복)`),alert(z.join(", ")||"매핑 완료"),await Ce()}catch(a){console.error("매핑 추가 실패:",a);const p=a;alert(p.response?.data?.message||p.message)}finally{U.value=!1}}},ve=async a=>{if(!L.value){L.value=!0;try{await g.deleteCwmMapping(a),y.value=y.value.filter(p=>p.id!==a),v.value=v.value.filter(p=>p!==a)}catch(p){console.error("CwmMapping 삭제 실패:",p);const z=p;alert(z.response?.data?.message||z.message)}finally{L.value=!1}}},Pe=async()=>{if(v.value.length!==0&&j.value.materialSpecId){G.value=!0;try{const a=await g.updateComponentCodeMapping({ids:v.value,materialSpecId:Number(j.value.materialSpecId)});alert(`${a.updatedCount}개 매핑에 자재규격 적용됨`),await Ce(),j.value.materialTypeId="",j.value.materialSpecId=""}catch(a){console.error("자재 적용 실패:",a);const p=a;alert(p.response?.data?.message||p.message)}finally{G.value=!1}}},fe=async()=>{if(!d.value){d.value=!0;try{const a=await g.createTasks();u.value=a,M.value=!0}catch(a){console.error("세부작업 생성 실패:",a);const p=a;alert(p.response?.data?.message||p.message)}finally{d.value=!1}}};return oe(C,a=>{a!=null?k(a):$.value=[],D.value=[]}),oe(()=>E.value.divisionId,async a=>{if(P.value=[],x.value=[],b.value=[],E.value.workTypeId="",E.value.subWorkTypeId="",I.value=[],!!a){c.value=!0;try{P.value=await g.getWorkTypeList(Number(a))}catch(p){console.error("WorkType 목록 로드 실패:",p)}finally{c.value=!1}}}),oe(()=>E.value.workTypeId,async a=>{if(x.value=[],b.value=[],E.value.subWorkTypeId="",I.value=[],!!a){f.value=!0;try{x.value=await g.getSubWorkTypeList(Number(a))}catch(p){console.error("SubWorkType 목록 로드 실패:",p)}finally{f.value=!1}}}),oe(()=>E.value.subWorkTypeId,async a=>{if(b.value=[],I.value=[],!!a){A.value=!0;try{b.value=await g.getWorkStepList(Number(a))}catch(p){console.error("WorkStep 목록 로드 실패:",p)}finally{A.value=!1}}}),oe(()=>j.value.materialTypeId,async a=>{if(O.value=[],j.value.materialSpecId="",!!a){H.value=!0;try{O.value=await g.getMaterialSpecList(Number(a))}catch(p){console.error("MaterialSpec 목록 로드 실패:",p)}finally{H.value=!1}}}),{componentTypes:K,newComponentTypeName:N,isCreatingType:S,isDeletingType:V,loadComponentTypes:ne,addComponentType:ue,deleteComponentType:W,componentCodes:$,selectedComponentTypeId:C,newComponentCode:_,isCreatingCode:F,isDeletingCode:w,addComponentCode:ee,deleteComponentCode:Se,selectedComponentCodeIds:D,isAllComponentCodesSelected:$e,toggleComponentCode:re,toggleAllComponentCodes:Me,allMappings:y,filteredMappings:pe,isCreatingMapping:U,isDeletingMapping:L,deleteCwmMapping:ve,divisions:R,workTypes:P,subWorkTypes:x,workSteps:b,materialTypes:X,materialSpecs:O,mappingForm:E,isLoadingWorkTypes:c,isLoadingSubWorkTypes:f,isLoadingWorkSteps:A,isLoadingMaterialSpecs:H,loadDivisions:Oe,loadMaterialTypes:De,loadAllMappings:Ce,addMapping:me,selectedWorkStepIds:I,isAllWorkStepsSelected:We,toggleWorkStep:Be,toggleAllWorkSteps:he,selectedMappingIds:v,isAllMappingsSelected:Ve,toggleMapping:ie,toggleAllMappings:qe,materialApplyForm:j,isApplyingMaterial:G,applyMaterialToSelectedMappings:Pe,isCreatingTasks:d,createTasksResult:u,showCreateTasksResult:M,createTasks:fe}}const Sl={class:"space-y-6"},$l={class:"grid grid-cols-2 gap-4"},Ml={class:"space-y-2"},Wl={class:"flex gap-1"},Vl={class:"space-y-1 max-h-48 overflow-y-auto"},Dl=["onClick"],Il={class:"flex-1 truncate"},Ul=["disabled","onClick"],Nl={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Ll={class:"space-y-2"},Al={class:"flex gap-1"},Fl={class:"space-y-1 max-h-48 overflow-y-auto"},zl={class:"flex-1 truncate"},Kl=["disabled","onClick"],Zl={key:0,class:"text-xs text-muted-foreground py-2 text-center"},jl={key:1,class:"text-xs text-muted-foreground py-2 text-center"},Rl={class:"grid grid-cols-2 gap-4 mb-4"},El={class:"space-y-2"},Bl={class:"flex items-center justify-between"},ql={class:"text-xs text-primary font-medium"},Ol={key:0,class:"border rounded-md"},Pl={class:"border-t px-3 py-2 space-y-2 max-h-40 overflow-y-auto"},Hl={key:0,class:"flex items-center gap-2 cursor-pointer text-sm font-medium text-primary"},Xl={key:2,class:"text-xs text-muted-foreground text-center py-2"},Gl={key:1,class:"text-xs text-muted-foreground text-center py-2 border rounded-md"},Jl={class:"space-y-2"},Ql={class:"flex items-center justify-between"},Yl={class:"text-xs text-primary font-medium"},es={class:"grid grid-cols-3 gap-1"},ts={key:0,class:"border rounded-md"},ls={class:"border-t px-3 py-2 space-y-2 max-h-40 overflow-y-auto"},ss={key:0,class:"flex items-center gap-2 cursor-pointer text-sm font-medium text-primary"},as={key:2,class:"text-xs text-muted-foreground text-center py-2"},os={key:1,class:"text-xs text-muted-foreground text-center py-2 border rounded-md"},ns={key:2,class:"text-xs text-muted-foreground text-center py-2 border rounded-md"},rs={class:"flex justify-end mb-4"},is={key:0,class:"ml-1"},ds={class:"border rounded-md"},us={class:"flex items-center justify-between px-3 py-2 hover:bg-muted/50 transition-colors"},cs={class:"border-t"},ps={key:0,class:"w-full text-sm"},ms={class:"bg-muted/50"},vs={class:"w-10 px-2 text-center"},fs={class:"divide-y"},ys={class:"px-2 text-center"},gs={class:"px-3 py-2"},xs={class:"px-3 py-2"},_s={class:"px-3 py-2"},ks={class:"px-3 py-2"},bs={class:"px-3 py-2"},hs={class:"px-3 py-2"},Cs={class:"px-3 py-2"},ws={class:"px-3 py-2"},Ts={class:"px-3 py-2"},Ss={class:"px-2 text-center"},$s=["disabled","onClick"],Ms={key:1,class:"text-xs text-muted-foreground py-4 text-center"},Ws={key:2,class:"border-t px-3 py-2 bg-muted/30"},Vs={class:"flex items-center gap-2"},Ds={class:"text-sm font-medium"},Is={class:"flex justify-end"},Us={key:0,class:"space-y-2 text-sm"},Ns={class:"flex justify-between"},Ls={class:"font-medium"},As={class:"flex justify-between"},Fs={class:"font-medium"},zs={class:"flex justify-between"},Ks={class:"font-medium"},Zs=Te({__name:"ComponentCodeArea",setup(K){const{componentTypes:N,newComponentTypeName:S,isCreatingType:V,isDeletingType:$,loadComponentTypes:C,addComponentType:_,deleteComponentType:F,componentCodes:w,selectedComponentTypeId:y,newComponentCode:D,isCreatingCode:U,isDeletingCode:L,addComponentCode:R,deleteComponentCode:P,selectedComponentCodeIds:x,isAllComponentCodesSelected:b,toggleComponentCode:I,toggleAllComponentCodes:X,filteredMappings:O,isCreatingMapping:E,isDeletingMapping:j,deleteCwmMapping:v,divisions:c,workTypes:f,subWorkTypes:A,workSteps:H,materialTypes:G,materialSpecs:d,mappingForm:u,isLoadingWorkTypes:M,isLoadingSubWorkTypes:ne,isLoadingWorkSteps:ue,isLoadingMaterialSpecs:W,loadDivisions:k,loadMaterialTypes:ee,loadAllMappings:Se,addMapping:$e,selectedWorkStepIds:re,isAllWorkStepsSelected:Me,toggleWorkStep:We,toggleAllWorkSteps:Be,selectedMappingIds:he,isAllMappingsSelected:Ce,toggleMapping:pe,toggleAllMappings:Ve,materialApplyForm:ie,isApplyingMaterial:qe,applyMaterialToSelectedMappings:Oe,isCreatingTasks:De,createTasksResult:me,showCreateTasksResult:ve,createTasks:Pe}=Tl(),fe=n(!0),a=n(!0),p=n(!0);Le(()=>{C(),k(),ee(),Se()});function z(Ne){y.value=Ne}const He=de(()=>y.value!=null?String(y.value):""),Xe=de(()=>x.value.length===0?"선택 안함":b.value?"모두선택":`${x.value.length}개 선택`),Ie=de(()=>re.value.length===0?"선택 안함":Me.value?"모두선택":`${re.value.length}개 선택`),nt=de(()=>!E.value&&x.value.length>0&&re.value.length>0);function rt(){Se()}const Ue=n(!1),Ge=n(null),ot=n(""),Je=n(null);function Qe(Ne,s,o){Ge.value=Ne,ot.value=s,Je.value=o,Ue.value=!0}async function it(){Ge.value!=null&&Je.value&&await Je.value(Ge.value),Ue.value=!1}return(Ne,s)=>(i(),m("div",Sl,[t("div",null,[s[18]||(s[18]=t("h3",{class:"text-sm font-semibold mb-3"},"부재분류",-1)),t("div",$l,[t("div",Ml,[s[15]||(s[15]=t("p",{class:"text-xs text-muted-foreground font-medium"},"부재 타입 (ComponentType)",-1)),t("div",Wl,[l(e(se),{modelValue:e(S),"onUpdate:modelValue":s[0]||(s[0]=o=>le(S)?S.value=o:null),placeholder:"이름 입력",class:"h-8 text-sm",onKeyup:te(e(_),["enter"])},null,8,["modelValue","onKeyup"]),l(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(V)||!e(S).trim(),onClick:e(_)},{default:r(()=>[...s[14]||(s[14]=[T(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",Vl,[(i(!0),m(B,null,q(e(N),o=>(i(),m("div",{key:o.id,class:we(["flex items-center px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(y)===o.id,"border-border hover:bg-muted/50":e(y)!==o.id}]),onClick:Ye=>z(o.id)},[t("span",Il,h(o.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e($),onClick:Y(Ye=>Qe(o.id,o.name,e(F)),["stop"])},[l(e(ae),{class:"w-3 h-3"})],8,Ul)],10,Dl))),128)),e(N).length===0?(i(),m("p",Nl," 항목 없음 ")):Z("",!0)])]),t("div",Ll,[s[17]||(s[17]=t("p",{class:"text-xs text-muted-foreground font-medium"},"부재 코드 (ComponentCode)",-1)),t("div",Al,[l(e(se),{modelValue:e(D),"onUpdate:modelValue":s[1]||(s[1]=o=>le(D)?D.value=o:null),placeholder:"코드 입력",class:"h-8 text-sm",disabled:e(y)==null,onKeyup:te(e(R),["enter"])},null,8,["modelValue","disabled","onKeyup"]),l(e(J),{size:"sm",class:"h-8 shrink-0",disabled:e(U)||!e(D).trim()||e(y)==null,onClick:e(R)},{default:r(()=>[...s[16]||(s[16]=[T(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",Fl,[(i(!0),m(B,null,q(e(w),o=>(i(),m("div",{key:o.id,class:"flex items-center px-3 py-2 border rounded-md text-sm border-border"},[t("span",zl,h(o.code),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(L),onClick:Y(Ye=>Qe(o.id,o.code,e(P)),["stop"])},[l(e(ae),{class:"w-3 h-3"})],8,Kl)]))),128)),e(y)!=null&&e(w).length===0?(i(),m("p",Zl," 항목 없음 ")):Z("",!0),e(y)==null?(i(),m("p",jl," 부재 타입을 선택하세요 ")):Z("",!0)])])])]),l(e(ce)),t("div",null,[s[37]||(s[37]=t("h3",{class:"text-sm font-semibold mb-3"},"부재코드-작업절차-자재규격 연결",-1)),t("div",Rl,[t("div",El,[t("div",Bl,[s[19]||(s[19]=t("p",{class:"text-xs text-muted-foreground font-medium"},"부재코드 선택",-1)),t("span",ql,h(Xe.value),1)]),l(e(ge),{"model-value":He.value,"onUpdate:modelValue":s[2]||(s[2]=o=>o&&z(Number(o)))},{default:r(()=>[l(e(xe),{class:"h-8 text-sm"},{default:r(()=>[l(e(_e),{placeholder:"부재타입 선택"})]),_:1}),l(e(ke),null,{default:r(()=>[(i(!0),m(B,null,q(e(N),o=>(i(),Q(e(be),{key:o.id,value:String(o.id)},{default:r(()=>[T(h(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"]),e(y)!=null?(i(),m("div",Ol,[t("button",{class:"flex items-center justify-between w-full px-3 py-2 text-sm hover:bg-muted/50",onClick:s[3]||(s[3]=o=>a.value=!a.value)},[s[20]||(s[20]=t("span",{class:"font-medium"},"부재코드 목록",-1)),(i(),Q(tt(a.value?e(st):e(at)),{class:"h-4 w-4"}))]),et(t("div",Pl,[e(w).length>0?(i(),m("label",Hl,[l(e(ye),{"model-value":e(b),"onUpdate:modelValue":e(X)},null,8,["model-value","onUpdate:modelValue"]),s[21]||(s[21]=T(" 모두선택 ",-1))])):Z("",!0),e(w).length>0?(i(),Q(e(ce),{key:1,class:"my-1"})):Z("",!0),(i(!0),m(B,null,q(e(w),o=>(i(),m("label",{key:o.id,class:"flex items-center gap-2 cursor-pointer text-sm"},[l(e(ye),{"model-value":e(x).includes(o.id),"onUpdate:modelValue":()=>e(I)(o.id)},null,8,["model-value","onUpdate:modelValue"]),T(" "+h(o.code),1)]))),128)),e(w).length===0?(i(),m("p",Xl," 항목 없음 ")):Z("",!0)],512),[[lt,a.value]])])):(i(),m("p",Gl," 부재타입을 먼저 선택하세요 "))]),t("div",Jl,[t("div",Ql,[s[22]||(s[22]=t("p",{class:"text-xs text-muted-foreground font-medium"},"작업절차 선택",-1)),t("span",Yl,h(Ie.value),1)]),t("div",es,[l(e(ge),{modelValue:e(u).divisionId,"onUpdate:modelValue":s[4]||(s[4]=o=>e(u).divisionId=o)},{default:r(()=>[l(e(xe),{class:"h-8 text-sm"},{default:r(()=>[l(e(_e),{placeholder:"분류"})]),_:1}),l(e(ke),null,{default:r(()=>[(i(!0),m(B,null,q(e(c),o=>(i(),Q(e(be),{key:o.id,value:String(o.id)},{default:r(()=>[T(h(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),l(e(ge),{modelValue:e(u).workTypeId,"onUpdate:modelValue":s[5]||(s[5]=o=>e(u).workTypeId=o),disabled:!e(u).divisionId||e(M)},{default:r(()=>[l(e(xe),{class:"h-8 text-sm"},{default:r(()=>[l(e(_e),{placeholder:e(M)?"...":"공종"},null,8,["placeholder"])]),_:1}),l(e(ke),null,{default:r(()=>[(i(!0),m(B,null,q(e(f),o=>(i(),Q(e(be),{key:o.id,value:String(o.id)},{default:r(()=>[T(h(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),l(e(ge),{modelValue:e(u).subWorkTypeId,"onUpdate:modelValue":s[6]||(s[6]=o=>e(u).subWorkTypeId=o),disabled:!e(u).workTypeId||e(ne)},{default:r(()=>[l(e(xe),{class:"h-8 text-sm"},{default:r(()=>[l(e(_e),{placeholder:e(ne)?"...":"세부공종"},null,8,["placeholder"])]),_:1}),l(e(ke),null,{default:r(()=>[(i(!0),m(B,null,q(e(A),o=>(i(),Q(e(be),{key:o.id,value:String(o.id)},{default:r(()=>[T(h(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),e(u).subWorkTypeId&&!e(ue)?(i(),m("div",ts,[t("button",{class:"flex items-center justify-between w-full px-3 py-2 text-sm hover:bg-muted/50",onClick:s[7]||(s[7]=o=>p.value=!p.value)},[s[23]||(s[23]=t("span",{class:"font-medium"},"작업절차 목록",-1)),(i(),Q(tt(p.value?e(st):e(at)),{class:"h-4 w-4"}))]),et(t("div",ls,[e(H).length>0?(i(),m("label",ss,[l(e(ye),{"model-value":e(Me),"onUpdate:modelValue":e(Be)},null,8,["model-value","onUpdate:modelValue"]),s[24]||(s[24]=T(" 모두선택 ",-1))])):Z("",!0),e(H).length>0?(i(),Q(e(ce),{key:1,class:"my-1"})):Z("",!0),(i(!0),m(B,null,q(e(H),o=>(i(),m("label",{key:o.id,class:"flex items-center gap-2 cursor-pointer text-sm"},[l(e(ye),{"model-value":e(re).includes(o.id),"onUpdate:modelValue":()=>e(We)(o.id)},null,8,["model-value","onUpdate:modelValue"]),T(" "+h(o.name),1)]))),128)),e(H).length===0?(i(),m("p",as," 항목 없음 ")):Z("",!0)],512),[[lt,p.value]])])):e(ue)?(i(),m("div",os," 로딩 중... ")):(i(),m("p",ns," 세부공종을 먼저 선택하세요 "))])]),t("div",rs,[l(e(J),{size:"sm",class:"h-8 px-6",disabled:!nt.value,onClick:e($e)},{default:r(()=>[s[25]||(s[25]=T(" 연결 추가 ",-1)),e(x).length>0&&e(re).length>0?(i(),m("span",is," ("+h(e(x).length)+" × "+h(e(re).length)+") ",1)):Z("",!0)]),_:1},8,["disabled","onClick"])]),t("div",ds,[t("div",us,[t("button",{class:"flex items-center gap-2 text-sm font-medium",onClick:s[8]||(s[8]=o=>fe.value=!fe.value)},[(i(),Q(tt(fe.value?e(st):e(at)),{class:"h-4 w-4"})),t("span",null,"매핑 목록 ("+h(e(O).length)+")",1)]),t("button",{class:"p-1 rounded hover:bg-muted",title:"새로고침",onClick:Y(rt,["stop"])},[l(e(xt),{class:"h-4 w-4"})])]),et(t("div",cs,[e(O).length>0?(i(),m("table",ps,[t("thead",ms,[t("tr",null,[t("th",vs,[l(e(ye),{"model-value":e(Ce),"onUpdate:modelValue":e(Ve)},null,8,["model-value","onUpdate:modelValue"])]),s[26]||(s[26]=t("th",{class:"px-3 py-2 text-left font-medium"},"부재타입",-1)),s[27]||(s[27]=t("th",{class:"px-3 py-2 text-left font-medium"},"부재코드",-1)),s[28]||(s[28]=t("th",{class:"px-3 py-2 text-left font-medium"},"분류",-1)),s[29]||(s[29]=t("th",{class:"px-3 py-2 text-left font-medium"},"공종",-1)),s[30]||(s[30]=t("th",{class:"px-3 py-2 text-left font-medium"},"세부공종",-1)),s[31]||(s[31]=t("th",{class:"px-3 py-2 text-left font-medium"},"작업절차",-1)),s[32]||(s[32]=t("th",{class:"px-3 py-2 text-left font-medium"},"자재유형",-1)),s[33]||(s[33]=t("th",{class:"px-3 py-2 text-left font-medium"},"자재규격",-1)),s[34]||(s[34]=t("th",{class:"px-3 py-2 text-left font-medium"},"단위",-1)),s[35]||(s[35]=t("th",{class:"w-10 px-2 text-center font-medium"},"삭제",-1))])]),t("tbody",fs,[(i(!0),m(B,null,q(e(O),o=>(i(),m("tr",{key:o.id,class:"hover:bg-muted/30"},[t("td",ys,[l(e(ye),{"model-value":e(he).includes(o.id),"onUpdate:modelValue":()=>e(pe)(o.id)},null,8,["model-value","onUpdate:modelValue"])]),t("td",gs,h(o.componentTypeName),1),t("td",xs,h(o.componentCodeName),1),t("td",_s,h(o.divisionName),1),t("td",ks,h(o.workTypeName),1),t("td",bs,h(o.subWorkTypeName),1),t("td",hs,h(o.workStepName),1),t("td",Cs,h(o.materialTypeName||"-"),1),t("td",ws,h(o.materialSpecName||"-"),1),t("td",Ts,h(o.unitName||"-"),1),t("td",Ss,[t("button",{class:"p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive",disabled:e(j),onClick:Y(Ye=>Qe(o.id,o.componentCodeName,e(v)),["stop"])},[l(e(ae),{class:"w-3 h-3"})],8,$s)])]))),128))])])):(i(),m("p",Ms," 연결된 작업절차가 없습니다 ")),e(he).length>0?(i(),m("div",Ws,[t("div",Vs,[t("span",Ds,h(e(he).length)+"개 선택",1),l(e(ge),{modelValue:e(ie).materialTypeId,"onUpdate:modelValue":s[9]||(s[9]=o=>e(ie).materialTypeId=o)},{default:r(()=>[l(e(xe),{class:"h-8 text-sm w-40"},{default:r(()=>[l(e(_e),{placeholder:"자재유형"})]),_:1}),l(e(ke),null,{default:r(()=>[(i(!0),m(B,null,q(e(G),o=>(i(),Q(e(be),{key:o.id,value:String(o.id)},{default:r(()=>[T(h(o.name)+h(o.unit?` (${o.unit})`:""),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),l(e(ge),{modelValue:e(ie).materialSpecId,"onUpdate:modelValue":s[10]||(s[10]=o=>e(ie).materialSpecId=o),disabled:!e(ie).materialTypeId||e(W)},{default:r(()=>[l(e(xe),{class:"h-8 text-sm w-32"},{default:r(()=>[l(e(_e),{placeholder:e(W)?"로딩...":"자재규격"},null,8,["placeholder"])]),_:1}),l(e(ke),null,{default:r(()=>[(i(!0),m(B,null,q(e(d),o=>(i(),Q(e(be),{key:o.id,value:String(o.id)},{default:r(()=>[T(h(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),l(e(J),{size:"sm",disabled:!e(ie).materialSpecId||e(qe),onClick:e(Oe)},{default:r(()=>[...s[36]||(s[36]=[T(" 자재 적용 ",-1)])]),_:1},8,["disabled","onClick"])])])):Z("",!0)],512),[[lt,fe.value]])])]),l(e(ce)),t("div",Is,[l(e(J),{disabled:e(De),onClick:e(Pe)},{default:r(()=>[T(h(e(De)?"생성 중...":"세부작업 생성"),1)]),_:1},8,["disabled","onClick"])]),l(e(Ae),{open:Ue.value,"onUpdate:open":s[11]||(s[11]=o=>Ue.value=o)},{default:r(()=>[l(e(Fe),null,{default:r(()=>[l(e(ze),null,{default:r(()=>[l(e(Ke),null,{default:r(()=>[...s[38]||(s[38]=[T("삭제 확인",-1)])]),_:1}),l(e(Ze),null,{default:r(()=>[T(" '"+h(ot.value)+"' 항목을 삭제하시겠습니까? ",1)]),_:1})]),_:1}),l(e(je),null,{default:r(()=>[l(e(Re),null,{default:r(()=>[...s[39]||(s[39]=[T("취소",-1)])]),_:1}),l(e(Ee),{onClick:it},{default:r(()=>[...s[40]||(s[40]=[T("삭제",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),l(e(ct),{open:e(ve),"onUpdate:open":s[13]||(s[13]=o=>le(ve)?ve.value=o:null)},{default:r(()=>[l(e(pt),null,{default:r(()=>[l(e(mt),null,{default:r(()=>[l(e(vt),null,{default:r(()=>[...s[41]||(s[41]=[T("세부작업 생성 완료",-1)])]),_:1}),l(e(yt),null,{default:r(()=>[...s[42]||(s[42]=[T("세부작업 생성 결과입니다.",-1)])]),_:1})]),_:1}),e(me)?(i(),m("div",Us,[t("div",Ns,[s[43]||(s[43]=t("span",{class:"text-muted-foreground"},"생성된 작업 수",-1)),t("span",Ls,h(e(me).createdCount)+"건",1)]),t("div",As,[s[44]||(s[44]=t("span",{class:"text-muted-foreground"},"건너뛴 중복 작업 수",-1)),t("span",Fs,h(e(me).skippedDuplicateCount)+"건",1)]),t("div",zs,[s[45]||(s[45]=t("span",{class:"text-muted-foreground"},"부재코드 없는 건 수",-1)),t("span",Ks,h(e(me).skippedNoCcodeCount)+"건",1)])])):Z("",!0),l(e(ft),null,{default:r(()=>[l(e(J),{onClick:s[12]||(s[12]=o=>ve.value=!1)},{default:r(()=>[...s[46]||(s[46]=[T("확인",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}}),js={class:"p-4 space-y-6"},da=Te({__name:"AdminPage",setup(K){return(N,S)=>(i(),Q(dt,{title:"기준정보 관리"},{default:r(()=>[l(ut,{title:"작업관련",height:"flex-1","min-height":"600px"},{default:r(()=>[t("div",js,[l(Jt),l(e(ce)),l(fl),l(e(ce)),l(wl),l(e(ce)),l(Zs)])]),_:1})]),_:1}))}});export{da as default};
