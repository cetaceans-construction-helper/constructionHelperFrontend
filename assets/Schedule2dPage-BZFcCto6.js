import{_ as _s}from"./PageContainer.vue_vue_type_script_setup_true_lang-CEHe9PLv.js";import{_ as bs}from"./AreaCard.vue_vue_type_script_setup_true_lang-Cun49brn.js";import{d as $e,L as Ki,D as Ee,M as xs,I as qi,c as X,o as V,e as L,s as Oe,w as U,a as O,u as d,N as Gt,O as ks,y as le,r as ce,P as Ss,i as ct,F as Se,n as De,z as Ae,Q as at,R as ji,j as Ie,S as Es,p as ze,K as pt,T as Me,q as Fe,t as ke,U as To,C as Ns,V as Cs,W as Ji,X as Nn,Y as Ut,Z as Wt,J as Qi,_ as Ce,$ as be,a0 as $s,x as er,a1 as Is,E as Ot,g as pe,a2 as Cn,a3 as Ms,a4 as io,a5 as qo,a6 as Ps}from"./index-CrXngJox.js";import{_ as Le}from"./index-DjQGxc2-.js";import{_ as Ds}from"./Checkbox.vue_vue_type_script_setup_true_lang-CQl3bHDA.js";import{_ as Dt}from"./Input.vue_vue_type_script_setup_true_lang-Cd6-xZ_U.js";import{_ as _t,a as bt,b as xt,c as kt,d as Ze}from"./SelectValue.vue_vue_type_script_setup_true_lang-jGZzJRNu.js";import{_ as jo,a as Jo,b as Qo,c as ei,d as ti,e as ni,f as oi,g as ii}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-BMpptCBF.js";import{_ as Ts}from"./SideTabBox.vue_vue_type_script_setup_true_lang-BAQZBQMu.js";import{w as Vt}from"./work-tyQ0W_eq.js";import{a as Kt,u as zs}from"./apiClient-ycqybHFy.js";import{u as Os}from"./calendarStore-Czt6M6H0.js";import{r as dt}from"./reference-BgrhXxFd.js";import{p as As}from"./project-DY5jMtta.js";import"./Collection-7xKaQT2u.js";import"./index-DbURNFAQ.js";import"./utils-BjnBM6mg.js";import"./createLucideIcon-BNaNAPpz.js";import"./DialogTitle-Bfgltyr_.js";function rn(e){return Ji()?(Nn(e),!0):!1}function st(e){return typeof e=="function"?e():d(e)}const Vs=typeof window<"u"&&typeof document<"u",Bs=e=>typeof e<"u",Hs=Object.prototype.toString,Rs=e=>Hs.call(e)==="[object Object]",Ws=()=>{};function Ls(e,t){function n(...o){return new Promise((i,r)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(r)})}return n}const tr=e=>e();function Fs(e=tr){const t=ce(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...r)=>{t.value&&e(...r)};return{isActive:Ms(t),pause:n,resume:o,eventFilter:i}}function ri(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function Ys(e,t,n={}){const{eventFilter:o=tr,...i}=n;return Ee(e,Ls(o,t),i)}function Tt(e,t,n={}){const{eventFilter:o,...i}=n,{eventFilter:r,pause:s,resume:l,isActive:a}=Fs(o);return{stop:Ys(e,t,{...i,eventFilter:r}),pause:s,resume:l,isActive:a}}function Xs(e,t={}){if(!To(e))return Ns(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=Cs(()=>({get(){return e.value[o]},set(i){var r;if((r=st(t.replaceRef))!=null?r:!0)if(Array.isArray(e.value)){const l=[...e.value];l[o]=i,e.value=l}else{const l={...e.value,[o]:i};Object.setPrototypeOf(l,Object.getPrototypeOf(e.value)),e.value=l}else e.value[o]=i}}));return n}function yo(e,t=!1){function n(h,{flush:p="sync",deep:y=!1,timeout:C,throwOnTimeout:S}={}){let N=null;const I=[new Promise(f=>{N=Ee(e,_=>{h(_)!==t&&(N?.(),f(_))},{flush:p,deep:y,immediate:!0})})];return C!=null&&I.push(ri(C,S).then(()=>st(e)).finally(()=>N?.())),Promise.race(I)}function o(h,p){if(!To(h))return n(_=>_===h,p);const{flush:y="sync",deep:C=!1,timeout:S,throwOnTimeout:N}=p??{};let E=null;const f=[new Promise(_=>{E=Ee([e,h],([D,B])=>{t!==(D===B)&&(E?.(),_(D))},{flush:y,deep:C,immediate:!0})})];return S!=null&&f.push(ri(S,N).then(()=>st(e)).finally(()=>(E?.(),st(e)))),Promise.race(f)}function i(h){return n(p=>!!p,h)}function r(h){return o(null,h)}function s(h){return o(void 0,h)}function l(h){return n(Number.isNaN,h)}function a(h,p){return n(y=>{const C=Array.from(y);return C.includes(h)||C.includes(st(h))},p)}function u(h){return c(1,h)}function c(h=1,p){let y=-1;return n(()=>(y+=1,y>=h),p)}return Array.isArray(st(e))?{toMatch:n,toContains:a,changed:u,changedTimes:c,get not(){return yo(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:r,toBeNaN:l,toBeUndefined:s,changed:u,changedTimes:c,get not(){return yo(e,!t)}}}function wo(e){return yo(e)}function Gs(e){var t;const n=st(e);return(t=n?.$el)!=null?t:n}const nr=Vs?window:void 0;function or(...e){let t,n,o,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,i]=e,t=nr):[t,n,o,i]=e,!t)return Ws;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],s=()=>{r.forEach(c=>c()),r.length=0},l=(c,h,p,y)=>(c.addEventListener(h,p,y),()=>c.removeEventListener(h,p,y)),a=Ee(()=>[Gs(t),st(i)],([c,h])=>{if(s(),!c)return;const p=Rs(h)?{...h}:h;r.push(...n.flatMap(y=>o.map(C=>l(c,y,C,p))))},{immediate:!0,flush:"post"}),u=()=>{a(),s()};return rn(u),u}function Us(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function si(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=nr,eventName:r="keydown",passive:s=!1,dedupe:l=!1}=o,a=Us(t);return or(i,r,c=>{c.repeat&&st(l)||a(c)&&n(c)},s)}function Zs(e){return JSON.parse(JSON.stringify(e))}function ro(e,t,n,o={}){var i,r,s;const{clone:l=!1,passive:a=!1,eventName:u,deep:c=!1,defaultValue:h,shouldEmit:p}=o,y=Gt(),C=n||y?.emit||((i=y?.$emit)==null?void 0:i.bind(y))||((s=(r=y?.proxy)==null?void 0:r.$emit)==null?void 0:s.bind(y?.proxy));let S=u;t||(t="modelValue"),S=S||`update:${t.toString()}`;const N=f=>l?typeof l=="function"?l(f):Zs(f):f,E=()=>Bs(e[t])?N(e[t]):h,I=f=>{p?p(f)&&C(S,f):C(S,f)};if(a){const f=E(),_=ce(f);let D=!1;return Ee(()=>e[t],B=>{D||(D=!0,_.value=N(B),at(()=>D=!1))}),Ee(_,B=>{!D&&(B!==e[t]||c)&&I(B)},{deep:c}),_}else return le({get(){return E()},set(f){I(f)}})}var Ks={value:()=>{}};function Yn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new $n(n)}function $n(e){this._=e}function qs(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}$n.prototype=Yn.prototype={constructor:$n,on:function(e,t){var n=this._,o=qs(e+"",n),i,r=-1,s=o.length;if(arguments.length<2){for(;++r<s;)if((i=(e=o[r]).type)&&(i=js(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<s;)if(i=(e=o[r]).type)n[i]=li(n[i],e.name,t);else if(t==null)for(i in n)n[i]=li(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new $n(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,r;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};function js(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function li(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=Ks,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var _o="http://www.w3.org/1999/xhtml";const ai={svg:"http://www.w3.org/2000/svg",xhtml:_o,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ai.hasOwnProperty(t)?{space:ai[t],local:e}:e}function Js(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===_o&&t.documentElement.namespaceURI===_o?t.createElement(e):t.createElementNS(n,e)}}function Qs(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ir(e){var t=Xn(e);return(t.local?Qs:Js)(t)}function el(){}function zo(e){return e==null?el:function(){return this.querySelector(e)}}function tl(e){typeof e!="function"&&(e=zo(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],s=r.length,l=o[i]=new Array(s),a,u,c=0;c<s;++c)(a=r[c])&&(u=e.call(a,a.__data__,c,r))&&("__data__"in a&&(u.__data__=a.__data__),l[c]=u);return new Ge(o,this._parents)}function nl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ol(){return[]}function rr(e){return e==null?ol:function(){return this.querySelectorAll(e)}}function il(e){return function(){return nl(e.apply(this,arguments))}}function rl(e){typeof e=="function"?e=il(e):e=rr(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var s=t[r],l=s.length,a,u=0;u<l;++u)(a=s[u])&&(o.push(e.call(a,a.__data__,u,s)),i.push(a));return new Ge(o,i)}function sr(e){return function(){return this.matches(e)}}function lr(e){return function(t){return t.matches(e)}}var sl=Array.prototype.find;function ll(e){return function(){return sl.call(this.children,e)}}function al(){return this.firstElementChild}function ul(e){return this.select(e==null?al:ll(typeof e=="function"?e:lr(e)))}var cl=Array.prototype.filter;function dl(){return Array.from(this.children)}function fl(e){return function(){return cl.call(this.children,e)}}function hl(e){return this.selectAll(e==null?dl:fl(typeof e=="function"?e:lr(e)))}function vl(e){typeof e!="function"&&(e=sr(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],s=r.length,l=o[i]=[],a,u=0;u<s;++u)(a=r[u])&&e.call(a,a.__data__,u,r)&&l.push(a);return new Ge(o,this._parents)}function ar(e){return new Array(e.length)}function pl(){return new Ge(this._enter||this._groups.map(ar),this._parents)}function Tn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Tn.prototype={constructor:Tn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function gl(e){return function(){return e}}function ml(e,t,n,o,i,r){for(var s=0,l,a=t.length,u=r.length;s<u;++s)(l=t[s])?(l.__data__=r[s],o[s]=l):n[s]=new Tn(e,r[s]);for(;s<a;++s)(l=t[s])&&(i[s]=l)}function yl(e,t,n,o,i,r,s){var l,a,u=new Map,c=t.length,h=r.length,p=new Array(c),y;for(l=0;l<c;++l)(a=t[l])&&(p[l]=y=s.call(a,a.__data__,l,t)+"",u.has(y)?i[l]=a:u.set(y,a));for(l=0;l<h;++l)y=s.call(e,r[l],l,r)+"",(a=u.get(y))?(o[l]=a,a.__data__=r[l],u.delete(y)):n[l]=new Tn(e,r[l]);for(l=0;l<c;++l)(a=t[l])&&u.get(p[l])===a&&(i[l]=a)}function wl(e){return e.__data__}function _l(e,t){if(!arguments.length)return Array.from(this,wl);var n=t?yl:ml,o=this._parents,i=this._groups;typeof e!="function"&&(e=gl(e));for(var r=i.length,s=new Array(r),l=new Array(r),a=new Array(r),u=0;u<r;++u){var c=o[u],h=i[u],p=h.length,y=bl(e.call(c,c&&c.__data__,u,o)),C=y.length,S=l[u]=new Array(C),N=s[u]=new Array(C),E=a[u]=new Array(p);n(c,h,S,N,E,y,t);for(var I=0,f=0,_,D;I<C;++I)if(_=S[I]){for(I>=f&&(f=I+1);!(D=N[f])&&++f<C;);_._next=D||null}}return s=new Ge(s,o),s._enter=l,s._exit=a,s}function bl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xl(){return new Ge(this._exit||this._groups.map(ar),this._parents)}function kl(e,t,n){var o=this.enter(),i=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?r.remove():n(r),o&&i?o.merge(i).order():i}function Sl(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,s=Math.min(i,r),l=new Array(i),a=0;a<s;++a)for(var u=n[a],c=o[a],h=u.length,p=l[a]=new Array(h),y,C=0;C<h;++C)(y=u[C]||c[C])&&(p[C]=y);for(;a<i;++a)l[a]=n[a];return new Ge(l,this._parents)}function El(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,r=o[i],s;--i>=0;)(s=o[i])&&(r&&s.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(s,r),r=s);return this}function Nl(e){e||(e=Cl);function t(h,p){return h&&p?e(h.__data__,p.__data__):!h-!p}for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var s=n[r],l=s.length,a=i[r]=new Array(l),u,c=0;c<l;++c)(u=s[c])&&(a[c]=u);a.sort(t)}return new Ge(i,this._parents).order()}function Cl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $l(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Il(){return Array.from(this)}function Ml(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var s=o[i];if(s)return s}return null}function Pl(){let e=0;for(const t of this)++e;return e}function Dl(){return!this.node()}function Tl(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],r=0,s=i.length,l;r<s;++r)(l=i[r])&&e.call(l,l.__data__,r,i);return this}function zl(e){return function(){this.removeAttribute(e)}}function Ol(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Al(e,t){return function(){this.setAttribute(e,t)}}function Vl(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Bl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Hl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Rl(e,t){var n=Xn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Ol:zl:typeof t=="function"?n.local?Hl:Bl:n.local?Vl:Al)(n,t))}function ur(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Wl(e){return function(){this.style.removeProperty(e)}}function Ll(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Fl(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Yl(e,t,n){return arguments.length>1?this.each((t==null?Wl:typeof t=="function"?Fl:Ll)(e,t,n??"")):Lt(this.node(),e)}function Lt(e,t){return e.style.getPropertyValue(t)||ur(e).getComputedStyle(e,null).getPropertyValue(t)}function Xl(e){return function(){delete this[e]}}function Gl(e,t){return function(){this[e]=t}}function Ul(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Zl(e,t){return arguments.length>1?this.each((t==null?Xl:typeof t=="function"?Ul:Gl)(e,t)):this.node()[e]}function cr(e){return e.trim().split(/^|\s+/)}function Oo(e){return e.classList||new dr(e)}function dr(e){this._node=e,this._names=cr(e.getAttribute("class")||"")}dr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function fr(e,t){for(var n=Oo(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function hr(e,t){for(var n=Oo(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function Kl(e){return function(){fr(this,e)}}function ql(e){return function(){hr(this,e)}}function jl(e,t){return function(){(t.apply(this,arguments)?fr:hr)(this,e)}}function Jl(e,t){var n=cr(e+"");if(arguments.length<2){for(var o=Oo(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?jl:t?Kl:ql)(n,t))}function Ql(){this.textContent=""}function ea(e){return function(){this.textContent=e}}function ta(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function na(e){return arguments.length?this.each(e==null?Ql:(typeof e=="function"?ta:ea)(e)):this.node().textContent}function oa(){this.innerHTML=""}function ia(e){return function(){this.innerHTML=e}}function ra(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function sa(e){return arguments.length?this.each(e==null?oa:(typeof e=="function"?ra:ia)(e)):this.node().innerHTML}function la(){this.nextSibling&&this.parentNode.appendChild(this)}function aa(){return this.each(la)}function ua(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ca(){return this.each(ua)}function da(e){var t=typeof e=="function"?e:ir(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function fa(){return null}function ha(e,t){var n=typeof e=="function"?e:ir(e),o=t==null?fa:typeof t=="function"?t:zo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function va(){var e=this.parentNode;e&&e.removeChild(this)}function pa(){return this.each(va)}function ga(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ma(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ya(e){return this.select(e?ma:ga)}function wa(e){return arguments.length?this.property("__data__",e):this.node().__data__}function _a(e){return function(t){e.call(this,t,this.__data__)}}function ba(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function xa(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,r;n<i;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++o]=r;++o?t.length=o:delete this.__on}}}function ka(e,t,n){return function(){var o=this.__on,i,r=_a(t);if(o){for(var s=0,l=o.length;s<l;++s)if((i=o[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),i.value=t;return}}this.addEventListener(e.type,r,n),i={type:e.type,name:e.name,value:t,listener:r,options:n},o?o.push(i):this.__on=[i]}}function Sa(e,t,n){var o=ba(e+""),i,r=o.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,u=l.length,c;a<u;++a)for(i=0,c=l[a];i<r;++i)if((s=o[i]).type===c.type&&s.name===c.name)return c.value}return}for(l=t?ka:xa,i=0;i<r;++i)this.each(l(o[i],t,n));return this}function vr(e,t,n){var o=ur(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Ea(e,t){return function(){return vr(this,e,t)}}function Na(e,t){return function(){return vr(this,e,t.apply(this,arguments))}}function Ca(e,t){return this.each((typeof t=="function"?Na:Ea)(e,t))}function*$a(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length,s;i<r;++i)(s=o[i])&&(yield s)}var pr=[null];function Ge(e,t){this._groups=e,this._parents=t}function hn(){return new Ge([[document.documentElement]],pr)}function Ia(){return this}Ge.prototype=hn.prototype={constructor:Ge,select:tl,selectAll:rl,selectChild:ul,selectChildren:hl,filter:vl,data:_l,enter:pl,exit:xl,join:kl,merge:Sl,selection:Ia,order:El,sort:Nl,call:$l,nodes:Il,node:Ml,size:Pl,empty:Dl,each:Tl,attr:Rl,style:Yl,property:Zl,classed:Jl,text:na,html:sa,raise:aa,lower:ca,append:da,insert:ha,remove:pa,clone:ya,datum:wa,on:Sa,dispatch:Ca,[Symbol.iterator]:$a};function Ke(e){return typeof e=="string"?new Ge([[document.querySelector(e)]],[document.documentElement]):new Ge([[e]],pr)}function Ma(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Qe(e,t){if(e=Ma(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Pa={passive:!1},sn={capture:!0,passive:!1};function so(e){e.stopImmediatePropagation()}function Bt(e){e.preventDefault(),e.stopImmediatePropagation()}function gr(e){var t=e.document.documentElement,n=Ke(e).on("dragstart.drag",Bt,sn);"onselectstart"in t?n.on("selectstart.drag",Bt,sn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function mr(e,t){var n=e.document.documentElement,o=Ke(e).on("dragstart.drag",null);t&&(o.on("click.drag",Bt,sn),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const gn=e=>()=>e;function bo(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:r,x:s,y:l,dx:a,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}bo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Da(e){return!e.ctrlKey&&!e.button}function Ta(){return this.parentNode}function za(e,t){return t??{x:e.x,y:e.y}}function Oa(){return navigator.maxTouchPoints||"ontouchstart"in this}function Aa(){var e=Da,t=Ta,n=za,o=Oa,i={},r=Yn("start","drag","end"),s=0,l,a,u,c,h=0;function p(_){_.on("mousedown.drag",y).filter(o).on("touchstart.drag",N).on("touchmove.drag",E,Pa).on("touchend.drag touchcancel.drag",I).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(_,D){if(!(c||!e.call(this,_,D))){var B=f(this,t.call(this,_,D),_,D,"mouse");B&&(Ke(_.view).on("mousemove.drag",C,sn).on("mouseup.drag",S,sn),gr(_.view),so(_),u=!1,l=_.clientX,a=_.clientY,B("start",_))}}function C(_){if(Bt(_),!u){var D=_.clientX-l,B=_.clientY-a;u=D*D+B*B>h}i.mouse("drag",_)}function S(_){Ke(_.view).on("mousemove.drag mouseup.drag",null),mr(_.view,u),Bt(_),i.mouse("end",_)}function N(_,D){if(e.call(this,_,D)){var B=_.changedTouches,A=t.call(this,_,D),H=B.length,ee,z;for(ee=0;ee<H;++ee)(z=f(this,A,_,D,B[ee].identifier,B[ee]))&&(so(_),z("start",_,B[ee]))}}function E(_){var D=_.changedTouches,B=D.length,A,H;for(A=0;A<B;++A)(H=i[D[A].identifier])&&(Bt(_),H("drag",_,D[A]))}function I(_){var D=_.changedTouches,B=D.length,A,H;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),A=0;A<B;++A)(H=i[D[A].identifier])&&(so(_),H("end",_,D[A]))}function f(_,D,B,A,H,ee){var z=r.copy(),W=Qe(ee||B,D),k,re,x;if((x=n.call(_,new bo("beforestart",{sourceEvent:B,target:p,identifier:H,active:s,x:W[0],y:W[1],dx:0,dy:0,dispatch:z}),A))!=null)return k=x.x-W[0]||0,re=x.y-W[1]||0,function M($,R,F){var Z=W,G;switch($){case"start":i[H]=M,G=s++;break;case"end":delete i[H],--s;case"drag":W=Qe(F||R,D),G=s;break}z.call($,_,new bo($,{sourceEvent:R,subject:x,target:p,identifier:H,active:G,x:W[0]+k,y:W[1]+re,dx:W[0]-Z[0],dy:W[1]-Z[1],dispatch:z}),A)}}return p.filter=function(_){return arguments.length?(e=typeof _=="function"?_:gn(!!_),p):e},p.container=function(_){return arguments.length?(t=typeof _=="function"?_:gn(_),p):t},p.subject=function(_){return arguments.length?(n=typeof _=="function"?_:gn(_),p):n},p.touchable=function(_){return arguments.length?(o=typeof _=="function"?_:gn(!!_),p):o},p.on=function(){var _=r.on.apply(r,arguments);return _===r?p:_},p.clickDistance=function(_){return arguments.length?(h=(_=+_)*_,p):Math.sqrt(h)},p}function Ao(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function yr(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function vn(){}var ln=.7,zn=1/ln,Ht="\\s*([+-]?\\d+)\\s*",an="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Va=/^#([0-9a-f]{3,8})$/,Ba=new RegExp(`^rgb\\(${Ht},${Ht},${Ht}\\)$`),Ha=new RegExp(`^rgb\\(${nt},${nt},${nt}\\)$`),Ra=new RegExp(`^rgba\\(${Ht},${Ht},${Ht},${an}\\)$`),Wa=new RegExp(`^rgba\\(${nt},${nt},${nt},${an}\\)$`),La=new RegExp(`^hsl\\(${an},${nt},${nt}\\)$`),Fa=new RegExp(`^hsla\\(${an},${nt},${nt},${an}\\)$`),ui={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ao(vn,It,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ci,formatHex:ci,formatHex8:Ya,formatHsl:Xa,formatRgb:di,toString:di});function ci(){return this.rgb().formatHex()}function Ya(){return this.rgb().formatHex8()}function Xa(){return wr(this).formatHsl()}function di(){return this.rgb().formatRgb()}function It(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Va.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?fi(t):n===3?new Xe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?mn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?mn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ba.exec(e))?new Xe(t[1],t[2],t[3],1):(t=Ha.exec(e))?new Xe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ra.exec(e))?mn(t[1],t[2],t[3],t[4]):(t=Wa.exec(e))?mn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=La.exec(e))?pi(t[1],t[2]/100,t[3]/100,1):(t=Fa.exec(e))?pi(t[1],t[2]/100,t[3]/100,t[4]):ui.hasOwnProperty(e)?fi(ui[e]):e==="transparent"?new Xe(NaN,NaN,NaN,0):null}function fi(e){return new Xe(e>>16&255,e>>8&255,e&255,1)}function mn(e,t,n,o){return o<=0&&(e=t=n=NaN),new Xe(e,t,n,o)}function Ga(e){return e instanceof vn||(e=It(e)),e?(e=e.rgb(),new Xe(e.r,e.g,e.b,e.opacity)):new Xe}function xo(e,t,n,o){return arguments.length===1?Ga(e):new Xe(e,t,n,o??1)}function Xe(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Ao(Xe,xo,yr(vn,{brighter(e){return e=e==null?zn:Math.pow(zn,e),new Xe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ln:Math.pow(ln,e),new Xe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xe(Ct(this.r),Ct(this.g),Ct(this.b),On(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hi,formatHex:hi,formatHex8:Ua,formatRgb:vi,toString:vi}));function hi(){return`#${Nt(this.r)}${Nt(this.g)}${Nt(this.b)}`}function Ua(){return`#${Nt(this.r)}${Nt(this.g)}${Nt(this.b)}${Nt((isNaN(this.opacity)?1:this.opacity)*255)}`}function vi(){const e=On(this.opacity);return`${e===1?"rgb(":"rgba("}${Ct(this.r)}, ${Ct(this.g)}, ${Ct(this.b)}${e===1?")":`, ${e})`}`}function On(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ct(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Nt(e){return e=Ct(e),(e<16?"0":"")+e.toString(16)}function pi(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new qe(e,t,n,o)}function wr(e){if(e instanceof qe)return new qe(e.h,e.s,e.l,e.opacity);if(e instanceof vn||(e=It(e)),!e)return new qe;if(e instanceof qe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),s=NaN,l=r-i,a=(r+i)/2;return l?(t===r?s=(n-o)/l+(n<o)*6:n===r?s=(o-t)/l+2:s=(t-n)/l+4,l/=a<.5?r+i:2-r-i,s*=60):l=a>0&&a<1?0:s,new qe(s,l,a,e.opacity)}function Za(e,t,n,o){return arguments.length===1?wr(e):new qe(e,t,n,o??1)}function qe(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Ao(qe,Za,yr(vn,{brighter(e){return e=e==null?zn:Math.pow(zn,e),new qe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ln:Math.pow(ln,e),new qe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new Xe(lo(e>=240?e-240:e+120,i,o),lo(e,i,o),lo(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new qe(gi(this.h),yn(this.s),yn(this.l),On(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=On(this.opacity);return`${e===1?"hsl(":"hsla("}${gi(this.h)}, ${yn(this.s)*100}%, ${yn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function gi(e){return e=(e||0)%360,e<0?e+360:e}function yn(e){return Math.max(0,Math.min(1,e||0))}function lo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Vo=e=>()=>e;function Ka(e,t){return function(n){return e+n*t}}function qa(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function ja(e){return(e=+e)==1?_r:function(t,n){return n-t?qa(t,n,e):Vo(isNaN(t)?n:t)}}function _r(e,t){var n=t-e;return n?Ka(e,n):Vo(isNaN(e)?t:e)}const An=(function e(t){var n=ja(t);function o(i,r){var s=n((i=xo(i)).r,(r=xo(r)).r),l=n(i.g,r.g),a=n(i.b,r.b),u=_r(i.opacity,r.opacity);return function(c){return i.r=s(c),i.g=l(c),i.b=a(c),i.opacity=u(c),i+""}}return o.gamma=e,o})(1);function Ja(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),i;return function(r){for(i=0;i<n;++i)o[i]=e[i]*(1-r)+t[i]*r;return o}}function Qa(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function eu(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,i=new Array(o),r=new Array(n),s;for(s=0;s<o;++s)i[s]=tn(e[s],t[s]);for(;s<n;++s)r[s]=t[s];return function(l){for(s=0;s<o;++s)r[s]=i[s](l);return r}}function tu(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function et(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function nu(e,t){var n={},o={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=tn(e[i],t[i]):o[i]=t[i];return function(r){for(i in n)o[i]=n[i](r);return o}}var ko=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ao=new RegExp(ko.source,"g");function ou(e){return function(){return e}}function iu(e){return function(t){return e(t)+""}}function br(e,t){var n=ko.lastIndex=ao.lastIndex=0,o,i,r,s=-1,l=[],a=[];for(e=e+"",t=t+"";(o=ko.exec(e))&&(i=ao.exec(t));)(r=i.index)>n&&(r=t.slice(n,r),l[s]?l[s]+=r:l[++s]=r),(o=o[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,a.push({i:s,x:et(o,i)})),n=ao.lastIndex;return n<t.length&&(r=t.slice(n),l[s]?l[s]+=r:l[++s]=r),l.length<2?a[0]?iu(a[0].x):ou(t):(t=a.length,function(u){for(var c=0,h;c<t;++c)l[(h=a[c]).i]=h.x(u);return l.join("")})}function tn(e,t){var n=typeof t,o;return t==null||n==="boolean"?Vo(t):(n==="number"?et:n==="string"?(o=It(t))?(t=o,An):br:t instanceof It?An:t instanceof Date?tu:Qa(t)?Ja:Array.isArray(t)?eu:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?nu:et)(e,t)}var mi=180/Math.PI,So={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xr(e,t,n,o,i,r){var s,l,a;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(a=e*n+t*o)&&(n-=e*a,o-=t*a),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,a/=l),e*o<t*n&&(e=-e,t=-t,a=-a,s=-s),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*mi,skewX:Math.atan(a)*mi,scaleX:s,scaleY:l}}var wn;function ru(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?So:xr(t.a,t.b,t.c,t.d,t.e,t.f)}function su(e){return e==null||(wn||(wn=document.createElementNS("http://www.w3.org/2000/svg","g")),wn.setAttribute("transform",e),!(e=wn.transform.baseVal.consolidate()))?So:(e=e.matrix,xr(e.a,e.b,e.c,e.d,e.e,e.f))}function kr(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function r(u,c,h,p,y,C){if(u!==h||c!==p){var S=y.push("translate(",null,t,null,n);C.push({i:S-4,x:et(u,h)},{i:S-2,x:et(c,p)})}else(h||p)&&y.push("translate("+h+t+p+n)}function s(u,c,h,p){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),p.push({i:h.push(i(h)+"rotate(",null,o)-2,x:et(u,c)})):c&&h.push(i(h)+"rotate("+c+o)}function l(u,c,h,p){u!==c?p.push({i:h.push(i(h)+"skewX(",null,o)-2,x:et(u,c)}):c&&h.push(i(h)+"skewX("+c+o)}function a(u,c,h,p,y,C){if(u!==h||c!==p){var S=y.push(i(y)+"scale(",null,",",null,")");C.push({i:S-4,x:et(u,h)},{i:S-2,x:et(c,p)})}else(h!==1||p!==1)&&y.push(i(y)+"scale("+h+","+p+")")}return function(u,c){var h=[],p=[];return u=e(u),c=e(c),r(u.translateX,u.translateY,c.translateX,c.translateY,h,p),s(u.rotate,c.rotate,h,p),l(u.skewX,c.skewX,h,p),a(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,p),u=c=null,function(y){for(var C=-1,S=p.length,N;++C<S;)h[(N=p[C]).i]=N.x(y);return h.join("")}}}var lu=kr(ru,"px, ","px)","deg)"),au=kr(su,", ",")",")"),uu=1e-12;function yi(e){return((e=Math.exp(e))+1/e)/2}function cu(e){return((e=Math.exp(e))-1/e)/2}function du(e){return((e=Math.exp(2*e))-1)/(e+1)}const In=(function e(t,n,o){function i(r,s){var l=r[0],a=r[1],u=r[2],c=s[0],h=s[1],p=s[2],y=c-l,C=h-a,S=y*y+C*C,N,E;if(S<uu)E=Math.log(p/u)/t,N=function(A){return[l+A*y,a+A*C,u*Math.exp(t*A*E)]};else{var I=Math.sqrt(S),f=(p*p-u*u+o*S)/(2*u*n*I),_=(p*p-u*u-o*S)/(2*p*n*I),D=Math.log(Math.sqrt(f*f+1)-f),B=Math.log(Math.sqrt(_*_+1)-_);E=(B-D)/t,N=function(A){var H=A*E,ee=yi(D),z=u/(n*I)*(ee*du(t*H+D)-cu(D));return[l+z*y,a+z*C,u*ee/yi(t*H+D)]}}return N.duration=E*1e3*t/Math.SQRT2,N}return i.rho=function(r){var s=Math.max(.001,+r),l=s*s,a=l*l;return e(s,l,a)},i})(Math.SQRT2,2,4);var Ft=0,Jt=0,qt=0,Sr=1e3,Vn,Qt,Bn=0,Mt=0,Gn=0,un=typeof performance=="object"&&performance.now?performance:Date,Er=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Bo(){return Mt||(Er(fu),Mt=un.now()+Gn)}function fu(){Mt=0}function Hn(){this._call=this._time=this._next=null}Hn.prototype=Nr.prototype={constructor:Hn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Bo():+n)+(t==null?0:+t),!this._next&&Qt!==this&&(Qt?Qt._next=this:Vn=this,Qt=this),this._call=e,this._time=n,Eo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Eo())}};function Nr(e,t,n){var o=new Hn;return o.restart(e,t,n),o}function hu(){Bo(),++Ft;for(var e=Vn,t;e;)(t=Mt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ft}function wi(){Mt=(Bn=un.now())+Gn,Ft=Jt=0;try{hu()}finally{Ft=0,pu(),Mt=0}}function vu(){var e=un.now(),t=e-Bn;t>Sr&&(Gn-=t,Bn=e)}function pu(){for(var e,t=Vn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Vn=n);Qt=e,Eo(o)}function Eo(e){if(!Ft){Jt&&(Jt=clearTimeout(Jt));var t=e-Mt;t>24?(e<1/0&&(Jt=setTimeout(wi,e-un.now()-Gn)),qt&&(qt=clearInterval(qt))):(qt||(Bn=un.now(),qt=setInterval(vu,Sr)),Ft=1,Er(wi))}}function _i(e,t,n){var o=new Hn;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var gu=Yn("start","end","cancel","interrupt"),mu=[],Cr=0,bi=1,No=2,Mn=3,xi=4,Co=5,Pn=6;function Un(e,t,n,o,i,r){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;yu(e,n,{name:t,index:o,group:i,on:gu,tween:mu,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Cr})}function Ho(e,t){var n=je(e,t);if(n.state>Cr)throw new Error("too late; already scheduled");return n}function ot(e,t){var n=je(e,t);if(n.state>Mn)throw new Error("too late; already running");return n}function je(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function yu(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=Nr(r,0,n.time);function r(u){n.state=bi,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,h,p,y;if(n.state!==bi)return a();for(c in o)if(y=o[c],y.name===n.name){if(y.state===Mn)return _i(s);y.state===xi?(y.state=Pn,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete o[c]):+c<t&&(y.state=Pn,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete o[c])}if(_i(function(){n.state===Mn&&(n.state=xi,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=No,n.on.call("start",e,e.__data__,n.index,n.group),n.state===No){for(n.state=Mn,i=new Array(p=n.tween.length),c=0,h=-1;c<p;++c)(y=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=y);i.length=h+1}}function l(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=Co,1),h=-1,p=i.length;++h<p;)i[h].call(e,c);n.state===Co&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=Pn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Dn(e,t){var n=e.__transition,o,i,r=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){r=!1;continue}i=o.state>No&&o.state<Co,o.state=Pn,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}r&&delete e.__transition}}function wu(e){return this.each(function(){Dn(this,e)})}function _u(e,t){var n,o;return function(){var i=ot(this,e),r=i.tween;if(r!==n){o=n=r;for(var s=0,l=o.length;s<l;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}i.tween=o}}function bu(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var r=ot(this,e),s=r.tween;if(s!==o){i=(o=s).slice();for(var l={name:t,value:n},a=0,u=i.length;a<u;++a)if(i[a].name===t){i[a]=l;break}a===u&&i.push(l)}r.tween=i}}function xu(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=je(this.node(),n).tween,i=0,r=o.length,s;i<r;++i)if((s=o[i]).name===e)return s.value;return null}return this.each((t==null?_u:bu)(n,e,t))}function Ro(e,t,n){var o=e._id;return e.each(function(){var i=ot(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return je(i,o).value[t]}}function $r(e,t){var n;return(typeof t=="number"?et:t instanceof It?An:(n=It(t))?(t=n,An):br)(e,t)}function ku(e){return function(){this.removeAttribute(e)}}function Su(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Eu(e,t,n){var o,i=n+"",r;return function(){var s=this.getAttribute(e);return s===i?null:s===o?r:r=t(o=s,n)}}function Nu(e,t,n){var o,i=n+"",r;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===o?r:r=t(o=s,n)}}function Cu(e,t,n){var o,i,r;return function(){var s,l=n(this),a;return l==null?void this.removeAttribute(e):(s=this.getAttribute(e),a=l+"",s===a?null:s===o&&a===i?r:(i=a,r=t(o=s,l)))}}function $u(e,t,n){var o,i,r;return function(){var s,l=n(this),a;return l==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),a=l+"",s===a?null:s===o&&a===i?r:(i=a,r=t(o=s,l)))}}function Iu(e,t){var n=Xn(e),o=n==="transform"?au:$r;return this.attrTween(e,typeof t=="function"?(n.local?$u:Cu)(n,o,Ro(this,"attr."+e,t)):t==null?(n.local?Su:ku)(n):(n.local?Nu:Eu)(n,o,t))}function Mu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Pu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Du(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&Pu(e,r)),n}return i._value=t,i}function Tu(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&Mu(e,r)),n}return i._value=t,i}function zu(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Xn(e);return this.tween(n,(o.local?Du:Tu)(o,t))}function Ou(e,t){return function(){Ho(this,e).delay=+t.apply(this,arguments)}}function Au(e,t){return t=+t,function(){Ho(this,e).delay=t}}function Vu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ou:Au)(t,e)):je(this.node(),t).delay}function Bu(e,t){return function(){ot(this,e).duration=+t.apply(this,arguments)}}function Hu(e,t){return t=+t,function(){ot(this,e).duration=t}}function Ru(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Bu:Hu)(t,e)):je(this.node(),t).duration}function Wu(e,t){if(typeof t!="function")throw new Error;return function(){ot(this,e).ease=t}}function Lu(e){var t=this._id;return arguments.length?this.each(Wu(t,e)):je(this.node(),t).ease}function Fu(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ot(this,e).ease=n}}function Yu(e){if(typeof e!="function")throw new Error;return this.each(Fu(this._id,e))}function Xu(e){typeof e!="function"&&(e=sr(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],s=r.length,l=o[i]=[],a,u=0;u<s;++u)(a=r[u])&&e.call(a,a.__data__,u,r)&&l.push(a);return new ut(o,this._parents,this._name,this._id)}function Gu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),s=new Array(o),l=0;l<r;++l)for(var a=t[l],u=n[l],c=a.length,h=s[l]=new Array(c),p,y=0;y<c;++y)(p=a[y]||u[y])&&(h[y]=p);for(;l<o;++l)s[l]=t[l];return new ut(s,this._parents,this._name,this._id)}function Uu(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Zu(e,t,n){var o,i,r=Uu(t)?Ho:ot;return function(){var s=r(this,e),l=s.on;l!==o&&(i=(o=l).copy()).on(t,n),s.on=i}}function Ku(e,t){var n=this._id;return arguments.length<2?je(this.node(),n).on.on(e):this.each(Zu(n,e,t))}function qu(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function ju(){return this.on("end.remove",qu(this._id))}function Ju(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zo(e));for(var o=this._groups,i=o.length,r=new Array(i),s=0;s<i;++s)for(var l=o[s],a=l.length,u=r[s]=new Array(a),c,h,p=0;p<a;++p)(c=l[p])&&(h=e.call(c,c.__data__,p,l))&&("__data__"in c&&(h.__data__=c.__data__),u[p]=h,Un(u[p],t,n,p,u,je(c,n)));return new ut(r,this._parents,t,n)}function Qu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=rr(e));for(var o=this._groups,i=o.length,r=[],s=[],l=0;l<i;++l)for(var a=o[l],u=a.length,c,h=0;h<u;++h)if(c=a[h]){for(var p=e.call(c,c.__data__,h,a),y,C=je(c,n),S=0,N=p.length;S<N;++S)(y=p[S])&&Un(y,t,n,S,p,C);r.push(p),s.push(c)}return new ut(r,s,t,n)}var ec=hn.prototype.constructor;function tc(){return new ec(this._groups,this._parents)}function nc(e,t){var n,o,i;return function(){var r=Lt(this,e),s=(this.style.removeProperty(e),Lt(this,e));return r===s?null:r===n&&s===o?i:i=t(n=r,o=s)}}function Ir(e){return function(){this.style.removeProperty(e)}}function oc(e,t,n){var o,i=n+"",r;return function(){var s=Lt(this,e);return s===i?null:s===o?r:r=t(o=s,n)}}function ic(e,t,n){var o,i,r;return function(){var s=Lt(this,e),l=n(this),a=l+"";return l==null&&(a=l=(this.style.removeProperty(e),Lt(this,e))),s===a?null:s===o&&a===i?r:(i=a,r=t(o=s,l))}}function rc(e,t){var n,o,i,r="style."+t,s="end."+r,l;return function(){var a=ot(this,e),u=a.on,c=a.value[r]==null?l||(l=Ir(t)):void 0;(u!==n||i!==c)&&(o=(n=u).copy()).on(s,i=c),a.on=o}}function sc(e,t,n){var o=(e+="")=="transform"?lu:$r;return t==null?this.styleTween(e,nc(e,o)).on("end.style."+e,Ir(e)):typeof t=="function"?this.styleTween(e,ic(e,o,Ro(this,"style."+e,t))).each(rc(this._id,e)):this.styleTween(e,oc(e,o,t),n).on("end.style."+e,null)}function lc(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function ac(e,t,n){var o,i;function r(){var s=t.apply(this,arguments);return s!==i&&(o=(i=s)&&lc(e,s,n)),o}return r._value=t,r}function uc(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,ac(e,t,n??""))}function cc(e){return function(){this.textContent=e}}function dc(e){return function(){var t=e(this);this.textContent=t??""}}function fc(e){return this.tween("text",typeof e=="function"?dc(Ro(this,"text",e)):cc(e==null?"":e+""))}function hc(e){return function(t){this.textContent=e.call(this,t)}}function vc(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&hc(i)),t}return o._value=e,o}function pc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,vc(e))}function gc(){for(var e=this._name,t=this._id,n=Mr(),o=this._groups,i=o.length,r=0;r<i;++r)for(var s=o[r],l=s.length,a,u=0;u<l;++u)if(a=s[u]){var c=je(a,t);Un(a,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ut(o,this._parents,e,n)}function mc(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(r,s){var l={value:s},a={value:function(){--i===0&&r()}};n.each(function(){var u=ot(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(a)),u.on=t}),i===0&&r()})}var yc=0;function ut(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Mr(){return++yc}var rt=hn.prototype;ut.prototype={constructor:ut,select:Ju,selectAll:Qu,selectChild:rt.selectChild,selectChildren:rt.selectChildren,filter:Xu,merge:Gu,selection:tc,transition:gc,call:rt.call,nodes:rt.nodes,node:rt.node,size:rt.size,empty:rt.empty,each:rt.each,on:Ku,attr:Iu,attrTween:zu,style:sc,styleTween:uc,text:fc,textTween:pc,remove:ju,tween:xu,delay:Vu,duration:Ru,ease:Lu,easeVarying:Yu,end:mc,[Symbol.iterator]:rt[Symbol.iterator]};function wc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _c={time:null,delay:0,duration:250,ease:wc};function bc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function xc(e){var t,n;e instanceof ut?(t=e._id,e=e._name):(t=Mr(),(n=_c).time=Bo(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var s=o[r],l=s.length,a,u=0;u<l;++u)(a=s[u])&&Un(a,e,t,u,s,n||bc(a,t));return new ut(o,this._parents,e,t)}hn.prototype.interrupt=wu;hn.prototype.transition=xc;const _n=e=>()=>e;function kc(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function lt(e,t,n){this.k=e,this.x=t,this.y=n}lt.prototype={constructor:lt,scale:function(e){return e===1?this:new lt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new lt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Yt=new lt(1,0,0);lt.prototype;function uo(e){e.stopImmediatePropagation()}function jt(e){e.preventDefault(),e.stopImmediatePropagation()}function Sc(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Ec(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ki(){return this.__zoom||Yt}function Nc(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Cc(){return navigator.maxTouchPoints||"ontouchstart"in this}function $c(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s))}function Ic(){var e=Sc,t=Ec,n=$c,o=Nc,i=Cc,r=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,a=In,u=Yn("start","zoom","end"),c,h,p,y=500,C=150,S=0,N=10;function E(x){x.property("__zoom",ki).on("wheel.zoom",H,{passive:!1}).on("mousedown.zoom",ee).on("dblclick.zoom",z).filter(i).on("touchstart.zoom",W).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",re).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(x,M,$,R){var F=x.selection?x.selection():x;F.property("__zoom",ki),x!==F?D(x,M,$,R):F.interrupt().each(function(){B(this,arguments).event(R).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},E.scaleBy=function(x,M,$,R){E.scaleTo(x,function(){var F=this.__zoom.k,Z=typeof M=="function"?M.apply(this,arguments):M;return F*Z},$,R)},E.scaleTo=function(x,M,$,R){E.transform(x,function(){var F=t.apply(this,arguments),Z=this.__zoom,G=$==null?_(F):typeof $=="function"?$.apply(this,arguments):$,te=Z.invert(G),ae=typeof M=="function"?M.apply(this,arguments):M;return n(f(I(Z,ae),G,te),F,s)},$,R)},E.translateBy=function(x,M,$,R){E.transform(x,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof $=="function"?$.apply(this,arguments):$),t.apply(this,arguments),s)},null,R)},E.translateTo=function(x,M,$,R,F){E.transform(x,function(){var Z=t.apply(this,arguments),G=this.__zoom,te=R==null?_(Z):typeof R=="function"?R.apply(this,arguments):R;return n(Yt.translate(te[0],te[1]).scale(G.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof $=="function"?-$.apply(this,arguments):-$),Z,s)},R,F)};function I(x,M){return M=Math.max(r[0],Math.min(r[1],M)),M===x.k?x:new lt(M,x.x,x.y)}function f(x,M,$){var R=M[0]-$[0]*x.k,F=M[1]-$[1]*x.k;return R===x.x&&F===x.y?x:new lt(x.k,R,F)}function _(x){return[(+x[0][0]+ +x[1][0])/2,(+x[0][1]+ +x[1][1])/2]}function D(x,M,$,R){x.on("start.zoom",function(){B(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){B(this,arguments).event(R).end()}).tween("zoom",function(){var F=this,Z=arguments,G=B(F,Z).event(R),te=t.apply(F,Z),ae=$==null?_(te):typeof $=="function"?$.apply(F,Z):$,fe=Math.max(te[1][0]-te[0][0],te[1][1]-te[0][1]),ge=F.__zoom,Q=typeof M=="function"?M.apply(F,Z):M,ne=a(ge.invert(ae).concat(fe/ge.k),Q.invert(ae).concat(fe/Q.k));return function(se){if(se===1)se=Q;else{var we=ne(se),ve=fe/we[2];se=new lt(ve,ae[0]-we[0]*ve,ae[1]-we[1]*ve)}G.zoom(null,se)}})}function B(x,M,$){return!$&&x.__zooming||new A(x,M)}function A(x,M){this.that=x,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(x,M),this.taps=0}A.prototype={event:function(x){return x&&(this.sourceEvent=x),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(x,M){return this.mouse&&x!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&x!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&x!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(x){var M=Ke(this.that).datum();u.call(x,this.that,new kc(x,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:u}),M)}};function H(x,...M){if(!e.apply(this,arguments))return;var $=B(this,M).event(x),R=this.__zoom,F=Math.max(r[0],Math.min(r[1],R.k*Math.pow(2,o.apply(this,arguments)))),Z=Qe(x);if($.wheel)($.mouse[0][0]!==Z[0]||$.mouse[0][1]!==Z[1])&&($.mouse[1]=R.invert($.mouse[0]=Z)),clearTimeout($.wheel);else{if(R.k===F)return;$.mouse=[Z,R.invert(Z)],Dn(this),$.start()}jt(x),$.wheel=setTimeout(G,C),$.zoom("mouse",n(f(I(R,F),$.mouse[0],$.mouse[1]),$.extent,s));function G(){$.wheel=null,$.end()}}function ee(x,...M){if(p||!e.apply(this,arguments))return;var $=x.currentTarget,R=B(this,M,!0).event(x),F=Ke(x.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",fe,!0),Z=Qe(x,$),G=x.clientX,te=x.clientY;gr(x.view),uo(x),R.mouse=[Z,this.__zoom.invert(Z)],Dn(this),R.start();function ae(ge){if(jt(ge),!R.moved){var Q=ge.clientX-G,ne=ge.clientY-te;R.moved=Q*Q+ne*ne>S}R.event(ge).zoom("mouse",n(f(R.that.__zoom,R.mouse[0]=Qe(ge,$),R.mouse[1]),R.extent,s))}function fe(ge){F.on("mousemove.zoom mouseup.zoom",null),mr(ge.view,R.moved),jt(ge),R.event(ge).end()}}function z(x,...M){if(e.apply(this,arguments)){var $=this.__zoom,R=Qe(x.changedTouches?x.changedTouches[0]:x,this),F=$.invert(R),Z=$.k*(x.shiftKey?.5:2),G=n(f(I($,Z),R,F),t.apply(this,M),s);jt(x),l>0?Ke(this).transition().duration(l).call(D,G,R,x):Ke(this).call(E.transform,G,R,x)}}function W(x,...M){if(e.apply(this,arguments)){var $=x.touches,R=$.length,F=B(this,M,x.changedTouches.length===R).event(x),Z,G,te,ae;for(uo(x),G=0;G<R;++G)te=$[G],ae=Qe(te,this),ae=[ae,this.__zoom.invert(ae),te.identifier],F.touch0?!F.touch1&&F.touch0[2]!==ae[2]&&(F.touch1=ae,F.taps=0):(F.touch0=ae,Z=!0,F.taps=1+!!c);c&&(c=clearTimeout(c)),Z&&(F.taps<2&&(h=ae[0],c=setTimeout(function(){c=null},y)),Dn(this),F.start())}}function k(x,...M){if(this.__zooming){var $=B(this,M).event(x),R=x.changedTouches,F=R.length,Z,G,te,ae;for(jt(x),Z=0;Z<F;++Z)G=R[Z],te=Qe(G,this),$.touch0&&$.touch0[2]===G.identifier?$.touch0[0]=te:$.touch1&&$.touch1[2]===G.identifier&&($.touch1[0]=te);if(G=$.that.__zoom,$.touch1){var fe=$.touch0[0],ge=$.touch0[1],Q=$.touch1[0],ne=$.touch1[1],se=(se=Q[0]-fe[0])*se+(se=Q[1]-fe[1])*se,we=(we=ne[0]-ge[0])*we+(we=ne[1]-ge[1])*we;G=I(G,Math.sqrt(se/we)),te=[(fe[0]+Q[0])/2,(fe[1]+Q[1])/2],ae=[(ge[0]+ne[0])/2,(ge[1]+ne[1])/2]}else if($.touch0)te=$.touch0[0],ae=$.touch0[1];else return;$.zoom("touch",n(f(G,te,ae),$.extent,s))}}function re(x,...M){if(this.__zooming){var $=B(this,M).event(x),R=x.changedTouches,F=R.length,Z,G;for(uo(x),p&&clearTimeout(p),p=setTimeout(function(){p=null},y),Z=0;Z<F;++Z)G=R[Z],$.touch0&&$.touch0[2]===G.identifier?delete $.touch0:$.touch1&&$.touch1[2]===G.identifier&&delete $.touch1;if($.touch1&&!$.touch0&&($.touch0=$.touch1,delete $.touch1),$.touch0)$.touch0[1]=this.__zoom.invert($.touch0[0]);else if($.end(),$.taps===2&&(G=Qe(G,this),Math.hypot(h[0]-G[0],h[1]-G[1])<N)){var te=Ke(this).on("dblclick.zoom");te&&te.apply(this,arguments)}}}return E.wheelDelta=function(x){return arguments.length?(o=typeof x=="function"?x:_n(+x),E):o},E.filter=function(x){return arguments.length?(e=typeof x=="function"?x:_n(!!x),E):e},E.touchable=function(x){return arguments.length?(i=typeof x=="function"?x:_n(!!x),E):i},E.extent=function(x){return arguments.length?(t=typeof x=="function"?x:_n([[+x[0][0],+x[0][1]],[+x[1][0],+x[1][1]]]),E):t},E.scaleExtent=function(x){return arguments.length?(r[0]=+x[0],r[1]=+x[1],E):[r[0],r[1]]},E.translateExtent=function(x){return arguments.length?(s[0][0]=+x[0][0],s[1][0]=+x[1][0],s[0][1]=+x[0][1],s[1][1]=+x[1][1],E):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},E.constrain=function(x){return arguments.length?(n=x,E):n},E.duration=function(x){return arguments.length?(l=+x,E):l},E.interpolate=function(x){return arguments.length?(a=x,E):a},E.on=function(){var x=u.on.apply(u,arguments);return x===u?E:x},E.clickDistance=function(x){return arguments.length?(S=(x=+x)*x,E):Math.sqrt(S)},E.tapDistance=function(x){return arguments.length?(N=+x,E):N},E}var ie=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(ie||{}),Wo=(e=>(e.Partial="partial",e.Full="full",e))(Wo||{}),St=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(St||{}),gt=(e=>(e.Strict="strict",e.Loose="loose",e))(gt||{}),$o=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))($o||{}),nn=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(nn||{}),Pr=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(Pr||{});const Mc=["INPUT","SELECT","TEXTAREA"],Pc=typeof document<"u"?document:null;function Io(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,i=typeof o?.hasAttribute=="function"?o.hasAttribute("contenteditable"):!1,r=typeof o?.closest=="function"?o.closest(".nokey"):null;return Mc.includes(o?.nodeName)||i||!!r}function Dc(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function Si(e,t,n,o){const i=t.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(s=>s.trim().toLowerCase());if(i.length===1)return e.toLowerCase()===t.toLowerCase();o||n.add(e.toLowerCase());const r=i.every((s,l)=>n.has(s)&&Array.from(n.values())[l]===i[l]);return o&&n.delete(e.toLowerCase()),r}function Tc(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=zc(n.code,e);return Array.isArray(e)?e.some(i=>Si(n[o],i,t,n.type==="keyup")):Si(n[o],e,t,n.type==="keyup")}}function zc(e,t){return t.includes(e)?"code":"key"}function on(e,t){const n=le(()=>be(t?.target)??Pc),o=pt(be(e)===!0);let i=!1;const r=new Set;let s=a(be(e));Ee(()=>be(e),(u,c)=>{typeof c=="boolean"&&typeof u!="boolean"&&l(),s=a(u)},{immediate:!0}),or(["blur","contextmenu"],l),si((...u)=>s(...u),u=>{var c,h;const p=be(t?.actInsideInputWithModifier)??!0,y=be(t?.preventDefault)??!1;if(i=Dc(u),(!i||i&&!p)&&Io(u))return;const S=((h=(c=u.composedPath)==null?void 0:c.call(u))==null?void 0:h[0])||u.target,N=S?.nodeName==="BUTTON"||S?.nodeName==="A";!y&&(i||!N)&&u.preventDefault(),o.value=!0},{eventName:"keydown",target:n}),si((...u)=>s(...u),u=>{const c=be(t?.actInsideInputWithModifier)??!0;if(o.value){if((!i||i&&!c)&&Io(u))return;i=!1,o.value=!1}},{eventName:"keyup",target:n});function l(){i=!1,r.clear(),o.value=be(e)===!0}function a(u){return u===null?(l(),()=>!1):typeof u=="boolean"?(l(),o.value=u,()=>!1):Array.isArray(u)||typeof u=="string"?Tc(u,r):u}return o}const Dr="vue-flow__node-desc",Tr="vue-flow__edge-desc",Oc="vue-flow__aria-live",zr=["Enter"," ","Escape"],Rt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function Rn(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function Wn(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Zn(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Pt(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Or(e,t){return{x:Pt(e.x,t[0][0],t[1][0]),y:Pt(e.y,t[0][1],t[1][1])}}function Ei(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function mt(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function $t(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!mt(e)}function en(e){return $t(e)&&"computedPosition"in e}function bn(e){return!Number.isNaN(e)&&Number.isFinite(e)}function Ac(e){return bn(e.width)&&bn(e.height)&&bn(e.x)&&bn(e.y)}function Vc(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:Cn({width:0,height:0}),computedPosition:Cn({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Ve(e.data)?e.data:{},events:Cn(Ve(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function Ar(e,t,n){var o,i;const r={id:e.id.toString(),type:e.type??t?.type??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(i=e.targetHandle)==null?void 0:i.toString(),updatable:e.updatable??n?.updatable,selectable:e.selectable??n?.selectable,focusable:e.focusable??n?.focusable,data:Ve(e.data)?e.data:{},events:Cn(Ve(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??n?.interactionWidth,...n??{}};return Object.assign(t??r,e,{id:e.id.toString()})}function Vr(e,t,n,o){const i=typeof e=="string"?e:e.id,r=new Set,s=o==="source"?"target":"source";for(const l of n)l[s]===i&&r.add(l[o]);return t.filter(l=>r.has(l.id))}function Bc(...e){if(e.length===3){const[r,s,l]=e;return Vr(r,s,l,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(r=>mt(r)&&r.source===o).map(r=>n.find(s=>$t(s)&&s.id===r.target))}function Hc(...e){if(e.length===3){const[r,s,l]=e;return Vr(r,s,l,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(r=>mt(r)&&r.target===o).map(r=>n.find(s=>$t(s)&&s.id===r.source))}function Br({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function Rc(e,t){return t.some(n=>mt(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function cn({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function dn({x:e,y:t},{x:n,y:o,zoom:i},r=!1,s=[1,1]){const l={x:(e-n)/i,y:(t-o)/i};return r?Kn(l,s):l}function Wc(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Hr({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function Lc({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function Rr(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=Wc(t,Hr({...o.computedPosition,...o.dimensions}))}return Lc(t)}function Wr(e,t,n={x:0,y:0,zoom:1},o=!1,i=!1){const r={...dn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},s=[];for(const l of e){const{dimensions:a,selectable:u=!0,hidden:c=!1}=l,h=a.width??l.width??null,p=a.height??l.height??null;if(i&&!u||c)continue;const y=Wn(r,Rn(l)),C=h===null||p===null,S=o&&y>0,N=(h??0)*(p??0);(C||S||y>=N||l.dragging)&&s.push(l)}return s}function Lr(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function zt(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return pn(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Fc(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=zt(e,n),i=zt(e,t);return{top:o,right:i,bottom:o,left:i,x:i*2,y:o*2}}if(typeof e=="object"){const o=zt(e.top??e.y??0,n),i=zt(e.bottom??e.y??0,n),r=zt(e.left??e.x??0,t),s=zt(e.right??e.x??0,t);return{top:o,right:s,bottom:i,left:r,x:r+s,y:o+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Yc(e,t,n,o,i,r){const{x:s,y:l}=cn(e,{x:t,y:n,zoom:o}),{x:a,y:u}=cn({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:o}),c=i-a,h=r-u;return{left:Math.floor(s),top:Math.floor(l),right:Math.floor(c),bottom:Math.floor(h)}}function Ni(e,t,n,o,i,r=.1){const s=Fc(r,t,n),l=(t-s.x)/e.width,a=(n-s.y)/e.height,u=Math.min(l,a),c=Pt(u,o,i),h=e.x+e.width/2,p=e.y+e.height/2,y=t/2-h*c,C=n/2-p*c,S=Yc(e,y,C,c,t,n),N={left:Math.min(S.left-s.left,0),top:Math.min(S.top-s.top,0),right:Math.min(S.right-s.right,0),bottom:Math.min(S.bottom-s.bottom,0)};return{x:y-N.left+N.right,y:C-N.top+N.bottom,zoom:c}}function Xc(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function Fr(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:Fr(n,t):!1}function fn(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function Ci(e){const t=e.ctrlKey&&Ln()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t}function $i(e,t,n){return e<t?Pt(Math.abs(e-t),1,t)/t:e>n?-Pt(Math.abs(e-n),1,t)/t:0}function Yr(e,t,n=15,o=40){const i=$i(e.x,o,t.width-o)*n,r=$i(e.y,o,t.height-o)*n;return[i,r]}function co(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if(typeof t.style=="function"?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(typeof i.width=="string"){const r=Number(i.width.replace("px",""));i.width=`${r+n}px`}else i.width+=n;if(o>0)if(typeof i.height=="string"){const r=Number(i.height.replace("px",""));i.height=`${r+o}px`}else i.height+=o;if(e.position.x<0){const r=Math.abs(e.position.x);if(t.position.x=t.position.x-r,typeof i.width=="string"){const s=Number(i.width.replace("px",""));i.width=`${s+r}px`}else i.width+=r;e.position.x=0}if(e.position.y<0){const r=Math.abs(e.position.y);if(t.position.y=t.position.y-r,typeof i.height=="string"){const s=Number(i.height.replace("px",""));i.height=`${s+r}px`}else i.height+=r;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),typeof t.style=="function"?t.style=r=>{const s=t.style;return{...s(r),...i}}:t.style={...t.style,...i}}}}function Ii(e,t){var n,o;const i=e.filter(s=>s.type==="add"||s.type==="remove");for(const s of i)if(s.type==="add")t.findIndex(a=>a.id===s.item.id)===-1&&t.push(s.item);else if(s.type==="remove"){const l=t.findIndex(a=>a.id===s.id);l!==-1&&t.splice(l,1)}const r=t.map(s=>s.id);for(const s of t)for(const l of e)if(l.id===s.id)switch(l.type){case"select":s.selected=l.selected;break;case"position":if(en(s)&&(typeof l.position<"u"&&(s.position=l.position),typeof l.dragging<"u"&&(s.dragging=l.dragging),s.expandParent&&s.parentNode)){const a=t[r.indexOf(s.parentNode)];a&&en(a)&&co(s,a)}break;case"dimensions":if(en(s)&&(typeof l.dimensions<"u"&&(s.dimensions=l.dimensions),typeof l.updateStyle<"u"&&l.updateStyle&&(s.style={...s.style||{},width:`${(n=l.dimensions)==null?void 0:n.width}px`,height:`${(o=l.dimensions)==null?void 0:o.height}px`}),typeof l.resizing<"u"&&(s.resizing=l.resizing),s.expandParent&&s.parentNode)){const a=t[r.indexOf(s.parentNode)];a&&en(a)&&(!!a.dimensions.width&&!!a.dimensions.height?co(s,a):at(()=>{co(s,a)}))}break}return t}function ht(e,t){return{id:e,type:"select",selected:t}}function Mi(e){return{item:e,type:"add"}}function Pi(e){return{id:e,type:"remove"}}function Di(e,t,n,o,i){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:i||null,type:"remove"}}function vt(e,t=new Set,n=!1){const o=[];for(const[i,r]of e){const s=t.has(i);!(r.selected===void 0&&!s)&&r.selected!==s&&(n&&(r.selected=s),o.push(ht(r.id,s)))}return o}const Ti=()=>{};function K(e){const t=new Set;let n=Ti,o=()=>!1;const i=()=>t.size>0||o(),r=p=>{n=p},s=()=>{n=Ti},l=p=>{o=p},a=()=>{o=()=>!1},u=p=>{t.delete(p)};return{on:p=>{t.add(p);const y=()=>u(p);return rn(y),{off:y}},off:u,trigger:p=>{const y=[n];return i()?y.push(...t):e&&y.push(e),Promise.allSettled(y.map(C=>C(p)))},hasListeners:i,listeners:t,setEmitter:r,removeEmitter:s,setHasEmitListeners:l,removeHasEmitListeners:a}}function zi(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function Gc(e,t,n,o){var i,r;const s=new Map;for(const[l,a]of e)(a.selected||a.id===o)&&(!a.parentNode||!Fr(a,e))&&(a.draggable||t&&typeof a.draggable>"u")&&e.get(l)&&s.set(l,{id:a.id,position:a.position||{x:0,y:0},distance:{x:n.x-((i=a.computedPosition)==null?void 0:i.x)||0,y:n.y-((r=a.computedPosition)==null?void 0:r.y)||0},from:{x:a.computedPosition.x,y:a.computedPosition.y},extent:a.extent,parentNode:a.parentNode,dimensions:{...a.dimensions},expandParent:a.expandParent});return Array.from(s.values())}function fo({id:e,dragItems:t,findNode:n}){const o=[];for(const i of t){const r=n(i.id);r&&o.push(r)}return[e?o.find(i=>i.id===e):o[0],o]}function Xr(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function Uc(e,t,n){const[o,i,r,s]=typeof e!="string"?Xr(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+s,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-r]]:!1}function Zc(e,t,n,o){let i=e.extent||n;if((i==="parent"||!Array.isArray(i)&&i?.range==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const r=Uc(i,e,o);r&&(i=r)}else t(new He(Be.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(i)){const r=o?.computedPosition.x||0,s=o?.computedPosition.y||0;i=[[i[0][0]+r,i[0][1]+s],[i[1][0]+r,i[1][1]+s]]}else if(i!=="parent"&&i?.range&&Array.isArray(i.range)){const[r,s,l,a]=Xr(i.padding),u=o?.computedPosition.x||0,c=o?.computedPosition.y||0;i=[[i.range[0][0]+u+a,i.range[0][1]+c+r],[i.range[1][0]+u-s,i.range[1][1]+c-l]]}return i==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:i}function Kc({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function Lo(e,t,n,o,i){const r=Kc(e.dimensions,Zc(e,n,o,i)),s=Or(t,r);return{position:{x:s.x-(i?.computedPosition.x||0),y:s.y-(i?.computedPosition.y||0)},computedPosition:s}}function Xt(e,t,n=ie.Left,o=!1){const i=(t?.x??0)+e.computedPosition.x,r=(t?.y??0)+e.computedPosition.y,{width:s,height:l}=t??Qc(e);if(o)return{x:i+s/2,y:r+l/2};switch(t?.position??n){case ie.Top:return{x:i+s/2,y:r};case ie.Right:return{x:i+s,y:r+l/2};case ie.Bottom:return{x:i+s/2,y:r+l};case ie.Left:return{x:i,y:r+l/2}}}function Oi(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function qc({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:r,width:s,height:l,viewport:a}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+r)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Hr({x:(0-a.x)/a.zoom,y:(0-a.y)/a.zoom,width:s/a.zoom,height:l/a.zoom}),h=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),p=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(h*p)>0}function jc(e,t,n=!1){const o=typeof e.zIndex=="number";let i=o?e.zIndex:0;const r=t(e.source),s=t(e.target);return!r||!s?0:(n&&(i=o?e.zIndex:Math.max(r.computedPosition.z||0,s.computedPosition.z||0)),i)}var Be=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Be||{});const Ai={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class He extends Error{constructor(t,...n){var o;super((o=Ai[t])==null?void 0:o.call(Ai,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function Fo(e){return"clientX"in e}function Jc(e){return"sourceEvent"in e}function tt(e,t){const n=Fo(e);let o,i;return n?(o=e.clientX,i=e.clientY):"touches"in e&&e.touches.length>0?(o=e.touches[0].clientX,i=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(o=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY):(o=0,i=0),{x:o-(t?.left??0),y:i-(t?.top??0)}}const Ln=()=>{var e;return typeof navigator<"u"&&((e=navigator?.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Qc(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function Kn(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const ed=()=>!0;function ho(e){e?.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function td(e,t,n){const o=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const r of t.values())Wn(i,Rn(r))>0&&o.push(r);return o}const nd=250;function od(e,t,n,o){var i,r;let s=[],l=Number.POSITIVE_INFINITY;const a=td(e,n,t+nd);for(const u of a){const c=[...((i=u.handleBounds)==null?void 0:i.source)??[],...((r=u.handleBounds)==null?void 0:r.target)??[]];for(const h of c){if(o.nodeId===h.nodeId&&o.type===h.type&&o.id===h.id)continue;const{x:p,y}=Xt(u,h,h.position,!0),C=Math.sqrt((p-e.x)**2+(y-e.y)**2);C>t||(C<l?(s=[{...h,x:p,y}],l=C):C===l&&s.push({...h,x:p,y}))}}if(!s.length)return null;if(s.length>1){const u=o.type==="source"?"target":"source";return s.find(c=>c.type===u)??s[0]}return s[0]}function Vi(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:i,fromType:r,doc:s,lib:l,flowId:a,isValidConnection:u=ed},c,h,p,y){const C=r==="target",S=t?s.querySelector(`.${l}-flow__handle[data-id="${a}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:N,y:E}=tt(e),I=s.elementFromPoint(N,E),f=I?.classList.contains(`${l}-flow__handle`)?I:S,_={handleDomNode:f,isValid:!1,connection:null,toHandle:null};if(f){const D=Gr(void 0,f),B=f.getAttribute("data-nodeid"),A=f.getAttribute("data-handleid"),H=f.classList.contains("connectable"),ee=f.classList.contains("connectableend");if(!B||!D)return _;const z={source:C?B:o,sourceHandle:C?A:i,target:C?o:B,targetHandle:C?i:A};_.connection=z;const k=H&&ee&&(n===gt.Strict?C&&D==="source"||!C&&D==="target":B!==o||A!==i);_.isValid=k&&u(z,{nodes:h,edges:c,sourceNode:p(z.source),targetNode:p(z.target)}),_.toHandle=Ur(B,D,A,y,n,!0)}return _}function Gr(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function id(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function rd(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function Ur(e,t,n,o,i,r=!1){var s,l,a;const u=o.get(e);if(!u)return null;const c=i===gt.Strict?(s=u.handleBounds)==null?void 0:s[t]:[...((l=u.handleBounds)==null?void 0:l.source)??[],...((a=u.handleBounds)==null?void 0:a.target)??[]],h=(n?c?.find(p=>p.id===n):c?.[0])??null;return h&&r?{...h,...Xt(u,h,h.position,!0)}:h}const Mo={[ie.Left]:ie.Right,[ie.Right]:ie.Left,[ie.Top]:ie.Bottom,[ie.Bottom]:ie.Top},sd=["production","prod"];function pn(e,...t){Zr()&&console.warn(`[Vue Flow]: ${e}`,...t)}function Zr(){return!sd.includes("production")}function Bi(e,t,n,o,i){const r=t.querySelectorAll(`.vue-flow__handle.${e}`);return r?.length?Array.from(r).map(s=>{const l=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:i,position:s.getAttribute("data-handlepos"),x:(l.left-n.left)/o,y:(l.top-n.top)/o,...Zn(s)}}):null}function Po(e,t,n,o,i,r=!1,s){i.value=!1,e.selected?(r||e.selected&&t)&&(o([e]),at(()=>{s.blur()})):n([e])}function Ve(e){return typeof d(e)<"u"}function ld(e,t,n,o){if(!e||!e.source||!e.target)return n(new He(Be.EDGE_INVALID,e?.id??"[ID UNKNOWN]")),!1;let i;return mt(e)?i=e:i={...e,id:Br(e)},i=Ar(i,void 0,o),Rc(i,t)?!1:i}function ad(e,t,n,o,i){if(!t.source||!t.target)return i(new He(Be.EDGE_INVALID,e.id)),!1;if(!n)return i(new He(Be.EDGE_NOT_FOUND,e.id)),!1;const{id:r,...s}=e;return{...s,id:o?Br(t):r,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function Hi(e,t,n){const o={},i=[];for(let r=0;r<e.length;++r){const s=e[r];if(!$t(s)){n(new He(Be.NODE_INVALID,s?.id)||`[ID UNKNOWN|INDEX ${r}]`);continue}const l=Vc(s,t(s.id),s.parentNode);s.parentNode&&(o[s.parentNode]=!0),i[r]=l}for(const r of i){const s=t(r.parentNode)||i.find(l=>l.id===r.parentNode);r.parentNode&&!s&&n(new He(Be.NODE_MISSING_PARENT,r.id,r.parentNode)),(r.parentNode||o[r.id])&&(o[r.id]&&(r.isParent=!0),s&&(s.isParent=!0))}return i}function Ri(e,t,n,o,i,r){let s=i;const l=o.get(s)||new Map;o.set(s,l.set(n,t)),s=`${i}-${e}`;const a=o.get(s)||new Map;if(o.set(s,a.set(n,t)),r){s=`${i}-${e}-${r}`;const u=o.get(s)||new Map;o.set(s,u.set(n,t))}}function vo(e,t,n){e.clear();for(const o of n){const{source:i,target:r,sourceHandle:s=null,targetHandle:l=null}=o,a={edgeId:o.id,source:i,target:r,sourceHandle:s,targetHandle:l},u=`${i}-${s}--${r}-${l}`,c=`${r}-${l}--${i}-${s}`;Ri("source",a,c,e,i,s),Ri("target",a,u,e,r,l)}}function Wi(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function po(e,t,n,o,i,r,s,l){const a=[];for(const u of e){const c=mt(u)?u:ld(u,l,i,r);if(!c)continue;const h=n(c.source),p=n(c.target);if(!h||!p){i(new He(Be.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!h){i(new He(Be.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!p){i(new He(Be.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:l,nodes:s,sourceNode:h,targetNode:p})){i(new He(Be.EDGE_INVALID,c.id));continue}const y=o(c.id);a.push({...Ar(c,y,r),sourceNode:h,targetNode:p})}return a}const Li=Symbol("vueFlow"),Kr=Symbol("nodeId"),qr=Symbol("nodeRef"),ud=Symbol("edgeId"),cd=Symbol("edgeRef"),qn=Symbol("slots");function jr(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:i,nodeLookup:r,nodeExtent:s,nodeDragThreshold:l,viewport:a,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:h,panBy:p,findNode:y,multiSelectionActive:C,nodesSelectionActive:S,selectNodesOnDrag:N,removeSelectedElements:E,addSelectedNodes:I,updateNodePositions:f,emits:_}=Pe(),{onStart:D,onDrag:B,onStop:A,onClick:H,el:ee,disabled:z,id:W,selectable:k,dragHandle:re}=e,x=pt(!1);let M=[],$,R=null,F={x:void 0,y:void 0},Z={x:0,y:0},G=null,te=!1,ae=!1,fe=0,ge=!1;const Q=hd(),ne=({x:de,y:me})=>{F={x:de,y:me};let w=!1;if(M=M.map(v=>{const b={x:de-v.distance.x,y:me-v.distance.y},{computedPosition:m}=Lo(v,n.value?Kn(b,o.value):b,_.error,s.value,v.parentNode?y(v.parentNode):void 0);return w=w||v.position.x!==m.x||v.position.y!==m.y,v.position=m,v}),ae=ae||w,!!w&&(f(M,!0,!0),x.value=!0,G)){const[v,b]=fo({id:W,dragItems:M,findNode:y});B({event:G,node:v,nodes:b})}},se=()=>{if(!R)return;const[de,me]=Yr(Z,R,c.value);if(de!==0||me!==0){const w={x:(F.x??0)-de/a.value.zoom,y:(F.y??0)-me/a.value.zoom};p({x:de,y:me})&&ne(w)}fe=requestAnimationFrame(se)},we=(de,me)=>{te=!0;const w=y(W);!N.value&&!C.value&&w&&(w.selected||E()),w&&be(k)&&N.value&&Po(w,C.value,I,E,S,!1,me);const v=Q(de.sourceEvent);if(F=v,M=Gc(r.value,h.value,v,W),M.length){const[b,m]=fo({id:W,dragItems:M,findNode:y});D({event:de.sourceEvent,node:b,nodes:m})}},ve=(de,me)=>{var w;de.sourceEvent.type==="touchmove"&&de.sourceEvent.touches.length>1||(ae=!1,l.value===0&&we(de,me),F=Q(de.sourceEvent),R=((w=t.value)==null?void 0:w.getBoundingClientRect())||null,Z=tt(de.sourceEvent,R))},ye=(de,me)=>{const w=Q(de.sourceEvent);if(!ge&&te&&u.value&&(ge=!0,se()),!te){const v=w.xSnapped-(F.x??0),b=w.ySnapped-(F.y??0);Math.sqrt(v*v+b*b)>l.value&&we(de,me)}(F.x!==w.xSnapped||F.y!==w.ySnapped)&&M.length&&te&&(G=de.sourceEvent,Z=tt(de.sourceEvent,R),ne(w))},Ne=de=>{let me=!1;if(!te&&!x.value&&!C.value){const w=de.sourceEvent,v=Q(w),b=v.xSnapped-(F.x??0),m=v.ySnapped-(F.y??0),P=Math.sqrt(b*b+m*m);P!==0&&P<=l.value&&(H?.(w),me=!0)}if(M.length&&!me){ae&&(f(M,!1,!1),ae=!1);const[w,v]=fo({id:W,dragItems:M,findNode:y});A({event:de.sourceEvent,node:w,nodes:v})}M=[],x.value=!1,ge=!1,te=!1,F={x:void 0,y:void 0},cancelAnimationFrame(fe)};return Ee([()=>be(z),ee],([de,me],w,v)=>{if(me){const b=Ke(me);de||($=Aa().on("start",m=>ve(m,me)).on("drag",m=>ye(m,me)).on("end",m=>Ne(m)).filter(m=>{const P=m.target,q=be(re);return!m.button&&(!i.value||!zi(P,`.${i.value}`,me)&&(!q||zi(P,q,me)))}),b.call($)),v(()=>{b.on(".drag",null),$&&($.on("start",null),$.on("drag",null),$.on("end",null))})}}),x}function dd(){return{doubleClick:K(),click:K(),mouseEnter:K(),mouseMove:K(),mouseLeave:K(),contextMenu:K(),updateStart:K(),update:K(),updateEnd:K()}}function fd(e,t){const n=dd();return n.doubleClick.on(o=>{var i,r;t.edgeDoubleClick(o),(r=(i=e.events)==null?void 0:i.doubleClick)==null||r.call(i,o)}),n.click.on(o=>{var i,r;t.edgeClick(o),(r=(i=e.events)==null?void 0:i.click)==null||r.call(i,o)}),n.mouseEnter.on(o=>{var i,r;t.edgeMouseEnter(o),(r=(i=e.events)==null?void 0:i.mouseEnter)==null||r.call(i,o)}),n.mouseMove.on(o=>{var i,r;t.edgeMouseMove(o),(r=(i=e.events)==null?void 0:i.mouseMove)==null||r.call(i,o)}),n.mouseLeave.on(o=>{var i,r;t.edgeMouseLeave(o),(r=(i=e.events)==null?void 0:i.mouseLeave)==null||r.call(i,o)}),n.contextMenu.on(o=>{var i,r;t.edgeContextMenu(o),(r=(i=e.events)==null?void 0:i.contextMenu)==null||r.call(i,o)}),n.updateStart.on(o=>{var i,r;t.edgeUpdateStart(o),(r=(i=e.events)==null?void 0:i.updateStart)==null||r.call(i,o)}),n.update.on(o=>{var i,r;t.edgeUpdate(o),(r=(i=e.events)==null?void 0:i.update)==null||r.call(i,o)}),n.updateEnd.on(o=>{var i,r;t.edgeUpdateEnd(o),(r=(i=e.events)==null?void 0:i.updateEnd)==null||r.call(i,o)}),Object.entries(n).reduce((o,[i,r])=>(o.emit[i]=r.trigger,o.on[i]=r.on,o),{emit:{},on:{}})}function hd(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:o}=Pe();return i=>{var r;const s=((r=o.value)==null?void 0:r.getBoundingClientRect())??{left:0,top:0},l=Jc(i)?i.sourceEvent:i,{x:a,y:u}=tt(l,s),c=dn({x:a,y:u},e.value),{x:h,y:p}=n.value?Kn(c,t.value):c;return{xSnapped:h,ySnapped:p,...c}}}function xn(){return!0}function Jr({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:r,onEdgeUpdateEnd:s}){const{id:l,vueFlowRef:a,connectionMode:u,connectionRadius:c,connectOnClick:h,connectionClickStartHandle:p,nodesConnectable:y,autoPanOnConnect:C,autoPanSpeed:S,findNode:N,panBy:E,startConnection:I,updateConnection:f,endConnection:_,emits:D,viewport:B,edges:A,nodes:H,isValidConnection:ee,nodeLookup:z}=Pe();let W=null,k=!1,re=null;function x($){var R;const F=be(n)==="target",Z=Fo($),G=Ei($.target),te=$.currentTarget;if(te&&(Z&&$.button===0||!Z)){let ae=function(oe){w=tt(oe,Ne),ne=od(dn(w,B.value,!1,[1,1]),c.value,z.value,m),v||(b(),v=!0);const he=Vi(oe,{handle:ne,connectionMode:u.value,fromNodeId:be(t),fromHandleId:be(e),fromType:F?"target":"source",isValidConnection:Q,doc:G,lib:"vue",flowId:l,nodeLookup:z.value},A.value,H.value,N,z.value);re=he.handleDomNode,W=he.connection,k=rd(!!ne,he.isValid);const _e={...J,isValid:k,to:he.toHandle&&k?cn({x:he.toHandle.x,y:he.toHandle.y},B.value):w,toHandle:he.toHandle,toPosition:k&&he.toHandle?he.toHandle.position:Mo[m.position],toNode:he.toHandle?z.value.get(he.toHandle.nodeId):null};if(k&&ne&&J?.toHandle&&_e.toHandle&&J.toHandle.type===_e.toHandle.type&&J.toHandle.nodeId===_e.toHandle.nodeId&&J.toHandle.id===_e.toHandle.id&&J.to.x===_e.to.x&&J.to.y===_e.to.y)return;const xe=ne??he.toHandle;if(f(xe&&k?cn({x:xe.x,y:xe.y},B.value):w,xe,id(!!xe,k)),J=_e,!ne&&!k&&!re)return ho(me);W&&W.source!==W.target&&re&&(ho(me),me=re,re.classList.add("connecting","vue-flow__handle-connecting"),re.classList.toggle("valid",!!k),re.classList.toggle("vue-flow__handle-valid",!!k))},fe=function(oe){"touches"in oe&&oe.touches.length>0||((ne||re)&&W&&k&&(r?r(oe,W):D.connect(W)),D.connectEnd(oe),i&&s?.(oe),ho(me),cancelAnimationFrame(se),_(oe),v=!1,k=!1,W=null,re=null,G.removeEventListener("mousemove",ae),G.removeEventListener("mouseup",fe),G.removeEventListener("touchmove",ae),G.removeEventListener("touchend",fe))};const ge=N(be(t));let Q=be(o)||ee.value||xn;!Q&&ge&&(Q=(F?ge.isValidSourcePos:ge.isValidTargetPos)||xn);let ne,se=0;const{x:we,y:ve}=tt($),ye=Gr(be(i),te),Ne=(R=a.value)==null?void 0:R.getBoundingClientRect();if(!Ne||!ye)return;const de=Ur(be(t),ye,be(e),z.value,u.value);if(!de)return;let me,w=tt($,Ne),v=!1;const b=()=>{if(!C.value)return;const[oe,he]=Yr(w,Ne,S.value);E({x:oe,y:he}),se=requestAnimationFrame(b)},m={...de,nodeId:be(t),type:ye,position:de.position},P=z.value.get(be(t)),j={inProgress:!0,isValid:null,from:Xt(P,m,ie.Left,!0),fromHandle:m,fromPosition:m.position,fromNode:P,to:w,toHandle:null,toPosition:Mo[m.position],toNode:null};I({nodeId:be(t),id:be(e),type:ye,position:te?.getAttribute("data-handlepos")||ie.Top,...w},{x:we-Ne.left,y:ve-Ne.top}),D.connectStart({event:$,nodeId:be(t),handleId:be(e),handleType:ye});let J=j;G.addEventListener("mousemove",ae),G.addEventListener("mouseup",fe),G.addEventListener("touchmove",ae),G.addEventListener("touchend",fe)}}function M($){var R,F;if(!h.value)return;const Z=be(n)==="target";if(!p.value){D.clickConnectStart({event:$,nodeId:be(t),handleId:be(e)}),I({nodeId:be(t),type:be(n),id:be(e),position:ie.Top,...tt($)},void 0,!0);return}let G=be(o)||ee.value||xn;const te=N(be(t));if(!G&&te&&(G=(Z?te.isValidSourcePos:te.isValidTargetPos)||xn),te&&(typeof te.connectable>"u"?y.value:te.connectable)===!1)return;const ae=Ei($.target),fe=Vi($,{handle:{nodeId:be(t),id:be(e),type:be(n),position:ie.Top,...tt($)},connectionMode:u.value,fromNodeId:p.value.nodeId,fromHandleId:p.value.id??null,fromType:p.value.type,isValidConnection:G,doc:ae,lib:"vue",flowId:l,nodeLookup:z.value},A.value,H.value,N,z.value),ge=((R=fe.connection)==null?void 0:R.source)===((F=fe.connection)==null?void 0:F.target);fe.isValid&&fe.connection&&!ge&&D.connect(fe.connection),D.clickConnectEnd($),_($,!0)}return{handlePointerDown:x,handleClick:M}}function vd(){return Ut(Kr,"")}function Qr(e){const t=e??vd()??"",n=Ut(qr,ce(null)),{findNode:o,edges:i,emits:r}=Pe(),s=o(t);return s||r.error(new He(Be.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:s,parentNode:le(()=>o(s.parentNode)),connectedEdges:le(()=>Lr([s],i.value))}}function pd(){return{doubleClick:K(),click:K(),mouseEnter:K(),mouseMove:K(),mouseLeave:K(),contextMenu:K(),dragStart:K(),drag:K(),dragStop:K()}}function gd(e,t){const n=pd();return n.doubleClick.on(o=>{var i,r;t.nodeDoubleClick(o),(r=(i=e.events)==null?void 0:i.doubleClick)==null||r.call(i,o)}),n.click.on(o=>{var i,r;t.nodeClick(o),(r=(i=e.events)==null?void 0:i.click)==null||r.call(i,o)}),n.mouseEnter.on(o=>{var i,r;t.nodeMouseEnter(o),(r=(i=e.events)==null?void 0:i.mouseEnter)==null||r.call(i,o)}),n.mouseMove.on(o=>{var i,r;t.nodeMouseMove(o),(r=(i=e.events)==null?void 0:i.mouseMove)==null||r.call(i,o)}),n.mouseLeave.on(o=>{var i,r;t.nodeMouseLeave(o),(r=(i=e.events)==null?void 0:i.mouseLeave)==null||r.call(i,o)}),n.contextMenu.on(o=>{var i,r;t.nodeContextMenu(o),(r=(i=e.events)==null?void 0:i.contextMenu)==null||r.call(i,o)}),n.dragStart.on(o=>{var i,r;t.nodeDragStart(o),(r=(i=e.events)==null?void 0:i.dragStart)==null||r.call(i,o)}),n.drag.on(o=>{var i,r;t.nodeDrag(o),(r=(i=e.events)==null?void 0:i.drag)==null||r.call(i,o)}),n.dragStop.on(o=>{var i,r;t.nodeDragStop(o),(r=(i=e.events)==null?void 0:i.dragStop)==null||r.call(i,o)}),Object.entries(n).reduce((o,[i,r])=>(o.emit[i]=r.trigger,o.on[i]=r.on,o),{emit:{},on:{}})}function es(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:r,nodesDraggable:s,emits:l}=Pe();return(a,u=!1)=>{const c=r.value?i.value[0]:5,h=r.value?i.value[1]:5,p=u?4:1,y=a.x*c*p,C=a.y*h*p,S=[];for(const N of e.value)if(N.draggable||s&&typeof N.draggable>"u"){const E={x:N.computedPosition.x+y,y:N.computedPosition.y+C},{position:I}=Lo(N,E,l.error,t.value,N.parentNode?o(N.parentNode):void 0);S.push({id:N.id,position:I,from:N.position,distance:{x:a.x,y:a.y},dimensions:N.dimensions})}n(S,!0,!1)}}const kn=.1,md=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function ft(){return pn("Viewport not initialized yet."),Promise.resolve(!1)}const yd={zoomIn:ft,zoomOut:ft,zoomTo:ft,fitView:ft,setCenter:ft,fitBounds:ft,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:ft,setTransform:ft,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function wd(e){function t(o,i){return new Promise(r=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(i?.interpolate==="linear"?tn:In).scaleBy(go(e.d3Selection,i?.duration,i?.ease,()=>{r(!0)}),o):r(!1)})}function n(o,i,r,s){return new Promise(l=>{var a;const{x:u,y:c}=Or({x:-o,y:-i},e.translateExtent),h=Yt.translate(-u,-c).scale(r);e.d3Selection&&e.d3Zoom?(a=e.d3Zoom)==null||a.interpolate(s?.interpolate==="linear"?tn:In).transform(go(e.d3Selection,s?.duration,s?.ease,()=>{l(!0)}),h):l(!1)})}return le(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:i=>t(1.2,i),zoomOut:i=>t(1/1.2,i),zoomTo:(i,r)=>new Promise(s=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(r?.interpolate==="linear"?tn:In).scaleTo(go(e.d3Selection,r?.duration,r?.ease,()=>{s(!0)}),i):s(!1)}),setViewport:(i,r)=>n(i.x,i.y,i.zoom,r),setTransform:(i,r)=>n(i.x,i.y,i.zoom,r),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(i={padding:kn,includeHiddenNodes:!1,duration:0})=>{var r,s;const l=[];for(const p of e.nodes)p.dimensions.width&&p.dimensions.height&&(i?.includeHiddenNodes||!p.hidden)&&(!((r=i.nodes)!=null&&r.length)||(s=i.nodes)!=null&&s.length&&i.nodes.includes(p.id))&&l.push(p);if(!l.length)return Promise.resolve(!1);const a=Rr(l),{x:u,y:c,zoom:h}=Ni(a,e.dimensions.width,e.dimensions.height,i.minZoom??e.minZoom,i.maxZoom??e.maxZoom,i.padding??kn);return n(u,c,h,i)},setCenter:(i,r,s)=>{const l=typeof s?.zoom<"u"?s.zoom:e.maxZoom,a=e.dimensions.width/2-i*l,u=e.dimensions.height/2-r*l;return n(a,u,l,s)},fitBounds:(i,r={padding:kn})=>{const{x:s,y:l,zoom:a}=Ni(i,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,r.padding??kn);return n(s,l,a,r)},project:i=>dn(i,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:i=>{if(e.vueFlowRef){const{x:r,y:s}=e.vueFlowRef.getBoundingClientRect(),l={x:i.x-r,y:i.y-s};return dn(l,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:i=>{if(e.vueFlowRef){const{x:r,y:s}=e.vueFlowRef.getBoundingClientRect(),l={x:i.x+r,y:i.y+s};return cn(l,e.viewport)}return{x:0,y:0}}}:yd)}function go(e,t=0,n=md,o=()=>{}){const i=typeof t=="number"&&t>0;return i||o(),i?e.transition().duration(t).ease(n).on("end",o):e}function _d(e,t,n){const o=Ki(!0);return o.run(()=>{const i=()=>{o.run(()=>{let S,N,E=!!(n.nodes.value.length||n.edges.value.length);S=Tt([e.modelValue,()=>{var I,f;return(f=(I=e.modelValue)==null?void 0:I.value)==null?void 0:f.length}],([I])=>{I&&Array.isArray(I)&&(N?.pause(),n.setElements(I),!N&&!E&&I.length?E=!0:N?.resume())}),N=Tt([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([I,f])=>{var _;(_=e.modelValue)!=null&&_.value&&Array.isArray(e.modelValue.value)&&(S?.pause(),e.modelValue.value=[...I,...f],at(()=>{S?.resume()}))},{immediate:E}),Nn(()=>{S?.stop(),N?.stop()})})},r=()=>{o.run(()=>{let S,N,E=!!n.nodes.value.length;S=Tt([e.nodes,()=>{var I,f;return(f=(I=e.nodes)==null?void 0:I.value)==null?void 0:f.length}],([I])=>{I&&Array.isArray(I)&&(N?.pause(),n.setNodes(I),!N&&!E&&I.length?E=!0:N?.resume())}),N=Tt([n.nodes,()=>n.nodes.value.length],([I])=>{var f;(f=e.nodes)!=null&&f.value&&Array.isArray(e.nodes.value)&&(S?.pause(),e.nodes.value=[...I],at(()=>{S?.resume()}))},{immediate:E}),Nn(()=>{S?.stop(),N?.stop()})})},s=()=>{o.run(()=>{let S,N,E=!!n.edges.value.length;S=Tt([e.edges,()=>{var I,f;return(f=(I=e.edges)==null?void 0:I.value)==null?void 0:f.length}],([I])=>{I&&Array.isArray(I)&&(N?.pause(),n.setEdges(I),!N&&!E&&I.length?E=!0:N?.resume())}),N=Tt([n.edges,()=>n.edges.value.length],([I])=>{var f;(f=e.edges)!=null&&f.value&&Array.isArray(e.edges.value)&&(S?.pause(),e.edges.value=[...I],at(()=>{S?.resume()}))},{immediate:E}),Nn(()=>{S?.stop(),N?.stop()})})},l=()=>{o.run(()=>{Ee(()=>t.maxZoom,()=>{t.maxZoom&&Ve(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},a=()=>{o.run(()=>{Ee(()=>t.minZoom,()=>{t.minZoom&&Ve(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{Ee(()=>t.translateExtent,()=>{t.translateExtent&&Ve(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{Ee(()=>t.nodeExtent,()=>{t.nodeExtent&&Ve(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},h=()=>{o.run(()=>{Ee(()=>t.applyDefault,()=>{Ve(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},p=()=>{o.run(()=>{const S=async N=>{let E=N;typeof t.autoConnect=="function"&&(E=await t.autoConnect(N)),E!==!1&&n.addEdges([E])};Ee(()=>t.autoConnect,()=>{Ve(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),Ee(n.autoConnect,(N,E,I)=>{N?n.onConnect(S):n.hooks.value.connect.off(S),I(()=>{n.hooks.value.connect.off(S)})},{immediate:!0})})},y=()=>{const S=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const N of Object.keys(t)){const E=N;if(!S.includes(E)){const I=Me(()=>t[E]),f=n[E];To(f)&&o.run(()=>{Ee(I,_=>{Ve(_)&&(f.value=_)},{immediate:!0})})}}};i(),r(),s(),a(),l(),u(),c(),h(),p(),y()}),()=>o.stop()}function bd(){return{edgesChange:K(),nodesChange:K(),nodeDoubleClick:K(),nodeClick:K(),nodeMouseEnter:K(),nodeMouseMove:K(),nodeMouseLeave:K(),nodeContextMenu:K(),nodeDragStart:K(),nodeDrag:K(),nodeDragStop:K(),nodesInitialized:K(),miniMapNodeClick:K(),miniMapNodeDoubleClick:K(),miniMapNodeMouseEnter:K(),miniMapNodeMouseMove:K(),miniMapNodeMouseLeave:K(),connect:K(),connectStart:K(),connectEnd:K(),clickConnectStart:K(),clickConnectEnd:K(),paneReady:K(),init:K(),move:K(),moveStart:K(),moveEnd:K(),selectionDragStart:K(),selectionDrag:K(),selectionDragStop:K(),selectionContextMenu:K(),selectionStart:K(),selectionEnd:K(),viewportChangeStart:K(),viewportChange:K(),viewportChangeEnd:K(),paneScroll:K(),paneClick:K(),paneContextMenu:K(),paneMouseEnter:K(),paneMouseMove:K(),paneMouseLeave:K(),edgeContextMenu:K(),edgeMouseEnter:K(),edgeMouseMove:K(),edgeMouseLeave:K(),edgeDoubleClick:K(),edgeClick:K(),edgeUpdateStart:K(),edgeUpdate:K(),edgeUpdateEnd:K(),updateNodeInternals:K(),error:K(e=>pn(e.message))}}function xd(e,t){const n=Gt();Ss(()=>{for(const[i,r]of Object.entries(t.value)){const s=l=>{e(i,l)};r.setEmitter(s),rn(r.removeEmitter),r.setHasEmitListeners(()=>o(i)),rn(r.removeHasEmitListeners)}});function o(i){var r;const s=kd(i);return!!((r=n?.vnode.props)==null?void 0:r[s])}}function kd(e){const[t,...n]=e.split(":");return`on${t.replace(/(?:^|-)(\w)/g,(i,r)=>r.toUpperCase())}${n.length?`:${n.join(":")}`:""}`}function ts(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Wo.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:nn.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:St.Bezier,style:{}},connectionMode:gt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:Ln()?"Meta":"Control",zoomActivationKeyCode:Ln()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:bd(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const Sd=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function Ed(e,t,n){const o=wd(e),i=w=>{const v=w??[];e.hooks.updateNodeInternals.trigger(v)},r=w=>Hc(w,e.nodes,e.edges),s=w=>Bc(w,e.nodes,e.edges),l=w=>Lr(w,e.edges),a=({id:w,type:v,nodeId:b})=>{var m;const P=w?`-${v}-${w}`:`-${v}`;return Array.from(((m=e.connectionLookup.get(`${b}${P}`))==null?void 0:m.values())??[])},u=w=>{if(w)return t.value.get(w)},c=w=>{if(w)return n.value.get(w)},h=(w,v,b)=>{var m,P;const q=[];for(const j of w){const J={id:j.id,type:"position",dragging:b,from:j.from};if(v&&(J.position=j.position,j.parentNode)){const oe=u(j.parentNode);J.position={x:J.position.x-(((m=oe?.computedPosition)==null?void 0:m.x)??0),y:J.position.y-(((P=oe?.computedPosition)==null?void 0:P.y)??0)}}q.push(J)}q?.length&&e.hooks.nodesChange.trigger(q)},p=w=>{if(!e.vueFlowRef)return;const v=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!v)return;const b=window.getComputedStyle(v),{m22:m}=new window.DOMMatrixReadOnly(b.transform),P=[];for(const q of w){const j=q,J=u(j.id);if(J){const oe=Zn(j.nodeElement);if(!!(oe.width&&oe.height&&(J.dimensions.width!==oe.width||J.dimensions.height!==oe.height||j.forceUpdate))){const _e=j.nodeElement.getBoundingClientRect();J.dimensions=oe,J.handleBounds.source=Bi("source",j.nodeElement,_e,m,J.id),J.handleBounds.target=Bi("target",j.nodeElement,_e,m,J.id),P.push({id:J.id,type:"dimensions",dimensions:oe})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),P.length&&e.hooks.nodesChange.trigger(P)},y=(w,v)=>{const b=new Set,m=new Set;for(const j of w)$t(j)?b.add(j.id):mt(j)&&m.add(j.id);const P=vt(t.value,b,!0),q=vt(n.value,m);if(e.multiSelectionActive){for(const j of b)P.push(ht(j,v));for(const j of m)q.push(ht(j,v))}P.length&&e.hooks.nodesChange.trigger(P),q.length&&e.hooks.edgesChange.trigger(q)},C=w=>{if(e.multiSelectionActive){const v=w.map(b=>ht(b.id,!0));e.hooks.nodesChange.trigger(v);return}e.hooks.nodesChange.trigger(vt(t.value,new Set(w.map(v=>v.id)),!0)),e.hooks.edgesChange.trigger(vt(n.value))},S=w=>{if(e.multiSelectionActive){const v=w.map(b=>ht(b.id,!0));e.hooks.edgesChange.trigger(v);return}e.hooks.edgesChange.trigger(vt(n.value,new Set(w.map(v=>v.id)))),e.hooks.nodesChange.trigger(vt(t.value,new Set,!0))},N=w=>{y(w,!0)},E=w=>{const b=(w||e.nodes).map(m=>(m.selected=!1,ht(m.id,!1)));e.hooks.nodesChange.trigger(b)},I=w=>{const b=(w||e.edges).map(m=>(m.selected=!1,ht(m.id,!1)));e.hooks.edgesChange.trigger(b)},f=w=>{if(!w||!w.length)return y([],!1);const v=w.reduce((b,m)=>{const P=ht(m.id,!1);return $t(m)?b.nodes.push(P):b.edges.push(P),b},{nodes:[],edges:[]});v.nodes.length&&e.hooks.nodesChange.trigger(v.nodes),v.edges.length&&e.hooks.edgesChange.trigger(v.edges)},_=w=>{var v;(v=e.d3Zoom)==null||v.scaleExtent([w,e.maxZoom]),e.minZoom=w},D=w=>{var v;(v=e.d3Zoom)==null||v.scaleExtent([e.minZoom,w]),e.maxZoom=w},B=w=>{var v;(v=e.d3Zoom)==null||v.translateExtent(w),e.translateExtent=w},A=w=>{e.nodeExtent=w,i()},H=w=>{var v;(v=e.d3Zoom)==null||v.clickDistance(w)},ee=w=>{e.nodesDraggable=w,e.nodesConnectable=w,e.elementsSelectable=w},z=w=>{const v=w instanceof Function?w(e.nodes):w;!e.initialized&&!v.length||(e.nodes=Hi(v,u,e.hooks.error.trigger))},W=w=>{const v=w instanceof Function?w(e.edges):w;if(!e.initialized&&!v.length)return;const b=po(v,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);vo(e.connectionLookup,n.value,b),e.edges=b},k=w=>{const v=w instanceof Function?w([...e.nodes,...e.edges]):w;!e.initialized&&!v.length||(z(v.filter($t)),W(v.filter(mt)))},re=w=>{let v=w instanceof Function?w(e.nodes):w;v=Array.isArray(v)?v:[v];const b=Hi(v,u,e.hooks.error.trigger),m=[];for(const P of b)m.push(Mi(P));m.length&&e.hooks.nodesChange.trigger(m)},x=w=>{let v=w instanceof Function?w(e.edges):w;v=Array.isArray(v)?v:[v];const b=po(v,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),m=[];for(const P of b)m.push(Mi(P));m.length&&e.hooks.edgesChange.trigger(m)},M=(w,v=!0,b=!1)=>{const m=w instanceof Function?w(e.nodes):w,P=Array.isArray(m)?m:[m],q=[],j=[];function J(he){const _e=l(he);for(const xe of _e)(!Ve(xe.deletable)||xe.deletable)&&j.push(Di(xe.id,xe.source,xe.target,xe.sourceHandle,xe.targetHandle))}function oe(he){const _e=[];for(const xe of e.nodes)xe.parentNode===he&&_e.push(xe);if(_e.length){for(const xe of _e)q.push(Pi(xe.id));v&&J(_e);for(const xe of _e)oe(xe.id)}}for(const he of P){const _e=typeof he=="string"?u(he):he;_e&&(Ve(_e.deletable)&&!_e.deletable||(q.push(Pi(_e.id)),v&&J([_e]),b&&oe(_e.id)))}j.length&&e.hooks.edgesChange.trigger(j),q.length&&e.hooks.nodesChange.trigger(q)},$=w=>{const v=w instanceof Function?w(e.edges):w,b=Array.isArray(v)?v:[v],m=[];for(const P of b){const q=typeof P=="string"?c(P):P;q&&(Ve(q.deletable)&&!q.deletable||m.push(Di(typeof P=="string"?P:P.id,q.source,q.target,q.sourceHandle,q.targetHandle)))}e.hooks.edgesChange.trigger(m)},R=(w,v,b=!0)=>{const m=c(w.id);if(!m)return!1;const P=e.edges.indexOf(m),q=ad(w,v,m,b,e.hooks.error.trigger);if(q){const[j]=po([q],e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((J,oe)=>oe===P?j:J),vo(e.connectionLookup,n.value,[j]),j}return!1},F=(w,v,b={replace:!1})=>{const m=c(w);if(!m)return;const P=typeof v=="function"?v(m):v;m.data=b.replace?P:{...m.data,...P}},Z=w=>Ii(w,e.nodes),G=w=>{const v=Ii(w,e.edges);return vo(e.connectionLookup,n.value,v),v},te=(w,v,b={replace:!1})=>{const m=u(w);if(!m)return;const P=typeof v=="function"?v(m):v;b.replace?e.nodes.splice(e.nodes.indexOf(m),1,P):Object.assign(m,P)},ae=(w,v,b={replace:!1})=>{const m=u(w);if(!m)return;const P=typeof v=="function"?v(m):v;m.data=b.replace?P:{...m.data,...P}},fe=(w,v,b=!1)=>{b?e.connectionClickStartHandle=w:e.connectionStartHandle=w,e.connectionEndHandle=null,e.connectionStatus=null,v&&(e.connectionPosition=v)},ge=(w,v=null,b=null)=>{e.connectionStartHandle&&(e.connectionPosition=w,e.connectionEndHandle=v,e.connectionStatus=b)},Q=(w,v)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,v?e.connectionClickStartHandle=null:e.connectionStartHandle=null},ne=w=>{const v=Ac(w),b=v?null:en(w)?w:u(w.id);return!v&&!b?[null,null,v]:[v?w:Rn(b),b,v]},se=(w,v=!0,b=e.nodes)=>{const[m,P,q]=ne(w);if(!m)return[];const j=[];for(const J of b||e.nodes){if(!q&&(J.id===P.id||!J.computedPosition))continue;const oe=Rn(J),he=Wn(oe,m);(v&&he>0||he>=oe.width*oe.height||he>=Number(m.width)*Number(m.height))&&j.push(J)}return j},we=(w,v,b=!0)=>{const[m]=ne(w);if(!m)return!1;const P=Wn(m,v);return b&&P>0||P>=Number(m.width)*Number(m.height)},ve=w=>{const{viewport:v,dimensions:b,d3Zoom:m,d3Selection:P,translateExtent:q}=e;if(!m||!P||!w.x&&!w.y)return!1;const j=Yt.translate(v.x+w.x,v.y+w.y).scale(v.zoom),J=[[0,0],[b.width,b.height]],oe=m.constrain()(j,J,q),he=e.viewport.x!==oe.x||e.viewport.y!==oe.y||e.viewport.zoom!==oe.k;return m.transform(P,oe),he},ye=w=>{const v=w instanceof Function?w(e):w,b=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Ve(v.defaultEdgeOptions)&&(e.defaultEdgeOptions=v.defaultEdgeOptions);const m=v.modelValue||v.nodes||v.edges?[]:void 0;m&&(v.modelValue&&m.push(...v.modelValue),v.nodes&&m.push(...v.nodes),v.edges&&m.push(...v.edges),k(m));const P=()=>{Ve(v.maxZoom)&&D(v.maxZoom),Ve(v.minZoom)&&_(v.minZoom),Ve(v.translateExtent)&&B(v.translateExtent)};for(const q of Object.keys(v)){const j=q,J=v[j];![...Sd,...b].includes(j)&&Ve(J)&&(e[j]=J)}wo(()=>e.d3Zoom).not.toBeNull().then(P),e.initialized||(e.initialized=!0)};return{updateNodePositions:h,updateNodeDimensions:p,setElements:k,setNodes:z,setEdges:W,addNodes:re,addEdges:x,removeNodes:M,removeEdges:$,findNode:u,findEdge:c,updateEdge:R,updateEdgeData:F,updateNode:te,updateNodeData:ae,applyEdgeChanges:G,applyNodeChanges:Z,addSelectedElements:N,addSelectedNodes:C,addSelectedEdges:S,setMinZoom:_,setMaxZoom:D,setTranslateExtent:B,setNodeExtent:A,setPaneClickDistance:H,removeSelectedElements:f,removeSelectedNodes:E,removeSelectedEdges:I,startConnection:fe,updateConnection:ge,endConnection:Q,setInteractive:ee,setState:ye,getIntersectingNodes:se,getIncomers:r,getOutgoers:s,getConnectedEdges:l,getHandleConnections:a,isNodeIntersecting:we,panBy:ve,fitView:w=>o.value.fitView(w),zoomIn:w=>o.value.zoomIn(w),zoomOut:w=>o.value.zoomOut(w),zoomTo:(w,v)=>o.value.zoomTo(w,v),setViewport:(w,v)=>o.value.setViewport(w,v),setTransform:(w,v)=>o.value.setTransform(w,v),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(w,v,b)=>o.value.setCenter(w,v,b),fitBounds:(w,v)=>o.value.fitBounds(w,v),project:w=>o.value.project(w),screenToFlowCoordinate:w=>o.value.screenToFlowCoordinate(w),flowToScreenCoordinate:w=>o.value.flowToScreenCoordinate(w),toObject:()=>{const w=[],v=[];for(const b of e.nodes){const{computedPosition:m,handleBounds:P,selected:q,dimensions:j,isParent:J,resizing:oe,dragging:he,events:_e,...xe}=b;w.push(xe)}for(const b of e.edges){const{selected:m,sourceNode:P,targetNode:q,events:j,...J}=b;v.push(J)}return JSON.parse(JSON.stringify({nodes:w,edges:v,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:w=>new Promise(v=>{const{nodes:b,edges:m,position:P,zoom:q,viewport:j}=w;b&&z(b),m&&W(m);const[J,oe]=j?.x&&j?.y?[j.x,j.y]:P??[null,null];if(J&&oe){const he=j?.zoom||q||e.viewport.zoom;return wo(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:J,y:oe,zoom:he}).then(()=>{v(!0)})})}else v(!0)}),updateNodeInternals:i,viewportHelper:o,$reset:()=>{const w=ts();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const v=Yt.translate(w.defaultViewport.x??0,w.defaultViewport.y??0).scale(Pt(w.defaultViewport.zoom??1,w.minZoom,w.maxZoom)),b=e.viewportRef.getBoundingClientRect(),m=[[0,0],[b.width,b.height]],P=e.d3Zoom.constrain()(v,m,w.translateExtent);e.d3Zoom.transform(e.d3Selection,P)}ye(w)},$destroy:()=>{}}}const Nd=["data-id","data-handleid","data-nodeid","data-handlepos"],Cd={name:"Handle",compatConfig:{MODE:3}},Fn=$e({...Cd,props:{id:{default:null},type:{},position:{default:()=>ie.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=Is(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Me(()=>n.type??"source"),i=Me(()=>n.isValidConnection??null),{id:r,connectionStartHandle:s,connectionClickStartHandle:l,connectionEndHandle:a,vueFlowRef:u,nodesConnectable:c,noDragClassName:h,noPanClassName:p}=Pe(),{id:y,node:C,nodeEl:S,connectedEdges:N}=Qr(),E=ce(),I=Me(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),f=Me(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),_=Me(()=>{var W,k,re,x,M,$;return((W=s.value)==null?void 0:W.nodeId)===y&&((k=s.value)==null?void 0:k.id)===e.id&&((re=s.value)==null?void 0:re.type)===o.value||((x=a.value)==null?void 0:x.nodeId)===y&&((M=a.value)==null?void 0:M.id)===e.id&&(($=a.value)==null?void 0:$.type)===o.value}),D=Me(()=>{var W,k,re;return((W=l.value)==null?void 0:W.nodeId)===y&&((k=l.value)==null?void 0:k.id)===e.id&&((re=l.value)==null?void 0:re.type)===o.value}),{handlePointerDown:B,handleClick:A}=Jr({nodeId:y,handleId:e.id,isValidConnection:i,type:o}),H=le(()=>typeof e.connectable=="string"&&e.connectable==="single"?!N.value.some(W=>{const k=W[`${o.value}Handle`];return W[o.value]!==y?!1:k?k===e.id:!0}):typeof e.connectable=="number"?N.value.filter(W=>{const k=W[`${o.value}Handle`];return W[o.value]!==y?!1:k?k===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(C,N.value):Ve(e.connectable)?e.connectable:c.value);ct(()=>{var W;if(!C.dimensions.width||!C.dimensions.height)return;const k=(W=C.handleBounds[o.value])==null?void 0:W.find(Z=>Z.id===e.id);if(!u.value||k)return;const re=u.value.querySelector(".vue-flow__transformationpane");if(!S.value||!E.value||!re||!e.id)return;const x=S.value.getBoundingClientRect(),M=E.value.getBoundingClientRect(),$=window.getComputedStyle(re),{m22:R}=new window.DOMMatrixReadOnly($.transform),F={id:e.id,position:e.position,x:(M.left-x.left)/R,y:(M.top-x.top)/R,type:o.value,nodeId:y,...Zn(E.value)};C.handleBounds[o.value]=[...C.handleBounds[o.value]??[],F]});function ee(W){const k=Fo(W);H.value&&I.value&&(k&&W.button===0||!k)&&B(W)}function z(W){!y||!l.value&&!I.value||H.value&&A(W)}return t({handleClick:A,handlePointerDown:B,onClick:z,onPointerDown:ee}),(W,k)=>(V(),X("div",{ref_key:"handle",ref:E,"data-id":`${d(r)}-${d(y)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":d(y),"data-handlepos":W.position,class:Fe(["vue-flow__handle",[`vue-flow__handle-${W.position}`,`vue-flow__handle-${e.id}`,d(h),d(p),o.value,{connectable:H.value,connecting:D.value,connectablestart:I.value,connectableend:f.value,connectionindicator:H.value&&(I.value&&!_.value||f.value&&_.value)}]]),onMousedown:ee,onTouchstartPassive:ee,onClick:z},[Oe(W.$slots,"default",{id:W.id})],42,Nd))}}),jn=function({sourcePosition:e=ie.Bottom,targetPosition:t=ie.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:r,data:s}){const l=s.label??n;return[Ce(Fn,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof l!="string"&&l?Ce(l):Ce(Se,[l]),Ce(Fn,{type:"source",position:e,connectable:o,isValidConnection:r})]};jn.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];jn.inheritAttrs=!1;jn.compatConfig={MODE:3};const $d=jn,Jn=function({targetPosition:e=ie.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:i}){const r=i.label??t;return[Ce(Fn,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof r!="string"&&r?Ce(r):Ce(Se,[r])]};Jn.props=["targetPosition","label","isValidTargetPos","connectable","data"];Jn.inheritAttrs=!1;Jn.compatConfig={MODE:3};const Id=Jn,Qn=function({sourcePosition:e=ie.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:i}){const r=i.label??t;return[typeof r!="string"&&r?Ce(r):Ce(Se,[r]),Ce(Fn,{type:"source",position:e,connectable:n,isValidConnection:o})]};Qn.props=["sourcePosition","label","isValidSourcePos","connectable","data"];Qn.inheritAttrs=!1;Qn.compatConfig={MODE:3};const Md=Qn,Pd=["transform"],Dd=["width","height","x","y","rx","ry"],Td=["y"],zd={name:"EdgeText",compatConfig:{MODE:3}},Od=$e({...zd,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=ce({x:0,y:0,width:0,height:0}),n=ce(null),o=le(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);ct(i),Ee([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const r=n.value.getBBox();(r.width!==t.value.width||r.height!==t.value.height)&&(t.value=r)}return(r,s)=>(V(),X("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[r.labelShowBg?(V(),X("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*r.labelBgPadding[0]}px`,height:`${t.value.height+2*r.labelBgPadding[1]}px`,x:-r.labelBgPadding[0],y:-r.labelBgPadding[1],style:Ae(r.labelBgStyle),rx:r.labelBgBorderRadius,ry:r.labelBgBorderRadius},null,12,Dd)):Ie("",!0),O("text",er(r.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:r.labelStyle}),[Oe(r.$slots,"default",{},()=>[typeof r.label!="string"?(V(),ze(Ot(r.label),{key:0})):(V(),X(Se,{key:1},[pe(ke(r.label),1)],64))])],16,Td)],8,Pd))}}),Ad=["id","d","marker-end","marker-start"],Vd=["d","stroke-width"],Bd={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},eo=$e({...Bd,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=ce(null),o=ce(null),i=ce(null),r=$s();return t({pathEl:n,interactionEl:o,labelEl:i}),(s,l)=>(V(),X(Se,null,[O("path",er(d(r),{id:s.id,ref_key:"pathEl",ref:n,d:s.path,class:"vue-flow__edge-path","marker-end":s.markerEnd,"marker-start":s.markerStart}),null,16,Ad),s.interactionWidth?(V(),X("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:s.path,"stroke-width":s.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,Vd)):Ie("",!0),s.label&&s.labelX&&s.labelY?(V(),ze(Od,{key:1,ref_key:"labelEl",ref:i,x:s.labelX,y:s.labelY,label:s.label,"label-show-bg":s.labelShowBg,"label-bg-style":s.labelBgStyle,"label-bg-padding":s.labelBgPadding,"label-bg-border-radius":s.labelBgBorderRadius,"label-style":s.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):Ie("",!0)],64))}});function ns({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,r=n<e?n+i:n-i,s=Math.abs(o-t)/2,l=o<t?o+s:o-s;return[r,l,i,s]}function os({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:r,targetControlX:s,targetControlY:l}){const a=e*.125+i*.375+s*.375+n*.125,u=t*.125+r*.375+l*.375+o*.125,c=Math.abs(a-e),h=Math.abs(u-t);return[a,u,c,h]}function Sn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Fi({pos:e,x1:t,y1:n,x2:o,y2:i,c:r}){let s,l;switch(e){case ie.Left:s=t-Sn(t-o,r),l=n;break;case ie.Right:s=t+Sn(o-t,r),l=n;break;case ie.Top:s=t,l=n-Sn(n-i,r);break;case ie.Bottom:s=t,l=n+Sn(i-n,r);break}return[s,l]}function is(e){const{sourceX:t,sourceY:n,sourcePosition:o=ie.Bottom,targetX:i,targetY:r,targetPosition:s=ie.Top,curvature:l=.25}=e,[a,u]=Fi({pos:o,x1:t,y1:n,x2:i,y2:r,c:l}),[c,h]=Fi({pos:s,x1:i,y1:r,x2:t,y2:n,c:l}),[p,y,C,S]=os({sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:a,sourceControlY:u,targetControlX:c,targetControlY:h});return[`M${t},${n} C${a},${u} ${c},${h} ${i},${r}`,p,y,C,S]}function Yi({pos:e,x1:t,y1:n,x2:o,y2:i}){let r,s;switch(e){case ie.Left:case ie.Right:r=.5*(t+o),s=n;break;case ie.Top:case ie.Bottom:r=t,s=.5*(n+i);break}return[r,s]}function rs(e){const{sourceX:t,sourceY:n,sourcePosition:o=ie.Bottom,targetX:i,targetY:r,targetPosition:s=ie.Top}=e,[l,a]=Yi({pos:o,x1:t,y1:n,x2:i,y2:r}),[u,c]=Yi({pos:s,x1:i,y1:r,x2:t,y2:n}),[h,p,y,C]=os({sourceX:t,sourceY:n,targetX:i,targetY:r,sourceControlX:l,sourceControlY:a,targetControlX:u,targetControlY:c});return[`M${t},${n} C${l},${a} ${u},${c} ${i},${r}`,h,p,y,C]}const Xi={[ie.Left]:{x:-1,y:0},[ie.Right]:{x:1,y:0},[ie.Top]:{x:0,y:-1},[ie.Bottom]:{x:0,y:1}};function Hd({source:e,sourcePosition:t=ie.Bottom,target:n}){return t===ie.Left||t===ie.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Gi(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function Rd({source:e,sourcePosition:t=ie.Bottom,target:n,targetPosition:o=ie.Top,center:i,offset:r}){const s=Xi[t],l=Xi[o],a={x:e.x+s.x*r,y:e.y+s.y*r},u={x:n.x+l.x*r,y:n.y+l.y*r},c=Hd({source:a,sourcePosition:t,target:u}),h=c.x!==0?"x":"y",p=c[h];let y,C,S;const N={x:0,y:0},E={x:0,y:0},[I,f,_,D]=ns({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[h]*l[h]===-1){C=i.x??I,S=i.y??f;const A=[{x:C,y:a.y},{x:C,y:u.y}],H=[{x:a.x,y:S},{x:u.x,y:S}];s[h]===p?y=h==="x"?A:H:y=h==="x"?H:A}else{const A=[{x:a.x,y:u.y}],H=[{x:u.x,y:a.y}];if(h==="x"?y=s.x===p?H:A:y=s.y===p?A:H,t===o){const re=Math.abs(e[h]-n[h]);if(re<=r){const x=Math.min(r-1,r-re);s[h]===p?N[h]=(a[h]>e[h]?-1:1)*x:E[h]=(u[h]>n[h]?-1:1)*x}}if(t!==o){const re=h==="x"?"y":"x",x=s[h]===l[re],M=a[re]>u[re],$=a[re]<u[re];(s[h]===1&&(!x&&M||x&&$)||s[h]!==1&&(!x&&$||x&&M))&&(y=h==="x"?A:H)}const ee={x:a.x+N.x,y:a.y+N.y},z={x:u.x+E.x,y:u.y+E.y},W=Math.max(Math.abs(ee.x-y[0].x),Math.abs(z.x-y[0].x)),k=Math.max(Math.abs(ee.y-y[0].y),Math.abs(z.y-y[0].y));W>=k?(C=(ee.x+z.x)/2,S=y[0].y):(C=y[0].x,S=(ee.y+z.y)/2)}return[[e,{x:a.x+N.x,y:a.y+N.y},...y,{x:u.x+E.x,y:u.y+E.y},n],C,S,_,D]}function Wd(e,t,n,o){const i=Math.min(Gi(e,t)/2,Gi(t,n)/2,o),{x:r,y:s}=t;if(e.x===r&&r===n.x||e.y===s&&s===n.y)return`L${r} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${r+i*u},${s}Q ${r},${s} ${r},${s+i*c}`}const l=e.x<n.x?1:-1,a=e.y<n.y?-1:1;return`L ${r},${s+i*a}Q ${r},${s} ${r+i*l},${s}`}function Do(e){const{sourceX:t,sourceY:n,sourcePosition:o=ie.Bottom,targetX:i,targetY:r,targetPosition:s=ie.Top,borderRadius:l=5,centerX:a,centerY:u,offset:c=20}=e,[h,p,y,C,S]=Rd({source:{x:t,y:n},sourcePosition:o,target:{x:i,y:r},targetPosition:s,center:{x:a,y:u},offset:c});return[h.reduce((E,I,f)=>{let _;return f>0&&f<h.length-1?_=Wd(h[f-1],I,h[f+1],l):_=`${f===0?"M":"L"}${I.x} ${I.y}`,E+=_,E},""),p,y,C,S]}function Ld(e){const{sourceX:t,sourceY:n,targetX:o,targetY:i}=e,[r,s,l,a]=ns({sourceX:t,sourceY:n,targetX:o,targetY:i});return[`M ${t},${n}L ${o},${i}`,r,s,l,a]}const Fd=$e({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Ld(e);return Ce(eo,{path:n,labelX:o,labelY:i,...t,...e})}}}),Yd=Fd,Xd=$e({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=Do({...e,sourcePosition:e.sourcePosition??ie.Bottom,targetPosition:e.targetPosition??ie.Top});return Ce(eo,{path:n,labelX:o,labelY:i,...t,...e})}}}),ss=Xd,Gd=$e({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>Ce(ss,{...e,...t,borderRadius:0})}}),Ud=Gd,Zd=$e({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=is({...e,sourcePosition:e.sourcePosition??ie.Bottom,targetPosition:e.targetPosition??ie.Top});return Ce(eo,{path:n,labelX:o,labelY:i,...t,...e})}}}),Kd=Zd,qd=$e({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,i]=rs({...e,sourcePosition:e.sourcePosition??ie.Bottom,targetPosition:e.targetPosition??ie.Top});return Ce(eo,{path:n,labelX:o,labelY:i,...t,...e})}}}),jd=qd,Jd={input:Md,default:$d,output:Id},Qd={default:Kd,straight:Yd,step:Ud,smoothstep:ss,simplebezier:jd};function ef(e,t,n){const o=le(()=>S=>t.value.get(S)),i=le(()=>S=>n.value.get(S)),r=le(()=>{const S={...Qd,...e.edgeTypes},N=Object.keys(S);for(const E of e.edges)E.type&&!N.includes(E.type)&&(S[E.type]=E.type);return S}),s=le(()=>{const S={...Jd,...e.nodeTypes},N=Object.keys(S);for(const E of e.nodes)E.type&&!N.includes(E.type)&&(S[E.type]=E.type);return S}),l=le(()=>e.onlyRenderVisibleElements?Wr(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),a=le(()=>{if(e.onlyRenderVisibleElements){const S=[];for(const N of e.edges){const E=t.value.get(N.source),I=t.value.get(N.target);qc({sourcePos:E.computedPosition||{x:0,y:0},targetPos:I.computedPosition||{x:0,y:0},sourceWidth:E.dimensions.width,sourceHeight:E.dimensions.height,targetWidth:I.dimensions.width,targetHeight:I.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&S.push(N)}return S}return e.edges}),u=le(()=>[...l.value,...a.value]),c=le(()=>{const S=[];for(const N of e.nodes)N.selected&&S.push(N);return S}),h=le(()=>{const S=[];for(const N of e.edges)N.selected&&S.push(N);return S}),p=le(()=>[...c.value,...h.value]),y=le(()=>{const S=[];for(const N of e.nodes)N.dimensions.width&&N.dimensions.height&&N.handleBounds!==void 0&&S.push(N);return S}),C=le(()=>l.value.length>0&&y.value.length===l.value.length);return{getNode:o,getEdge:i,getElements:u,getEdgeTypes:r,getNodeTypes:s,getEdges:a,getNodes:l,getSelectedElements:p,getSelectedNodes:c,getSelectedEdges:h,getNodesInitialized:y,areNodesInitialized:C}}class Et{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=Gt())==null?void 0:t.appContext.app,o=n?.config.globalProperties.$vueFlowStorage??Et.instance;return Et.instance=o??new Et,n&&(n.config.globalProperties.$vueFlowStorage=Et.instance),Et.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=ts(),i=ks(o),r={};for(const[p,y]of Object.entries(i.hooks)){const C=`on${p.charAt(0).toUpperCase()+p.slice(1)}`;r[C]=y.on}const s={};for(const[p,y]of Object.entries(i.hooks))s[p]=y.trigger;const l=le(()=>{const p=new Map;for(const y of i.nodes)p.set(y.id,y);return p}),a=le(()=>{const p=new Map;for(const y of i.edges)p.set(y.id,y);return p}),u=ef(i,l,a),c=Ed(i,l,a);c.setState({...i,...n});const h={...r,...u,...c,...Xs(i),nodeLookup:l,edgeLookup:a,emits:s,id:t,vueFlowVersion:"1.48.1",$destroy:()=>{this.remove(t)}};return this.set(t,h),h}getId(){return`vue-flow-${this.currentId++}`}}function Pe(e){const t=Et.getInstance(),n=Ji(),o=typeof e=="object",i=o?e:{id:e},r=i.id,s=r??n?.vueFlowId;let l;if(n){const a=Ut(Li,null);typeof a<"u"&&a!==null&&(!s||a.id===s)&&(l=a)}if(l||s&&(l=t.get(s)),!l||s&&l.id!==s){const a=r??t.getId(),u=t.create(a,i);l=u,(n??Ki(!0)).run(()=>{Ee(u.applyDefault,(h,p,y)=>{const C=N=>{u.applyNodeChanges(N)},S=N=>{u.applyEdgeChanges(N)};h?(u.onNodesChange(C),u.onEdgesChange(S)):(u.hooks.value.nodesChange.off(C),u.hooks.value.edgesChange.off(S)),y(()=>{u.hooks.value.nodesChange.off(C),u.hooks.value.edgesChange.off(S)})},{immediate:!0}),rn(()=>{if(l){const h=t.get(l.id);h?h.$destroy():pn(`No store instance found for id ${l.id} in storage.`)}})})}else o&&l.setState(i);if(n&&(Wt(Li,l),n.vueFlowId=l.id),o){const a=Gt();a?.type.name!=="VueFlow"&&l.emits.error(new He(Be.USEVUEFLOW_OPTIONS))}return l}function tf(e){const{emits:t,dimensions:n}=Pe();let o;ct(()=>{const i=()=>{var r,s;if(!e.value||!(((s=(r=e.value).checkVisibility)==null?void 0:s.call(r))??!0))return;const l=Zn(e.value);(l.width===0||l.height===0)&&t.error(new He(Be.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:l.width||500,height:l.height||500}};i(),window.addEventListener("resize",i),e.value&&(o=new ResizeObserver(()=>i()),o.observe(e.value)),ji(()=>{window.removeEventListener("resize",i),o&&e.value&&o.unobserve(e.value)})})}const nf={name:"UserSelection",compatConfig:{MODE:3}},of=$e({...nf,props:{userSelectionRect:{}},setup(e){return(t,n)=>(V(),X("div",{class:"vue-flow__selection vue-flow__container",style:Ae({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),rf=["tabIndex"],sf={name:"NodesSelection",compatConfig:{MODE:3}},lf=$e({...sf,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:i,disableKeyboardA11y:r,userSelectionActive:s}=Pe(),l=es(),a=ce(null),u=jr({el:a,onStart(C){t.selectionDragStart(C),t.nodeDragStart(C)},onDrag(C){t.selectionDrag(C),t.nodeDrag(C)},onStop(C){t.selectionDragStop(C),t.nodeDragStop(C)}});ct(()=>{var C;r.value||(C=a.value)==null||C.focus({preventScroll:!0})});const c=le(()=>Rr(o.value)),h=le(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function p(C){t.selectionContextMenu({event:C,nodes:o.value})}function y(C){r.value||Rt[C.key]&&(C.preventDefault(),l({x:Rt[C.key].x,y:Rt[C.key].y},C.shiftKey))}return(C,S)=>!d(s)&&c.value.width&&c.value.height?(V(),X("div",{key:0,class:Fe(["vue-flow__nodesselection vue-flow__container",d(i)]),style:Ae({transform:`translate(${d(n).x}px,${d(n).y}px) scale(${d(n).zoom})`})},[O("div",{ref_key:"el",ref:a,class:Fe([{dragging:d(u)},"vue-flow__nodesselection-rect"]),style:Ae(h.value),tabIndex:d(r)?void 0:-1,onContextmenu:p,onKeydown:y},null,46,rf)],6)):Ie("",!0)}});function af(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const uf={name:"Pane",compatConfig:{MODE:3}},cf=$e({...uf,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:i,userSelectionActive:r,removeSelectedElements:s,userSelectionRect:l,elementsSelectable:a,nodesSelectionActive:u,getSelectedEdges:c,getSelectedNodes:h,removeNodes:p,removeEdges:y,selectionMode:C,deleteKeyCode:S,multiSelectionKeyCode:N,multiSelectionActive:E,edgeLookup:I,nodeLookup:f,connectionLookup:_,defaultEdgeOptions:D,connectionStartHandle:B,panOnDrag:A}=Pe(),H=pt(null),ee=pt(new Set),z=pt(new Set),W=pt(null),k=Me(()=>a.value&&(e.isSelecting||r.value)),re=Me(()=>B.value!==null);let x=!1,M=!1;const $=on(S,{actInsideInputWithModifier:!1}),R=on(N);Ee($,Q=>{Q&&(p(h.value),y(c.value),u.value=!1)}),Ee(R,Q=>{E.value=Q});function F(Q,ne){return se=>{se.target===ne&&Q?.(se)}}function Z(Q){if(x||re.value){x=!1;return}i.paneClick(Q),s(),u.value=!1}function G(Q){var ne;if(Array.isArray(A.value)&&((ne=A.value)!=null&&ne.includes(2))){Q.preventDefault();return}i.paneContextMenu(Q)}function te(Q){i.paneScroll(Q)}function ae(Q){var ne,se,we;if(W.value=((ne=t.value)==null?void 0:ne.getBoundingClientRect())??null,!a.value||!e.isSelecting||Q.button!==0||Q.target!==H.value||!W.value)return;(we=(se=Q.target)==null?void 0:se.setPointerCapture)==null||we.call(se,Q.pointerId);const{x:ve,y:ye}=af(Q,W.value);M=!0,x=!1,s(),l.value={width:0,height:0,startX:ve,startY:ye,x:ve,y:ye},i.selectionStart(Q)}function fe(Q){var ne;if(!W.value||!l.value)return;x=!0;const{x:se,y:we}=tt(Q,W.value),{startX:ve=0,startY:ye=0}=l.value,Ne={startX:ve,startY:ye,x:se<ve?se:ve,y:we<ye?we:ye,width:Math.abs(se-ve),height:Math.abs(we-ye)},de=ee.value,me=z.value;ee.value=new Set(Wr(n.value,Ne,o.value,C.value===Wo.Partial,!0).map(v=>v.id)),z.value=new Set;const w=((ne=D.value)==null?void 0:ne.selectable)??!0;for(const v of ee.value){const b=_.value.get(v);if(b)for(const{edgeId:m}of b.values()){const P=I.value.get(m);P&&(P.selectable??w)&&z.value.add(m)}}if(!Wi(de,ee.value)){const v=vt(f.value,ee.value,!0);i.nodesChange(v)}if(!Wi(me,z.value)){const v=vt(I.value,z.value);i.edgesChange(v)}l.value=Ne,r.value=!0,u.value=!1}function ge(Q){var ne;Q.button!==0||!M||((ne=Q.target)==null||ne.releasePointerCapture(Q.pointerId),!r.value&&l.value&&Q.target===H.value&&Z(Q),r.value=!1,l.value=null,u.value=ee.value.size>0,i.selectionEnd(Q),e.selectionKeyPressed&&(x=!1),M=!1)}return(Q,ne)=>(V(),X("div",{ref_key:"container",ref:H,class:Fe(["vue-flow__pane vue-flow__container",{selection:Q.isSelecting}]),onClick:ne[0]||(ne[0]=se=>k.value?void 0:F(Z,H.value)(se)),onContextmenu:ne[1]||(ne[1]=se=>F(G,H.value)(se)),onWheelPassive:ne[2]||(ne[2]=se=>F(te,H.value)(se)),onPointerenter:ne[3]||(ne[3]=se=>k.value?void 0:d(i).paneMouseEnter(se)),onPointerdown:ne[4]||(ne[4]=se=>k.value?ae(se):d(i).paneMouseMove(se)),onPointermove:ne[5]||(ne[5]=se=>k.value?fe(se):d(i).paneMouseMove(se)),onPointerup:ne[6]||(ne[6]=se=>k.value?ge(se):void 0),onPointerleave:ne[7]||(ne[7]=se=>d(i).paneMouseLeave(se))},[Oe(Q.$slots,"default"),d(r)&&d(l)?(V(),ze(of,{key:0,"user-selection-rect":d(l)},null,8,["user-selection-rect"])):Ie("",!0),d(u)&&d(h).length?(V(),ze(lf,{key:1})):Ie("",!0)],34))}}),df={name:"Transform",compatConfig:{MODE:3}},ff=$e({...df,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=Pe(),i=le(()=>n.value?!o.value:!1),r=le(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(s,l)=>(V(),X("div",{class:"vue-flow__transformationpane vue-flow__container",style:Ae({transform:r.value,opacity:i.value?0:void 0})},[Oe(s.$slots,"default")],4))}}),hf={name:"Viewport",compatConfig:{MODE:3}},vf=$e({...hf,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:i,zoomActivationKeyCode:r,selectionKeyCode:s,panActivationKeyCode:l,panOnScroll:a,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:h,zoomOnDoubleClick:p,zoomOnPinch:y,zoomOnScroll:C,preventScrolling:S,noWheelClassName:N,noPanClassName:E,emits:I,connectionStartHandle:f,userSelectionActive:_,paneDragging:D,d3Zoom:B,d3Selection:A,d3ZoomHandler:H,viewport:ee,viewportRef:z,paneClickDistance:W}=Pe();tf(z);const k=pt(!1),re=pt(!1);let x=null,M=!1,$=0,R={x:0,y:0,zoom:0};const F=on(l),Z=on(s),G=on(r),te=Me(()=>(!Z.value||Z.value&&s.value===!0)&&(F.value||h.value)),ae=Me(()=>F.value||a.value),fe=Me(()=>Z.value||s.value===!0&&te.value!==!0),ge=Me(()=>f.value!==null);ct(()=>{if(!z.value){pn("Viewport element is missing");return}const ve=z.value,ye=ve.getBoundingClientRect(),Ne=Ic().clickDistance(W.value).scaleExtent([t.value,n.value]).translateExtent(i.value),de=Ke(ve).call(Ne),me=de.on("wheel.zoom"),w=Yt.translate(o.value.x??0,o.value.y??0).scale(Pt(o.value.zoom??1,t.value,n.value)),v=[[0,0],[ye.width,ye.height]],b=Ne.constrain()(w,v,i.value);Ne.transform(de,b),Ne.wheelDelta(Ci),B.value=Ne,A.value=de,H.value=me,ee.value={x:b.x,y:b.y,zoom:b.k},Ne.on("start",m=>{var P;if(!m.sourceEvent)return null;$=m.sourceEvent.button,k.value=!0;const q=se(m.transform);((P=m.sourceEvent)==null?void 0:P.type)==="mousedown"&&(D.value=!0),R=q,I.viewportChangeStart(q),I.moveStart({event:m,flowTransform:q})}),Ne.on("end",m=>{if(!m.sourceEvent)return null;if(k.value=!1,D.value=!1,Q(te.value,$??0)&&!M&&I.paneContextMenu(m.sourceEvent),M=!1,ne(R,m.transform)){const P=se(m.transform);R=P,I.viewportChangeEnd(P),I.moveEnd({event:m,flowTransform:P})}}),Ne.filter(m=>{var P;const q=G.value||C.value,j=y.value&&m.ctrlKey,J=m.button,oe=m.type==="wheel";if(J===1&&m.type==="mousedown"&&(we(m,"vue-flow__node")||we(m,"vue-flow__edge")))return!0;if(!te.value&&!q&&!ae.value&&!p.value&&!y.value||_.value||ge.value&&!oe||!p.value&&m.type==="dblclick"||we(m,N.value)&&oe||we(m,E.value)&&(!oe||ae.value&&oe&&!G.value)||!y.value&&m.ctrlKey&&oe||!q&&!ae.value&&!j&&oe)return!1;if(!y&&m.type==="touchstart"&&((P=m.touches)==null?void 0:P.length)>1)return m.preventDefault(),!1;if(!te.value&&(m.type==="mousedown"||m.type==="touchstart")||s.value===!0&&Array.isArray(h.value)&&h.value.includes(0)&&J===0||Array.isArray(h.value)&&!h.value.includes(J)&&(m.type==="mousedown"||m.type==="touchstart"))return!1;const he=Array.isArray(h.value)&&h.value.includes(J)||s.value===!0&&Array.isArray(h.value)&&!h.value.includes(0)||!J||J<=1;return(!m.ctrlKey||F.value||oe)&&he}),Ee([_,te],()=>{_.value&&!k.value?Ne.on("zoom",null):_.value||Ne.on("zoom",m=>{ee.value={x:m.transform.x,y:m.transform.y,zoom:m.transform.k};const P=se(m.transform);M=Q(te.value,$??0),I.viewportChange(P),I.move({event:m,flowTransform:P})})},{immediate:!0}),Ee([_,ae,u,G,y,S,N],()=>{ae.value&&!G.value&&!_.value?de.on("wheel.zoom",m=>{if(we(m,N.value))return!1;const P=G.value||C.value,q=y.value&&m.ctrlKey;if(!(!S.value||ae.value||P||q))return!1;m.preventDefault(),m.stopImmediatePropagation();const J=de.property("__zoom").k||1,oe=Ln();if(!F.value&&m.ctrlKey&&y.value&&oe){const yt=Qe(m),wt=Ci(m),to=J*2**wt;Ne.scaleTo(de,to,yt,m);return}const he=m.deltaMode===1?20:1;let _e=u.value===nn.Vertical?0:m.deltaX*he,xe=u.value===nn.Horizontal?0:m.deltaY*he;!oe&&m.shiftKey&&u.value!==nn.Vertical&&!_e&&xe&&(_e=xe,xe=0),Ne.translateBy(de,-(_e/J)*c.value,-(xe/J)*c.value);const Ue=se(de.property("__zoom"));x&&clearTimeout(x),re.value?(I.move({event:m,flowTransform:Ue}),I.viewportChange(Ue),x=setTimeout(()=>{I.moveEnd({event:m,flowTransform:Ue}),I.viewportChangeEnd(Ue),re.value=!1},150)):(re.value=!0,I.moveStart({event:m,flowTransform:Ue}),I.viewportChangeStart(Ue))},{passive:!1}):typeof me<"u"&&de.on("wheel.zoom",function(m,P){const q=!S.value&&m.type==="wheel"&&!m.ctrlKey,j=G.value||C.value,J=y.value&&m.ctrlKey;if(!j&&!a.value&&!J&&m.type==="wheel"||q||we(m,N.value))return null;m.preventDefault(),me.call(this,m,P)},{passive:!1})},{immediate:!0})});function Q(ve,ye){return ye===2&&Array.isArray(ve)&&ve.includes(2)}function ne(ve,ye){return ve.x!==ye.x&&!Number.isNaN(ye.x)||ve.y!==ye.y&&!Number.isNaN(ye.y)||ve.zoom!==ye.k&&!Number.isNaN(ye.k)}function se(ve){return{x:ve.x,y:ve.y,zoom:ve.k}}function we(ve,ye){return ve.target.closest(`.${ye}`)}return(ve,ye)=>(V(),X("div",{ref_key:"viewportRef",ref:z,class:"vue-flow__viewport vue-flow__container"},[L(cf,{"is-selecting":fe.value,"selection-key-pressed":d(Z),class:Fe({connecting:ge.value,dragging:d(D),draggable:d(h)===!0||Array.isArray(d(h))&&d(h).includes(0)})},{default:U(()=>[L(ff,null,{default:U(()=>[Oe(ve.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),pf=["id"],gf=["id"],mf=["id"],yf={name:"A11yDescriptions",compatConfig:{MODE:3}},wf=$e({...yf,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Pe();return(i,r)=>(V(),X(Se,null,[O("div",{id:`${d(Dr)}-${d(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+ke(d(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,pf),O("div",{id:`${d(Tr)}-${d(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,gf),d(n)?Ie("",!0):(V(),X("div",{key:0,id:`${d(Oc)}-${d(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},ke(d(o)),9,mf))],64))}});function _f(){const e=Pe();Ee(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function bf(e,t,n){return n===ie.Left?e-t:n===ie.Right?e+t:e}function xf(e,t,n){return n===ie.Top?e-t:n===ie.Bottom?e+t:e}const Yo=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=ie.Top,type:i}){return Ce("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:bf(t,e,o),cy:xf(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};Yo.props=["radius","centerX","centerY","position","type"];Yo.compatConfig={MODE:3};const Ui=Yo,kf=$e({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:r,nodesSelectionActive:s,noPanClassName:l,getEdgeTypes:a,removeSelectedEdges:u,findEdge:c,findNode:h,isValidConnection:p,multiSelectionActive:y,disableKeyboardA11y:C,elementsSelectable:S,edgesUpdatable:N,edgesFocusable:E,hooks:I}=Pe(),f=le(()=>c(e.id)),{emit:_,on:D}=fd(f.value,r),B=Ut(qn),A=Gt(),H=ce(!1),ee=ce(!1),z=ce(""),W=ce(null),k=ce("source"),re=ce(null),x=Me(()=>typeof f.value.selectable>"u"?S.value:f.value.selectable),M=Me(()=>typeof f.value.updatable>"u"?N.value:f.value.updatable),$=Me(()=>typeof f.value.focusable>"u"?E.value:f.value.focusable);Wt(ud,e.id),Wt(cd,re);const R=le(()=>f.value.class instanceof Function?f.value.class(f.value):f.value.class),F=le(()=>f.value.style instanceof Function?f.value.style(f.value):f.value.style),Z=le(()=>{const v=f.value.type||"default",b=B?.[`edge-${v}`];if(b)return b;let m=f.value.template??a.value[v];if(typeof m=="string"&&A){const P=Object.keys(A.appContext.components);P&&P.includes(v)&&(m=Qi(v,!1))}return m&&typeof m!="string"?m:(r.error(new He(Be.EDGE_TYPE_MISSING,m)),!1)}),{handlePointerDown:G}=Jr({nodeId:z,handleId:W,type:k,isValidConnection:p,edgeUpdaterType:k,onEdgeUpdate:fe,onEdgeUpdateEnd:ge});return()=>{const v=h(f.value.source),b=h(f.value.target),m="pathOptions"in f.value?f.value.pathOptions:{};if(!v&&!b)return r.error(new He(Be.EDGE_SOURCE_TARGET_MISSING,f.value.id,f.value.source,f.value.target)),null;if(!v)return r.error(new He(Be.EDGE_SOURCE_MISSING,f.value.id,f.value.source)),null;if(!b)return r.error(new He(Be.EDGE_TARGET_MISSING,f.value.id,f.value.target)),null;if(!f.value||f.value.hidden||v.hidden||b.hidden)return null;let P;o.value===gt.Strict?P=v.handleBounds.source:P=[...v.handleBounds.source||[],...v.handleBounds.target||[]];const q=Oi(P,f.value.sourceHandle);let j;o.value===gt.Strict?j=b.handleBounds.target:j=[...b.handleBounds.target||[],...b.handleBounds.source||[]];const J=Oi(j,f.value.targetHandle),oe=q?.position||ie.Bottom,he=J?.position||ie.Top,{x:_e,y:xe}=Xt(v,q,oe),{x:Ue,y:yt}=Xt(b,J,he);return f.value.sourceX=_e,f.value.sourceY=xe,f.value.targetX=Ue,f.value.targetY=yt,Ce("g",{ref:re,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${Z.value===!1?"default":f.value.type||"default"}`,l.value,R.value,{updating:H.value,selected:f.value.selected,animated:f.value.animated,inactive:!x.value&&!I.value.edgeClick.hasListeners()}],tabIndex:$.value?0:void 0,"aria-label":f.value.ariaLabel===null?void 0:f.value.ariaLabel??`Edge from ${f.value.source} to ${f.value.target}`,"aria-describedby":$.value?`${Tr}-${t}`:void 0,"aria-roledescription":"edge",role:$.value?"group":"img",...f.value.domAttributes,onClick:ne,onContextmenu:se,onDblclick:we,onMouseenter:ve,onMousemove:ye,onMouseleave:Ne,onKeyDown:$.value?w:void 0},[ee.value?null:Ce(Z.value===!1?a.value.default:Z.value,{id:e.id,sourceNode:v,targetNode:b,source:f.value.source,target:f.value.target,type:f.value.type,updatable:M.value,selected:f.value.selected,animated:f.value.animated,label:f.value.label,labelStyle:f.value.labelStyle,labelShowBg:f.value.labelShowBg,labelBgStyle:f.value.labelBgStyle,labelBgPadding:f.value.labelBgPadding,labelBgBorderRadius:f.value.labelBgBorderRadius,data:f.value.data,events:{...f.value.events,...D},style:F.value,markerStart:`url('#${fn(f.value.markerStart,t)}')`,markerEnd:`url('#${fn(f.value.markerEnd,t)}')`,sourcePosition:oe,targetPosition:he,sourceX:_e,sourceY:xe,targetX:Ue,targetY:yt,sourceHandleId:f.value.sourceHandle,targetHandleId:f.value.targetHandle,interactionWidth:f.value.interactionWidth,...m}),[M.value==="source"||M.value===!0?[Ce("g",{onMousedown:de,onMouseenter:te,onMouseout:ae},Ce(Ui,{position:oe,centerX:_e,centerY:xe,radius:i.value,type:"source","data-type":"source"}))]:null,M.value==="target"||M.value===!0?[Ce("g",{onMousedown:me,onMouseenter:te,onMouseout:ae},Ce(Ui,{position:he,centerX:Ue,centerY:yt,radius:i.value,type:"target","data-type":"target"}))]:null]])};function te(){H.value=!0}function ae(){H.value=!1}function fe(v,b){_.update({event:v,edge:f.value,connection:b})}function ge(v){_.updateEnd({event:v,edge:f.value}),ee.value=!1}function Q(v,b){v.button===0&&(ee.value=!0,z.value=b?f.value.target:f.value.source,W.value=(b?f.value.targetHandle:f.value.sourceHandle)??null,k.value=b?"target":"source",_.updateStart({event:v,edge:f.value}),G(v))}function ne(v){var b;const m={event:v,edge:f.value};x.value&&(s.value=!1,f.value.selected&&y.value?(u([f.value]),(b=re.value)==null||b.blur()):n([f.value])),_.click(m)}function se(v){_.contextMenu({event:v,edge:f.value})}function we(v){_.doubleClick({event:v,edge:f.value})}function ve(v){_.mouseEnter({event:v,edge:f.value})}function ye(v){_.mouseMove({event:v,edge:f.value})}function Ne(v){_.mouseLeave({event:v,edge:f.value})}function de(v){Q(v,!0)}function me(v){Q(v,!1)}function w(v){var b;!C.value&&zr.includes(v.key)&&x.value&&(v.key==="Escape"?((b=re.value)==null||b.blur(),u([c(e.id)])):n([c(e.id)]))}}}),Sf=kf,Ef=$e({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:i,connectionPosition:r,connectionLineType:s,connectionLineStyle:l,connectionLineOptions:a,connectionStatus:u,viewport:c,findNode:h}=Pe(),p=(e=Ut(qn))==null?void 0:e["connection-line"],y=le(()=>{var I;return h((I=o.value)==null?void 0:I.nodeId)}),C=le(()=>{var I;return h((I=i.value)==null?void 0:I.nodeId)??null}),S=le(()=>({x:(r.value.x-c.value.x)/c.value.zoom,y:(r.value.y-c.value.y)/c.value.zoom})),N=le(()=>a.value.markerStart?`url(#${fn(a.value.markerStart,t)})`:""),E=le(()=>a.value.markerEnd?`url(#${fn(a.value.markerEnd,t)})`:"");return()=>{var I,f,_;if(!y.value||!o.value)return null;const D=o.value.id,B=o.value.type,A=y.value.handleBounds;let H=A?.[B]??[];if(n.value===gt.Loose){const F=A?.[B==="source"?"target":"source"]??[];H=[...H,...F]}if(!H)return null;const ee=(D?H.find(F=>F.id===D):H[0])??null,z=ee?.position??ie.Top,{x:W,y:k}=Xt(y.value,ee,z);let re=null;C.value&&(n.value===gt.Strict?re=((I=C.value.handleBounds[B==="source"?"target":"source"])==null?void 0:I.find(F=>{var Z;return F.id===((Z=i.value)==null?void 0:Z.id)}))||null:re=((f=[...C.value.handleBounds.source??[],...C.value.handleBounds.target??[]])==null?void 0:f.find(F=>{var Z;return F.id===((Z=i.value)==null?void 0:Z.id)}))||null);const x=((_=i.value)==null?void 0:_.position)??(z?Mo[z]:null);if(!z||!x)return null;const M=s.value??a.value.type??St.Bezier;let $="";const R={sourceX:W,sourceY:k,sourcePosition:z,targetX:S.value.x,targetY:S.value.y,targetPosition:x};return M===St.Bezier?[$]=is(R):M===St.Step?[$]=Do({...R,borderRadius:0}):M===St.SmoothStep?[$]=Do(R):M===St.SimpleBezier?[$]=rs(R):$=`M${W},${k} ${S.value.x},${S.value.y}`,Ce("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Ce("g",{class:"vue-flow__connection"},p?Ce(p,{sourceX:W,sourceY:k,sourcePosition:z,targetX:S.value.x,targetY:S.value.y,targetPosition:x,sourceNode:y.value,sourceHandle:ee,targetNode:C.value,targetHandle:re,markerEnd:E.value,markerStart:N.value,connectionStatus:u.value}):Ce("path",{d:$,class:[a.value.class,u.value,"vue-flow__connection-path"],style:{...l.value,...a.value.style},"marker-end":E.value,"marker-start":N.value})))}}}),Nf=Ef,Cf=["id","markerWidth","markerHeight","markerUnits","orient"],$f={name:"MarkerType",compatConfig:{MODE:3}},If=$e({...$f,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(V(),X("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===d($o).ArrowClosed?(V(),X("polyline",{key:0,style:Ae({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):Ie("",!0),t.type===d($o).Arrow?(V(),X("polyline",{key:1,style:Ae({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):Ie("",!0)],8,Cf))}}),Mf={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},Pf={name:"MarkerDefinitions",compatConfig:{MODE:3}},Df=$e({...Pf,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:i}=Pe(),r=le(()=>{const s=new Set,l=[],a=u=>{if(u){const c=fn(u,t);s.has(c)||(typeof u=="object"?l.push({...u,id:c,color:u.color||i.value}):l.push({id:c,color:i.value,type:u}),s.add(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])a(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])a(c);return l.sort((u,c)=>u.id.localeCompare(c.id))});return(s,l)=>(V(),X("svg",Mf,[O("defs",null,[(V(!0),X(Se,null,De(r.value,a=>(V(),ze(If,{id:a.id,key:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,"stroke-width":a.strokeWidth,orient:a.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),Tf={name:"Edges",compatConfig:{MODE:3}},zf=$e({...Tf,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=Pe();return(i,r)=>(V(),X(Se,null,[L(Df),(V(!0),X(Se,null,De(d(n),s=>(V(),X("svg",{key:s.id,class:"vue-flow__edges vue-flow__container",style:Ae({zIndex:d(jc)(s,d(t),d(o))})},[L(d(Sf),{id:s.id},null,8,["id"])],4))),128)),L(d(Nf))],64))}}),Of=$e({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:i,multiSelectionActive:r,emits:s,removeSelectedNodes:l,addSelectedNodes:a,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:h,nodeExtent:p,elevateNodesOnSelect:y,disableKeyboardA11y:C,ariaLiveMessage:S,snapToGrid:N,snapGrid:E,nodeDragThreshold:I,nodesDraggable:f,elementsSelectable:_,nodesConnectable:D,nodesFocusable:B,hooks:A}=Pe(),H=ce(null);Wt(qr,H),Wt(Kr,e.id);const ee=Ut(qn),z=Gt(),W=es(),{node:k,parentNode:re}=Qr(e.id),{emit:x,on:M}=gd(k,s),$=Me(()=>typeof k.draggable>"u"?f.value:k.draggable),R=Me(()=>typeof k.selectable>"u"?_.value:k.selectable),F=Me(()=>typeof k.connectable>"u"?D.value:k.connectable),Z=Me(()=>typeof k.focusable>"u"?B.value:k.focusable),G=le(()=>R.value||$.value||A.value.nodeClick.hasListeners()||A.value.nodeDoubleClick.hasListeners()||A.value.nodeMouseEnter.hasListeners()||A.value.nodeMouseMove.hasListeners()||A.value.nodeMouseLeave.hasListeners()),te=Me(()=>!!k.dimensions.width&&!!k.dimensions.height),ae=le(()=>{const b=k.type||"default",m=ee?.[`node-${b}`];if(m)return m;let P=k.template||h.value[b];if(typeof P=="string"&&z){const q=Object.keys(z.appContext.components);q&&q.includes(b)&&(P=Qi(b,!1))}return P&&typeof P!="string"?P:(s.error(new He(Be.NODE_TYPE_MISSING,P)),!1)}),fe=jr({id:e.id,el:H,disabled:()=>!$.value,selectable:R,dragHandle:()=>k.dragHandle,onStart(b){x.dragStart(b)},onDrag(b){x.drag(b)},onStop(b){x.dragStop(b)},onClick(b){w(b)}}),ge=le(()=>k.class instanceof Function?k.class(k):k.class),Q=le(()=>{const b=(k.style instanceof Function?k.style(k):k.style)||{},m=k.width instanceof Function?k.width(k):k.width,P=k.height instanceof Function?k.height(k):k.height;return!b.width&&m&&(b.width=typeof m=="string"?m:`${m}px`),!b.height&&P&&(b.height=typeof P=="string"?P:`${P}px`),b}),ne=Me(()=>Number(k.zIndex??Q.value.zIndex??0));return c(b=>{(b.includes(e.id)||!b.length)&&we()}),ct(()=>{Ee(()=>k.hidden,(b=!1,m,P)=>{!b&&H.value&&(e.resizeObserver.observe(H.value),P(()=>{H.value&&e.resizeObserver.unobserve(H.value)}))},{immediate:!0,flush:"post"})}),Ee([()=>k.type,()=>k.sourcePosition,()=>k.targetPosition],()=>{at(()=>{u([{id:e.id,nodeElement:H.value,forceUpdate:!0}])})}),Ee([()=>k.position.x,()=>k.position.y,()=>{var b;return(b=re.value)==null?void 0:b.computedPosition.x},()=>{var b;return(b=re.value)==null?void 0:b.computedPosition.y},()=>{var b;return(b=re.value)==null?void 0:b.computedPosition.z},ne,()=>k.selected,()=>k.dimensions.height,()=>k.dimensions.width,()=>{var b;return(b=re.value)==null?void 0:b.dimensions.height},()=>{var b;return(b=re.value)==null?void 0:b.dimensions.width}],([b,m,P,q,j,J])=>{const oe={x:b,y:m,z:J+(y.value&&k.selected?1e3:0)};typeof P<"u"&&typeof q<"u"?k.computedPosition=Xc({x:P,y:q,z:j},oe):k.computedPosition=oe},{flush:"post",immediate:!0}),Ee([()=>k.extent,p],([b,m],[P,q])=>{(b!==P||m!==q)&&se()}),k.extent==="parent"||typeof k.extent=="object"&&"range"in k.extent&&k.extent.range==="parent"?wo(()=>te).toBe(!0).then(se):se(),()=>k.hidden?null:Ce("div",{ref:H,"data-id":k.id,class:["vue-flow__node",`vue-flow__node-${ae.value===!1?"default":k.type||"default"}`,{[n.value]:$.value,dragging:fe?.value,draggable:$.value,selected:k.selected,selectable:R.value,parent:k.isParent},ge.value],style:{visibility:te.value?"visible":"hidden",zIndex:k.computedPosition.z??ne.value,transform:`translate(${k.computedPosition.x}px,${k.computedPosition.y}px)`,pointerEvents:G.value?"all":"none",...Q.value},tabIndex:Z.value?0:void 0,role:Z.value?"group":void 0,"aria-describedby":C.value?void 0:`${Dr}-${t}`,"aria-label":k.ariaLabel,"aria-roledescription":"node",...k.domAttributes,onMouseenter:ve,onMousemove:ye,onMouseleave:Ne,onContextmenu:de,onClick:w,onDblclick:me,onKeydown:v},[Ce(ae.value===!1?h.value.default:ae.value,{id:k.id,type:k.type,data:k.data,events:{...k.events,...M},selected:k.selected,resizing:k.resizing,dragging:fe.value,connectable:F.value,position:k.computedPosition,dimensions:k.dimensions,isValidTargetPos:k.isValidTargetPos,isValidSourcePos:k.isValidSourcePos,parent:k.parentNode,parentNodeId:k.parentNode,zIndex:k.computedPosition.z??ne.value,targetPosition:k.targetPosition,sourcePosition:k.sourcePosition,label:k.label,dragHandle:k.dragHandle,onUpdateNodeInternals:we})]);function se(){const b=k.computedPosition,{computedPosition:m,position:P}=Lo(k,N.value?Kn(b,E.value):b,s.error,p.value,re.value);(k.computedPosition.x!==m.x||k.computedPosition.y!==m.y)&&(k.computedPosition={...k.computedPosition,...m}),(k.position.x!==P.x||k.position.y!==P.y)&&(k.position=P)}function we(){H.value&&u([{id:e.id,nodeElement:H.value,forceUpdate:!0}])}function ve(b){fe?.value||x.mouseEnter({event:b,node:k})}function ye(b){fe?.value||x.mouseMove({event:b,node:k})}function Ne(b){fe?.value||x.mouseLeave({event:b,node:k})}function de(b){return x.contextMenu({event:b,node:k})}function me(b){return x.doubleClick({event:b,node:k})}function w(b){R.value&&(!o.value||!$.value||I.value>0)&&Po(k,r.value,a,l,i,!1,H.value),x.click({event:b,node:k})}function v(b){if(!(Io(b)||C.value))if(zr.includes(b.key)&&R.value){const m=b.key==="Escape";Po(k,r.value,a,l,i,m,H.value)}else $.value&&k.selected&&Rt[b.key]&&(b.preventDefault(),S.value=`Moved selected node ${b.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~k.position.x}, y: ${~~k.position.y}`,W({x:Rt[b.key].x,y:Rt[b.key].y},b.shiftKey))}}}),Af=Of;function Vf(e={includeHiddenNodes:!1}){const{nodes:t}=Pe();return le(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&(n?.handleBounds===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const Bf={class:"vue-flow__nodes vue-flow__container"},Hf={name:"Nodes",compatConfig:{MODE:3}},Rf=$e({...Hf,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=Pe(),i=Vf(),r=ce();return Ee(i,s=>{s&&at(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),ct(()=>{r.value=new ResizeObserver(s=>{const l=s.map(a=>({id:a.target.getAttribute("data-id"),nodeElement:a.target,forceUpdate:!0}));at(()=>n(l))})}),ji(()=>{var s;return(s=r.value)==null?void 0:s.disconnect()}),(s,l)=>(V(),X("div",Bf,[r.value?(V(!0),X(Se,{key:0},De(d(t),(a,u,c,h)=>{const p=[a.id];if(h&&h.key===a.id&&Es(h,p))return h;const y=(V(),ze(d(Af),{id:a.id,key:a.id,"resize-observer":r.value},null,8,["id","resize-observer"]));return y.memo=p,y},l,0),128)):Ie("",!0)]))}});function Wf(){const{emits:e}=Pe();ct(()=>{if(Zr()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new He(Be.MISSING_STYLES))}})}const Lf=O("div",{class:"vue-flow__edge-labels"},null,-1),Ff={name:"VueFlow",compatConfig:{MODE:3}},Yf=$e({...Ff,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=xs(),r=ro(o,"modelValue",n),s=ro(o,"nodes",n),l=ro(o,"edges",n),a=Pe(o),u=_d({modelValue:r,nodes:s,edges:l},o,a);return xd(n,a.hooks),_f(),Wf(),Wt(qn,i),qi(u),t(a),(c,h)=>(V(),X("div",{ref:d(a).vueFlowRef,class:"vue-flow"},[L(vf,null,{default:U(()=>[L(zf),Lf,L(Rf),Oe(c.$slots,"zoom-pane")]),_:3}),Oe(c.$slots,"default"),L(wf)],512))}}),Xf={name:"Panel",compatConfig:{MODE:3}},Gf=$e({...Xf,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=Pe(),o=le(()=>`${t.position}`.split("-"));return(i,r)=>(V(),X("div",{class:Fe(["vue-flow__panel",o.value]),style:Ae({pointerEvents:d(n)?"none":"all"})},[Oe(i.$slots,"default")],6))}}),Uf={name:"ControlButton",compatConfig:{MODE:3}},Zf=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n},Kf={type:"button",class:"vue-flow__controls-button"};function qf(e,t,n,o,i,r){return V(),X("button",Kf,[Oe(e.$slots,"default")])}const En=Zf(Uf,[["render",qf]]),jf={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Jf=O("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),Qf=[Jf];function eh(e,t){return V(),X("svg",jf,Qf)}const th={render:eh},nh={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},oh=O("path",{d:"M0 0h32v4.2H0z"},null,-1),ih=[oh];function rh(e,t){return V(),X("svg",nh,ih)}const sh={render:rh},lh={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ah=O("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),uh=[ah];function ch(e,t){return V(),X("svg",lh,uh)}const dh={render:ch},fh={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},hh=O("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),vh=[hh];function ph(e,t){return V(),X("svg",fh,vh)}const gh={render:ph},mh={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},yh=O("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),wh=[yh];function _h(e,t){return V(),X("svg",mh,wh)}const bh={render:_h},xh={name:"Controls",compatConfig:{MODE:3}},kh=$e({...xh,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>Pr.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:o,elementsSelectable:i,setInteractive:r,zoomIn:s,zoomOut:l,fitView:a,viewport:u,minZoom:c,maxZoom:h}=Pe(),p=Me(()=>n.value||o.value||i.value),y=Me(()=>u.value.zoom<=c.value),C=Me(()=>u.value.zoom>=h.value);function S(){s(),t("zoomIn")}function N(){l(),t("zoomOut")}function E(){a(e.fitViewParams),t("fitView")}function I(){r(!p.value),t("interactionChange",!p.value)}return(f,_)=>(V(),ze(d(Gf),{class:"vue-flow__controls",position:f.position},{default:U(()=>[Oe(f.$slots,"top"),f.showZoom?(V(),X(Se,{key:0},[Oe(f.$slots,"control-zoom-in",{},()=>[L(En,{class:"vue-flow__controls-zoomin",disabled:C.value,onClick:S},{default:U(()=>[Oe(f.$slots,"icon-zoom-in",{},()=>[(V(),ze(Ot(d(th))))])]),_:3},8,["disabled"])]),Oe(f.$slots,"control-zoom-out",{},()=>[L(En,{class:"vue-flow__controls-zoomout",disabled:y.value,onClick:N},{default:U(()=>[Oe(f.$slots,"icon-zoom-out",{},()=>[(V(),ze(Ot(d(sh))))])]),_:3},8,["disabled"])])],64)):Ie("",!0),f.showFitView?Oe(f.$slots,"control-fit-view",{key:1},()=>[L(En,{class:"vue-flow__controls-fitview",onClick:E},{default:U(()=>[Oe(f.$slots,"icon-fit-view",{},()=>[(V(),ze(Ot(d(dh))))])]),_:3})]):Ie("",!0),f.showInteractive?Oe(f.$slots,"control-interactive",{key:2},()=>[f.showInteractive?(V(),ze(En,{key:0,class:"vue-flow__controls-interactive",onClick:I},{default:U(()=>[p.value?Oe(f.$slots,"icon-unlock",{key:0},()=>[(V(),ze(Ot(d(bh))))]):Ie("",!0),p.value?Ie("",!0):Oe(f.$slots,"icon-lock",{key:1},()=>[(V(),ze(Ot(d(gh))))])]),_:3})):Ie("",!0)]):Ie("",!0),Oe(f.$slots,"default")]),_:3},8,["position"]))}}),At={async getPathList(){const{data:e}=await Kt.get("/workPath/getWorkPathList");return e},async createPath(e){const{data:t}=await Kt.post("/workPath/createWorkPath",e);return t},async updateWorkPath(e,t){await Kt.put(`/workPath/updateWorkPath/${e}`,{edges:t})},async optimizeWorkPath(e){await Kt.put(`/workPath/optimizeWorkPath/${e}`)},async deleteWorkPath(e){await Kt.delete(`/workPath/deleteWorkPath/${e}`)}};function Sh(e){const t={width:`${e.width}px`,height:`${e.height}px`,overflow:"visible",whiteSpace:"nowrap"};return e.isWorkingOnHoliday||(t.backgroundColor="#f3f4f6",t.borderColor="#d1d5db"),{id:`work-${e.workId}`,type:"default",position:{x:e.positionX,y:e.positionY},data:{label:e.workName,work:e,originalX:e.positionX},style:t,sourcePosition:ie.Right,targetPosition:ie.Left,connectable:!0}}function Eh(e){return e.map(t=>Sh(t))}function Nh(e){const t=new Date,n=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,o=ce({division_id:"",work_type_id:"",sub_work_type_id:"",component_type_ids:[],zone_id:"",floor_id:"",section_id:"",usage_id:"",start_date:n,work_days:7,isWorkingOnHoliday:!0}),i=ce([]),r=ce([]),s=ce([]),l=ce([]),a=ce({zone:[],floor:[],section:[],usage:[]}),u=ce([]),c=ce(!1),h=ce(!1),p=ce(!1),y=async()=>{const{start_date:E,work_days:I,sub_work_type_id:f,component_type_ids:_,zone_id:D,floor_id:B,section_id:A,usage_id:H,isWorkingOnHoliday:ee}=o.value;if(!f)return alert(" ."),!1;if(!E)return alert(" ."),!1;c.value=!0;try{const z={subWorkTypeId:Number(f),..._.length>0&&{componentTypeIds:_.map(Number)},startDate:E,workLeadTime:I,isWorkingOnHoliday:ee,...D&&D!=="none"&&{zoneId:Number(D)},...B&&B!=="none"&&{floorId:Number(B)},...A&&A!=="none"&&{sectionId:Number(A)},...H&&H!=="none"&&{usageId:Number(H)}};return await Vt.createWork(z),await e(),!0}catch(z){console.error("  :",z);const W=z,k=W.response?.data?.message||W.message;return alert(k),!1}finally{c.value=!1}},C=async()=>{try{const[E,I,f,_,D,B,A]=await Promise.all([dt.getDivisionList(),dt.getZoneList(),dt.getFloorList(),dt.getSectionList(),dt.getUsageList(),As.getProjects(),dt.getComponentTypeList()]);i.value=E,u.value=B,l.value=A,a.value={zone:I,floor:f,section:_,usage:D}}catch(E){console.error("   :",E)}},S=async E=>{h.value=!0,r.value=[],s.value=[],o.value.work_type_id="",o.value.sub_work_type_id="";try{r.value=await dt.getWorkTypeList(E)}catch(I){console.error("WorkTypes  :",I)}finally{h.value=!1}},N=async E=>{p.value=!0,s.value=[],o.value.sub_work_type_id="";try{s.value=await dt.getSubWorkTypeList(E)}catch(I){console.error("SubWorkTypes  :",I)}finally{p.value=!1}};return Ee(()=>o.value.division_id,E=>{E?S(Number(E)):(r.value=[],s.value=[],o.value.work_type_id="",o.value.sub_work_type_id="")}),Ee(()=>o.value.work_type_id,E=>{E?N(Number(E)):(s.value=[],o.value.sub_work_type_id="")}),{workFormState:o,divisions:i,workTypes:r,subWorkTypes:s,componentTypes:l,locationOptions:a,projects:u,isCreatingWork:c,isLoadingWorkTypes:h,isLoadingSubWorkTypes:p,createWork:y,loadInitialData:C}}function Ch(e){return e.isActivated?e.isHoliday?"holiday":"normal":"deactivated"}const $h=["","","","","","",""],Te=40,Je=20,Zi=Je*5;function mo(e,t,n){if(e.length===0)return[];const o=[];let i=e[0][t],r=e[0].dayIndex,s=1;for(let l=1;l<e.length;l++){const a=e[l];a[t]===i?s++:(o.push({startIndex:r,span:s,label:n(e[l-1])}),i=a[t],r=a.dayIndex,s=1)}return o.push({startIndex:r,span:s,label:n(e[e.length-1])}),o}function Ih(e,t,n){const o=new Date(e.date),i=Ch(e);return{date:o,dateString:e.date,dayIndex:t,dayOfMonth:o.getDate(),dayName:$h[e.dayOfWeek],isHoliday:i==="holiday",holidayName:e.holidayName,isDeactivated:i==="deactivated",deactivatedReason:e.deactivatedReason,isToday:e.date===n,year:o.getFullYear(),month:o.getMonth()+1,weekNumber:e.weekNumber}}function Mh(e,t){const n=ce(null),o=ce(0);let i=null;const r=new Date,s=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,l=le(()=>{if(!t.value?.dates.length)return 0;const f=t.value.dates.findIndex(_=>_.date===s);return f>=0?f:0}),a=le(()=>t.value?.dates.length?t.value.dates.map((f,_)=>{const D=_-l.value;return Ih(f,D,s)}):[]),u=le(()=>{if(!o.value||a.value.length===0)return[];const f=e.value,_=-f.x/f.zoom,D=_+o.value/f.zoom,B=Math.floor(_/Te),A=Math.ceil(D/Te);return a.value.filter(H=>H.dayIndex>=B&&H.dayIndex<=A)}),c=le(()=>{if(a.value.length===0)return{startX:0,endX:0,width:0};const f=a.value[0],_=a.value[a.value.length-1],D=f.dayIndex*Te,B=(_.dayIndex+1)*Te;return{startX:D,endX:B,width:B-D}}),h=le(()=>mo(u.value,"year",f=>`${f.year}`)),p=le(()=>mo(u.value,"month",f=>`${f.month}`)),y=le(()=>mo(u.value,"weekNumber",f=>`W${f.weekNumber}`)),C=le(()=>a.value.filter(f=>f.isHoliday).map(f=>f.dayIndex)),S=le(()=>a.value.filter(f=>f.isDeactivated).map(f=>f.dayIndex)),N=le(()=>{const f=a.value.find(_=>_.isToday);return f?f.dayIndex:null});return{containerRef:n,containerWidth:o,allProjectDates:a,visibleDates:u,projectGridBounds:c,yearCells:h,monthCells:p,weekCells:y,holidayIndices:C,deactivatedIndices:S,todayInProject:N,setupResizeObserver:()=>{n.value&&(i=new ResizeObserver(f=>{const _=f[0];_&&(o.value=_.contentRect.width)}),i.observe(n.value))},cleanupResizeObserver:()=>{i&&(i.disconnect(),i=null)}}}function Ph(e){if(e.length===0)return[];const t=new Set(e.map(l=>l.sourceWorkId)),n=new Set(e.map(l=>l.targetWorkId));let o=null;for(const l of t)if(!n.has(l)){o=l;break}o||(o=e[0].sourceWorkId);const i=new Map(e.map(l=>[l.sourceWorkId,l.targetWorkId])),r=[o];let s=o;for(;i.has(s);){const l=i.get(s);if(r.includes(l))break;r.push(l),s=l}return r}function Dh(e){const t=[];for(let n=0;n<e.length-1;n++)t.push({sourceWorkId:e[n],targetWorkId:e[n+1]});return t}function Th(e,t,n,o){const i=ce(null),r=ce([]),s=ce(!1),l=le(()=>i.value!==null),a=le(()=>i.value?n.value.find(_=>_.workPathId===i.value)?.workPathColor||"#3b82f6":null),u=le(()=>{if(r.value.length===0)return[];const f=new Set(r.value.map(z=>z.sourceWorkId)),_=new Set(r.value.map(z=>z.targetWorkId));let D=null;for(const z of f)if(!_.has(z)){D=z;break}if(D===null&&r.value.length>0&&(D=r.value[0].sourceWorkId),D===null)return[];const B=new Map;r.value.forEach(z=>{B.set(z.sourceWorkId,z.targetWorkId)});const A=[D];let H=D;const ee=new Set([D]);for(;B.has(H);){const z=B.get(H);if(ee.has(z))break;A.push(z),ee.add(z),H=z}return A.map(z=>{const W=e.value.find(k=>k.id===`work-${z}`);return{workId:z,workName:W?.data.work?.workName||`Work ${z}`}})}),c=le(()=>{const f=new Set;return r.value.forEach(_=>{f.add(_.sourceWorkId),f.add(_.targetWorkId)}),f}),h=le(()=>l.value?Array.from(c.value).map(f=>{const _=e.value.find(B=>B.id===`work-${f}`);if(!_)return null;const D=_.data.work;return{workId:f,x:_.position.x+D.width,y:_.position.y}}).filter(f=>f!==null):[]),p=le(()=>{if(!i.value)return t.value.map(A=>{const H=A.data?.offset||0;return{...A,style:{stroke:A.style?.stroke,transform:`translate(${H}px, ${H}px)`}}});const _=n.value.find(A=>A.workPathId===i.value)?.workPathColor||"#3b82f6",D=t.value.filter(A=>A.data?.pathId!==i.value).map(A=>{const H=A.data?.offset||0;return{...A,style:{stroke:"#9ca3af",strokeWidth:1,transform:`translate(${H}px, ${H}px)`}}}),B=r.value.map((A,H)=>({id:`editing-${i.value}-${A.sourceWorkId}-${A.targetWorkId}-${H}`,source:`work-${A.sourceWorkId}`,target:`work-${A.targetWorkId}`,type:"smoothstep",pathOptions:{borderRadius:20,offset:15},style:{stroke:_,strokeWidth:2},data:{pathId:i.value,editing:!0}}));return[...D,...B]});return{selectedPathId:i,editingPathEdges:r,isUpdatingPath:s,isPathEditMode:l,selectedPathColor:a,orderedChainNodes:u,pathNodeIds:c,deleteButtonNodes:h,styledEdges:p,togglePathSelection:f=>{if(i.value===f)i.value=null,r.value=[];else{i.value=f;const _=n.value.find(D=>D.workPathId===f);r.value=_?.edges?[..._.edges]:[]}},submitPathUpdate:async()=>{if(i.value){s.value=!0;try{await At.updateWorkPath(i.value,r.value),await o(),i.value=null,r.value=[]}catch(f){console.error("  :",f);const _=f,D=_.response?.data?.message||_.message;alert(D)}finally{s.value=!1}}},cancelPathEdit:()=>{i.value=null,r.value=[]},onConnect:f=>{if(!l.value)return;const _=parseInt(f.source.replace("work-","")),D=parseInt(f.target.replace("work-",""));if(_===D||r.value.some(W=>W.sourceWorkId===_&&W.targetWorkId===D))return;const A=Ph(r.value),H=A.indexOf(_),ee=A.indexOf(D);let z;if(H===-1&&ee===-1){r.value.push({sourceWorkId:_,targetWorkId:D});return}else if(H===-1)z=[...A],z.splice(ee,0,_);else if(ee===-1)z=[...A],z.splice(H+1,0,D);else{if(H+1===ee)return;{z=A.filter(k=>k!==D);const W=z.indexOf(_);z.splice(W+1,0,D)}}r.value=Dh(z)},removeNodeFromPath:f=>{const _=r.value.find(B=>B.targetWorkId===f),D=r.value.find(B=>B.sourceWorkId===f);r.value=r.value.filter(B=>B.sourceWorkId!==f&&B.targetWorkId!==f),_&&D&&r.value.push({sourceWorkId:_.sourceWorkId,targetWorkId:D.targetWorkId})},clearPathEditMode:()=>{i.value=null,r.value=[]}}}function zh(e,t){const n=ce(null),o=ce(!1),i=ce({startDate:"",workLeadTime:1,isWorkingOnHoliday:!0}),r=le(()=>n.value?e.value.find(c=>c.id===`work-${n.value}`)?.data.work:null);return Ee(r,u=>{u&&(i.value={startDate:u.startDate,workLeadTime:u.workLeadTime,isWorkingOnHoliday:u.isWorkingOnHoliday})}),{selectedWorkId:n,isUpdatingWork:o,workEditForm:i,selectedWork:r,submitWorkUpdate:async()=>{if(n.value){o.value=!0;try{await Vt.updateWork(n.value,{startDate:i.value.startDate,workLeadTime:i.value.workLeadTime,isWorkingOnHoliday:i.value.isWorkingOnHoliday}),await t(),n.value=null}catch(u){console.error("  :",u);const c=u,h=c.response?.data?.message||c.message;alert(h)}finally{o.value=!1}}},clearSelection:()=>{n.value=null},selectWork:u=>{n.value=u}}}const Oh={class:"flex gap-4 h-full"},Ah={style:{position:"absolute",width:"100%",height:"100%","pointer-events":"none","z-index":"0"}},Vh=["transform"],Bh=["x","width"],Hh=["x","width"],Rh=["x","width"],Wh=["x","width"],Lh=["x"],Fh={class:"px-3 py-2 text-sm bg-popover border border-border rounded-lg shadow-lg"},Yh={class:"text-muted-foreground"},Xh={class:"font-medium"},Gh={class:"font-medium"},Uh={class:"font-medium"},Zh={class:"font-medium"},Kh=["onClick"],qh={key:0,class:"space-y-4"},jh={class:"border border-border rounded-lg overflow-hidden"},Jh={class:"p-3 pt-0 space-y-3"},Qh={class:"space-y-2"},ev={class:"space-y-2"},tv={class:"border border-input rounded-md p-2 max-h-32 overflow-y-auto space-y-1.5"},nv={class:"text-sm"},ov={class:"space-y-2"},iv={class:"space-y-2"},rv={class:"space-y-1"},sv={class:"flex items-center gap-1"},lv={class:"space-y-1"},av={class:"flex items-center gap-1"},uv={class:"space-y-1"},cv={class:"flex rounded-lg border border-border overflow-hidden"},dv={key:0,class:"border border-primary rounded-lg p-3 space-y-3 bg-primary/5"},fv={class:"flex justify-between items-center"},hv={class:"font-medium text-sm"},vv={class:"space-y-2"},pv={class:"space-y-1"},gv={class:"flex items-center gap-1"},mv={class:"space-y-1"},yv={class:"flex items-center gap-1"},wv={class:"space-y-1"},_v={class:"flex rounded-lg border border-border overflow-hidden"},bv={key:1,class:"text-sm text-muted-foreground text-center py-4 border border-dashed border-border rounded-lg"},xv={key:1,class:"space-y-4"},kv={class:"border border-border rounded-lg overflow-hidden"},Sv={class:"p-3 pt-0 space-y-3"},Ev={class:"space-y-1"},Nv={class:"space-y-1"},Cv={class:"flex items-center gap-2"},$v={key:0,class:"border border-primary rounded-lg p-3 space-y-3 bg-primary/5"},Iv={class:"flex justify-between items-center"},Mv={class:"font-medium text-sm"},Pv={class:"space-y-1"},Dv={key:0,class:"text-sm flex flex-wrap items-center gap-1"},Tv={class:"font-medium bg-background px-1.5 py-0.5 rounded border border-border"},zv={key:0,class:"text-muted-foreground"},Ov={key:1,class:"text-xs text-muted-foreground/70"},Av={class:"flex gap-2"},Vv={class:"space-y-2"},Bv={class:"text-xs font-medium text-muted-foreground"},Hv={class:"space-y-2 max-h-64 overflow-y-auto"},Rv=["onClick"],Wv={class:"flex items-center gap-2"},Lv={class:"font-medium text-sm"},Fv={class:"text-xs text-muted-foreground mt-1"},Yv={key:0,class:"text-sm text-muted-foreground text-center py-4"},Xv={key:1,class:"text-xs text-muted-foreground text-center py-2 border border-dashed border-border rounded-lg"},Gv=$e({__name:"Viewer2dArea",emits:["works-loaded"],setup(e,{emit:t}){const n=t,o=ce([]),i=ce([]),{zoomIn:r,zoomOut:s,viewport:l}=Pe(),a=ce([]),u=ce({pathName:"",pathColor:"#3b82f6"}),c=ce(!1),h=ce(!1),p=ce(!1),y=ce("single"),C=ce(!1),S=ce(!1),N=ce("work"),E=ce(!1),I=ce({visible:!1,nodeX:0,nodeY:0,workId:null,startDate:"",workLeadTime:0,completionDate:""}),f=ce(!1),_=ce(!1),D=ce("manage"),B=zs(),A=Os(),H=async()=>{B.selectedProjectId&&await A.getCalendar(B.selectedProjectId)},ee=le(()=>A.calendarData),z=async()=>{h.value=!0;try{const[ue,g]=await Promise.all([Vt.getWorkList(),At.getPathList()]);o.value=Eh(ue),a.value=g;const Y=new Map;i.value=g.flatMap(T=>T.edges.map(We=>{const Ye=`${We.sourceWorkId}-${We.targetWorkId}`,it=Y.get(Ye)||0;Y.set(Ye,it+1);const oo=it,ws=oo===0?0:(oo%2===1?1:-1)*Math.ceil(oo/2)*3;return{id:`edge-${T.workPathId}-${We.sourceWorkId}-${We.targetWorkId}`,source:`work-${We.sourceWorkId}`,target:`work-${We.targetWorkId}`,type:"smoothstep",pathOptions:{borderRadius:20,offset:15},style:{stroke:T.workPathColor},data:{pathId:T.workPathId,pathName:T.workPathName,offset:ws}}})),n("works-loaded",ue)}catch(ue){console.error("  :",ue)}finally{h.value=!1}},W=ue=>{y.value=ue,p.value=!0},k=async()=>{C.value=!0;try{y.value==="single"&&P.value?await At.optimizeWorkPath(P.value):await At.optimizeWorkPath("all"),await z(),p.value=!1}catch(ue){console.error(" :",ue);const g=ue,Y=g.response?.data?.message||g.message;alert(Y)}finally{C.value=!1}},re=ue=>{N.value=ue,S.value=!0},x=async()=>{E.value=!0;try{N.value==="work"&&no.value?(await Vt.deleteWork(no.value),Zt(),I.value.visible=!1):N.value==="path"&&P.value&&(await At.deleteWorkPath(P.value),wt()),await z(),S.value=!1}catch(ue){console.error(" :",ue);const g=ue,Y=g.response?.data?.message||g.message;alert(Y)}finally{E.value=!1}},{workFormState:M,divisions:$,workTypes:R,subWorkTypes:F,componentTypes:Z,locationOptions:G,isCreatingWork:te,isLoadingWorkTypes:ae,isLoadingSubWorkTypes:fe,createWork:ge,loadInitialData:Q}=Nh(z),{containerRef:ne,allProjectDates:se,visibleDates:we,projectGridBounds:ve,yearCells:ye,monthCells:Ne,weekCells:de,holidayIndices:me,deactivatedIndices:w,todayInProject:v,setupResizeObserver:b,cleanupResizeObserver:m}=Mh(l,ee),{selectedPathId:P,isUpdatingPath:q,isPathEditMode:j,selectedPathColor:J,orderedChainNodes:oe,pathNodeIds:he,deleteButtonNodes:_e,styledEdges:xe,togglePathSelection:Ue,submitPathUpdate:yt,cancelPathEdit:wt,onConnect:to,removeNodeFromPath:ls}=Th(o,i,a,z);Ee(D,ue=>{ue!=="path"&&wt()}),Ee([j,J,he],([ue,g,Y])=>{o.value=o.value.map(T=>{const We=parseInt(T.id.replace("work-","")),Ye=T.data.work,it={width:`${Ye.width}px`,height:`${Ye.height}px`,overflow:"visible",whiteSpace:"nowrap"};return Ye.isWorkingOnHoliday||(it.backgroundColor="#f3f4f6",it.borderColor="#d1d5db"),ue&&g&&Y.has(We)?{...T,style:{...it,border:`2px solid ${g}`,boxShadow:`0 0 8px ${g}50`}}:{...T,style:it}})},{deep:!0});const{selectedWorkId:no,isUpdatingWork:Xo,workEditForm:Re,selectedWork:Go,submitWorkUpdate:as,clearSelection:Zt,selectWork:us}=zh(o,z),cs=async()=>{if(!u.value.pathName.trim()){alert("  .");return}c.value=!0;try{await At.createPath({workPathName:u.value.pathName,workPathColor:u.value.pathColor}),u.value.pathName="",u.value.pathColor="#3b82f6",await z()}catch(ue){console.error("  :",ue);const g=ue,Y=g.response?.data?.message||g.message;alert(Y)}finally{c.value=!1}},ds=ue=>{const g=ue.node.data.work;if(g&&!j.value){if(no.value===g.workId){Zt(),I.value.visible=!1;return}us(g.workId),I.value={visible:!0,nodeX:ue.node.position.x+g.width/2,nodeY:ue.node.position.y-8,workId:g.workId,startDate:g.startDate,workLeadTime:g.workLeadTime,completionDate:g.completionDate}}},Uo=ue=>`${ue.getFullYear()}-${String(ue.getMonth()+1).padStart(2,"0")}-${String(ue.getDate()).padStart(2,"0")}`,Zo=(ue,g)=>{if(!ue.start_date)return;const Y=new Date(ue.start_date);Y.setDate(Y.getDate()+g),ue.start_date=Uo(Y)},Ko=ue=>{if(!Re.value.startDate)return;const g=new Date(Re.value.startDate);g.setDate(g.getDate()+ue),Re.value.startDate=Uo(g)},fs=async()=>{await ge()&&(f.value=!1)},hs=async()=>{await as(),I.value.visible=!1},vs=ue=>{Ue(ue),P.value===ue&&(Zt(),I.value.visible=!1)},ps=()=>{I.value.visible=!1,j.value||Zt()},gs=async ue=>{const g=ue.node.data.work;if(!g)return;const Y=ue.node.position.y;if(Y!==g.positionY)try{await Vt.updateWorkPositionY(g.workId,Y);const T=await Vt.getWork(g.workId),We=o.value.findIndex(Ye=>Ye.id===`work-${g.workId}`);if(We!==-1){const Ye=o.value[We];o.value[We]={...Ye,position:{x:Ye.position.x,y:T.positionY},data:{...Ye.data,work:T}}}}catch(T){console.error("  :",T),ue.node.position.y=g.positionY}},ms=ue=>{const g=ue.node.data.originalX;g!==void 0&&ue.node.position.x!==g&&(ue.node.position.x=g);const Y=ue.node.data.work;Y&&I.value.visible&&I.value.workId===Y.workId&&(I.value.nodeX=ue.node.position.x+Y.width/2,I.value.nodeY=ue.node.position.y-8)},ys=ue=>{ue.ctrlKey&&(ue.preventDefault(),ue.deltaY<0?r():s())};return ct(async()=>{Q(),await H(),z(),b()}),qi(()=>{m()}),(ue,g)=>(V(),X(Se,null,[O("div",Oh,[O("div",{ref_key:"containerRef",ref:ne,class:"relative flex-1 min-w-0 border border-border rounded-lg overflow-hidden",onWheel:ys},[O("div",{class:"absolute top-0 left-0 right-0 bg-muted/80 border-b border-border z-20 overflow-hidden",style:Ae({height:`${d(Zi)}px`})},[O("div",{class:"absolute w-full h-full",style:Ae({transform:`translateX(${d(l).x}px)`})},[(V(!0),X(Se,null,De(d(ye),Y=>(V(),X("div",{key:`year-${Y.startIndex}`,class:"absolute flex items-center justify-center text-xs font-medium border border-border bg-muted/60",style:Ae({left:`${Y.startIndex*d(Te)*d(l).zoom}px`,width:`${Y.span*d(Te)*d(l).zoom}px`,height:`${d(Je)}px`,top:"0px"})},ke(Y.label),5))),128)),(V(!0),X(Se,null,De(d(Ne),Y=>(V(),X("div",{key:`month-${Y.startIndex}`,class:"absolute flex items-center justify-center text-xs font-medium border border-border",style:Ae({left:`${Y.startIndex*d(Te)*d(l).zoom}px`,width:`${Y.span*d(Te)*d(l).zoom}px`,height:`${d(Je)}px`,top:`${d(Je)}px`})},ke(Y.label),5))),128)),(V(!0),X(Se,null,De(d(de),Y=>(V(),X("div",{key:`week-${Y.startIndex}`,class:"absolute flex items-center justify-center text-xs border border-border",style:Ae({left:`${Y.startIndex*d(Te)*d(l).zoom}px`,width:`${Y.span*d(Te)*d(l).zoom}px`,height:`${d(Je)}px`,top:`${d(Je)*2}px`})},ke(Y.label),5))),128)),(V(!0),X(Se,null,De(d(we),Y=>(V(),X("div",{key:`date-${Y.dayIndex}`,class:Fe(["absolute flex items-center justify-center text-xs border-r border-b border-border/50",{"font-medium":Y.isToday,"text-red-600":Y.isHoliday&&!Y.isDeactivated}]),style:Ae({left:`${Y.dayIndex*d(Te)*d(l).zoom}px`,width:`${d(Te)*d(l).zoom}px`,height:`${d(Je)}px`,top:`${d(Je)*3}px`,backgroundColor:Y.isToday?"rgba(59, 130, 246, 0.3)":Y.isDeactivated?"rgba(107, 114, 128, 0.5)":Y.isHoliday?"rgba(239, 68, 68, 0.3)":"#ffffff"})},ke(Y.dayOfMonth),7))),128)),(V(!0),X(Se,null,De(d(we),Y=>(V(),X("div",{key:`day-${Y.dayIndex}`,class:Fe(["absolute flex items-center justify-center text-[10px] border-r border-border/50",{"font-medium":Y.isToday,"text-red-600":Y.isHoliday&&!Y.isDeactivated}]),style:Ae({left:`${Y.dayIndex*d(Te)*d(l).zoom}px`,width:`${d(Te)*d(l).zoom}px`,height:`${d(Je)}px`,top:`${d(Je)*4}px`,backgroundColor:Y.isToday?"rgba(59, 130, 246, 0.3)":Y.isDeactivated?"rgba(107, 114, 128, 0.5)":Y.isHoliday?"rgba(239, 68, 68, 0.3)":"#ffffff"})},ke(Y.dayName),7))),128))],4)],4),L(d(Yf),{nodes:o.value,"onUpdate:nodes":g[0]||(g[0]=Y=>o.value=Y),edges:d(xe),class:Fe(["w-full h-full",{"path-mode":D.value==="path"}]),style:Ae({paddingTop:`${d(Zi)}px`}),"fit-view-on-init":"","min-zoom":.5,"zoom-on-scroll":!1,onNodeClick:ds,onNodeDrag:ms,onNodeDragStop:gs,onPaneClick:ps,onConnect:d(to)},{default:U(()=>[(V(),X("svg",Ah,[g[38]||(g[38]=O("defs",null,[O("pattern",{id:"vertical-lines",x:"0",y:"0",width:"40",height:"100",patternUnits:"userSpaceOnUse"},[O("rect",{x:"0",y:"0",width:"0.2",height:"100",fill:"#999"})])],-1)),O("g",{transform:`translate(${d(l).x}, ${d(l).y}) scale(${d(l).zoom})`},[(V(!0),X(Se,null,De(d(w),Y=>(V(),X("rect",{key:`deactivated-bg-${Y}`,x:Y*d(Te),y:"-50000",width:d(Te),height:"100000",fill:"rgba(107, 114, 128, 0.2)"},null,8,Bh))),128)),(V(!0),X(Se,null,De(d(me),Y=>(V(),X("rect",{key:`holiday-bg-${Y}`,x:Y*d(Te),y:"-50000",width:d(Te),height:"100000",fill:"rgba(239, 68, 68, 0.1)"},null,8,Hh))),128)),d(v)!==null?(V(),X("rect",{key:0,x:d(v)*d(Te),y:"-50000",width:d(Te),height:"100000",fill:"rgba(59, 130, 246, 0.3)"},null,8,Rh)):Ie("",!0),O("rect",{x:d(ve).startX,y:"-50000",width:d(ve).width,height:"100000",fill:"url(#vertical-lines)"},null,8,Wh),(V(!0),X(Se,null,De(d(se),Y=>(V(),X(Se,{key:`reason-${Y.dayIndex}`},[Y.holidayName||Y.deactivatedReason?(V(),X("text",{key:0,x:Y.dayIndex*d(Te)+d(Te)/2,y:"0",fill:"currentColor","fill-opacity":.3,"font-size":"11","text-anchor":"middle","dominant-baseline":"middle",style:{"writing-mode":"tb","glyph-orientation-vertical":"0"}},ke(Y.deactivatedReason||Y.holidayName),9,Lh)):Ie("",!0)],64))),128))],8,Vh)])),I.value.visible?(V(),X("div",{key:0,class:"absolute z-10 pointer-events-none",style:Ae({left:`${I.value.nodeX*d(l).zoom+d(l).x}px`,top:`${I.value.nodeY*d(l).zoom+d(l).y}px`,transform:`translateX(-50%) translateY(-100%) scale(${d(l).zoom})`,transformOrigin:"bottom center"})},[O("div",Fh,[g[43]||(g[43]=O("div",{class:"absolute left-1/2 -bottom-2 -translate-x-1/2 border-l-8 border-r-8 border-t-8 border-transparent border-t-border"},null,-1)),g[44]||(g[44]=O("div",{class:"absolute left-1/2 -bottom-[7px] -translate-x-1/2 border-l-[7px] border-r-[7px] border-t-[7px] border-transparent border-t-popover"},null,-1)),O("p",Yh,[g[39]||(g[39]=pe("ID: ",-1)),O("span",Xh,ke(I.value.workId),1)]),O("p",null,[g[40]||(g[40]=pe(": ",-1)),O("span",Gh,ke(I.value.startDate),1)]),O("p",null,[g[41]||(g[41]=pe(": ",-1)),O("span",Uh,ke(I.value.workLeadTime)+"",1)]),O("p",null,[g[42]||(g[42]=pe(": ",-1)),O("span",Zh,ke(I.value.completionDate),1)])])],4)):Ie("",!0),d(j)?(V(!0),X(Se,{key:1},De(d(_e),Y=>(V(),X("button",{key:`delete-${Y.workId}`,class:"absolute z-20 w-5 h-5 flex items-center justify-center bg-red-500 hover:bg-red-600 text-white rounded-full shadow-md transition-colors cursor-pointer",style:Ae({left:`${Y.x*d(l).zoom+d(l).x}px`,top:`${Y.y*d(l).zoom+d(l).y}px`,transform:`translate(-50%, -50%) scale(${Math.min(d(l).zoom,1)})`}),onClick:T=>d(ls)(Y.workId)},[...g[45]||(g[45]=[O("span",{class:"text-xs font-bold"},"",-1)])],12,Kh))),128)):Ie("",!0),L(d(kh),{position:"bottom-right"})]),_:1},8,["nodes","edges","class","style","onConnect"]),g[46]||(g[46]=O("div",{class:"absolute bottom-3 right-16 text-xs text-muted-foreground/60 bg-background/50 px-2 py-1 rounded"}," Ctrl + :  | :  ",-1))],544),L(Ts,{modelValue:D.value,"onUpdate:modelValue":g[35]||(g[35]=Y=>D.value=Y),tabs:[{value:"manage",label:" "},{value:"path",label:" "}]},{default:U(({activeTab:Y})=>[Y==="manage"?(V(),X("div",qh,[O("div",jh,[O("button",{class:"w-full flex items-center justify-between p-3 text-sm font-medium hover:bg-muted/50 transition-colors",onClick:g[1]||(g[1]=T=>f.value=!f.value)},[g[48]||(g[48]=O("span",null," ",-1)),(V(),X("svg",{class:Fe(["w-4 h-4 transition-transform",{"rotate-180":f.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...g[47]||(g[47]=[O("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),io(O("div",Jh,[O("div",Qh,[g[49]||(g[49]=O("p",{class:"text-xs font-medium text-muted-foreground"}," ",-1)),L(d(_t),{modelValue:d(M).division_id,"onUpdate:modelValue":g[2]||(g[2]=T=>d(M).division_id=T)},{default:U(()=>[L(d(bt),{class:"w-full h-8 text-sm"},{default:U(()=>[L(d(xt),{placeholder:""})]),_:1}),L(d(kt),null,{default:U(()=>[(V(!0),X(Se,null,De(d($),T=>(V(),ze(d(Ze),{key:T.id,value:String(T.id)},{default:U(()=>[pe(ke(T.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),L(d(_t),{modelValue:d(M).work_type_id,"onUpdate:modelValue":g[3]||(g[3]=T=>d(M).work_type_id=T),disabled:!d(M).division_id||d(ae)},{default:U(()=>[L(d(bt),{class:"w-full h-8 text-sm"},{default:U(()=>[L(d(xt),{placeholder:d(ae)?"...":""},null,8,["placeholder"])]),_:1}),L(d(kt),null,{default:U(()=>[(V(!0),X(Se,null,De(d(R),T=>(V(),ze(d(Ze),{key:T.id,value:String(T.id)},{default:U(()=>[pe(ke(T.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),L(d(_t),{modelValue:d(M).sub_work_type_id,"onUpdate:modelValue":g[4]||(g[4]=T=>d(M).sub_work_type_id=T),disabled:!d(M).work_type_id||d(fe)},{default:U(()=>[L(d(bt),{class:"w-full h-8 text-sm"},{default:U(()=>[L(d(xt),{placeholder:d(fe)?"...":""},null,8,["placeholder"])]),_:1}),L(d(kt),null,{default:U(()=>[(V(!0),X(Se,null,De(d(F),T=>(V(),ze(d(Ze),{key:T.id,value:String(T.id)},{default:U(()=>[pe(ke(T.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),O("div",ev,[g[50]||(g[50]=O("p",{class:"text-xs font-medium text-muted-foreground"}," ",-1)),O("div",tv,[(V(!0),X(Se,null,De(d(Z),T=>(V(),X("label",{key:T.id,class:"flex items-center gap-2 cursor-pointer"},[L(d(Ds),{"model-value":d(M).component_type_ids.includes(String(T.id)),"onUpdate:modelValue":We=>{const Ye=String(T.id);We===!0?d(M).component_type_ids.push(Ye):d(M).component_type_ids=d(M).component_type_ids.filter(it=>it!==Ye)}},null,8,["model-value","onUpdate:modelValue"]),O("span",nv,ke(T.name),1)]))),128))])]),O("div",ov,[g[55]||(g[55]=O("p",{class:"text-xs font-medium text-muted-foreground"}," ",-1)),L(d(_t),{modelValue:d(M).zone_id,"onUpdate:modelValue":g[5]||(g[5]=T=>d(M).zone_id=T)},{default:U(()=>[L(d(bt),{class:"w-full h-8 text-sm"},{default:U(()=>[L(d(xt),{placeholder:"Zone"})]),_:1}),L(d(kt),null,{default:U(()=>[L(d(Ze),{value:"none"},{default:U(()=>[...g[51]||(g[51]=[pe("",-1)])]),_:1}),(V(!0),X(Se,null,De(d(G).zone,T=>(V(),ze(d(Ze),{key:T.id,value:String(T.id)},{default:U(()=>[pe(ke(T.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),L(d(_t),{modelValue:d(M).floor_id,"onUpdate:modelValue":g[6]||(g[6]=T=>d(M).floor_id=T)},{default:U(()=>[L(d(bt),{class:"w-full h-8 text-sm"},{default:U(()=>[L(d(xt),{placeholder:"Floor"})]),_:1}),L(d(kt),null,{default:U(()=>[L(d(Ze),{value:"none"},{default:U(()=>[...g[52]||(g[52]=[pe("",-1)])]),_:1}),(V(!0),X(Se,null,De(d(G).floor,T=>(V(),ze(d(Ze),{key:T.id,value:String(T.id)},{default:U(()=>[pe(ke(T.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),L(d(_t),{modelValue:d(M).section_id,"onUpdate:modelValue":g[7]||(g[7]=T=>d(M).section_id=T)},{default:U(()=>[L(d(bt),{class:"w-full h-8 text-sm"},{default:U(()=>[L(d(xt),{placeholder:"Section"})]),_:1}),L(d(kt),null,{default:U(()=>[L(d(Ze),{value:"none"},{default:U(()=>[...g[53]||(g[53]=[pe("",-1)])]),_:1}),(V(!0),X(Se,null,De(d(G).section,T=>(V(),ze(d(Ze),{key:T.id,value:String(T.id)},{default:U(()=>[pe(ke(T.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),L(d(_t),{modelValue:d(M).usage_id,"onUpdate:modelValue":g[8]||(g[8]=T=>d(M).usage_id=T)},{default:U(()=>[L(d(bt),{class:"w-full h-8 text-sm"},{default:U(()=>[L(d(xt),{placeholder:"Usage"})]),_:1}),L(d(kt),null,{default:U(()=>[L(d(Ze),{value:"none"},{default:U(()=>[...g[54]||(g[54]=[pe("",-1)])]),_:1}),(V(!0),X(Se,null,De(d(G).usage,T=>(V(),ze(d(Ze),{key:T.id,value:String(T.id)},{default:U(()=>[pe(ke(T.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),O("div",iv,[g[63]||(g[63]=O("p",{class:"text-xs font-medium text-muted-foreground"}," ",-1)),O("div",rv,[g[58]||(g[58]=O("label",{class:"text-xs text-muted-foreground"},"",-1)),O("div",sv,[L(d(Le),{variant:"outline",class:"h-10 w-10 text-xl font-bold p-0",disabled:!d(M).start_date,onClick:g[9]||(g[9]=T=>Zo(d(M),-1))},{default:U(()=>[...g[56]||(g[56]=[pe("  ",-1)])]),_:1},8,["disabled"]),L(d(Dt),{modelValue:d(M).start_date,"onUpdate:modelValue":g[10]||(g[10]=T=>d(M).start_date=T),type:"date",class:"h-10 text-sm text-center flex-1"},null,8,["modelValue"]),L(d(Le),{variant:"outline",class:"h-10 w-10 text-xl font-bold p-0",disabled:!d(M).start_date,onClick:g[11]||(g[11]=T=>Zo(d(M),1))},{default:U(()=>[...g[57]||(g[57]=[pe(" + ",-1)])]),_:1},8,["disabled"])])]),O("div",lv,[g[61]||(g[61]=O("label",{class:"text-xs text-muted-foreground"},"",-1)),O("div",av,[L(d(Le),{variant:"outline",class:"h-10 w-10 text-xl font-bold p-0",disabled:d(M).work_days<=1,onClick:g[12]||(g[12]=T=>d(M).work_days=Math.max(1,d(M).work_days-1))},{default:U(()=>[...g[59]||(g[59]=[pe("  ",-1)])]),_:1},8,["disabled"]),L(d(Dt),{modelValue:d(M).work_days,"onUpdate:modelValue":g[13]||(g[13]=T=>d(M).work_days=T),type:"number",min:"1",class:"h-10 text-sm text-center flex-1"},null,8,["modelValue"]),L(d(Le),{variant:"outline",class:"h-10 w-10 text-xl font-bold p-0",onClick:g[14]||(g[14]=T=>d(M).work_days++)},{default:U(()=>[...g[60]||(g[60]=[pe(" + ",-1)])]),_:1})])]),O("div",uv,[g[62]||(g[62]=O("label",{class:"text-xs text-muted-foreground"},"  ",-1)),O("div",cv,[O("button",{type:"button",class:Fe(["flex-1 py-2 text-sm font-medium transition-colors",d(M).isWorkingOnHoliday?"bg-primary text-primary-foreground":"bg-background hover:bg-muted"]),onClick:g[15]||(g[15]=T=>d(M).isWorkingOnHoliday=!0)},"   ",2),O("button",{type:"button",class:Fe(["flex-1 py-2 text-sm font-medium transition-colors border-l border-border",d(M).isWorkingOnHoliday?"bg-background hover:bg-muted":"bg-primary text-primary-foreground"]),onClick:g[16]||(g[16]=T=>d(M).isWorkingOnHoliday=!1)},"   ",2)])])]),L(d(Le),{class:"w-full",disabled:d(te),onClick:fs},{default:U(()=>[pe(ke(d(te)?" ...":" "),1)]),_:1},8,["disabled"])],512),[[qo,f.value]])]),d(Go)?(V(),X("div",dv,[O("div",fv,[O("span",hv,ke(d(Go).workName),1),O("button",{onClick:g[17]||(g[17]=T=>{d(Zt)(),I.value.visible=!1}),class:"text-muted-foreground hover:text-foreground transition-colors"},"  ")]),O("div",vv,[O("div",pv,[g[66]||(g[66]=O("label",{class:"text-xs text-muted-foreground"},"",-1)),O("div",gv,[L(d(Le),{variant:"outline",class:"h-10 w-10 text-xl font-bold p-0",disabled:!d(Re).startDate,onClick:g[18]||(g[18]=T=>Ko(-1))},{default:U(()=>[...g[64]||(g[64]=[pe("  ",-1)])]),_:1},8,["disabled"]),L(d(Dt),{modelValue:d(Re).startDate,"onUpdate:modelValue":g[19]||(g[19]=T=>d(Re).startDate=T),type:"date",class:"h-10 text-sm text-center flex-1"},null,8,["modelValue"]),L(d(Le),{variant:"outline",class:"h-10 w-10 text-xl font-bold p-0",disabled:!d(Re).startDate,onClick:g[20]||(g[20]=T=>Ko(1))},{default:U(()=>[...g[65]||(g[65]=[pe(" + ",-1)])]),_:1},8,["disabled"])])]),O("div",mv,[g[69]||(g[69]=O("label",{class:"text-xs text-muted-foreground"},"",-1)),O("div",yv,[L(d(Le),{variant:"outline",class:"h-10 w-10 text-xl font-bold p-0",disabled:d(Re).workLeadTime<=1,onClick:g[21]||(g[21]=T=>d(Re).workLeadTime=Math.max(1,d(Re).workLeadTime-1))},{default:U(()=>[...g[67]||(g[67]=[pe("  ",-1)])]),_:1},8,["disabled"]),L(d(Dt),{modelValue:d(Re).workLeadTime,"onUpdate:modelValue":g[22]||(g[22]=T=>d(Re).workLeadTime=T),type:"number",min:"1",class:"h-10 text-sm text-center flex-1"},null,8,["modelValue"]),L(d(Le),{variant:"outline",class:"h-10 w-10 text-xl font-bold p-0",onClick:g[23]||(g[23]=T=>d(Re).workLeadTime++)},{default:U(()=>[...g[68]||(g[68]=[pe(" + ",-1)])]),_:1})])]),O("div",wv,[g[70]||(g[70]=O("label",{class:"text-xs text-muted-foreground"},"  ",-1)),O("div",_v,[O("button",{type:"button",class:Fe(["flex-1 py-2 text-sm font-medium transition-colors",d(Re).isWorkingOnHoliday?"bg-primary text-primary-foreground":"bg-background hover:bg-muted"]),onClick:g[24]||(g[24]=T=>d(Re).isWorkingOnHoliday=!0)},"   ",2),O("button",{type:"button",class:Fe(["flex-1 py-2 text-sm font-medium transition-colors border-l border-border",d(Re).isWorkingOnHoliday?"bg-background hover:bg-muted":"bg-primary text-primary-foreground"]),onClick:g[25]||(g[25]=T=>d(Re).isWorkingOnHoliday=!1)},"   ",2)])])]),L(d(Le),{class:"w-full",disabled:d(Xo),onClick:hs},{default:U(()=>[pe(ke(d(Xo)?" ...":""),1)]),_:1},8,["disabled"]),L(d(Le),{variant:"destructive",class:"w-full",onClick:g[26]||(g[26]=T=>re("work"))},{default:U(()=>[...g[71]||(g[71]=[pe("  ",-1)])]),_:1})])):(V(),X("div",bv,"     "))])):Y==="path"?(V(),X("div",xv,[O("div",kv,[O("button",{class:"w-full flex items-center justify-between p-3 text-sm font-medium hover:bg-muted/50 transition-colors",onClick:g[27]||(g[27]=T=>_.value=!_.value)},[g[73]||(g[73]=O("span",null," ",-1)),(V(),X("svg",{class:Fe(["w-4 h-4 transition-transform",{"rotate-180":_.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...g[72]||(g[72]=[O("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),io(O("div",Sv,[O("div",Ev,[g[74]||(g[74]=O("label",{class:"text-xs text-muted-foreground"}," ",-1)),L(d(Dt),{modelValue:u.value.pathName,"onUpdate:modelValue":g[28]||(g[28]=T=>u.value.pathName=T),placeholder:"  ",class:"h-8 text-sm"},null,8,["modelValue"])]),O("div",Nv,[g[75]||(g[75]=O("label",{class:"text-xs text-muted-foreground"}," ",-1)),O("div",Cv,[io(O("input",{"onUpdate:modelValue":g[29]||(g[29]=T=>u.value.pathColor=T),type:"color",class:"w-10 h-8 rounded border border-border cursor-pointer"},null,512),[[Ps,u.value.pathColor]]),L(d(Dt),{modelValue:u.value.pathColor,"onUpdate:modelValue":g[30]||(g[30]=T=>u.value.pathColor=T),placeholder:"#3b82f6",class:"h-8 text-sm flex-1"},null,8,["modelValue"])])]),L(d(Le),{class:"w-full",disabled:c.value,onClick:cs},{default:U(()=>[pe(ke(c.value?" ...":" "),1)]),_:1},8,["disabled"])],512),[[qo,_.value]])]),L(d(Le),{variant:"outline",class:"w-full",disabled:a.value.length===0,onClick:g[31]||(g[31]=T=>W("all"))},{default:U(()=>[...g[76]||(g[76]=[pe("    ",-1)])]),_:1},8,["disabled"]),d(P)?(V(),X("div",$v,[O("div",Iv,[O("span",Mv,ke(a.value.find(T=>T.workPathId===d(P))?.workPathName),1),O("button",{onClick:g[32]||(g[32]=(...T)=>d(wt)&&d(wt)(...T)),class:"text-muted-foreground hover:text-foreground transition-colors"},"  ")]),O("div",Pv,[g[77]||(g[77]=O("p",{class:"text-xs text-muted-foreground"}," ",-1)),d(oe).length>0?(V(),X("div",Dv,[(V(!0),X(Se,null,De(d(oe),(T,We)=>(V(),X(Se,{key:T.workId},[O("span",Tv,ke(T.workName),1),We<d(oe).length-1?(V(),X("span",zv,"")):Ie("",!0)],64))),128))])):(V(),X("p",Ov,"   .    . "))]),O("div",Av,[L(d(Le),{variant:"outline",class:"flex-1",onClick:d(wt)},{default:U(()=>[...g[78]||(g[78]=[pe("  ",-1)])]),_:1},8,["onClick"]),L(d(Le),{class:"flex-1",disabled:d(q),onClick:d(yt)},{default:U(()=>[pe(ke(d(q)?" ...":""),1)]),_:1},8,["disabled","onClick"])]),L(d(Le),{variant:"outline",class:"w-full",onClick:g[33]||(g[33]=T=>W("single"))},{default:U(()=>[...g[79]||(g[79]=[pe("    ",-1)])]),_:1}),L(d(Le),{variant:"destructive",class:"w-full",onClick:g[34]||(g[34]=T=>re("path"))},{default:U(()=>[...g[80]||(g[80]=[pe("   ",-1)])]),_:1})])):Ie("",!0),O("div",Vv,[O("p",Bv,"   ("+ke(a.value.length)+") ",1),O("div",Hv,[(V(!0),X(Se,null,De(a.value,T=>(V(),X("div",{key:T.workPathId,class:Fe(["p-3 border rounded-lg cursor-pointer transition-colors",{"border-primary bg-primary/10":d(P)===T.workPathId,"border-border hover:bg-muted/50":d(P)!==T.workPathId}]),onClick:We=>vs(T.workPathId)},[O("div",Wv,[O("div",{class:"w-3 h-3 rounded-full",style:Ae({backgroundColor:T.workPathColor})},null,4),O("span",Lv,ke(T.workPathName),1)]),O("p",Fv," : "+ke(T.edges.length)+" ",1)],10,Rv))),128)),a.value.length===0?(V(),X("p",Yv,"   . ")):Ie("",!0)])]),d(P)?Ie("",!0):(V(),X("div",Xv,"    "))])):Ie("",!0)]),_:1},8,["modelValue"])]),L(d(jo),{open:p.value,"onUpdate:open":g[36]||(g[36]=Y=>p.value=Y)},{default:U(()=>[L(d(Jo),null,{default:U(()=>[L(d(Qo),null,{default:U(()=>[L(d(ei),null,{default:U(()=>[...g[81]||(g[81]=[pe(" ",-1)])]),_:1}),L(d(ti),null,{default:U(()=>[...g[82]||(g[82]=[pe("   ? ",-1),O("br",null,null,-1),pe("         . ",-1),O("br",null,null,-1),O("span",{class:"text-amber-600 font-medium"},"    .",-1)])]),_:1})]),_:1}),L(d(ni),null,{default:U(()=>[L(d(oi),{disabled:C.value},{default:U(()=>[...g[83]||(g[83]=[pe("",-1)])]),_:1},8,["disabled"]),L(d(ii),{disabled:C.value,onClick:k},{default:U(()=>[pe(ke(C.value?" ...":""),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),L(d(jo),{open:S.value,"onUpdate:open":g[37]||(g[37]=Y=>S.value=Y)},{default:U(()=>[L(d(Jo),null,{default:U(()=>[L(d(Qo),null,{default:U(()=>[L(d(ei),null,{default:U(()=>[...g[84]||(g[84]=[pe(" ",-1)])]),_:1}),L(d(ti),null,{default:U(()=>[...g[85]||(g[85]=[pe("  ? ",-1)])]),_:1})]),_:1}),L(d(ni),null,{default:U(()=>[L(d(oi),{disabled:E.value},{default:U(()=>[...g[86]||(g[86]=[pe("",-1)])]),_:1},8,["disabled"]),L(d(ii),{disabled:E.value,onClick:x},{default:U(()=>[pe(ke(E.value?" ...":""),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),Uv=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n},Zv=Uv(Gv,[["__scopeId","data-v-a9a657c9"]]),vp=$e({__name:"Schedule2dPage",setup(e){return(t,n)=>(V(),ze(_s,{title:"2D"},{default:U(()=>[L(bs,{height:"flex-1","min-height":"800px"},{default:U(()=>[L(Zv)]),_:1})]),_:1}))}});export{vp as default};
