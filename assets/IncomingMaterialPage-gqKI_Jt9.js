import{d as dt,r as u,O as re,y as ct,i as mt,I as vt,p as k,w as r,e as s,a as n,c,u as a,g as d,F as x,n as $,j as U,t as v,o as i,k as Se,q as Me,z as ft}from"./index-DG8erdFC.js";import{_ as pt}from"./PageContainer.vue_vue_type_script_setup_true_lang-BIH9eeFm.js";import{_ as gt}from"./AreaCard.vue_vue_type_script_setup_true_lang-BUJNG2ka.js";import{_ as h}from"./index-CKTY9j9I.js";import{_ as _t}from"./index-Cu9IoA6Q.js";import{_ as yt,a as Dt,b as Ne,c as ke,d as xt,e as $e}from"./TableHeader.vue_vue_type_script_setup_true_lang-DvNerfSY.js";import{a as ht,b as It,c as bt,d as kt,_ as $t}from"./DialogTitle.vue_vue_type_script_setup_true_lang-rgETGbgT.js";import{_ as ie}from"./Checkbox.vue_vue_type_script_setup_true_lang-BlmxlHnW.js";import{_ as I}from"./Label.vue_vue_type_script_setup_true_lang-D7H4d0ek.js";import{_ as C}from"./Input.vue_vue_type_script_setup_true_lang-CGgGVb3D.js";import{_ as ne,a as ue,b as de,c as ce,d as me}from"./SelectValue.vue_vue_type_script_setup_true_lang-CYzgvYD3.js";import{a as Te,b as je,c as Pe,d as Oe,e as Re,f as Fe,g as qe,_ as ze}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-Bxz5wUrA.js";import{u as Ut}from"./useMaterialOrder-B6qVT1Rr.js";import{m as P}from"./materialOrder-BaOn5p1Y.js";import{m as ve}from"./projectDocumentCode-SISpFZs-.js";import{r as w}from"./reference-B-qmHaHf.js";import{X as Ee}from"./x-CwbFRCqd.js";import"./Collection-BA_9eYIH.js";import"./index-CE7v__89.js";import"./utils-DU_xaL7B.js";import"./DialogTitle-0IlAdc_J.js";import"./createLucideIcon-CDvnuoGZ.js";import"./check-DENv59y8.js";import"./DialogDescription-gp0zo3qJ.js";import"./apiClient-r2tmWO-w.js";const Vt={class:"flex justify-end mb-4"},wt={key:0,class:"text-sm text-muted-foreground text-center py-8"},Lt={key:1,class:"flex items-center justify-center py-16 border border-dashed border-border rounded-lg"},Ct={key:2,class:"space-y-4"},St=["onClick"],Mt={class:"text-xs text-muted-foreground"},Nt={class:"text-sm font-medium"},Tt={class:"text-sm text-muted-foreground"},jt={class:"text-sm text-muted-foreground"},Pt={key:0,class:"text-sm text-muted-foreground"},Ot={key:0,class:"p-4"},Rt={key:0,class:"text-sm text-muted-foreground text-center py-8"},Ft={key:1,class:"flex gap-4"},qt={class:"w-1/2 flex flex-col gap-2"},zt={key:0,class:"h-[720px] flex items-center justify-center border border-border rounded-lg bg-muted/20"},Et=["onWheel","onPointerdown","onPointermove","onPointerup","onPointercancel"],Wt=["src"],At={class:"absolute bottom-2 right-2 flex items-center gap-1 bg-background/80 rounded-md border border-border px-1.5 py-0.5"},Bt={class:"text-xs text-muted-foreground min-w-[3ch] text-center"},Xt={key:0,class:"shrink-0"},Yt={key:1,class:"flex items-center justify-center gap-3 shrink-0"},Zt={class:"text-sm text-muted-foreground"},Gt={key:2,class:"h-[720px] flex items-center justify-center border border-border rounded-lg bg-muted/20"},Ht={class:"w-1/2 space-y-4 overflow-y-auto"},Jt={class:"grid grid-cols-3 gap-4"},Kt={class:"space-y-1.5"},Qt={class:"space-y-1.5"},el={class:"space-y-1.5"},tl={class:"overflow-x-auto border border-border rounded-lg"},ll={class:"flex items-center gap-1.5"},al={key:0,class:"shrink-0 text-green-600 dark:text-green-400 text-xs font-medium",title:"규격 검증 성공"},sl={key:1,class:"shrink-0 text-yellow-600 dark:text-yellow-400 text-xs font-medium",title:"규격 검증 실패"},ol={class:"flex items-center gap-1"},rl={class:"text-sm text-muted-foreground shrink-0"},il={class:"flex justify-end"},nl={class:"space-y-5 py-2"},ul={class:"space-y-2"},dl={class:"space-y-2"},cl={class:"space-y-2"},ml={class:"space-y-2"},vl={class:"space-y-2"},fl={key:0,class:"space-y-2"},pl={class:"flex flex-wrap gap-3"},gl=["for"],_l={key:1,class:"space-y-2"},yl={class:"flex flex-wrap gap-3"},Dl=["for"],xl={key:2,class:"space-y-2"},hl={class:"flex flex-wrap gap-3"},Il=["for"],bl={key:3,class:"space-y-2"},kl={class:"flex flex-wrap gap-3"},$l=["for"],Ul={class:"flex gap-2"},Vl={key:0,class:"text-sm text-muted-foreground"},ea=dt({__name:"IncomingMaterialPage",setup(wl){const{orders:We,loadOrders:Ae}=Ut(),O=u(!1),R=u(""),S=u(""),M=u(""),Ue=u([]),Ve=u([]),H=u([]),J=u(!1),F=u(!1),fe=u([]),pe=u([]),ge=u([]),_e=u([]),ye=u([]),De=u([]),q=u([]),z=u([]),E=u([]),W=u([]),K=u(!1),Q=u(null),we=u(""),A=u(!1),B=u([]),xe=u(!1),b=re({}),L=u({}),p=u({}),ee=u({}),X=u({}),Y=u([]),g=u({}),y=u({}),te=u({}),_=u({}),D=re({}),V=u({}),N=re({}),T=re({}),j=u([]),he=ct(()=>new Set(j.value.map(l=>l.materialDeliveryId))),Z=u({}),le=u(!1),ae=u(null),Le=u(""),G=u(!1);function se(l,e){return l.includes(e)?l.filter(t=>t!==e):[...l,e]}async function Be(){fe.value=[],pe.value=[],R.value="",S.value="",M.value="",H.value=[],q.value=[],z.value=[],E.value=[],W.value=[];try{const[l,e,t,o,m,f]=await Promise.all([w.getMaterialTypeList(),w.getDivisionList(),w.getZoneList(),w.getFloorList(),w.getSectionList(),w.getUsageList()]);Ue.value=l,Ve.value=e,ge.value=t,_e.value=o,ye.value=m,De.value=f}catch(l){console.error("기초 데이터 로드 실패:",l);const e=l;alert(e.response?.data?.message||e.message);return}O.value=!0}async function Xe(l){if(S.value=String(l??""),M.value="",H.value=[],!!S.value){J.value=!0;try{H.value=await w.getWorkTypeList(Number(S.value))}catch(e){console.error("공종 목록 로드 실패:",e)}finally{J.value=!1}}}function Ye(l){const e=l.target;fe.value=e.files?Array.from(e.files):[]}function Ze(l){const e=l.target;pe.value=e.files?Array.from(e.files):[]}async function Ge(){if(!R.value){alert("자재유형을 선택해주세요.");return}F.value=!0;try{await P.createMaterialDelivery({materialTypeId:Number(R.value),workTypeId:M.value?Number(M.value):void 0,deliveryNotes:fe.value,deliveryPhotos:pe.value,zoneIds:q.value,floorIds:z.value,sectionIds:E.value,usageIds:W.value}),O.value=!1,be()}catch(l){console.error("송장입력 실패:",l);const e=l;alert(e.response?.data?.message||e.message)}finally{F.value=!1}}function He(l,e){Q.value=l,we.value=e,K.value=!0}async function Je(){if(Q.value!=null){A.value=!0;try{await P.deleteMaterialDelivery(Q.value),K.value=!1;const l=Q.value;B.value=B.value.filter(e=>e.materialDeliveryId!==l),delete b[l],g.value[l]?.forEach(e=>URL.revokeObjectURL(e)),delete L.value[l],delete p.value[l],delete g.value[l],delete y.value[l],delete ee.value[l],delete X.value[l],delete te.value[l],delete _.value[l],delete D[l],delete V.value[l],delete N[l],delete T[l],delete Z.value[l]}catch(l){console.error("반입자재 삭제 실패:",l);const e=l;alert(e.response?.data?.message||e.message)}finally{A.value=!1}}}function Ke(l){return j.value.find(e=>e.materialDeliveryId===l)}function Qe(l,e){ae.value=l,Le.value=e,le.value=!0}async function et(){if(ae.value!=null){G.value=!0;try{await ve.deleteMaterialInspectionRequest(ae.value),le.value=!1,j.value=j.value.filter(l=>l.id!==ae.value)}catch(l){console.error("검수요청서 삭제 실패:",l);const e=l;alert(e.response?.data?.message||e.message)}finally{G.value=!1}}}async function tt(l){Z.value[l]=!0;try{await ve.createMaterialInspectionRequest(l),j.value=await ve.getMaterialInspectionRequestList()}catch(e){console.error("자재반입검수요청서 생성 실패:",e);const t=e;alert(t.response?.data?.message||t.message)}finally{Z.value[l]=!1}}async function lt(l){const e=l.materialDeliveryId;if(b[e]){b[e]=!1,g.value[e]?.forEach(t=>URL.revokeObjectURL(t)),delete L.value[e],delete p.value[e],delete g.value[e],delete y.value[e],delete _.value[e],delete D[e],delete V.value[e],delete N[e],delete T[e];return}for(const t of Object.keys(b)){const o=Number(t);b[o]&&(b[o]=!1,g.value[o]?.forEach(m=>URL.revokeObjectURL(m)),delete L.value[o],delete p.value[o],delete g.value[o],delete y.value[o],delete _.value[o],delete D[o],delete V.value[o],delete N[o],delete T[o])}b[e]=!0,ee.value[e]=!0;try{const t=await P.getMaterialDeliveryLineList(e);if(L.value[e]=t,p.value[e]={supplier:l.supplier,deliveryDate:l.deliveryDate,location:l.location??"",noteDescriptions:l.noteFiles.map(m=>({noteId:m.noteId,description:m.description})),photoDescriptions:l.photoFiles.map(m=>({photoId:m.photoId,description:m.description}))},y.value[e]=0,_.value[e]=1,D[e]={x:0,y:0},V.value[e]=!1,N[e]={x:0,y:0},T[e]={x:0,y:0},Y.value.length===0){const m=We.value.find(f=>f.id===l.materialOrderId);if(m?.materialTypeId)try{Y.value=await w.getMaterialSpecList(m.materialTypeId)}catch{Y.value=[]}}const o=[...l.noteFiles.map(m=>m.url),...l.photoFiles.map(m=>m.url)];if(o.length>0){te.value[e]=!0;try{const m=await Promise.all(o.map(f=>P.getDeliveryNoteImage(f)));g.value[e]=m}catch(m){console.error("송장 이미지 로드 실패:",m),g.value[e]=[]}finally{te.value[e]=!1}}}catch(t){console.error("반입자재 라인 로드 실패:",t);const o=t;alert(o.response?.data?.message||o.message),b[e]=!1}finally{ee.value[e]=!1}}function Ie(l){_.value[l]=1,D[l]&&(D[l].x=0,D[l].y=0)}function at(l,e){e.preventDefault();const t=e.deltaY>0?-.1:.1,o=_.value[l]??1;_.value[l]=Math.min(5,Math.max(.5,o+t))}function st(l,e){if((_.value[l]??1)<=1)return;V.value[l]=!0,N[l]={x:e.clientX,y:e.clientY};const o=D[l]??{x:0,y:0};T[l]={x:o.x,y:o.y},e.target.setPointerCapture(e.pointerId)}function ot(l,e){if(!V.value[l])return;const t=N[l],o=T[l];t&&o&&D[l]&&(D[l].x=o.x+(e.clientX-t.x),D[l].y=o.y+(e.clientY-t.y))}function Ce(l){V.value[l]=!1}function rt(l){const e=g.value[l]??[];if(e.length===0)return;const t=y.value[l]??0;y.value[l]=t>0?t-1:e.length-1,Ie(l)}function it(l){const e=g.value[l]??[];if(e.length===0)return;const t=y.value[l]??0;y.value[l]=t<e.length-1?t+1:0,Ie(l)}async function nt(l){const e=l.materialDeliveryId,t=p.value[e],o=L.value[e];if(!(!t||!o)){X.value[e]=!0;try{await P.updateMaterialDelivery(e,{supplier:t.supplier,deliveryDate:t.deliveryDate,location:t.location||null,deliveryLines:o.map(m=>({deliveryLineId:m.deliveryLineId,manufacturer:m.manufacturer,specId:m.materialSpecId,quantity:String(m.quantity)})),noteDescriptions:t.noteDescriptions,photoDescriptions:t.photoDescriptions}),b[e]=!1,g.value[e]?.forEach(m=>URL.revokeObjectURL(m)),delete L.value[e],delete p.value[e],delete g.value[e],delete y.value[e],delete _.value[e],delete D[e],be()}catch(m){console.error("반입자재 수정 실패:",m);const f=m;alert(f.response?.data?.message||f.message)}finally{X.value[e]=!1}}}async function be(){xe.value=!0;try{B.value=await P.getMaterialDeliveryList()}catch(l){console.error("반입자재 목록 로딩 실패:",l);const e=l;alert(e.response?.data?.message||e.message)}finally{xe.value=!1}}return mt(()=>{Ae(),be(),ve.getMaterialInspectionRequestList().then(l=>j.value=l).catch(()=>{})}),vt(()=>{Object.values(g.value).forEach(l=>{l.forEach(e=>URL.revokeObjectURL(e))})}),(l,e)=>(i(),k(pt,{title:"반입자재"},{default:r(()=>[s(gt,{height:"flex-1","min-height":"1100px"},{default:r(()=>[n("div",Vt,[s(a(h),{variant:"outline",size:"sm",onClick:Be},{default:r(()=>[...e[7]||(e[7]=[d(" 발주서 없이 송장입력 ",-1)])]),_:1})]),xe.value?(i(),c("div",wt," 반입자재 목록 로딩 중... ")):B.value.length===0?(i(),c("div",Lt,[...e[8]||(e[8]=[n("p",{class:"text-muted-foreground"},"반입된 자재가 없습니다.",-1)])])):(i(),c("div",Ct,[(i(!0),c(x,null,$(B.value,t=>(i(),c("div",{key:t.materialDeliveryId,class:"border border-border rounded-lg overflow-hidden"},[n("div",{class:"flex items-center gap-3 px-4 py-3 bg-muted/30 cursor-pointer select-none",onClick:o=>lt(t)},[n("span",Mt,v(b[t.materialDeliveryId]?"▲":"▼"),1),n("span",Nt,v(t.materialOrderNumber),1),n("span",Tt,v(t.supplier),1),n("span",jt,v(t.deliveryDate),1),t.location?(i(),c("span",Pt,v(t.location),1)):U("",!0),n("div",{class:"flex items-center gap-1 ml-auto",onClick:e[0]||(e[0]=Se(()=>{},["stop"]))},[he.value.has(t.materialDeliveryId)?(i(),c(x,{key:1},[s(a(_t),{variant:"secondary"},{default:r(()=>[...e[9]||(e[9]=[d("검수요청 완료",-1)])]),_:1}),s(a(h),{variant:"ghost",size:"sm",class:"h-6 w-6 p-0 text-muted-foreground hover:text-destructive",onClick:o=>Qe(Ke(t.materialDeliveryId).id,t.materialOrderNumber)},{default:r(()=>[s(a(Ee),{class:"h-3 w-3"})]),_:1},8,["onClick"])],64)):(i(),k(a(h),{key:0,variant:"outline",size:"sm",disabled:Z.value[t.materialDeliveryId],onClick:o=>tt(t.materialDeliveryId)},{default:r(()=>[d(v(Z.value[t.materialDeliveryId]?"생성 중...":"자재반입검수요청서"),1)]),_:2},1032,["disabled","onClick"])),s(a(h),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0 text-muted-foreground hover:text-destructive",disabled:he.value.has(t.materialDeliveryId),onClick:o=>He(t.materialDeliveryId,t.materialOrderNumber)},{default:r(()=>[s(a(Ee),{class:"h-4 w-4"})]),_:1},8,["disabled","onClick"])])],8,St),b[t.materialDeliveryId]?(i(),c("div",Ot,[ee.value[t.materialDeliveryId]?(i(),c("div",Rt," 라인 정보 로딩 중... ")):(i(),c("div",Ft,[n("div",qt,[te.value[t.materialDeliveryId]?(i(),c("div",zt,[...e[10]||(e[10]=[n("p",{class:"text-sm text-muted-foreground"},"이미지 로딩 중...",-1)])])):(g.value[t.materialDeliveryId]??[]).length>0?(i(),c(x,{key:1},[n("div",{class:Me(["h-[720px] border border-border rounded-lg overflow-hidden bg-muted/20 relative",{"cursor-grab":(_.value[t.materialDeliveryId]??1)>1,"cursor-grabbing":V.value[t.materialDeliveryId]}]),onWheel:Se(o=>at(t.materialDeliveryId,o),["prevent"]),onPointerdown:o=>st(t.materialDeliveryId,o),onPointermove:o=>ot(t.materialDeliveryId,o),onPointerup:o=>Ce(t.materialDeliveryId),onPointercancel:o=>Ce(t.materialDeliveryId)},[n("img",{src:g.value[t.materialDeliveryId]?.[y.value[t.materialDeliveryId]??0],alt:"송장 이미지",class:"w-full h-full object-contain select-none",draggable:"false",style:ft({transform:`translate(${D[t.materialDeliveryId]?.x??0}px, ${D[t.materialDeliveryId]?.y??0}px) scale(${_.value[t.materialDeliveryId]??1})`,transformOrigin:"center center",transition:V.value[t.materialDeliveryId]?"none":"transform 0.15s ease"})},null,12,Wt),n("div",At,[s(a(h),{variant:"ghost",size:"sm",class:"h-6 w-6 p-0",onClick:o=>_.value[t.materialDeliveryId]=Math.max(.5,(_.value[t.materialDeliveryId]??1)-.25)},{default:r(()=>[...e[11]||(e[11]=[d("−",-1)])]),_:1},8,["onClick"]),n("span",Bt,v(Math.round((_.value[t.materialDeliveryId]??1)*100))+"%",1),s(a(h),{variant:"ghost",size:"sm",class:"h-6 w-6 p-0",onClick:o=>_.value[t.materialDeliveryId]=Math.min(5,(_.value[t.materialDeliveryId]??1)+.25)},{default:r(()=>[...e[12]||(e[12]=[d("+",-1)])]),_:1},8,["onClick"]),(_.value[t.materialDeliveryId]??1)!==1?(i(),k(a(h),{key:0,variant:"ghost",size:"sm",class:"h-6 px-1 text-xs",onClick:o=>Ie(t.materialDeliveryId)},{default:r(()=>[...e[13]||(e[13]=[d("초기화",-1)])]),_:1},8,["onClick"])):U("",!0)])],42,Et),p.value[t.materialDeliveryId]?(i(),c("div",Xt,[(y.value[t.materialDeliveryId]??0)<t.noteFiles.length?(i(),k(a(C),{key:0,modelValue:p.value[t.materialDeliveryId].noteDescriptions[y.value[t.materialDeliveryId]??0].description,"onUpdate:modelValue":o=>p.value[t.materialDeliveryId].noteDescriptions[y.value[t.materialDeliveryId]??0].description=o,class:"h-8 text-sm",placeholder:"송장 설명"},null,8,["modelValue","onUpdate:modelValue"])):(i(),k(a(C),{key:1,modelValue:p.value[t.materialDeliveryId].photoDescriptions[(y.value[t.materialDeliveryId]??0)-t.noteFiles.length].description,"onUpdate:modelValue":o=>p.value[t.materialDeliveryId].photoDescriptions[(y.value[t.materialDeliveryId]??0)-t.noteFiles.length].description=o,class:"h-8 text-sm",placeholder:"사진 설명"},null,8,["modelValue","onUpdate:modelValue"]))])):U("",!0),(g.value[t.materialDeliveryId]??[]).length>1?(i(),c("div",Yt,[s(a(h),{variant:"outline",size:"sm",onClick:o=>rt(t.materialDeliveryId)},{default:r(()=>[...e[14]||(e[14]=[d(" ← 이전 ",-1)])]),_:1},8,["onClick"]),n("span",Zt,v((y.value[t.materialDeliveryId]??0)+1)+" / "+v((g.value[t.materialDeliveryId]??[]).length),1),s(a(h),{variant:"outline",size:"sm",onClick:o=>it(t.materialDeliveryId)},{default:r(()=>[...e[15]||(e[15]=[d(" 다음 → ",-1)])]),_:1},8,["onClick"])])):U("",!0)],64)):(i(),c("div",Gt,[...e[16]||(e[16]=[n("p",{class:"text-sm text-muted-foreground"},"이미지가 없습니다",-1)])]))]),n("div",Ht,[n("div",Jt,[n("div",Kt,[s(a(I),null,{default:r(()=>[...e[17]||(e[17]=[d("공급업체",-1)])]),_:1}),s(a(C),{modelValue:p.value[t.materialDeliveryId].supplier,"onUpdate:modelValue":o=>p.value[t.materialDeliveryId].supplier=o},null,8,["modelValue","onUpdate:modelValue"])]),n("div",Qt,[s(a(I),null,{default:r(()=>[...e[18]||(e[18]=[d("납품일",-1)])]),_:1}),s(a(C),{modelValue:p.value[t.materialDeliveryId].deliveryDate,"onUpdate:modelValue":o=>p.value[t.materialDeliveryId].deliveryDate=o,type:"date"},null,8,["modelValue","onUpdate:modelValue"])]),n("div",el,[s(a(I),null,{default:r(()=>[...e[19]||(e[19]=[d("위치",-1)])]),_:1}),s(a(C),{modelValue:p.value[t.materialDeliveryId].location,"onUpdate:modelValue":o=>p.value[t.materialDeliveryId].location=o,placeholder:"예: A동 3층"},null,8,["modelValue","onUpdate:modelValue"])])]),n("div",tl,[s(a(yt),null,{default:r(()=>[s(a(Dt),null,{default:r(()=>[s(a(Ne),null,{default:r(()=>[s(a(ke),null,{default:r(()=>[...e[20]||(e[20]=[d("제조사",-1)])]),_:1}),s(a(ke),null,{default:r(()=>[...e[21]||(e[21]=[d("규격",-1)])]),_:1}),s(a(ke),{class:"w-[200px] text-right"},{default:r(()=>[...e[22]||(e[22]=[d("수량",-1)])]),_:1})]),_:1})]),_:1}),s(a(xt),null,{default:r(()=>[(i(!0),c(x,null,$(L.value[t.materialDeliveryId],(o,m)=>(i(),k(a(Ne),{key:o.deliveryLineId??m,class:Me({"bg-yellow-50 dark:bg-yellow-950/30":!o.specValidation})},{default:r(()=>[s(a($e),null,{default:r(()=>[s(a(C),{"model-value":o.manufacturer??"",class:"h-8 text-sm","onUpdate:modelValue":f=>o.manufacturer=f||null},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),s(a($e),null,{default:r(()=>[n("div",ll,[s(a(ne),{"model-value":o.materialSpecId!=null?String(o.materialSpecId):"","onUpdate:modelValue":f=>{const oe=Y.value.find(ut=>ut.id===Number(f));o.materialSpecId=oe?oe.id:null,o.materialSpecName=oe?oe.name:null}},{default:r(()=>[s(a(ue),{class:"h-8 text-sm"},{default:r(()=>[s(a(de),{placeholder:"규격 선택"})]),_:1}),s(a(ce),null,{default:r(()=>[(i(!0),c(x,null,$(Y.value,f=>(i(),k(a(me),{key:f.id,value:String(f.id)},{default:r(()=>[d(v(f.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"]),o.specValidation?(i(),c("span",al," ✅ ")):(i(),c("span",sl," ⚠️ "))])]),_:2},1024),s(a($e),null,{default:r(()=>[n("div",ol,[s(a(C),{"model-value":String(o.quantity),class:"h-8 text-sm text-right","onUpdate:modelValue":f=>o.quantity=Number(f)||0},null,8,["model-value","onUpdate:modelValue"]),n("span",rl,v(t.unit),1)])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:2},1024)]),_:2},1024)]),n("div",il,[s(a(h),{disabled:X.value[t.materialDeliveryId]||he.value.has(t.materialDeliveryId),onClick:o=>nt(t)},{default:r(()=>[d(v(X.value[t.materialDeliveryId]?"저장 중...":"수정하기"),1)]),_:2},1032,["disabled","onClick"])])])]))])):U("",!0)]))),128))]))]),_:1}),s(a($t),{open:O.value,"onUpdate:open":e[4]||(e[4]=t=>O.value=t)},{default:r(()=>[s(a(ht),{class:"sm:max-w-[520px]"},{default:r(()=>[s(a(It),null,{default:r(()=>[s(a(bt),null,{default:r(()=>[...e[23]||(e[23]=[d("발주서 없이 송장입력",-1)])]),_:1})]),_:1}),n("div",nl,[n("div",ul,[s(a(I),null,{default:r(()=>[...e[24]||(e[24]=[d("자재유형",-1)])]),_:1}),s(a(ne),{modelValue:R.value,"onUpdate:modelValue":e[1]||(e[1]=t=>R.value=t)},{default:r(()=>[s(a(ue),null,{default:r(()=>[s(a(de),{placeholder:"자재유형 선택"})]),_:1}),s(a(ce),null,{default:r(()=>[(i(!0),c(x,null,$(Ue.value,t=>(i(),k(a(me),{key:t.id,value:String(t.id)},{default:r(()=>[d(v(t.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),n("div",dl,[s(a(I),null,{default:r(()=>[...e[25]||(e[25]=[d("분류 (선택사항)",-1)])]),_:1}),s(a(ne),{"model-value":S.value,"onUpdate:modelValue":Xe},{default:r(()=>[s(a(ue),null,{default:r(()=>[s(a(de),{placeholder:"분류 선택"})]),_:1}),s(a(ce),null,{default:r(()=>[(i(!0),c(x,null,$(Ve.value,t=>(i(),k(a(me),{key:t.id,value:String(t.id)},{default:r(()=>[d(v(t.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),n("div",cl,[s(a(I),null,{default:r(()=>[...e[26]||(e[26]=[d("공종 (선택사항)",-1)])]),_:1}),s(a(ne),{modelValue:M.value,"onUpdate:modelValue":e[2]||(e[2]=t=>M.value=t),disabled:!S.value||J.value},{default:r(()=>[s(a(ue),null,{default:r(()=>[s(a(de),{placeholder:J.value?"로딩중...":"공종 선택"},null,8,["placeholder"])]),_:1}),s(a(ce),null,{default:r(()=>[(i(!0),c(x,null,$(H.value,t=>(i(),k(a(me),{key:t.id,value:String(t.id)},{default:r(()=>[d(v(t.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),n("div",ml,[s(a(I),null,{default:r(()=>[...e[27]||(e[27]=[d("송장파일",-1)])]),_:1}),n("input",{type:"file",multiple:"",accept:".pdf,.png,.jpg,.jpeg",class:"block w-full text-sm text-foreground file:mr-3 file:py-1.5 file:px-3 file:rounded file:border file:border-input file:bg-muted file:text-sm file:font-medium hover:file:bg-muted/80 cursor-pointer",onChange:Ye},null,32)]),n("div",vl,[s(a(I),null,{default:r(()=>[...e[28]||(e[28]=[d("반입사진",-1)])]),_:1}),n("input",{type:"file",multiple:"",accept:"image/*",class:"block w-full text-sm text-foreground file:mr-3 file:py-1.5 file:px-3 file:rounded file:border file:border-input file:bg-muted file:text-sm file:font-medium hover:file:bg-muted/80 cursor-pointer",onChange:Ze},null,32)]),ge.value.length>0?(i(),c("div",fl,[s(a(I),null,{default:r(()=>[...e[29]||(e[29]=[d("존",-1)])]),_:1}),n("div",pl,[(i(!0),c(x,null,$(ge.value,t=>(i(),c("div",{key:t.id,class:"flex items-center gap-1.5"},[s(a(ie),{id:`direct-zone-${t.id}`,"model-value":q.value.includes(t.id),"onUpdate:modelValue":o=>q.value=se(q.value,t.id)},null,8,["id","model-value","onUpdate:modelValue"]),n("label",{for:`direct-zone-${t.id}`,class:"text-sm cursor-pointer"},v(t.name),9,gl)]))),128))])])):U("",!0),_e.value.length>0?(i(),c("div",_l,[s(a(I),null,{default:r(()=>[...e[30]||(e[30]=[d("층",-1)])]),_:1}),n("div",yl,[(i(!0),c(x,null,$(_e.value,t=>(i(),c("div",{key:t.id,class:"flex items-center gap-1.5"},[s(a(ie),{id:`direct-floor-${t.id}`,"model-value":z.value.includes(t.id),"onUpdate:modelValue":o=>z.value=se(z.value,t.id)},null,8,["id","model-value","onUpdate:modelValue"]),n("label",{for:`direct-floor-${t.id}`,class:"text-sm cursor-pointer"},v(t.name),9,Dl)]))),128))])])):U("",!0),ye.value.length>0?(i(),c("div",xl,[s(a(I),null,{default:r(()=>[...e[31]||(e[31]=[d("구역",-1)])]),_:1}),n("div",hl,[(i(!0),c(x,null,$(ye.value,t=>(i(),c("div",{key:t.id,class:"flex items-center gap-1.5"},[s(a(ie),{id:`direct-section-${t.id}`,"model-value":E.value.includes(t.id),"onUpdate:modelValue":o=>E.value=se(E.value,t.id)},null,8,["id","model-value","onUpdate:modelValue"]),n("label",{for:`direct-section-${t.id}`,class:"text-sm cursor-pointer"},v(t.name),9,Il)]))),128))])])):U("",!0),De.value.length>0?(i(),c("div",bl,[s(a(I),null,{default:r(()=>[...e[32]||(e[32]=[d("용도",-1)])]),_:1}),n("div",kl,[(i(!0),c(x,null,$(De.value,t=>(i(),c("div",{key:t.id,class:"flex items-center gap-1.5"},[s(a(ie),{id:`direct-usage-${t.id}`,"model-value":W.value.includes(t.id),"onUpdate:modelValue":o=>W.value=se(W.value,t.id)},null,8,["id","model-value","onUpdate:modelValue"]),n("label",{for:`direct-usage-${t.id}`,class:"text-sm cursor-pointer"},v(t.name),9,$l)]))),128))])])):U("",!0)]),s(a(kt),{class:"flex-col items-end gap-2"},{default:r(()=>[n("div",Ul,[s(a(h),{variant:"outline",onClick:e[3]||(e[3]=t=>O.value=!1)},{default:r(()=>[...e[33]||(e[33]=[d("취소",-1)])]),_:1}),s(a(h),{disabled:F.value,onClick:Ge},{default:r(()=>[d(v(F.value?"저장 중...":"저장"),1)]),_:1},8,["disabled"])]),F.value?(i(),c("p",Vl," 시간이 좀 걸립니다. 기다려주세요. ")):U("",!0)]),_:1})]),_:1})]),_:1},8,["open"]),s(a(ze),{open:K.value,"onUpdate:open":e[5]||(e[5]=t=>K.value=t)},{default:r(()=>[s(a(Te),null,{default:r(()=>[s(a(je),null,{default:r(()=>[s(a(Pe),null,{default:r(()=>[...e[34]||(e[34]=[d("삭제 확인",-1)])]),_:1}),s(a(Oe),null,{default:r(()=>[d(" '"+v(we.value)+"' 반입자재를 삭제하시겠습니까? ",1)]),_:1})]),_:1}),s(a(Re),null,{default:r(()=>[s(a(Fe),{disabled:A.value},{default:r(()=>[...e[35]||(e[35]=[d("취소",-1)])]),_:1},8,["disabled"]),s(a(qe),{disabled:A.value,onClick:Je},{default:r(()=>[d(v(A.value?"삭제 중...":"삭제"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),s(a(ze),{open:le.value,"onUpdate:open":e[6]||(e[6]=t=>le.value=t)},{default:r(()=>[s(a(Te),null,{default:r(()=>[s(a(je),null,{default:r(()=>[s(a(Pe),null,{default:r(()=>[...e[36]||(e[36]=[d("검수요청서 삭제 확인",-1)])]),_:1}),s(a(Oe),null,{default:r(()=>[d(" '"+v(Le.value)+"' 검수요청서를 삭제하시겠습니까? ",1)]),_:1})]),_:1}),s(a(Re),null,{default:r(()=>[s(a(Fe),{disabled:G.value},{default:r(()=>[...e[37]||(e[37]=[d("취소",-1)])]),_:1},8,["disabled"]),s(a(qe),{disabled:G.value,onClick:et},{default:r(()=>[d(v(G.value?"삭제 중...":"삭제"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1}))}});export{ea as default};
