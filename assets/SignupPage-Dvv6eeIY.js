import{m as $,d as P,h as j,r as u,i as U,c as r,e as o,w as i,u as e,g as p,j as m,a,t as n,F as S,n as T,k as B,f as I,o as d,p as M}from"./index-KJhqAVSu.js";import{_ as L}from"./index-Dq-bekJJ.js";import{_ as F,a as A,b as R,c as q}from"./CardTitle.vue_vue_type_script_setup_true_lang-Cqw_8ocj.js";import{_ as D}from"./CardDescription.vue_vue_type_script_setup_true_lang-DzmdWyMb.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang-D8WFBkUO.js";import{_ as O,a as z,b as G,c as H,d as J}from"./SelectValue.vue_vue_type_script_setup_true_lang-ClZuE1Kp.js";import"./utils-DV7Ns5nw.js";import"./index-jBioVDwN.js";import"./Collection-BqB1xEMc.js";const K=$.create({baseURL:"/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),Q={async getCompanies(){const{data:w}=await K.get("/company/getCompanyList");return w}},W={class:"min-h-screen flex items-center justify-center p-4"},X={key:0,class:"p-3 text-sm text-red-600 bg-red-50 rounded-md dark:bg-red-900/20 dark:text-red-400"},Y={class:"space-y-2"},Z={key:0,class:"text-sm text-red-500"},ee={class:"space-y-2"},se={key:0,class:"text-sm text-red-500"},te={class:"space-y-2"},ae={key:0,class:"text-sm text-red-500"},le={key:1,class:"text-sm text-red-500"},oe={class:"space-y-2"},de={key:0,class:"text-sm text-red-500"},re={class:"space-y-2"},ie={key:0,class:"text-sm text-red-500"},ne={class:"space-y-2"},ue={key:0,class:"text-sm text-red-500"},me={class:"space-y-2"},pe={key:0,class:"text-sm text-red-500"},fe={class:"flex flex-col gap-2 pt-4"},Ee=P({__name:"SignupPage",setup(w){const E=I(),t=j(),c=u(""),_=u(""),x=u(""),y=u(""),v=u(""),b=u(""),g=u(),k=u([]),V=u(!1);U(async()=>{t.clearError(),V.value=!0;try{k.value=await Q.getCompanies()}catch(C){console.error("Failed to load companies:",C)}finally{V.value=!1}});const N=async()=>{try{await t.signup({userEmail:c.value,userPassword:_.value,userPasswordConfirm:x.value,userName:y.value,phoneNumber:v.value,jobTitle:b.value||void 0,companyId:g.value||void 0}),E.push({path:"/login",query:{registered:"true"}})}catch{}},h=()=>{E.push("/login")};return(C,s)=>(d(),r("div",W,[o(e(F),{class:"w-full max-w-md"},{default:i(()=>[o(e(A),null,{default:i(()=>[o(e(R),{class:"text-2xl text-center"},{default:i(()=>[...s[7]||(s[7]=[p("회원가입",-1)])]),_:1}),o(e(D),{class:"text-center"},{default:i(()=>[...s[8]||(s[8]=[p("건설업무도우미 계정 생성",-1)])]),_:1})]),_:1}),o(e(q),{class:"space-y-4"},{default:i(()=>[e(t).error&&Object.keys(e(t).fieldErrors).length===0?(d(),r("div",X,n(e(t).error),1)):m("",!0),a("form",{class:"space-y-4",onSubmit:B(N,["prevent"])},[a("div",Y,[s[9]||(s[9]=a("label",{class:"text-sm font-medium"},"이메일",-1)),o(e(f),{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=l=>c.value=l),type:"text",placeholder:"이메일을 입력하세요",disabled:e(t).isLoading},null,8,["modelValue","disabled"]),e(t).fieldErrors.userEmail?(d(),r("p",Z,n(e(t).fieldErrors.userEmail),1)):m("",!0)]),a("div",ee,[s[10]||(s[10]=a("label",{class:"text-sm font-medium"},"비밀번호",-1)),o(e(f),{modelValue:_.value,"onUpdate:modelValue":s[1]||(s[1]=l=>_.value=l),type:"password",placeholder:"비밀번호를 입력하세요 (8자 이상)",disabled:e(t).isLoading},null,8,["modelValue","disabled"]),e(t).fieldErrors.userPassword?(d(),r("p",se,n(e(t).fieldErrors.userPassword),1)):m("",!0)]),a("div",te,[s[11]||(s[11]=a("label",{class:"text-sm font-medium"},"비밀번호 확인",-1)),o(e(f),{modelValue:x.value,"onUpdate:modelValue":s[2]||(s[2]=l=>x.value=l),type:"password",placeholder:"비밀번호를 다시 입력하세요",disabled:e(t).isLoading},null,8,["modelValue","disabled"]),e(t).fieldErrors.userPasswordConfirm?(d(),r("p",ae,n(e(t).fieldErrors.userPasswordConfirm),1)):m("",!0),e(t).fieldErrors.passwordMatching?(d(),r("p",le,n(e(t).fieldErrors.passwordMatching),1)):m("",!0)]),a("div",oe,[s[12]||(s[12]=a("label",{class:"text-sm font-medium"},"이름",-1)),o(e(f),{modelValue:y.value,"onUpdate:modelValue":s[3]||(s[3]=l=>y.value=l),type:"text",placeholder:"이름을 입력하세요",disabled:e(t).isLoading},null,8,["modelValue","disabled"]),e(t).fieldErrors.userName?(d(),r("p",de,n(e(t).fieldErrors.userName),1)):m("",!0)]),a("div",re,[s[13]||(s[13]=a("label",{class:"text-sm font-medium"},[p("전화번호 "),a("span",{class:"text-muted-foreground"},"(- 없이 입력)")],-1)),o(e(f),{modelValue:v.value,"onUpdate:modelValue":s[4]||(s[4]=l=>v.value=l),type:"text",placeholder:"01012345678",disabled:e(t).isLoading},null,8,["modelValue","disabled"]),e(t).fieldErrors.phoneNumber?(d(),r("p",ie,n(e(t).fieldErrors.phoneNumber),1)):m("",!0)]),a("div",ne,[s[14]||(s[14]=a("label",{class:"text-sm font-medium"},[p("직책 "),a("span",{class:"text-muted-foreground"},"(선택)")],-1)),o(e(f),{modelValue:b.value,"onUpdate:modelValue":s[5]||(s[5]=l=>b.value=l),type:"text",placeholder:"예: 현장소장, 공무팀장",disabled:e(t).isLoading},null,8,["modelValue","disabled"]),e(t).fieldErrors.jobTitle?(d(),r("p",ue,n(e(t).fieldErrors.jobTitle),1)):m("",!0)]),a("div",me,[s[15]||(s[15]=a("label",{class:"text-sm font-medium"},[p("소속 회사 "),a("span",{class:"text-muted-foreground"},"(선택)")],-1)),o(e(O),{modelValue:g.value,"onUpdate:modelValue":s[6]||(s[6]=l=>g.value=l),disabled:e(t).isLoading||V.value},{default:i(()=>[o(e(z),{class:"w-full"},{default:i(()=>[o(e(G),{placeholder:"회사를 선택하세요"})]),_:1}),o(e(H),null,{default:i(()=>[(d(!0),r(S,null,T(k.value,l=>(d(),M(e(J),{key:l.id,value:l.id},{default:i(()=>[p(n(l.companyName),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),e(t).fieldErrors.companyId?(d(),r("p",pe,n(e(t).fieldErrors.companyId),1)):m("",!0)]),a("div",fe,[o(e(L),{type:"submit",class:"w-full",disabled:e(t).isLoading},{default:i(()=>[p(n(e(t).isLoading?"가입 중...":"회원가입"),1)]),_:1},8,["disabled"]),o(e(L),{variant:"outline",type:"button",class:"w-full",onClick:h},{default:i(()=>[...s[16]||(s[16]=[p(" 돌아가기 ",-1)])]),_:1})])],32)]),_:1})]),_:1})]))}});export{Ee as default};
