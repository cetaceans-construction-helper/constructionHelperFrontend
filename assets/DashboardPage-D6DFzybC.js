import{d as F,r as f,y as g,i as V,c as r,a as t,e as c,w as p,u as i,f as E,g as v,t as l,F as u,n as m,o as d}from"./index-CrXngJox.js";import{_ as D}from"./AreaCard.vue_vue_type_script_setup_true_lang-Cun49brn.js";import{_ as b}from"./index-DjQGxc2-.js";import{w as N}from"./work-tyQ0W_eq.js";import{a as G}from"./attendance-Qm15IQ1P.js";import{m as O}from"./materialOrder-Nqo9WW5x.js";import{u as R}from"./apiClient-ycqybHFy.js";import{u as Y}from"./calendarStore-Czt6M6H0.js";import"./Collection-7xKaQT2u.js";import"./index-DbURNFAQ.js";import"./utils-BjnBM6mg.js";const q={class:"flex-1 flex flex-col gap-4"},H={class:"flex gap-4 items-start"},J={class:"flex items-center justify-between mb-3"},K={key:0,class:"text-sm text-muted-foreground"},U={key:1,class:"space-y-4"},X={class:"flex items-center justify-between"},Z={class:"text-lg font-semibold"},tt={class:"text-sm text-muted-foreground"},et={class:"border border-border rounded-lg p-3"},st={key:0,class:"text-sm text-muted-foreground"},ot={key:1,class:"space-y-3"},rt={class:"text-sm font-medium mb-1"},dt={class:"space-y-0.5"},nt={class:"border border-border rounded-lg p-3"},at={key:0,class:"text-sm text-muted-foreground"},lt={key:1,class:"space-y-3"},it={class:"text-sm font-medium mb-1"},ut={class:"space-y-0.5"},mt={class:"border border-border rounded-lg p-3"},ct={key:0,class:"text-sm text-muted-foreground"},pt={key:1,class:"space-y-3"},ft={class:"text-sm font-medium mb-1"},xt={class:"space-y-0.5"},yt={class:"border border-border rounded-lg p-3"},gt={key:0,class:"text-sm text-muted-foreground"},vt={key:1,class:"space-y-3"},bt={class:"text-sm font-medium mb-1"},_t={class:"space-y-0.5"},kt={class:"text-sm font-bold mt-2"},ht={class:"space-y-4 mt-[5rem]"},wt={class:"border border-border rounded-lg p-3 flex items-center justify-between"},Dt={class:"border border-border rounded-lg p-3 flex items-center justify-between"},Nt={class:"border border-border rounded-lg p-3 flex items-center justify-between"},Qt=F({__name:"DashboardPage",setup(St){const L=E(),S=R(),A=Y(),I=a=>`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`,x=new Date,_=new Date(x);_.setDate(_.getDate()+1);const y=I(x),P=I(_),Q=["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "][x.getDay()],k=f([]),T=f([]),B=f([]),C=f([]),j=f([]),h=f(!1),W=g(()=>{const a=new Set(T.value),e=k.value.filter(n=>a.has(n.workId)),s=new Map;for(const n of e){const o=n.workType||"ë¯¸ë¶„ë¥˜";s.has(o)||s.set(o,[]),s.get(o).push(n)}return s}),M=g(()=>{const a=new Set(B.value),e=k.value.filter(n=>a.has(n.workId)),s=new Map;for(const n of e){const o=n.workType||"ë¯¸ë¶„ë¥˜";s.has(o)||s.set(o,[]),s.get(o).push(n)}return s}),$=g(()=>{const a=new Map;for(const e of j.value){const s=e.workTypeName||"ë¯¸ë¶„ë¥˜";a.has(s)||a.set(s,[]),a.get(s).push(e)}return a}),w=g(()=>{const a=[],e=new Map;for(const s of C.value){const n=`${s.workTypeId}-${s.companyId}`;if(!e.has(n)){const z={workTypeName:s.workTypeName,companyDisplayName:s.companyDisplayName,totalCount:0,items:[]};e.set(n,z),a.push(z)}const o=e.get(n);o.items.push(s),o.totalCount+=s.count}return a});return V(async()=>{if(S.selectedProjectId){h.value=!0;try{await A.getCalendar(S.selectedProjectId);const[a,e,s,n,o]=await Promise.all([N.getWorkList(),N.getWorkListByDate(y),N.getWorkListByDate(P),G.getAttendanceListByDate(y),O.getTotalDeliveryQuantityByDate(y)]);k.value=a,T.value=e,B.value=s,C.value=n,j.value=o}catch(a){console.error("ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:",a)}finally{h.value=!1}}}),(a,e)=>(d(),r("div",q,[t("div",H,[c(D,{height:"flex-none","min-height":"auto",class:"w-1/3"},{default:p(()=>[t("div",J,[e[2]||(e[2]=t("h3",{class:"text-lg font-semibold"},"ì˜¤ëŠ˜ì‘ì—…",-1)),c(i(b),{variant:"outline",size:"sm",onClick:e[0]||(e[0]=s=>i(L).push("/helper/schedule/2d"))},{default:p(()=>[...e[1]||(e[1]=[v(" ê³µì •í‘œ ìˆ˜ì • ",-1)])]),_:1})]),h.value?(d(),r("div",K,"ë¡œë”© ì¤‘...")):(d(),r("div",U,[t("div",X,[t("div",null,[t("p",Z,l(i(x).getMonth()+1)+"ì›” "+l(i(x).getDate())+"ì¼ ("+l(i(Q))+") ",1),t("p",tt,l(i(y)),1)]),e[3]||(e[3]=t("div",{class:"text-right text-sm text-muted-foreground"},[t("p",null,"ë§‘ìŒ"),t("p",null,"-5Â°C / 3Â°C")],-1))]),t("div",et,[e[4]||(e[4]=t("h4",{class:"text-sm font-semibold mb-2 text-foreground"},"ì˜¤ëŠ˜ ì‘ì—…",-1)),W.value.size===0?(d(),r("div",st," ì˜¤ëŠ˜ ì˜ˆì •ëœ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤. ")):(d(),r("div",ot,[(d(!0),r(u,null,m(W.value,([s,n])=>(d(),r("div",{key:s},[t("p",rt,"â–  "+l(s),1),t("div",dt,[(d(!0),r(u,null,m(n,o=>(d(),r("p",{key:o.workId,class:"text-sm text-muted-foreground"}," - "+l(o.workName),1))),128))])]))),128))]))]),t("div",nt,[e[5]||(e[5]=t("h4",{class:"text-sm font-semibold mb-2 text-foreground"},"ë‚´ì¼ ì‘ì—…",-1)),M.value.size===0?(d(),r("div",at," ë‚´ì¼ ì˜ˆì •ëœ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤. ")):(d(),r("div",lt,[(d(!0),r(u,null,m(M.value,([s,n])=>(d(),r("div",{key:s},[t("p",it,"â–  "+l(s),1),t("div",ut,[(d(!0),r(u,null,m(n,o=>(d(),r("p",{key:o.workId,class:"text-sm text-muted-foreground"}," - "+l(o.workName),1))),128))])]))),128))]))]),t("div",mt,[e[6]||(e[6]=t("h4",{class:"text-sm font-semibold mb-2 text-foreground"},"ë°˜ì… ìì¬",-1)),$.value.size===0?(d(),r("div",ct," ì˜¤ëŠ˜ ë°˜ì…ëœ ìì¬ê°€ ì—†ìŠµë‹ˆë‹¤. ")):(d(),r("div",pt,[(d(!0),r(u,null,m($.value,([s,n])=>(d(),r("div",{key:s},[t("p",ft,"â–  "+l(s),1),t("div",xt,[(d(!0),r(u,null,m(n,o=>(d(),r("p",{key:o.materialSpecName,class:"text-sm text-muted-foreground"}," - "+l(o.materialTypeName)+"("+l(o.materialSpecName)+") : "+l(o.totalQuantity)+" "+l(o.unit),1))),128))])]))),128))]))]),e[8]||(e[8]=t("div",{class:"border border-border rounded-lg p-3"},[t("h4",{class:"text-sm font-semibold mb-2 text-foreground"},"ë°˜ì… ì¥ë¹„"),t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm text-muted-foreground"},"- í¬ë ˆì¸(25ton) : 1ëŒ€")])],-1)),t("div",yt,[e[7]||(e[7]=t("h4",{class:"text-sm font-semibold mb-2 text-foreground"},"ì¶œì—­ ì¸ì›",-1)),w.value.length===0?(d(),r("div",gt," ì˜¤ëŠ˜ ì¶œì—­ ì¸ì›ì´ ì—†ìŠµë‹ˆë‹¤. ")):(d(),r("div",vt,[(d(!0),r(u,null,m(w.value,(s,n)=>(d(),r("div",{key:n},[t("p",bt," â–  "+l(s.workTypeName)+"("+l(s.companyDisplayName)+") : "+l(s.totalCount)+"ëª… ",1),t("div",_t,[(d(!0),r(u,null,m(s.items,o=>(d(),r("p",{key:o.laborTypeId,class:"text-sm text-muted-foreground"}," - "+l(o.laborTypeName)+" : "+l(o.count)+"ëª… ",1))),128))])]))),128)),t("p",kt," â–  ì´ ì¶œì—­ì¸ì› : "+l(w.value.reduce((s,n)=>s+n.totalCount,0))+"ëª… ",1)]))])]))]),_:1}),c(D,{height:"flex-none","min-height":"auto",class:"w-1/3"},{default:p(()=>[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold"},"AI ë„ìš°ë¯¸",-1)),t("div",ht,[t("div",wt,[e[10]||(e[10]=t("p",{class:"text-sm"},"ì˜¤ëŠ˜ ì‘ì—…ëŸ‰ì„ ì²´í¬í•´ë³¼ê¹Œìš”?",-1)),c(i(b),{variant:"outline",size:"sm",class:"ml-4 shrink-0"},{default:p(()=>[...e[9]||(e[9]=[v("ë°”ë¡œê°€ê¸°",-1)])]),_:1})]),t("div",Dt,[e[12]||(e[12]=t("p",{class:"text-sm"},"3ê°œì›” í›„ ì—˜ë¦¬ë² ì´í„° ê³µì‚¬ê°€ ì‹œì‘ë©ë‹ˆë‹¤, ê²¬ì ì„ ìš”ì²­í• ê¹Œìš”?",-1)),c(i(b),{variant:"outline",size:"sm",class:"ml-4 shrink-0"},{default:p(()=>[...e[11]||(e[11]=[v("ë°”ë¡œê°€ê¸°",-1)])]),_:1})]),t("div",Nt,[e[14]||(e[14]=t("p",{class:"text-sm"},"ì˜¤ëŠ˜ ì‘ì—… í‰ê°€ì„œê°€ ë‚˜ì™”ìŠµë‹ˆë‹¤. í™•ì¸í•´ì£¼ì„¸ìš”.",-1)),c(i(b),{variant:"outline",size:"sm",class:"ml-4 shrink-0"},{default:p(()=>[...e[13]||(e[13]=[v("ë°”ë¡œê°€ê¸°",-1)])]),_:1})])])]),_:1}),c(D,{height:"flex-none","min-height":"auto",class:"w-1/3"},{default:p(()=>[...e[16]||(e[16]=[t("h3",{class:"text-lg font-semibold"},"ì‘ì—… í‰ê°€",-1),t("div",{class:"space-y-4 mt-[5rem]"},[t("div",{class:"border border-border rounded-lg p-3"},[t("p",{class:"text-sm font-medium text-orange-600 dark:text-orange-400"},"âš ï¸ ì˜¤ëŠ˜ íš¨ìœ¨ ì €í•˜"),t("p",{class:"text-sm text-muted-foreground mt-1"},"ì˜¤ëŠ˜ì€ ì¶œì—­ì¸ì› ëŒ€ë¹„ ì‘ì—…ëŸ‰ì´ 84% ë°–ì— ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.")]),t("div",{class:"border border-border rounded-lg p-3"},[t("p",{class:"text-sm font-medium text-green-600 dark:text-green-400"},"âœ“ ì´ë²ˆì£¼ ëª©í‘œ ì´ˆê³¼ ë‹¬ì„±"),t("p",{class:"text-sm text-muted-foreground mt-1"},"ì´ë²ˆì£¼ëŠ” ì¶œì—­ì¸ì› ëŒ€ë¹„ ì‘ì—…ëŸ‰ì´ 110% ì…ë‹ˆë‹¤.")]),t("div",{class:"border border-border rounded-lg p-3"},[t("p",{class:"text-sm font-medium text-blue-600 dark:text-blue-400"},"ğŸ“Š ì² ê·¼ì½˜í¬ë¦¬íŠ¸ê³µì‚¬"),t("p",{class:"text-sm text-muted-foreground mt-1"},"ì´ë²ˆë‹¬ ì² ê·¼ê³µì‚¬ ì§„ì²™ë¥ ì´ ê³„íš ëŒ€ë¹„ 105%ë¡œ ìˆœì¡°ë¡­ìŠµë‹ˆë‹¤.")]),t("div",{class:"border border-border rounded-lg p-3"},[t("p",{class:"text-sm font-medium text-red-600 dark:text-red-400"},"âš ï¸ ì§€ì—° ì£¼ì˜"),t("p",{class:"text-sm text-muted-foreground mt-1"},"ê¸ˆì†ê³µì‚¬ê°€ ê³„íš ëŒ€ë¹„ 3ì¼ ì§€ì—°ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì¸ì› ë³´ê°•ì„ ê²€í† í•˜ì„¸ìš”.")]),t("div",{class:"border border-border rounded-lg p-3"},[t("p",{class:"text-sm font-medium text-purple-600 dark:text-purple-400"},"ğŸ“ˆ ìƒì‚°ì„± ë¶„ì„"),t("p",{class:"text-sm text-muted-foreground mt-1"},"í˜•í‹€ê³µ 1ì¸ë‹¹ ì¼ì¼ í‰ê·  ì‘ì—…ëŸ‰: 12.5ã¡ (ì—…ê³„ í‰ê·  ëŒ€ë¹„ +15%)")])],-1)])]),_:1})])]))}});export{Qt as default};
