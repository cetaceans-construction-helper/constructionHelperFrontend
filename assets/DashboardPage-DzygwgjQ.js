import{d as P,r as x,y as h,i as F,c as r,a as t,e as m,w as u,u as i,f as V,g,t as l,F as c,n as p,o as d}from"./index-CLd163ez.js";import{_ as D}from"./AreaCard.vue_vue_type_script_setup_true_lang-Buko44Ic.js";import{_ as y}from"./index-D3klz3Fc.js";import{w as S}from"./work-C0q7qqY7.js";import{a as E}from"./attendance-nzXLqojV.js";import{u as G}from"./apiClient-B23t6YBI.js";import{u as R}from"./calendarStore-B9vfGHKi.js";import"./Collection-DX4XYVmH.js";import"./index-CEphPQ9z.js";import"./utils-m-6WHacx.js";const Y={class:"flex-1 flex flex-col gap-4"},q={class:"flex gap-4 items-start"},H={class:"flex items-center justify-between mb-3"},J={key:0,class:"text-sm text-muted-foreground"},K={key:1,class:"space-y-4"},O={class:"flex items-center justify-between"},Q={class:"text-lg font-semibold"},U={class:"text-sm text-muted-foreground"},X={class:"border border-border rounded-lg p-3"},Z={key:0,class:"text-sm text-muted-foreground"},tt={key:1,class:"space-y-3"},et={class:"text-sm font-medium mb-1"},st={class:"space-y-0.5"},ot={class:"border border-border rounded-lg p-3"},rt={key:0,class:"text-sm text-muted-foreground"},dt={key:1,class:"space-y-3"},nt={class:"text-sm font-medium mb-1"},at={class:"space-y-0.5"},lt={class:"border border-border rounded-lg p-3"},it={key:0,class:"text-sm text-muted-foreground"},mt={key:1,class:"space-y-3"},ut={class:"text-sm font-medium mb-1"},ct={class:"space-y-0.5"},pt={class:"text-sm font-bold mt-2"},ft={class:"space-y-4 mt-[5rem]"},xt={class:"border border-border rounded-lg p-3 flex items-center justify-between"},gt={class:"border border-border rounded-lg p-3 flex items-center justify-between"},yt={class:"border border-border rounded-lg p-3 flex items-center justify-between"},Bt=P({__name:"DashboardPage",setup(bt){const L=V(),N=G(),M=R(),I=a=>`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`,f=new Date,b=new Date(f);b.setDate(b.getDate()+1);const v=I(f),z=I(b),A=["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "][f.getDay()],k=x([]),C=x([]),j=x([]),B=x([]),_=x(!1),T=h(()=>{const a=new Set(C.value),e=k.value.filter(o=>a.has(o.workId)),s=new Map;for(const o of e){const n=o.workType||"ë¯¸ë¶„ë¥˜";s.has(n)||s.set(n,[]),s.get(n).push(o)}return s}),W=h(()=>{const a=new Set(j.value),e=k.value.filter(o=>a.has(o.workId)),s=new Map;for(const o of e){const n=o.workType||"ë¯¸ë¶„ë¥˜";s.has(n)||s.set(n,[]),s.get(n).push(o)}return s}),w=h(()=>{const a=[],e=new Map;for(const s of B.value){const o=`${s.workTypeId}-${s.companyId}`;if(!e.has(o)){const $={workTypeName:s.workTypeName,companyDisplayName:s.companyDisplayName,totalCount:0,items:[]};e.set(o,$),a.push($)}const n=e.get(o);n.items.push(s),n.totalCount+=s.count}return a});return F(async()=>{if(N.selectedProjectId){_.value=!0;try{await M.getCalendar(N.selectedProjectId);const[a,e,s,o]=await Promise.all([S.getWorkList(),S.getWorkListByDate(v),S.getWorkListByDate(z),E.getAttendanceListByDate(v)]);k.value=a,C.value=e,j.value=s,B.value=o}catch(a){console.error("ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:",a)}finally{_.value=!1}}}),(a,e)=>(d(),r("div",Y,[t("div",q,[m(D,{height:"flex-none","min-height":"auto",class:"w-1/3"},{default:u(()=>[t("div",H,[e[2]||(e[2]=t("h3",{class:"text-lg font-semibold"},"ì˜¤ëŠ˜ì‘ì—…",-1)),m(i(y),{variant:"outline",size:"sm",onClick:e[0]||(e[0]=s=>i(L).push("/helper/schedule/2d"))},{default:u(()=>[...e[1]||(e[1]=[g(" ê³µì •í‘œ ìˆ˜ì • ",-1)])]),_:1})]),_.value?(d(),r("div",J,"ë¡œë”© ì¤‘...")):(d(),r("div",K,[t("div",O,[t("div",null,[t("p",Q,l(i(f).getMonth()+1)+"ì›” "+l(i(f).getDate())+"ì¼ ("+l(i(A))+") ",1),t("p",U,l(i(v)),1)]),e[3]||(e[3]=t("div",{class:"text-right text-sm text-muted-foreground"},[t("p",null,"ë§‘ìŒ"),t("p",null,"-5Â°C / 3Â°C")],-1))]),t("div",X,[e[4]||(e[4]=t("h4",{class:"text-sm font-semibold mb-2 text-foreground"},"ì˜¤ëŠ˜ ì‘ì—…",-1)),T.value.size===0?(d(),r("div",Z," ì˜¤ëŠ˜ ì˜ˆì •ëœ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤. ")):(d(),r("div",tt,[(d(!0),r(c,null,p(T.value,([s,o])=>(d(),r("div",{key:s},[t("p",et,"â–  "+l(s),1),t("div",st,[(d(!0),r(c,null,p(o,n=>(d(),r("p",{key:n.workId,class:"text-sm text-muted-foreground"}," - "+l(n.workName),1))),128))])]))),128))]))]),t("div",ot,[e[5]||(e[5]=t("h4",{class:"text-sm font-semibold mb-2 text-foreground"},"ë‚´ì¼ ì‘ì—…",-1)),W.value.size===0?(d(),r("div",rt," ë‚´ì¼ ì˜ˆì •ëœ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤. ")):(d(),r("div",dt,[(d(!0),r(c,null,p(W.value,([s,o])=>(d(),r("div",{key:s},[t("p",nt,"â–  "+l(s),1),t("div",at,[(d(!0),r(c,null,p(o,n=>(d(),r("p",{key:n.workId,class:"text-sm text-muted-foreground"}," - "+l(n.workName),1))),128))])]))),128))]))]),e[7]||(e[7]=t("div",{class:"border border-border rounded-lg p-3"},[t("h4",{class:"text-sm font-semibold mb-2 text-foreground"},"ë°˜ì… ìì¬"),t("div",{class:"space-y-3"},[t("div",null,[t("p",{class:"text-sm font-medium mb-1"},"â–  ì² ê·¼ì½˜í¬ë¦¬íŠ¸ê³µì‚¬"),t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm text-muted-foreground"},"- ì² ê·¼(SD400) : 8.234 ton")])])])],-1)),e[8]||(e[8]=t("div",{class:"border border-border rounded-lg p-3"},[t("h4",{class:"text-sm font-semibold mb-2 text-foreground"},"ë°˜ì… ì¥ë¹„"),t("div",{class:"space-y-0.5"},[t("p",{class:"text-sm text-muted-foreground"},"- í¬ë ˆì¸(25ton) : 1ëŒ€")])],-1)),t("div",lt,[e[6]||(e[6]=t("h4",{class:"text-sm font-semibold mb-2 text-foreground"},"ì¶œì—­ ì¸ì›",-1)),w.value.length===0?(d(),r("div",it," ì˜¤ëŠ˜ ì¶œì—­ ì¸ì›ì´ ì—†ìŠµë‹ˆë‹¤. ")):(d(),r("div",mt,[(d(!0),r(c,null,p(w.value,(s,o)=>(d(),r("div",{key:o},[t("p",ut," â–  "+l(s.workTypeName)+"("+l(s.companyDisplayName)+") : "+l(s.totalCount)+"ëª… ",1),t("div",ct,[(d(!0),r(c,null,p(s.items,n=>(d(),r("p",{key:n.laborTypeId,class:"text-sm text-muted-foreground"}," - "+l(n.laborTypeName)+" : "+l(n.count)+"ëª… ",1))),128))])]))),128)),t("p",pt," â–  ì´ ì¶œì—­ì¸ì› : "+l(w.value.reduce((s,o)=>s+o.totalCount,0))+"ëª… ",1)]))])]))]),_:1}),m(D,{height:"flex-none","min-height":"auto",class:"w-1/3"},{default:u(()=>[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold"},"AI ë„ìš°ë¯¸",-1)),t("div",ft,[t("div",xt,[e[10]||(e[10]=t("p",{class:"text-sm"},"ì˜¤ëŠ˜ ì‘ì—…ëŸ‰ì„ ì²´í¬í•´ë³¼ê¹Œìš”?",-1)),m(i(y),{variant:"outline",size:"sm",class:"ml-4 shrink-0"},{default:u(()=>[...e[9]||(e[9]=[g("ë°”ë¡œê°€ê¸°",-1)])]),_:1})]),t("div",gt,[e[12]||(e[12]=t("p",{class:"text-sm"},"3ê°œì›” í›„ ì—˜ë¦¬ë² ì´í„° ê³µì‚¬ê°€ ì‹œì‘ë©ë‹ˆë‹¤, ê²¬ì ì„ ìš”ì²­í• ê¹Œìš”?",-1)),m(i(y),{variant:"outline",size:"sm",class:"ml-4 shrink-0"},{default:u(()=>[...e[11]||(e[11]=[g("ë°”ë¡œê°€ê¸°",-1)])]),_:1})]),t("div",yt,[e[14]||(e[14]=t("p",{class:"text-sm"},"ì˜¤ëŠ˜ ì‘ì—… í‰ê°€ì„œê°€ ë‚˜ì™”ìŠµë‹ˆë‹¤. í™•ì¸í•´ì£¼ì„¸ìš”.",-1)),m(i(y),{variant:"outline",size:"sm",class:"ml-4 shrink-0"},{default:u(()=>[...e[13]||(e[13]=[g("ë°”ë¡œê°€ê¸°",-1)])]),_:1})])])]),_:1}),m(D,{height:"flex-none","min-height":"auto",class:"w-1/3"},{default:u(()=>[...e[16]||(e[16]=[t("h3",{class:"text-lg font-semibold"},"ì‘ì—… í‰ê°€",-1),t("div",{class:"space-y-4 mt-[5rem]"},[t("div",{class:"border border-border rounded-lg p-3"},[t("p",{class:"text-sm font-medium text-orange-600 dark:text-orange-400"},"âš ï¸ ì˜¤ëŠ˜ íš¨ìœ¨ ì €í•˜"),t("p",{class:"text-sm text-muted-foreground mt-1"},"ì˜¤ëŠ˜ì€ ì¶œì—­ì¸ì› ëŒ€ë¹„ ì‘ì—…ëŸ‰ì´ 84% ë°–ì— ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.")]),t("div",{class:"border border-border rounded-lg p-3"},[t("p",{class:"text-sm font-medium text-green-600 dark:text-green-400"},"âœ“ ì´ë²ˆì£¼ ëª©í‘œ ì´ˆê³¼ ë‹¬ì„±"),t("p",{class:"text-sm text-muted-foreground mt-1"},"ì´ë²ˆì£¼ëŠ” ì¶œì—­ì¸ì› ëŒ€ë¹„ ì‘ì—…ëŸ‰ì´ 110% ì…ë‹ˆë‹¤.")]),t("div",{class:"border border-border rounded-lg p-3"},[t("p",{class:"text-sm font-medium text-blue-600 dark:text-blue-400"},"ğŸ“Š ì² ê·¼ì½˜í¬ë¦¬íŠ¸ê³µì‚¬"),t("p",{class:"text-sm text-muted-foreground mt-1"},"ì´ë²ˆë‹¬ ì² ê·¼ê³µì‚¬ ì§„ì²™ë¥ ì´ ê³„íš ëŒ€ë¹„ 105%ë¡œ ìˆœì¡°ë¡­ìŠµë‹ˆë‹¤.")]),t("div",{class:"border border-border rounded-lg p-3"},[t("p",{class:"text-sm font-medium text-red-600 dark:text-red-400"},"âš ï¸ ì§€ì—° ì£¼ì˜"),t("p",{class:"text-sm text-muted-foreground mt-1"},"ê¸ˆì†ê³µì‚¬ê°€ ê³„íš ëŒ€ë¹„ 3ì¼ ì§€ì—°ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì¸ì› ë³´ê°•ì„ ê²€í† í•˜ì„¸ìš”.")]),t("div",{class:"border border-border rounded-lg p-3"},[t("p",{class:"text-sm font-medium text-purple-600 dark:text-purple-400"},"ğŸ“ˆ ìƒì‚°ì„± ë¶„ì„"),t("p",{class:"text-sm text-muted-foreground mt-1"},"í˜•í‹€ê³µ 1ì¸ë‹¹ ì¼ì¼ í‰ê·  ì‘ì—…ëŸ‰: 12.5ã¡ (ì—…ê³„ í‰ê·  ëŒ€ë¹„ +15%)")])],-1)])]),_:1})])]))}});export{Bt as default};
