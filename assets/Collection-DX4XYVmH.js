import{Y as T,Z as $,r as p,y as h,O as N,af as k,ag as R,T as _,ah as U,D as w,I as D,L as F,d as M,C as L,_ as x,v as z,a2 as K}from"./index-CLd163ez.js";import{f as I,p as W,i as q}from"./index-CEphPQ9z.js";import{r as B,S as C}from"./utils-m-6WHacx.js";function V(e,t){const s=typeof e=="string"&&!t?`${e}Context`:t,a=Symbol(s);return[n=>{const u=T(a,n);if(u||u===null)return u;throw new Error(`Injection \`${a.toString()}\` not found. Component must be used within ${Array.isArray(e)?`one of the following components: ${e.join(", ")}`:`\`${e}\``}`)},n=>($(a,n),n)]}function ne(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}const[Y]=V("ConfigProvider");function oe(e){const t=Y({dir:p("ltr")});return h(()=>e?.value||t.dir?.value||"ltr")}function H(e){const t=N(),s=t?.type.emits,a={};return s?.length||console.warn(`No emitted event found. Please check component: ${t?.type.__name}`),s?.forEach(o=>{a[k(R(o))]=(...l)=>e(o,...l)}),a}function ae(){const e=N(),t=p(),s=h(()=>["#text","#comment"].includes(t.value?.$el.nodeName)?t.value?.$el.nextElementSibling:I(t)),a=Object.assign({},e.exposed),o={};for(const n in e.props)Object.defineProperty(o,n,{enumerable:!0,configurable:!0,get:()=>e.props[n]});if(Object.keys(a).length>0)for(const n in a)Object.defineProperty(o,n,{enumerable:!0,configurable:!0,get:()=>a[n]});Object.defineProperty(o,"$el",{enumerable:!0,configurable:!0,get:()=>e.vnode.el}),e.exposed=o;function l(n){if(t.value=n,!!n&&(Object.defineProperty(o,"$el",{enumerable:!0,configurable:!0,get:()=>n instanceof Element?n:n.$el}),!(n instanceof Element)&&!Object.hasOwn(n,"$el"))){const u=n.$.exposed,m=Object.assign({},o);for(const c in u)Object.defineProperty(m,c,{enumerable:!0,configurable:!0,get:()=>u[c]});e.exposed=m}}return{forwardRef:l,currentRef:t,currentElement:s}}function Z(e){const t=N(),s=Object.keys(t?.type.props??{}).reduce((o,l)=>{const n=(t?.type.props[l]).default;return n!==void 0&&(o[l]=n),o},{}),a=_(e);return h(()=>{const o={},l=t?.vnode.props??{};return Object.keys(l).forEach(n=>{o[R(n)]=l[n]}),Object.keys({...s,...o}).reduce((n,u)=>(a.value[u]!==void 0&&(n[u]=a.value[u]),n),{})})}function re(e,t){const s=Z(e),a=t?H(t):{};return h(()=>({...s.value,...a}))}function ie(e,t="reka"){return`${t}-${U?.()}`}function G(e,t){const s=p(e);function a(l){return t[s.value][l]??s.value}return{state:s,dispatch:l=>{s.value=a(l)}}}function J(e,t){const s=p({}),a=p("none"),o=p(e),l=e.value?"mounted":"unmounted";let n;const u=t.value?.ownerDocument.defaultView??W,{state:m,dispatch:c}=G(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),r=i=>{if(q){const v=new CustomEvent(i,{bubbles:!1,cancelable:!1});t.value?.dispatchEvent(v)}};w(e,async(i,v)=>{const O=v!==i;if(await F(),O){const P=a.value,A=b(t.value);i?(c("MOUNT"),r("enter"),A==="none"&&r("after-enter")):A==="none"||A==="undefined"||s.value?.display==="none"?(c("UNMOUNT"),r("leave"),r("after-leave")):v&&P!==A?(c("ANIMATION_OUT"),r("leave")):(c("UNMOUNT"),r("after-leave"))}},{immediate:!0});const f=i=>{const v=b(t.value),O=v.includes(CSS.escape(i.animationName)),P=m.value==="mounted"?"enter":"leave";if(i.target===t.value&&O&&(r(`after-${P}`),c("ANIMATION_END"),!o.value)){const A=t.value.style.animationFillMode;t.value.style.animationFillMode="forwards",n=u?.setTimeout(()=>{t.value?.style.animationFillMode==="forwards"&&(t.value.style.animationFillMode=A)})}i.target===t.value&&v==="none"&&c("ANIMATION_END")},y=i=>{i.target===t.value&&(a.value=b(t.value))},E=w(t,(i,v)=>{i?(s.value=getComputedStyle(i),i.addEventListener("animationstart",y),i.addEventListener("animationcancel",f),i.addEventListener("animationend",f)):(c("ANIMATION_END"),n!==void 0&&u?.clearTimeout(n),v?.removeEventListener("animationstart",y),v?.removeEventListener("animationcancel",f),v?.removeEventListener("animationend",f))},{immediate:!0}),d=w(m,()=>{const i=b(t.value);a.value=m.value==="mounted"?i:"none"});return D(()=>{E(),d()}),{isPresent:h(()=>["mounted","unmountSuspended"].includes(m.value))}}function b(e){return e&&getComputedStyle(e).animationName||"none"}var se=M({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(e,{slots:t,expose:s}){const{present:a,forceMount:o}=L(e),l=p(),{isPresent:n}=J(a,l);s({present:n});let u=t.default({present:n.value});u=B(u||[]);const m=N();if(u&&u?.length>1){const c=m?.parent?.type.name?`<${m.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(r=>`  - ${r}`).join(`
`)].join(`
`))}return()=>o.value||a.value||n.value?x(t.default({present:n.value})[0],{ref:c=>{const r=I(c);return typeof r?.hasAttribute>"u"||(r?.hasAttribute("data-reka-popper-content-wrapper")?l.value=r.firstElementChild:l.value=r),r}}):null}});function S(){const e=p(),t=h(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:I(e));return{primitiveElement:e,currentElement:t}}const j="data-reka-collection-item";function le(e={}){const{key:t="",isProvider:s=!1}=e,a=`${t}CollectionProvider`;let o;if(s){const r=p(new Map);o={collectionRef:p(),itemMap:r},$(a,o)}else o=T(a);const l=(r=!1)=>{const f=o.collectionRef.value;if(!f)return[];const y=Array.from(f.querySelectorAll(`[${j}]`)),d=Array.from(o.itemMap.value.values()).sort((g,i)=>y.indexOf(g.ref)-y.indexOf(i.ref));return r?d:d.filter(g=>g.ref.dataset.disabled!=="")},n=M({name:"CollectionSlot",inheritAttrs:!1,setup(r,{slots:f,attrs:y}){const{primitiveElement:E,currentElement:d}=S();return w(d,()=>{o.collectionRef.value=d.value}),()=>x(C,{ref:E,...y},f)}}),u=M({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(r,{slots:f,attrs:y}){const{primitiveElement:E,currentElement:d}=S();return z(g=>{if(d.value){const i=K(d.value);o.itemMap.value.set(i,{ref:d.value,value:r.value}),g(()=>o.itemMap.value.delete(i))}}),()=>x(C,{...y,[j]:"",ref:E},f)}}),m=h(()=>Array.from(o.itemMap.value.values())),c=h(()=>o.itemMap.value.size);return{getItems:l,reactiveItems:m,itemMapSize:c,CollectionSlot:n,CollectionItem:u}}export{se as P,Z as a,re as b,V as c,ie as d,H as e,S as f,ne as g,oe as h,le as i,Y as j,ae as u};
