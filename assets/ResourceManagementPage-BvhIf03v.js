import{_ as re}from"./PageContainer.vue_vue_type_script_setup_true_lang-CEHe9PLv.js";import{_ as ne}from"./AreaCard.vue_vue_type_script_setup_true_lang-Cun49brn.js";import{_ as ae}from"./Separator.vue_vue_type_script_setup_true_lang-DnZfeeDb.js";import{r as p,D as B,d as G,i as J,c as d,a as t,e as a,j as E,F as K,n as U,u as e,q as z,a8 as F,U as R,w as v,g as w,t as C,o as u,k as H,p as le}from"./index-CrXngJox.js";import{_ as j}from"./index-DjQGxc2-.js";import{_ as P}from"./Input.vue_vue_type_script_setup_true_lang-Cd6-xZ_U.js";import{_ as O,a as Q,b as Y,c as Z,d as ee,e as te,f as se,g as oe}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-BMpptCBF.js";import{r as q}from"./reference-BgrhXxFd.js";import{X}from"./x-CqUQJ7je.js";import"./Collection-7xKaQT2u.js";import"./index-DbURNFAQ.js";import"./utils-BjnBM6mg.js";import"./DialogTitle-Bfgltyr_.js";import"./createLucideIcon-BNaNAPpz.js";import"./apiClient-ycqybHFy.js";function ie(){const S=p([]),b=p([]),c=p([]),g=p(null),_=p(null),m=p(null),f=p([]),k=p(""),T=p(!1),$=p(!1),W=async()=>{try{S.value=await q.getDivisionList()}catch(r){console.error("Division 목록 로드 실패:",r)}},N=async r=>{try{b.value=await q.getWorkTypeList(r)}catch(h){console.error("WorkType 목록 로드 실패:",h)}},V=async r=>{try{c.value=await q.getSubWorkTypeList(r)}catch(h){console.error("SubWorkType 목록 로드 실패:",h)}},D=async()=>{try{f.value=await q.getLaborTypeList()}catch(r){console.error("LaborType 목록 로드 실패:",r)}},l=r=>{g.value=r,_.value=null,m.value=null,b.value=[],c.value=[]},y=r=>{_.value=r,m.value=null,c.value=[]},x=r=>{m.value=r},I=async()=>{if(T.value)return;const r=k.value.trim(),h=_.value;if(!(!r||!h)){T.value=!0;try{await q.createLaborType({name:r,workTypeId:h,subWorkTypeId:m.value}),k.value="",await D()}catch(s){console.error("LaborType 추가 실패:",s);const i=s;alert(i.response?.data?.message||i.message)}finally{T.value=!1}}},L=async r=>{if(!$.value){$.value=!0;try{await q.deleteLaborType(r),await D()}catch(h){console.error("LaborType 삭제 실패:",h);const s=h;alert(s.response?.data?.message||s.message)}finally{$.value=!1}}};return B(g,r=>{b.value=[],r&&N(r)}),B(_,r=>{c.value=[],r&&V(r)}),{divisions:S,workTypes:b,subWorkTypes:c,laborTypes:f,selectedDivisionId:g,selectedWorkTypeId:_,selectedSubWorkTypeId:m,newLaborTypeName:k,isCreating:T,isDeleting:$,loadDivisions:W,loadLaborTypes:D,selectDivision:l,selectWorkType:y,selectSubWorkType:x,addLaborType:I,deleteLaborType:L}}const ue={class:"grid grid-cols-4 gap-4 mb-4"},de={class:"space-y-2"},pe={class:"space-y-1 max-h-36 overflow-y-auto"},ce=["onClick"],me={key:0,class:"text-xs text-muted-foreground py-2 text-center"},ye={class:"space-y-2"},fe={class:"space-y-1 max-h-36 overflow-y-auto"},ve=["onClick"],xe={key:0,class:"text-xs text-muted-foreground py-2 text-center"},_e={key:1,class:"text-xs text-muted-foreground py-2 text-center"},be={class:"space-y-2"},ge={class:"space-y-1 max-h-36 overflow-y-auto"},ke=["onClick"],Te={key:1,class:"text-xs text-muted-foreground py-2 text-center"},he={class:"space-y-2"},qe={class:"flex gap-1"},we={key:0,class:"text-xs text-muted-foreground"},$e={class:"mt-4"},Ee={class:"border rounded-md max-h-48 overflow-y-auto"},Ce={class:"w-full text-sm"},De={class:"px-3 py-2"},Le={class:"px-3 py-2 text-muted-foreground"},Se={class:"px-3 py-2 text-muted-foreground"},We={class:"px-2 text-center"},Ne=["disabled","onClick"],Ve={key:0},Ie=G({__name:"LaborTypeArea",setup(S){const{divisions:b,workTypes:c,subWorkTypes:g,laborTypes:_,selectedDivisionId:m,selectedWorkTypeId:f,selectedSubWorkTypeId:k,newLaborTypeName:T,isCreating:$,isDeleting:W,loadDivisions:N,loadLaborTypes:V,selectDivision:D,selectWorkType:l,selectSubWorkType:y,addLaborType:x,deleteLaborType:I}=ie();J(()=>{N(),V()});const L=p(!1),r=p(null),h=p("");function s(M,o){r.value=M,h.value=o,L.value=!0}async function i(){r.value!=null&&await I(r.value),L.value=!1}return(M,o)=>(u(),d("div",null,[o[14]||(o[14]=t("h3",{class:"text-sm font-semibold mb-3"},"직종 관리 (LaborType)",-1)),t("div",ue,[t("div",de,[o[3]||(o[3]=t("p",{class:"text-xs text-muted-foreground font-medium"},"분류 (Division)",-1)),t("div",pe,[(u(!0),d(K,null,U(e(b),n=>(u(),d("div",{key:n.id,class:z(["px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(m)===n.id,"border-border hover:bg-muted/50":e(m)!==n.id}]),onClick:A=>e(D)(n.id)},C(n.name),11,ce))),128)),e(b).length===0?(u(),d("p",me," 항목 없음 ")):E("",!0)])]),t("div",ye,[o[4]||(o[4]=t("p",{class:"text-xs text-muted-foreground font-medium"},"공종 (WorkType) *필수",-1)),t("div",fe,[(u(!0),d(K,null,U(e(c),n=>(u(),d("div",{key:n.id,class:z(["px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(f)===n.id,"border-border hover:bg-muted/50":e(f)!==n.id}]),onClick:A=>e(l)(n.id)},C(n.name),11,ve))),128)),e(m)&&e(c).length===0?(u(),d("p",xe," 항목 없음 ")):E("",!0),e(m)?E("",!0):(u(),d("p",_e," 분류를 선택하세요 "))])]),t("div",be,[o[5]||(o[5]=t("p",{class:"text-xs text-muted-foreground font-medium"},"세부공종 (선택사항)",-1)),t("div",ge,[e(f)?(u(),d("div",{key:0,class:z(["px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(k)===null,"border-border hover:bg-muted/50":e(k)!==null}]),onClick:o[0]||(o[0]=n=>e(y)(null))}," (선택 안함) ",2)):E("",!0),(u(!0),d(K,null,U(e(g),n=>(u(),d("div",{key:n.id,class:z(["px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(k)===n.id,"border-border hover:bg-muted/50":e(k)!==n.id}]),onClick:A=>e(y)(n.id)},C(n.name),11,ke))),128)),e(f)?E("",!0):(u(),d("p",Te," 공종을 선택하세요 "))])]),t("div",he,[o[7]||(o[7]=t("p",{class:"text-xs text-muted-foreground font-medium"},"직종명 입력",-1)),t("div",qe,[a(e(P),{modelValue:e(T),"onUpdate:modelValue":o[1]||(o[1]=n=>R(T)?T.value=n:null),placeholder:"직종명 입력",class:"h-8 text-sm",disabled:!e(f),onKeyup:F(e(x),["enter"])},null,8,["modelValue","disabled","onKeyup"]),a(e(j),{size:"sm",class:"h-8 shrink-0",disabled:e($)||!e(T).trim()||!e(f),onClick:e(x)},{default:v(()=>[...o[6]||(o[6]=[w(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),e(f)?E("",!0):(u(),d("p",we," 공종을 선택하세요 "))])]),t("div",$e,[o[10]||(o[10]=t("p",{class:"text-xs text-muted-foreground font-medium mb-2"},"등록된 직종 목록",-1)),t("div",Ee,[t("table",Ce,[o[9]||(o[9]=t("thead",{class:"bg-muted/50 sticky top-0"},[t("tr",null,[t("th",{class:"text-left px-3 py-2 font-medium"},"직종명"),t("th",{class:"text-left px-3 py-2 font-medium"},"공종"),t("th",{class:"text-left px-3 py-2 font-medium"},"세부공종"),t("th",{class:"w-10 px-2"})])],-1)),t("tbody",null,[(u(!0),d(K,null,U(e(_),n=>(u(),d("tr",{key:n.id,class:"border-t border-border"},[t("td",De,C(n.name),1),t("td",Le,C(n.workTypeName),1),t("td",Se,C(n.subWorkTypeName||"-"),1),t("td",We,[t("button",{class:"p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive",disabled:e(W),onClick:A=>s(n.id,n.name)},[a(e(X),{class:"w-3 h-3"})],8,Ne)])]))),128)),e(_).length===0?(u(),d("tr",Ve,[...o[8]||(o[8]=[t("td",{colspan:"4",class:"px-3 py-4 text-center text-muted-foreground"}," 등록된 직종이 없습니다 ",-1)])])):E("",!0)])])])]),a(e(O),{open:L.value,"onUpdate:open":o[2]||(o[2]=n=>L.value=n)},{default:v(()=>[a(e(Q),null,{default:v(()=>[a(e(Y),null,{default:v(()=>[a(e(Z),null,{default:v(()=>[...o[11]||(o[11]=[w("삭제 확인",-1)])]),_:1}),a(e(ee),null,{default:v(()=>[w(" '"+C(h.value)+"' 직종을 삭제하시겠습니까? ",1)]),_:1})]),_:1}),a(e(te),null,{default:v(()=>[a(e(se),null,{default:v(()=>[...o[12]||(o[12]=[w("취소",-1)])]),_:1}),a(e(oe),{onClick:i},{default:v(()=>[...o[13]||(o[13]=[w("삭제",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}});function Ke(){const S=p([]),b=p([]),c=p(null),g=p(""),_=p(""),m=p(!1),f=p(!1),k=async()=>{try{S.value=await q.getEquipmentTypeList()}catch(l){console.error("EquipmentType 목록 로드 실패:",l)}},T=async l=>{try{b.value=await q.getEquipmentSpecList(l)}catch(y){console.error("EquipmentSpec 목록 로드 실패:",y)}},$=l=>{c.value=l},W=async()=>{if(m.value)return;const l=g.value.trim();if(l){m.value=!0;try{await q.createEquipmentType(l),g.value="",await k()}catch(y){console.error("EquipmentType 추가 실패:",y);const x=y;alert(x.response?.data?.message||x.message)}finally{m.value=!1}}},N=async()=>{if(m.value)return;const l=_.value.trim();if(!(!l||!c.value)){m.value=!0;try{await q.createEquipmentSpec(c.value,l),_.value="",await T(c.value)}catch(y){console.error("EquipmentSpec 추가 실패:",y);const x=y;alert(x.response?.data?.message||x.message)}finally{m.value=!1}}},V=async l=>{if(!f.value){f.value=!0;try{await q.deleteEquipmentType(l),c.value===l&&(c.value=null,b.value=[]),await k()}catch(y){console.error("EquipmentType 삭제 실패:",y);const x=y;alert(x.response?.data?.message||x.message)}finally{f.value=!1}}},D=async l=>{if(!f.value){f.value=!0;try{await q.deleteEquipmentSpec(l),c.value&&await T(c.value)}catch(y){console.error("EquipmentSpec 삭제 실패:",y);const x=y;alert(x.response?.data?.message||x.message)}finally{f.value=!1}}};return B(c,l=>{b.value=[],l&&T(l)}),{equipmentTypes:S,equipmentSpecs:b,selectedEquipmentTypeId:c,newEquipmentTypeName:g,newEquipmentSpecName:_,isCreating:m,isDeleting:f,loadEquipmentTypes:k,selectEquipmentType:$,addEquipmentType:W,addEquipmentSpec:N,deleteEquipmentType:V,deleteEquipmentSpec:D}}const Ue={class:"grid grid-cols-2 gap-4"},Me={class:"space-y-2"},ze={class:"flex gap-1"},Ae={class:"space-y-1 max-h-48 overflow-y-auto"},Be=["onClick"],Fe={class:"flex-1 truncate"},Re=["disabled","onClick"],je={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Pe={class:"space-y-2"},Xe={class:"flex gap-1"},Ge={class:"space-y-1 max-h-48 overflow-y-auto"},He={class:"flex-1 truncate"},Je=["disabled","onClick"],Oe={key:0,class:"text-xs text-muted-foreground py-2 text-center"},Qe={key:1,class:"text-xs text-muted-foreground py-2 text-center"},Ye=G({__name:"EquipmentMasterArea",setup(S){const{equipmentTypes:b,equipmentSpecs:c,selectedEquipmentTypeId:g,newEquipmentTypeName:_,newEquipmentSpecName:m,isCreating:f,isDeleting:k,loadEquipmentTypes:T,selectEquipmentType:$,addEquipmentType:W,addEquipmentSpec:N,deleteEquipmentType:V,deleteEquipmentSpec:D}=Ke();J(()=>{T()});const l=p(!1),y=p(null),x=p(""),I=p(null);function L(h,s,i){y.value=h,x.value=s,I.value=i,l.value=!0}async function r(){y.value!=null&&I.value&&await I.value(y.value),l.value=!1}return(h,s)=>(u(),d("div",null,[s[10]||(s[10]=t("h3",{class:"text-sm font-semibold mb-3"},"장비분류",-1)),t("div",Ue,[t("div",Me,[s[4]||(s[4]=t("p",{class:"text-xs text-muted-foreground font-medium"},"장비유형 (EquipmentType)",-1)),t("div",ze,[a(e(P),{modelValue:e(_),"onUpdate:modelValue":s[0]||(s[0]=i=>R(_)?_.value=i:null),placeholder:"이름 입력",class:"h-8 text-sm flex-1",onKeyup:F(e(W),["enter"])},null,8,["modelValue","onKeyup"]),a(e(j),{size:"sm",class:"h-8 shrink-0",disabled:e(f)||!e(_).trim(),onClick:e(W)},{default:v(()=>[...s[3]||(s[3]=[w(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",Ae,[(u(!0),d(K,null,U(e(b),i=>(u(),d("div",{key:i.id,class:z(["flex items-center px-3 py-2 border rounded-md cursor-pointer text-sm transition-colors",{"border-primary bg-primary/10 font-medium":e(g)===i.id,"border-border hover:bg-muted/50":e(g)!==i.id}]),onClick:M=>e($)(i.id)},[t("span",Fe,C(i.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(k),onClick:H(M=>L(i.id,i.name,e(V)),["stop"])},[a(e(X),{class:"w-3 h-3"})],8,Re)],10,Be))),128)),e(b).length===0?(u(),d("p",je," 항목 없음 ")):E("",!0)])]),t("div",Pe,[s[6]||(s[6]=t("p",{class:"text-xs text-muted-foreground font-medium"},"장비규격 (EquipmentSpec)",-1)),t("div",Xe,[a(e(P),{modelValue:e(m),"onUpdate:modelValue":s[1]||(s[1]=i=>R(m)?m.value=i:null),placeholder:"이름 입력",class:"h-8 text-sm",disabled:!e(g),onKeyup:F(e(N),["enter"])},null,8,["modelValue","disabled","onKeyup"]),a(e(j),{size:"sm",class:"h-8 shrink-0",disabled:e(f)||!e(m).trim()||!e(g),onClick:e(N)},{default:v(()=>[...s[5]||(s[5]=[w(" 추가 ",-1)])]),_:1},8,["disabled","onClick"])]),t("div",Ge,[(u(!0),d(K,null,U(e(c),i=>(u(),d("div",{key:i.id,class:"flex items-center px-3 py-2 border rounded-md text-sm border-border"},[t("span",He,C(i.name),1),t("button",{class:"ml-1 p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive shrink-0",disabled:e(k),onClick:H(M=>L(i.id,i.name,e(D)),["stop"])},[a(e(X),{class:"w-3 h-3"})],8,Je)]))),128)),e(g)&&e(c).length===0?(u(),d("p",Oe," 항목 없음 ")):E("",!0),e(g)?E("",!0):(u(),d("p",Qe," 장비유형을 선택하세요 "))])])]),a(e(O),{open:l.value,"onUpdate:open":s[2]||(s[2]=i=>l.value=i)},{default:v(()=>[a(e(Q),null,{default:v(()=>[a(e(Y),null,{default:v(()=>[a(e(Z),null,{default:v(()=>[...s[7]||(s[7]=[w("삭제 확인",-1)])]),_:1}),a(e(ee),null,{default:v(()=>[w(" '"+C(x.value)+"' 항목을 삭제하시겠습니까? ",1)]),_:1})]),_:1}),a(e(te),null,{default:v(()=>[a(e(se),null,{default:v(()=>[...s[8]||(s[8]=[w("취소",-1)])]),_:1}),a(e(oe),{onClick:r},{default:v(()=>[...s[9]||(s[9]=[w("삭제",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}}),Ze={class:"p-4 space-y-6"},ft=G({__name:"ResourceManagementPage",setup(S){return(b,c)=>(u(),le(re,{title:"자원정보 관리"},{default:v(()=>[a(ne,{title:"직종관리",height:"flex-1","min-height":"600px"},{default:v(()=>[t("div",Ze,[a(Ie),a(e(ae)),a(Ye)])]),_:1})]),_:1}))}});export{ft as default};
