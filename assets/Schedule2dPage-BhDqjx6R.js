import{_ as Ms}from"./PageContainer.vue_vue_type_script_setup_true_lang-B_awlWCW.js";import{_ as Ds}from"./AreaCard.vue_vue_type_script_setup_true_lang-Buko44Ic.js";import{d as ge,p as Se,o as P,w as R,s as ke,A as Tt,B as At,u as c,r as ce,x as je,k as or,L as ot,i as it,M as oi,D as $e,N as Ps,I as ri,c as X,e as L,a as B,O as jt,P as Ts,y as le,Q as As,F as Ce,n as Ae,z as ze,R as ii,j as De,S as Os,K as _t,T as Pe,q as Re,t as Ne,U as Ho,C as zs,V as Bs,W as si,X as Pn,Y as Jt,Z as Gt,J as ai,_ as Me,$ as be,a0 as Vs,a1 as Hs,E as Rt,g as pe,a2 as Tn,a3 as Rs,a4 as co,a5 as rr,a6 as Ws}from"./index-CLd163ez.js";import{b as li,_ as Le}from"./index-D3klz3Fc.js";import{_ as Bt}from"./Input.vue_vue_type_script_setup_true_lang-B6U590mK.js";import{_ as dt,a as ft,b as ht,c as pt,d as Ze}from"./SelectValue.vue_vue_type_script_setup_true_lang-CD6uRNcp.js";import{u as Ot,e as Ls,c as Fs,b as Ro}from"./Collection-DX4XYVmH.js";import{D as ui,a as Ys,b as Xs,c as Gs,d as Us}from"./DialogTitle-DgCg-d2N.js";import{c as zt}from"./utils-m-6WHacx.js";import{d as yn}from"./index-CEphPQ9z.js";import{T as Zs}from"./check-BOjRxVQH.js";import{D as Ks}from"./DialogDescription-qGXz1NgT.js";import{_ as qs}from"./SideTabBox.vue_vue_type_script_setup_true_lang-D28h6q5-.js";import{w as Lt}from"./work-C0q7qqY7.js";import{a as en,u as js}from"./apiClient-B23t6YBI.js";import{u as Js}from"./calendarStore-B9vfGHKi.js";import{r as vt}from"./reference-H9G3ZDcq.js";import{p as Qs}from"./project-Bny755d5.js";var ea=ge({__name:"AlertDialogAction",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const t=e;return Ot(),(n,o)=>(P(),Se(c(ui),Tt(At(t)),{default:R(()=>[ke(n.$slots,"default")]),_:3},16))}}),ta=ea;const[na,oa]=Fs("AlertDialogContent");var ra=ge({__name:"AlertDialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,r=Ls(t);Ot();const i=ce();return oa({onCancelElementChange:s=>{i.value=s}}),(s,a)=>(P(),Se(c(Ys),je({...n,...c(r)},{role:"alertdialog",onPointerDownOutside:a[0]||(a[0]=or(()=>{},["prevent"])),onInteractOutside:a[1]||(a[1]=or(()=>{},["prevent"])),onOpenAutoFocus:a[2]||(a[2]=()=>{ot(()=>{i.value?.focus({preventScroll:!0})})})}),{default:R(()=>[ke(s.$slots,"default")]),_:3},16))}}),ia=ra,sa=ge({__name:"AlertDialogCancel",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const t=e,n=na(),{forwardRef:o,currentElement:r}=Ot();return it(()=>{n.onCancelElementChange(r.value)}),(i,s)=>(P(),Se(c(ui),je(t,{ref:c(o)}),{default:R(()=>[ke(i.$slots,"default")]),_:3},16))}}),aa=sa,la=ge({__name:"AlertDialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(e){const t=e;return Ot(),(n,o)=>(P(),Se(c(Ks),Tt(At(t)),{default:R(()=>[ke(n.$slots,"default")]),_:3},16))}}),ua=la,ca=ge({__name:"AlertDialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=e;return Ot(),(n,o)=>(P(),Se(c(Xs),Tt(At(t)),{default:R(()=>[ke(n.$slots,"default")]),_:3},16))}}),da=ca,fa=ge({__name:"AlertDialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(e){const t=e;return(n,o)=>(P(),Se(c(Zs),Tt(At(t)),{default:R(()=>[ke(n.$slots,"default")]),_:3},16))}}),ha=fa,pa=ge({__name:"AlertDialogRoot",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1}},emits:["update:open"],setup(e,{emit:t}){const r=Ro(e,t);return Ot(),(i,s)=>(P(),Se(c(Gs),je(c(r),{modal:!0}),{default:R(a=>[ke(i.$slots,"default",Tt(At(a)))]),_:3},16))}}),va=pa,ga=ge({__name:"AlertDialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(e){const t=e;return Ot(),(n,o)=>(P(),Se(c(Us),Tt(At(t)),{default:R(()=>[ke(n.$slots,"default")]),_:3},16))}}),ma=ga;function cn(e){return si()?(Pn(e),!0):!1}function lt(e){return typeof e=="function"?e():c(e)}const ya=typeof window<"u"&&typeof document<"u",_a=e=>typeof e<"u",wa=Object.prototype.toString,xa=e=>wa.call(e)==="[object Object]",ba=()=>{};function ka(e,t){function n(...o){return new Promise((r,i)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(i)})}return n}const ci=e=>e();function Sa(e=ci){const t=ce(!0);function n(){t.value=!1}function o(){t.value=!0}const r=(...i)=>{t.value&&e(...i)};return{isActive:Rs(t),pause:n,resume:o,eventFilter:r}}function ir(e,t=!1,n="Timeout"){return new Promise((o,r)=>{setTimeout(t?()=>r(n):o,e)})}function Ea(e,t,n={}){const{eventFilter:o=ci,...r}=n;return $e(e,ka(o,t),r)}function Vt(e,t,n={}){const{eventFilter:o,...r}=n,{eventFilter:i,pause:s,resume:a,isActive:l}=Sa(o);return{stop:Ea(e,t,{...r,eventFilter:i}),pause:s,resume:a,isActive:l}}function Na(e,t={}){if(!Ho(e))return zs(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=Bs(()=>({get(){return e.value[o]},set(r){var i;if((i=lt(t.replaceRef))!=null?i:!0)if(Array.isArray(e.value)){const a=[...e.value];a[o]=r,e.value=a}else{const a={...e.value,[o]:r};Object.setPrototypeOf(a,Object.getPrototypeOf(e.value)),e.value=a}else e.value[o]=r}}));return n}function So(e,t=!1){function n(h,{flush:v="sync",deep:y=!1,timeout:C,throwOnTimeout:S}={}){let N=null;const I=[new Promise(f=>{N=$e(e,w=>{h(w)!==t&&(N?.(),f(w))},{flush:v,deep:y,immediate:!0})})];return C!=null&&I.push(ir(C,S).then(()=>lt(e)).finally(()=>N?.())),Promise.race(I)}function o(h,v){if(!Ho(h))return n(w=>w===h,v);const{flush:y="sync",deep:C=!1,timeout:S,throwOnTimeout:N}=v??{};let E=null;const f=[new Promise(w=>{E=$e([e,h],([D,V])=>{t!==(D===V)&&(E?.(),w(D))},{flush:y,deep:C,immediate:!0})})];return S!=null&&f.push(ir(S,N).then(()=>lt(e)).finally(()=>(E?.(),lt(e)))),Promise.race(f)}function r(h){return n(v=>!!v,h)}function i(h){return o(null,h)}function s(h){return o(void 0,h)}function a(h){return n(Number.isNaN,h)}function l(h,v){return n(y=>{const C=Array.from(y);return C.includes(h)||C.includes(lt(h))},v)}function u(h){return d(1,h)}function d(h=1,v){let y=-1;return n(()=>(y+=1,y>=h),v)}return Array.isArray(lt(e))?{toMatch:n,toContains:l,changed:u,changedTimes:d,get not(){return So(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:r,toBeNull:i,toBeNaN:a,toBeUndefined:s,changed:u,changedTimes:d,get not(){return So(e,!t)}}}function Eo(e){return So(e)}function Ca(e){var t;const n=lt(e);return(t=n?.$el)!=null?t:n}const di=ya?window:void 0;function fi(...e){let t,n,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,r]=e,t=di):[t,n,o,r]=e,!t)return ba;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const i=[],s=()=>{i.forEach(d=>d()),i.length=0},a=(d,h,v,y)=>(d.addEventListener(h,v,y),()=>d.removeEventListener(h,v,y)),l=$e(()=>[Ca(t),lt(r)],([d,h])=>{if(s(),!d)return;const v=xa(h)?{...h}:h;i.push(...n.flatMap(y=>o.map(C=>a(d,y,C,v))))},{immediate:!0,flush:"post"}),u=()=>{l(),s()};return cn(u),u}function $a(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function sr(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=di,eventName:i="keydown",passive:s=!1,dedupe:a=!1}=o,l=$a(t);return fi(r,i,d=>{d.repeat&&lt(a)||l(d)&&n(d)},s)}function Ia(e){return JSON.parse(JSON.stringify(e))}function fo(e,t,n,o={}){var r,i,s;const{clone:a=!1,passive:l=!1,eventName:u,deep:d=!1,defaultValue:h,shouldEmit:v}=o,y=jt(),C=n||y?.emit||((r=y?.$emit)==null?void 0:r.bind(y))||((s=(i=y?.proxy)==null?void 0:i.$emit)==null?void 0:s.bind(y?.proxy));let S=u;t||(t="modelValue"),S=S||`update:${t.toString()}`;const N=f=>a?typeof a=="function"?a(f):Ia(f):f,E=()=>_a(e[t])?N(e[t]):h,I=f=>{v?v(f)&&C(S,f):C(S,f)};if(l){const f=E(),w=ce(f);let D=!1;return $e(()=>e[t],V=>{D||(D=!0,w.value=N(V),ot(()=>D=!1))}),$e(w,V=>{!D&&(V!==e[t]||d)&&I(V)},{deep:d}),w}else return le({get(){return E()},set(f){I(f)}})}var Ma={value:()=>{}};function qn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new An(n)}function An(e){this._=e}function Da(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}An.prototype=qn.prototype={constructor:An,on:function(e,t){var n=this._,o=Da(e+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((r=(e=o[i]).type)&&(r=Pa(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(r=(e=o[i]).type)n[r]=ar(n[r],e.name,t);else if(t==null)for(r in n)n[r]=ar(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new An(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function Pa(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function ar(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=Ma,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var No="http://www.w3.org/1999/xhtml";const lr={svg:"http://www.w3.org/2000/svg",xhtml:No,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function jn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),lr.hasOwnProperty(t)?{space:lr[t],local:e}:e}function Ta(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===No&&t.documentElement.namespaceURI===No?t.createElement(e):t.createElementNS(n,e)}}function Aa(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function hi(e){var t=jn(e);return(t.local?Aa:Ta)(t)}function Oa(){}function Wo(e){return e==null?Oa:function(){return this.querySelector(e)}}function za(e){typeof e!="function"&&(e=Wo(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=new Array(s),l,u,d=0;d<s;++d)(l=i[d])&&(u=e.call(l,l.__data__,d,i))&&("__data__"in l&&(u.__data__=l.__data__),a[d]=u);return new Xe(o,this._parents)}function Ba(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Va(){return[]}function pi(e){return e==null?Va:function(){return this.querySelectorAll(e)}}function Ha(e){return function(){return Ba(e.apply(this,arguments))}}function Ra(e){typeof e=="function"?e=Ha(e):e=pi(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var s=t[i],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(o.push(e.call(l,l.__data__,u,s)),r.push(l));return new Xe(o,r)}function vi(e){return function(){return this.matches(e)}}function gi(e){return function(t){return t.matches(e)}}var Wa=Array.prototype.find;function La(e){return function(){return Wa.call(this.children,e)}}function Fa(){return this.firstElementChild}function Ya(e){return this.select(e==null?Fa:La(typeof e=="function"?e:gi(e)))}var Xa=Array.prototype.filter;function Ga(){return Array.from(this.children)}function Ua(e){return function(){return Xa.call(this.children,e)}}function Za(e){return this.selectAll(e==null?Ga:Ua(typeof e=="function"?e:gi(e)))}function Ka(e){typeof e!="function"&&(e=vi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],l,u=0;u<s;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&a.push(l);return new Xe(o,this._parents)}function mi(e){return new Array(e.length)}function qa(){return new Xe(this._enter||this._groups.map(mi),this._parents)}function Hn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Hn.prototype={constructor:Hn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ja(e){return function(){return e}}function Ja(e,t,n,o,r,i){for(var s=0,a,l=t.length,u=i.length;s<u;++s)(a=t[s])?(a.__data__=i[s],o[s]=a):n[s]=new Hn(e,i[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function Qa(e,t,n,o,r,i,s){var a,l,u=new Map,d=t.length,h=i.length,v=new Array(d),y;for(a=0;a<d;++a)(l=t[a])&&(v[a]=y=s.call(l,l.__data__,a,t)+"",u.has(y)?r[a]=l:u.set(y,l));for(a=0;a<h;++a)y=s.call(e,i[a],a,i)+"",(l=u.get(y))?(o[a]=l,l.__data__=i[a],u.delete(y)):n[a]=new Hn(e,i[a]);for(a=0;a<d;++a)(l=t[a])&&u.get(v[a])===l&&(r[a]=l)}function el(e){return e.__data__}function tl(e,t){if(!arguments.length)return Array.from(this,el);var n=t?Qa:Ja,o=this._parents,r=this._groups;typeof e!="function"&&(e=ja(e));for(var i=r.length,s=new Array(i),a=new Array(i),l=new Array(i),u=0;u<i;++u){var d=o[u],h=r[u],v=h.length,y=nl(e.call(d,d&&d.__data__,u,o)),C=y.length,S=a[u]=new Array(C),N=s[u]=new Array(C),E=l[u]=new Array(v);n(d,h,S,N,E,y,t);for(var I=0,f=0,w,D;I<C;++I)if(w=S[I]){for(I>=f&&(f=I+1);!(D=N[f])&&++f<C;);w._next=D||null}}return s=new Xe(s,o),s._enter=a,s._exit=l,s}function nl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ol(){return new Xe(this._exit||this._groups.map(mi),this._parents)}function rl(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function il(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,s=Math.min(r,i),a=new Array(r),l=0;l<s;++l)for(var u=n[l],d=o[l],h=u.length,v=a[l]=new Array(h),y,C=0;C<h;++C)(y=u[C]||d[C])&&(v[C]=y);for(;l<r;++l)a[l]=n[l];return new Xe(a,this._parents)}function sl(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],s;--r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function al(e){e||(e=ll);function t(h,v){return h&&v?e(h.__data__,v.__data__):!h-!v}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s=n[i],a=s.length,l=r[i]=new Array(a),u,d=0;d<a;++d)(u=s[d])&&(l[d]=u);l.sort(t)}return new Xe(r,this._parents).order()}function ll(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ul(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function cl(){return Array.from(this)}function dl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null}function fl(){let e=0;for(const t of this)++e;return e}function hl(){return!this.node()}function pl(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,s=r.length,a;i<s;++i)(a=r[i])&&e.call(a,a.__data__,i,r);return this}function vl(e){return function(){this.removeAttribute(e)}}function gl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ml(e,t){return function(){this.setAttribute(e,t)}}function yl(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function _l(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function wl(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function xl(e,t){var n=jn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?gl:vl:typeof t=="function"?n.local?wl:_l:n.local?yl:ml)(n,t))}function yi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function bl(e){return function(){this.style.removeProperty(e)}}function kl(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Sl(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function El(e,t,n){return arguments.length>1?this.each((t==null?bl:typeof t=="function"?Sl:kl)(e,t,n??"")):Ut(this.node(),e)}function Ut(e,t){return e.style.getPropertyValue(t)||yi(e).getComputedStyle(e,null).getPropertyValue(t)}function Nl(e){return function(){delete this[e]}}function Cl(e,t){return function(){this[e]=t}}function $l(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Il(e,t){return arguments.length>1?this.each((t==null?Nl:typeof t=="function"?$l:Cl)(e,t)):this.node()[e]}function _i(e){return e.trim().split(/^|\s+/)}function Lo(e){return e.classList||new wi(e)}function wi(e){this._node=e,this._names=_i(e.getAttribute("class")||"")}wi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function xi(e,t){for(var n=Lo(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function bi(e,t){for(var n=Lo(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function Ml(e){return function(){xi(this,e)}}function Dl(e){return function(){bi(this,e)}}function Pl(e,t){return function(){(t.apply(this,arguments)?xi:bi)(this,e)}}function Tl(e,t){var n=_i(e+"");if(arguments.length<2){for(var o=Lo(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Pl:t?Ml:Dl)(n,t))}function Al(){this.textContent=""}function Ol(e){return function(){this.textContent=e}}function zl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Bl(e){return arguments.length?this.each(e==null?Al:(typeof e=="function"?zl:Ol)(e)):this.node().textContent}function Vl(){this.innerHTML=""}function Hl(e){return function(){this.innerHTML=e}}function Rl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Wl(e){return arguments.length?this.each(e==null?Vl:(typeof e=="function"?Rl:Hl)(e)):this.node().innerHTML}function Ll(){this.nextSibling&&this.parentNode.appendChild(this)}function Fl(){return this.each(Ll)}function Yl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Xl(){return this.each(Yl)}function Gl(e){var t=typeof e=="function"?e:hi(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ul(){return null}function Zl(e,t){var n=typeof e=="function"?e:hi(e),o=t==null?Ul:typeof t=="function"?t:Wo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Kl(){var e=this.parentNode;e&&e.removeChild(this)}function ql(){return this.each(Kl)}function jl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Jl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ql(e){return this.select(e?Jl:jl)}function eu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function tu(e){return function(t){e.call(this,t,this.__data__)}}function nu(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function ou(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function ru(e,t,n){return function(){var o=this.__on,r,i=tu(t);if(o){for(var s=0,a=o.length;s<a;++s)if((r=o[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function iu(e,t,n){var o=nu(e+""),r,i=o.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,d;l<u;++l)for(r=0,d=a[l];r<i;++r)if((s=o[r]).type===d.type&&s.name===d.name)return d.value}return}for(a=t?ru:ou,r=0;r<i;++r)this.each(a(o[r],t,n));return this}function ki(e,t,n){var o=yi(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function su(e,t){return function(){return ki(this,e,t)}}function au(e,t){return function(){return ki(this,e,t.apply(this,arguments))}}function lu(e,t){return this.each((typeof t=="function"?au:su)(e,t))}function*uu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,s;r<i;++r)(s=o[r])&&(yield s)}var Si=[null];function Xe(e,t){this._groups=e,this._parents=t}function _n(){return new Xe([[document.documentElement]],Si)}function cu(){return this}Xe.prototype=_n.prototype={constructor:Xe,select:za,selectAll:Ra,selectChild:Ya,selectChildren:Za,filter:Ka,data:tl,enter:qa,exit:ol,join:rl,merge:il,selection:cu,order:sl,sort:al,call:ul,nodes:cl,node:dl,size:fl,empty:hl,each:pl,attr:xl,style:El,property:Il,classed:Tl,text:Bl,html:Wl,raise:Fl,lower:Xl,append:Gl,insert:Zl,remove:ql,clone:Ql,datum:eu,on:iu,dispatch:lu,[Symbol.iterator]:uu};function Ke(e){return typeof e=="string"?new Xe([[document.querySelector(e)]],[document.documentElement]):new Xe([[e]],Si)}function du(e){let t;for(;t=e.sourceEvent;)e=t;return e}function et(e,t){if(e=du(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const fu={passive:!1},dn={capture:!0,passive:!1};function ho(e){e.stopImmediatePropagation()}function Ft(e){e.preventDefault(),e.stopImmediatePropagation()}function Ei(e){var t=e.document.documentElement,n=Ke(e).on("dragstart.drag",Ft,dn);"onselectstart"in t?n.on("selectstart.drag",Ft,dn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ni(e,t){var n=e.document.documentElement,o=Ke(e).on("dragstart.drag",null);t&&(o.on("click.drag",Ft,dn),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const bn=e=>()=>e;function Co(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:s,y:a,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}Co.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function hu(e){return!e.ctrlKey&&!e.button}function pu(){return this.parentNode}function vu(e,t){return t??{x:e.x,y:e.y}}function gu(){return navigator.maxTouchPoints||"ontouchstart"in this}function mu(){var e=hu,t=pu,n=vu,o=gu,r={},i=qn("start","drag","end"),s=0,a,l,u,d,h=0;function v(w){w.on("mousedown.drag",y).filter(o).on("touchstart.drag",N).on("touchmove.drag",E,fu).on("touchend.drag touchcancel.drag",I).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(w,D){if(!(d||!e.call(this,w,D))){var V=f(this,t.call(this,w,D),w,D,"mouse");V&&(Ke(w.view).on("mousemove.drag",C,dn).on("mouseup.drag",S,dn),Ei(w.view),ho(w),u=!1,a=w.clientX,l=w.clientY,V("start",w))}}function C(w){if(Ft(w),!u){var D=w.clientX-a,V=w.clientY-l;u=D*D+V*V>h}r.mouse("drag",w)}function S(w){Ke(w.view).on("mousemove.drag mouseup.drag",null),Ni(w.view,u),Ft(w),r.mouse("end",w)}function N(w,D){if(e.call(this,w,D)){var V=w.changedTouches,z=t.call(this,w,D),H=V.length,Q,O;for(Q=0;Q<H;++Q)(O=f(this,z,w,D,V[Q].identifier,V[Q]))&&(ho(w),O("start",w,V[Q]))}}function E(w){var D=w.changedTouches,V=D.length,z,H;for(z=0;z<V;++z)(H=r[D[z].identifier])&&(Ft(w),H("drag",w,D[z]))}function I(w){var D=w.changedTouches,V=D.length,z,H;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),z=0;z<V;++z)(H=r[D[z].identifier])&&(ho(w),H("end",w,D[z]))}function f(w,D,V,z,H,Q){var O=i.copy(),F=et(Q||V,D),k,ie,b;if((b=n.call(w,new Co("beforestart",{sourceEvent:V,target:v,identifier:H,active:s,x:F[0],y:F[1],dx:0,dy:0,dispatch:O}),z))!=null)return k=b.x-F[0]||0,ie=b.y-F[1]||0,function M($,W,Y){var Z=F,U;switch($){case"start":r[H]=M,U=s++;break;case"end":delete r[H],--s;case"drag":F=et(Y||W,D),U=s;break}O.call($,w,new Co($,{sourceEvent:W,subject:b,target:v,identifier:H,active:U,x:F[0]+k,y:F[1]+ie,dx:F[0]-Z[0],dy:F[1]-Z[1],dispatch:O}),z)}}return v.filter=function(w){return arguments.length?(e=typeof w=="function"?w:bn(!!w),v):e},v.container=function(w){return arguments.length?(t=typeof w=="function"?w:bn(w),v):t},v.subject=function(w){return arguments.length?(n=typeof w=="function"?w:bn(w),v):n},v.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:bn(!!w),v):o},v.on=function(){var w=i.on.apply(i,arguments);return w===i?v:w},v.clickDistance=function(w){return arguments.length?(h=(w=+w)*w,v):Math.sqrt(h)},v}function Fo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ci(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function wn(){}var fn=.7,Rn=1/fn,Yt="\\s*([+-]?\\d+)\\s*",hn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yu=/^#([0-9a-f]{3,8})$/,_u=new RegExp(`^rgb\\(${Yt},${Yt},${Yt}\\)$`),wu=new RegExp(`^rgb\\(${rt},${rt},${rt}\\)$`),xu=new RegExp(`^rgba\\(${Yt},${Yt},${Yt},${hn}\\)$`),bu=new RegExp(`^rgba\\(${rt},${rt},${rt},${hn}\\)$`),ku=new RegExp(`^hsl\\(${hn},${rt},${rt}\\)$`),Su=new RegExp(`^hsla\\(${hn},${rt},${rt},${hn}\\)$`),ur={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fo(wn,Mt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:cr,formatHex:cr,formatHex8:Eu,formatHsl:Nu,formatRgb:dr,toString:dr});function cr(){return this.rgb().formatHex()}function Eu(){return this.rgb().formatHex8()}function Nu(){return $i(this).formatHsl()}function dr(){return this.rgb().formatRgb()}function Mt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=yu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?fr(t):n===3?new Ye(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?kn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?kn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=_u.exec(e))?new Ye(t[1],t[2],t[3],1):(t=wu.exec(e))?new Ye(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=xu.exec(e))?kn(t[1],t[2],t[3],t[4]):(t=bu.exec(e))?kn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ku.exec(e))?vr(t[1],t[2]/100,t[3]/100,1):(t=Su.exec(e))?vr(t[1],t[2]/100,t[3]/100,t[4]):ur.hasOwnProperty(e)?fr(ur[e]):e==="transparent"?new Ye(NaN,NaN,NaN,0):null}function fr(e){return new Ye(e>>16&255,e>>8&255,e&255,1)}function kn(e,t,n,o){return o<=0&&(e=t=n=NaN),new Ye(e,t,n,o)}function Cu(e){return e instanceof wn||(e=Mt(e)),e?(e=e.rgb(),new Ye(e.r,e.g,e.b,e.opacity)):new Ye}function $o(e,t,n,o){return arguments.length===1?Cu(e):new Ye(e,t,n,o??1)}function Ye(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Fo(Ye,$o,Ci(wn,{brighter(e){return e=e==null?Rn:Math.pow(Rn,e),new Ye(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?fn:Math.pow(fn,e),new Ye(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ye($t(this.r),$t(this.g),$t(this.b),Wn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hr,formatHex:hr,formatHex8:$u,formatRgb:pr,toString:pr}));function hr(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}`}function $u(){return`#${Ct(this.r)}${Ct(this.g)}${Ct(this.b)}${Ct((isNaN(this.opacity)?1:this.opacity)*255)}`}function pr(){const e=Wn(this.opacity);return`${e===1?"rgb(":"rgba("}${$t(this.r)}, ${$t(this.g)}, ${$t(this.b)}${e===1?")":`, ${e})`}`}function Wn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function $t(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ct(e){return e=$t(e),(e<16?"0":"")+e.toString(16)}function vr(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new qe(e,t,n,o)}function $i(e){if(e instanceof qe)return new qe(e.h,e.s,e.l,e.opacity);if(e instanceof wn||(e=Mt(e)),!e)return new qe;if(e instanceof qe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),s=NaN,a=i-r,l=(i+r)/2;return a?(t===i?s=(n-o)/a+(n<o)*6:n===i?s=(o-t)/a+2:s=(t-n)/a+4,a/=l<.5?i+r:2-i-r,s*=60):a=l>0&&l<1?0:s,new qe(s,a,l,e.opacity)}function Iu(e,t,n,o){return arguments.length===1?$i(e):new qe(e,t,n,o??1)}function qe(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Fo(qe,Iu,Ci(wn,{brighter(e){return e=e==null?Rn:Math.pow(Rn,e),new qe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fn:Math.pow(fn,e),new qe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new Ye(po(e>=240?e-240:e+120,r,o),po(e,r,o),po(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new qe(gr(this.h),Sn(this.s),Sn(this.l),Wn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Wn(this.opacity);return`${e===1?"hsl(":"hsla("}${gr(this.h)}, ${Sn(this.s)*100}%, ${Sn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function gr(e){return e=(e||0)%360,e<0?e+360:e}function Sn(e){return Math.max(0,Math.min(1,e||0))}function po(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Yo=e=>()=>e;function Mu(e,t){return function(n){return e+n*t}}function Du(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Pu(e){return(e=+e)==1?Ii:function(t,n){return n-t?Du(t,n,e):Yo(isNaN(t)?n:t)}}function Ii(e,t){var n=t-e;return n?Mu(e,n):Yo(isNaN(e)?t:e)}const Ln=(function e(t){var n=Pu(t);function o(r,i){var s=n((r=$o(r)).r,(i=$o(i)).r),a=n(r.g,i.g),l=n(r.b,i.b),u=Ii(r.opacity,i.opacity);return function(d){return r.r=s(d),r.g=a(d),r.b=l(d),r.opacity=u(d),r+""}}return o.gamma=e,o})(1);function Tu(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),r;return function(i){for(r=0;r<n;++r)o[r]=e[r]*(1-i)+t[r]*i;return o}}function Au(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ou(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,r=new Array(o),i=new Array(n),s;for(s=0;s<o;++s)r[s]=an(e[s],t[s]);for(;s<n;++s)i[s]=t[s];return function(a){for(s=0;s<o;++s)i[s]=r[s](a);return i}}function zu(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function tt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Bu(e,t){var n={},o={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=an(e[r],t[r]):o[r]=t[r];return function(i){for(r in n)o[r]=n[r](i);return o}}var Io=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vo=new RegExp(Io.source,"g");function Vu(e){return function(){return e}}function Hu(e){return function(t){return e(t)+""}}function Mi(e,t){var n=Io.lastIndex=vo.lastIndex=0,o,r,i,s=-1,a=[],l=[];for(e=e+"",t=t+"";(o=Io.exec(e))&&(r=vo.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(o=o[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:tt(o,r)})),n=vo.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?Hu(l[0].x):Vu(t):(t=l.length,function(u){for(var d=0,h;d<t;++d)a[(h=l[d]).i]=h.x(u);return a.join("")})}function an(e,t){var n=typeof t,o;return t==null||n==="boolean"?Yo(t):(n==="number"?tt:n==="string"?(o=Mt(t))?(t=o,Ln):Mi:t instanceof Mt?Ln:t instanceof Date?zu:Au(t)?Tu:Array.isArray(t)?Ou:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Bu:tt)(e,t)}var mr=180/Math.PI,Mo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Di(e,t,n,o,r,i){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,l/=a),e*o<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*mr,skewX:Math.atan(l)*mr,scaleX:s,scaleY:a}}var En;function Ru(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Mo:Di(t.a,t.b,t.c,t.d,t.e,t.f)}function Wu(e){return e==null||(En||(En=document.createElementNS("http://www.w3.org/2000/svg","g")),En.setAttribute("transform",e),!(e=En.transform.baseVal.consolidate()))?Mo:(e=e.matrix,Di(e.a,e.b,e.c,e.d,e.e,e.f))}function Pi(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,d,h,v,y,C){if(u!==h||d!==v){var S=y.push("translate(",null,t,null,n);C.push({i:S-4,x:tt(u,h)},{i:S-2,x:tt(d,v)})}else(h||v)&&y.push("translate("+h+t+v+n)}function s(u,d,h,v){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),v.push({i:h.push(r(h)+"rotate(",null,o)-2,x:tt(u,d)})):d&&h.push(r(h)+"rotate("+d+o)}function a(u,d,h,v){u!==d?v.push({i:h.push(r(h)+"skewX(",null,o)-2,x:tt(u,d)}):d&&h.push(r(h)+"skewX("+d+o)}function l(u,d,h,v,y,C){if(u!==h||d!==v){var S=y.push(r(y)+"scale(",null,",",null,")");C.push({i:S-4,x:tt(u,h)},{i:S-2,x:tt(d,v)})}else(h!==1||v!==1)&&y.push(r(y)+"scale("+h+","+v+")")}return function(u,d){var h=[],v=[];return u=e(u),d=e(d),i(u.translateX,u.translateY,d.translateX,d.translateY,h,v),s(u.rotate,d.rotate,h,v),a(u.skewX,d.skewX,h,v),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,h,v),u=d=null,function(y){for(var C=-1,S=v.length,N;++C<S;)h[(N=v[C]).i]=N.x(y);return h.join("")}}}var Lu=Pi(Ru,"px, ","px)","deg)"),Fu=Pi(Wu,", ",")",")"),Yu=1e-12;function yr(e){return((e=Math.exp(e))+1/e)/2}function Xu(e){return((e=Math.exp(e))-1/e)/2}function Gu(e){return((e=Math.exp(2*e))-1)/(e+1)}const On=(function e(t,n,o){function r(i,s){var a=i[0],l=i[1],u=i[2],d=s[0],h=s[1],v=s[2],y=d-a,C=h-l,S=y*y+C*C,N,E;if(S<Yu)E=Math.log(v/u)/t,N=function(z){return[a+z*y,l+z*C,u*Math.exp(t*z*E)]};else{var I=Math.sqrt(S),f=(v*v-u*u+o*S)/(2*u*n*I),w=(v*v-u*u-o*S)/(2*v*n*I),D=Math.log(Math.sqrt(f*f+1)-f),V=Math.log(Math.sqrt(w*w+1)-w);E=(V-D)/t,N=function(z){var H=z*E,Q=yr(D),O=u/(n*I)*(Q*Gu(t*H+D)-Xu(D));return[a+O*y,l+O*C,u*Q/yr(t*H+D)]}}return N.duration=E*1e3*t/Math.SQRT2,N}return r.rho=function(i){var s=Math.max(.001,+i),a=s*s,l=a*a;return e(s,a,l)},r})(Math.SQRT2,2,4);var Zt=0,on=0,tn=0,Ti=1e3,Fn,rn,Yn=0,Dt=0,Jn=0,pn=typeof performance=="object"&&performance.now?performance:Date,Ai=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Xo(){return Dt||(Ai(Uu),Dt=pn.now()+Jn)}function Uu(){Dt=0}function Xn(){this._call=this._time=this._next=null}Xn.prototype=Oi.prototype={constructor:Xn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Xo():+n)+(t==null?0:+t),!this._next&&rn!==this&&(rn?rn._next=this:Fn=this,rn=this),this._call=e,this._time=n,Do()},stop:function(){this._call&&(this._call=null,this._time=1/0,Do())}};function Oi(e,t,n){var o=new Xn;return o.restart(e,t,n),o}function Zu(){Xo(),++Zt;for(var e=Fn,t;e;)(t=Dt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Zt}function _r(){Dt=(Yn=pn.now())+Jn,Zt=on=0;try{Zu()}finally{Zt=0,qu(),Dt=0}}function Ku(){var e=pn.now(),t=e-Yn;t>Ti&&(Jn-=t,Yn=e)}function qu(){for(var e,t=Fn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Fn=n);rn=e,Do(o)}function Do(e){if(!Zt){on&&(on=clearTimeout(on));var t=e-Dt;t>24?(e<1/0&&(on=setTimeout(_r,e-pn.now()-Jn)),tn&&(tn=clearInterval(tn))):(tn||(Yn=pn.now(),tn=setInterval(Ku,Ti)),Zt=1,Ai(_r))}}function wr(e,t,n){var o=new Xn;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var ju=qn("start","end","cancel","interrupt"),Ju=[],zi=0,xr=1,Po=2,zn=3,br=4,To=5,Bn=6;function Qn(e,t,n,o,r,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Qu(e,n,{name:t,index:o,group:r,on:ju,tween:Ju,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:zi})}function Go(e,t){var n=Je(e,t);if(n.state>zi)throw new Error("too late; already scheduled");return n}function st(e,t){var n=Je(e,t);if(n.state>zn)throw new Error("too late; already running");return n}function Je(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Qu(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Oi(i,0,n.time);function i(u){n.state=xr,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var d,h,v,y;if(n.state!==xr)return l();for(d in o)if(y=o[d],y.name===n.name){if(y.state===zn)return wr(s);y.state===br?(y.state=Bn,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete o[d]):+d<t&&(y.state=Bn,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete o[d])}if(wr(function(){n.state===zn&&(n.state=br,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Po,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Po){for(n.state=zn,r=new Array(v=n.tween.length),d=0,h=-1;d<v;++d)(y=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=y);r.length=h+1}}function a(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=To,1),h=-1,v=r.length;++h<v;)r[h].call(e,d);n.state===To&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Bn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Vn(e,t){var n=e.__transition,o,r,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){i=!1;continue}r=o.state>Po&&o.state<To,o.state=Bn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}i&&delete e.__transition}}function ec(e){return this.each(function(){Vn(this,e)})}function tc(e,t){var n,o;return function(){var r=st(this,e),i=r.tween;if(i!==n){o=n=i;for(var s=0,a=o.length;s<a;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function nc(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=st(this,e),s=i.tween;if(s!==o){r=(o=s).slice();for(var a={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=a;break}l===u&&r.push(a)}i.tween=r}}function oc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Je(this.node(),n).tween,r=0,i=o.length,s;r<i;++r)if((s=o[r]).name===e)return s.value;return null}return this.each((t==null?tc:nc)(n,e,t))}function Uo(e,t,n){var o=e._id;return e.each(function(){var r=st(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Je(r,o).value[t]}}function Bi(e,t){var n;return(typeof t=="number"?tt:t instanceof Mt?Ln:(n=Mt(t))?(t=n,Ln):Mi)(e,t)}function rc(e){return function(){this.removeAttribute(e)}}function ic(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sc(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttribute(e);return s===r?null:s===o?i:i=t(o=s,n)}}function ac(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===o?i:i=t(o=s,n)}}function lc(e,t,n){var o,r,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a)))}}function uc(e,t,n){var o,r,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a)))}}function cc(e,t){var n=jn(e),o=n==="transform"?Fu:Bi;return this.attrTween(e,typeof t=="function"?(n.local?uc:lc)(n,o,Uo(this,"attr."+e,t)):t==null?(n.local?ic:rc)(n):(n.local?ac:sc)(n,o,t))}function dc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function fc(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function hc(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&fc(e,i)),n}return r._value=t,r}function pc(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&dc(e,i)),n}return r._value=t,r}function vc(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=jn(e);return this.tween(n,(o.local?hc:pc)(o,t))}function gc(e,t){return function(){Go(this,e).delay=+t.apply(this,arguments)}}function mc(e,t){return t=+t,function(){Go(this,e).delay=t}}function yc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?gc:mc)(t,e)):Je(this.node(),t).delay}function _c(e,t){return function(){st(this,e).duration=+t.apply(this,arguments)}}function wc(e,t){return t=+t,function(){st(this,e).duration=t}}function xc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_c:wc)(t,e)):Je(this.node(),t).duration}function bc(e,t){if(typeof t!="function")throw new Error;return function(){st(this,e).ease=t}}function kc(e){var t=this._id;return arguments.length?this.each(bc(t,e)):Je(this.node(),t).ease}function Sc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;st(this,e).ease=n}}function Ec(e){if(typeof e!="function")throw new Error;return this.each(Sc(this._id,e))}function Nc(e){typeof e!="function"&&(e=vi(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],l,u=0;u<s;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&a.push(l);return new ct(o,this._parents,this._name,this._id)}function Cc(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),s=new Array(o),a=0;a<i;++a)for(var l=t[a],u=n[a],d=l.length,h=s[a]=new Array(d),v,y=0;y<d;++y)(v=l[y]||u[y])&&(h[y]=v);for(;a<o;++a)s[a]=t[a];return new ct(s,this._parents,this._name,this._id)}function $c(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ic(e,t,n){var o,r,i=$c(t)?Go:st;return function(){var s=i(this,e),a=s.on;a!==o&&(r=(o=a).copy()).on(t,n),s.on=r}}function Mc(e,t){var n=this._id;return arguments.length<2?Je(this.node(),n).on.on(e):this.each(Ic(n,e,t))}function Dc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Pc(){return this.on("end.remove",Dc(this._id))}function Tc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Wo(e));for(var o=this._groups,r=o.length,i=new Array(r),s=0;s<r;++s)for(var a=o[s],l=a.length,u=i[s]=new Array(l),d,h,v=0;v<l;++v)(d=a[v])&&(h=e.call(d,d.__data__,v,a))&&("__data__"in d&&(h.__data__=d.__data__),u[v]=h,Qn(u[v],t,n,v,u,Je(d,n)));return new ct(i,this._parents,t,n)}function Ac(e){var t=this._name,n=this._id;typeof e!="function"&&(e=pi(e));for(var o=this._groups,r=o.length,i=[],s=[],a=0;a<r;++a)for(var l=o[a],u=l.length,d,h=0;h<u;++h)if(d=l[h]){for(var v=e.call(d,d.__data__,h,l),y,C=Je(d,n),S=0,N=v.length;S<N;++S)(y=v[S])&&Qn(y,t,n,S,v,C);i.push(v),s.push(d)}return new ct(i,s,t,n)}var Oc=_n.prototype.constructor;function zc(){return new Oc(this._groups,this._parents)}function Bc(e,t){var n,o,r;return function(){var i=Ut(this,e),s=(this.style.removeProperty(e),Ut(this,e));return i===s?null:i===n&&s===o?r:r=t(n=i,o=s)}}function Vi(e){return function(){this.style.removeProperty(e)}}function Vc(e,t,n){var o,r=n+"",i;return function(){var s=Ut(this,e);return s===r?null:s===o?i:i=t(o=s,n)}}function Hc(e,t,n){var o,r,i;return function(){var s=Ut(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Ut(this,e))),s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a))}}function Rc(e,t){var n,o,r,i="style."+t,s="end."+i,a;return function(){var l=st(this,e),u=l.on,d=l.value[i]==null?a||(a=Vi(t)):void 0;(u!==n||r!==d)&&(o=(n=u).copy()).on(s,r=d),l.on=o}}function Wc(e,t,n){var o=(e+="")=="transform"?Lu:Bi;return t==null?this.styleTween(e,Bc(e,o)).on("end.style."+e,Vi(e)):typeof t=="function"?this.styleTween(e,Hc(e,o,Uo(this,"style."+e,t))).each(Rc(this._id,e)):this.styleTween(e,Vc(e,o,t),n).on("end.style."+e,null)}function Lc(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Fc(e,t,n){var o,r;function i(){var s=t.apply(this,arguments);return s!==r&&(o=(r=s)&&Lc(e,s,n)),o}return i._value=t,i}function Yc(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Fc(e,t,n??""))}function Xc(e){return function(){this.textContent=e}}function Gc(e){return function(){var t=e(this);this.textContent=t??""}}function Uc(e){return this.tween("text",typeof e=="function"?Gc(Uo(this,"text",e)):Xc(e==null?"":e+""))}function Zc(e){return function(t){this.textContent=e.call(this,t)}}function Kc(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Zc(r)),t}return o._value=e,o}function qc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Kc(e))}function jc(){for(var e=this._name,t=this._id,n=Hi(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var d=Je(l,t);Qn(l,e,n,u,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new ct(o,this._parents,e,n)}function Jc(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,s){var a={value:s},l={value:function(){--r===0&&i()}};n.each(function(){var u=st(this,o),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),r===0&&i()})}var Qc=0;function ct(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Hi(){return++Qc}var at=_n.prototype;ct.prototype={constructor:ct,select:Tc,selectAll:Ac,selectChild:at.selectChild,selectChildren:at.selectChildren,filter:Nc,merge:Cc,selection:zc,transition:jc,call:at.call,nodes:at.nodes,node:at.node,size:at.size,empty:at.empty,each:at.each,on:Mc,attr:cc,attrTween:vc,style:Wc,styleTween:Yc,text:Uc,textTween:qc,remove:Pc,tween:oc,delay:yc,duration:xc,ease:kc,easeVarying:Ec,end:Jc,[Symbol.iterator]:at[Symbol.iterator]};function ed(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var td={time:null,delay:0,duration:250,ease:ed};function nd(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function od(e){var t,n;e instanceof ct?(t=e._id,e=e._name):(t=Hi(),(n=td).time=Xo(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,l,u=0;u<a;++u)(l=s[u])&&Qn(l,e,t,u,s,n||nd(l,t));return new ct(o,this._parents,e,t)}_n.prototype.interrupt=ec;_n.prototype.transition=od;const Nn=e=>()=>e;function rd(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function ut(e,t,n){this.k=e,this.x=t,this.y=n}ut.prototype={constructor:ut,scale:function(e){return e===1?this:new ut(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ut(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Kt=new ut(1,0,0);ut.prototype;function go(e){e.stopImmediatePropagation()}function nn(e){e.preventDefault(),e.stopImmediatePropagation()}function id(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function sd(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function kr(){return this.__zoom||Kt}function ad(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ld(){return navigator.maxTouchPoints||"ontouchstart"in this}function ud(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function cd(){var e=id,t=sd,n=ud,o=ad,r=ld,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=On,u=qn("start","zoom","end"),d,h,v,y=500,C=150,S=0,N=10;function E(b){b.property("__zoom",kr).on("wheel.zoom",H,{passive:!1}).on("mousedown.zoom",Q).on("dblclick.zoom",O).filter(r).on("touchstart.zoom",F).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",ie).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(b,M,$,W){var Y=b.selection?b.selection():b;Y.property("__zoom",kr),b!==Y?D(b,M,$,W):Y.interrupt().each(function(){V(this,arguments).event(W).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},E.scaleBy=function(b,M,$,W){E.scaleTo(b,function(){var Y=this.__zoom.k,Z=typeof M=="function"?M.apply(this,arguments):M;return Y*Z},$,W)},E.scaleTo=function(b,M,$,W){E.transform(b,function(){var Y=t.apply(this,arguments),Z=this.__zoom,U=$==null?w(Y):typeof $=="function"?$.apply(this,arguments):$,te=Z.invert(U),ue=typeof M=="function"?M.apply(this,arguments):M;return n(f(I(Z,ue),U,te),Y,s)},$,W)},E.translateBy=function(b,M,$,W){E.transform(b,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof $=="function"?$.apply(this,arguments):$),t.apply(this,arguments),s)},null,W)},E.translateTo=function(b,M,$,W,Y){E.transform(b,function(){var Z=t.apply(this,arguments),U=this.__zoom,te=W==null?w(Z):typeof W=="function"?W.apply(this,arguments):W;return n(Kt.translate(te[0],te[1]).scale(U.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof $=="function"?-$.apply(this,arguments):-$),Z,s)},W,Y)};function I(b,M){return M=Math.max(i[0],Math.min(i[1],M)),M===b.k?b:new ut(M,b.x,b.y)}function f(b,M,$){var W=M[0]-$[0]*b.k,Y=M[1]-$[1]*b.k;return W===b.x&&Y===b.y?b:new ut(b.k,W,Y)}function w(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function D(b,M,$,W){b.on("start.zoom",function(){V(this,arguments).event(W).start()}).on("interrupt.zoom end.zoom",function(){V(this,arguments).event(W).end()}).tween("zoom",function(){var Y=this,Z=arguments,U=V(Y,Z).event(W),te=t.apply(Y,Z),ue=$==null?w(te):typeof $=="function"?$.apply(Y,Z):$,fe=Math.max(te[1][0]-te[0][0],te[1][1]-te[0][1]),me=Y.__zoom,J=typeof M=="function"?M.apply(Y,Z):M,ne=l(me.invert(ue).concat(fe/me.k),J.invert(ue).concat(fe/J.k));return function(se){if(se===1)se=J;else{var we=ne(se),ve=fe/we[2];se=new ut(ve,ue[0]-we[0]*ve,ue[1]-we[1]*ve)}U.zoom(null,se)}})}function V(b,M,$){return!$&&b.__zooming||new z(b,M)}function z(b,M){this.that=b,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(b,M),this.taps=0}z.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,M){return this.mouse&&b!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var M=Ke(this.that).datum();u.call(b,this.that,new rd(b,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:u}),M)}};function H(b,...M){if(!e.apply(this,arguments))return;var $=V(this,M).event(b),W=this.__zoom,Y=Math.max(i[0],Math.min(i[1],W.k*Math.pow(2,o.apply(this,arguments)))),Z=et(b);if($.wheel)($.mouse[0][0]!==Z[0]||$.mouse[0][1]!==Z[1])&&($.mouse[1]=W.invert($.mouse[0]=Z)),clearTimeout($.wheel);else{if(W.k===Y)return;$.mouse=[Z,W.invert(Z)],Vn(this),$.start()}nn(b),$.wheel=setTimeout(U,C),$.zoom("mouse",n(f(I(W,Y),$.mouse[0],$.mouse[1]),$.extent,s));function U(){$.wheel=null,$.end()}}function Q(b,...M){if(v||!e.apply(this,arguments))return;var $=b.currentTarget,W=V(this,M,!0).event(b),Y=Ke(b.view).on("mousemove.zoom",ue,!0).on("mouseup.zoom",fe,!0),Z=et(b,$),U=b.clientX,te=b.clientY;Ei(b.view),go(b),W.mouse=[Z,this.__zoom.invert(Z)],Vn(this),W.start();function ue(me){if(nn(me),!W.moved){var J=me.clientX-U,ne=me.clientY-te;W.moved=J*J+ne*ne>S}W.event(me).zoom("mouse",n(f(W.that.__zoom,W.mouse[0]=et(me,$),W.mouse[1]),W.extent,s))}function fe(me){Y.on("mousemove.zoom mouseup.zoom",null),Ni(me.view,W.moved),nn(me),W.event(me).end()}}function O(b,...M){if(e.apply(this,arguments)){var $=this.__zoom,W=et(b.changedTouches?b.changedTouches[0]:b,this),Y=$.invert(W),Z=$.k*(b.shiftKey?.5:2),U=n(f(I($,Z),W,Y),t.apply(this,M),s);nn(b),a>0?Ke(this).transition().duration(a).call(D,U,W,b):Ke(this).call(E.transform,U,W,b)}}function F(b,...M){if(e.apply(this,arguments)){var $=b.touches,W=$.length,Y=V(this,M,b.changedTouches.length===W).event(b),Z,U,te,ue;for(go(b),U=0;U<W;++U)te=$[U],ue=et(te,this),ue=[ue,this.__zoom.invert(ue),te.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==ue[2]&&(Y.touch1=ue,Y.taps=0):(Y.touch0=ue,Z=!0,Y.taps=1+!!d);d&&(d=clearTimeout(d)),Z&&(Y.taps<2&&(h=ue[0],d=setTimeout(function(){d=null},y)),Vn(this),Y.start())}}function k(b,...M){if(this.__zooming){var $=V(this,M).event(b),W=b.changedTouches,Y=W.length,Z,U,te,ue;for(nn(b),Z=0;Z<Y;++Z)U=W[Z],te=et(U,this),$.touch0&&$.touch0[2]===U.identifier?$.touch0[0]=te:$.touch1&&$.touch1[2]===U.identifier&&($.touch1[0]=te);if(U=$.that.__zoom,$.touch1){var fe=$.touch0[0],me=$.touch0[1],J=$.touch1[0],ne=$.touch1[1],se=(se=J[0]-fe[0])*se+(se=J[1]-fe[1])*se,we=(we=ne[0]-me[0])*we+(we=ne[1]-me[1])*we;U=I(U,Math.sqrt(se/we)),te=[(fe[0]+J[0])/2,(fe[1]+J[1])/2],ue=[(me[0]+ne[0])/2,(me[1]+ne[1])/2]}else if($.touch0)te=$.touch0[0],ue=$.touch0[1];else return;$.zoom("touch",n(f(U,te,ue),$.extent,s))}}function ie(b,...M){if(this.__zooming){var $=V(this,M).event(b),W=b.changedTouches,Y=W.length,Z,U;for(go(b),v&&clearTimeout(v),v=setTimeout(function(){v=null},y),Z=0;Z<Y;++Z)U=W[Z],$.touch0&&$.touch0[2]===U.identifier?delete $.touch0:$.touch1&&$.touch1[2]===U.identifier&&delete $.touch1;if($.touch1&&!$.touch0&&($.touch0=$.touch1,delete $.touch1),$.touch0)$.touch0[1]=this.__zoom.invert($.touch0[0]);else if($.end(),$.taps===2&&(U=et(U,this),Math.hypot(h[0]-U[0],h[1]-U[1])<N)){var te=Ke(this).on("dblclick.zoom");te&&te.apply(this,arguments)}}}return E.wheelDelta=function(b){return arguments.length?(o=typeof b=="function"?b:Nn(+b),E):o},E.filter=function(b){return arguments.length?(e=typeof b=="function"?b:Nn(!!b),E):e},E.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:Nn(!!b),E):r},E.extent=function(b){return arguments.length?(t=typeof b=="function"?b:Nn([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),E):t},E.scaleExtent=function(b){return arguments.length?(i[0]=+b[0],i[1]=+b[1],E):[i[0],i[1]]},E.translateExtent=function(b){return arguments.length?(s[0][0]=+b[0][0],s[1][0]=+b[1][0],s[0][1]=+b[0][1],s[1][1]=+b[1][1],E):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},E.constrain=function(b){return arguments.length?(n=b,E):n},E.duration=function(b){return arguments.length?(a=+b,E):a},E.interpolate=function(b){return arguments.length?(l=b,E):l},E.on=function(){var b=u.on.apply(u,arguments);return b===u?E:b},E.clickDistance=function(b){return arguments.length?(S=(b=+b)*b,E):Math.sqrt(S)},E.tapDistance=function(b){return arguments.length?(N=+b,E):N},E}var re=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(re||{}),Zo=(e=>(e.Partial="partial",e.Full="full",e))(Zo||{}),Et=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Et||{}),wt=(e=>(e.Strict="strict",e.Loose="loose",e))(wt||{}),Ao=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Ao||{}),ln=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(ln||{}),Ri=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(Ri||{});const dd=["INPUT","SELECT","TEXTAREA"],fd=typeof document<"u"?document:null;function Oo(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,r=typeof o?.hasAttribute=="function"?o.hasAttribute("contenteditable"):!1,i=typeof o?.closest=="function"?o.closest(".nokey"):null;return dd.includes(o?.nodeName)||r||!!i}function hd(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function Sr(e,t,n,o){const r=t.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(s=>s.trim().toLowerCase());if(r.length===1)return e.toLowerCase()===t.toLowerCase();o||n.add(e.toLowerCase());const i=r.every((s,a)=>n.has(s)&&Array.from(n.values())[a]===r[a]);return o&&n.delete(e.toLowerCase()),i}function pd(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=vd(n.code,e);return Array.isArray(e)?e.some(r=>Sr(n[o],r,t,n.type==="keyup")):Sr(n[o],e,t,n.type==="keyup")}}function vd(e,t){return t.includes(e)?"code":"key"}function un(e,t){const n=le(()=>be(t?.target)??fd),o=_t(be(e)===!0);let r=!1;const i=new Set;let s=l(be(e));$e(()=>be(e),(u,d)=>{typeof d=="boolean"&&typeof u!="boolean"&&a(),s=l(u)},{immediate:!0}),fi(["blur","contextmenu"],a),sr((...u)=>s(...u),u=>{var d,h;const v=be(t?.actInsideInputWithModifier)??!0,y=be(t?.preventDefault)??!1;if(r=hd(u),(!r||r&&!v)&&Oo(u))return;const S=((h=(d=u.composedPath)==null?void 0:d.call(u))==null?void 0:h[0])||u.target,N=S?.nodeName==="BUTTON"||S?.nodeName==="A";!y&&(r||!N)&&u.preventDefault(),o.value=!0},{eventName:"keydown",target:n}),sr((...u)=>s(...u),u=>{const d=be(t?.actInsideInputWithModifier)??!0;if(o.value){if((!r||r&&!d)&&Oo(u))return;r=!1,o.value=!1}},{eventName:"keyup",target:n});function a(){r=!1,i.clear(),o.value=be(e)===!0}function l(u){return u===null?(a(),()=>!1):typeof u=="boolean"?(a(),o.value=u,()=>!1):Array.isArray(u)||typeof u=="string"?pd(u,i):u}return o}const Wi="vue-flow__node-desc",Li="vue-flow__edge-desc",gd="vue-flow__aria-live",Fi=["Enter"," ","Escape"],Xt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function Gn(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function Un(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function eo(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Pt(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Yi(e,t){return{x:Pt(e.x,t[0][0],t[1][0]),y:Pt(e.y,t[0][1],t[1][1])}}function Er(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function xt(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function It(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!xt(e)}function sn(e){return It(e)&&"computedPosition"in e}function Cn(e){return!Number.isNaN(e)&&Number.isFinite(e)}function md(e){return Cn(e.width)&&Cn(e.height)&&Cn(e.x)&&Cn(e.y)}function yd(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:Tn({width:0,height:0}),computedPosition:Tn({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Be(e.data)?e.data:{},events:Tn(Be(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function Xi(e,t,n){var o,r;const i={id:e.id.toString(),type:e.type??t?.type??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(r=e.targetHandle)==null?void 0:r.toString(),updatable:e.updatable??n?.updatable,selectable:e.selectable??n?.selectable,focusable:e.focusable??n?.focusable,data:Be(e.data)?e.data:{},events:Tn(Be(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??n?.interactionWidth,...n??{}};return Object.assign(t??i,e,{id:e.id.toString()})}function Gi(e,t,n,o){const r=typeof e=="string"?e:e.id,i=new Set,s=o==="source"?"target":"source";for(const a of n)a[s]===r&&i.add(a[o]);return t.filter(a=>i.has(a.id))}function _d(...e){if(e.length===3){const[i,s,a]=e;return Gi(i,s,a,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>xt(i)&&i.source===o).map(i=>n.find(s=>It(s)&&s.id===i.target))}function wd(...e){if(e.length===3){const[i,s,a]=e;return Gi(i,s,a,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>xt(i)&&i.target===o).map(i=>n.find(s=>It(s)&&s.id===i.source))}function Ui({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function xd(e,t){return t.some(n=>xt(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function vn({x:e,y:t},{x:n,y:o,zoom:r}){return{x:e*r+n,y:t*r+o}}function gn({x:e,y:t},{x:n,y:o,zoom:r},i=!1,s=[1,1]){const a={x:(e-n)/r,y:(t-o)/r};return i?to(a,s):a}function bd(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Zi({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function kd({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function Ki(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=bd(t,Zi({...o.computedPosition,...o.dimensions}))}return kd(t)}function qi(e,t,n={x:0,y:0,zoom:1},o=!1,r=!1){const i={...gn(t,n),width:t.width/n.zoom,height:t.height/n.zoom},s=[];for(const a of e){const{dimensions:l,selectable:u=!0,hidden:d=!1}=a,h=l.width??a.width??null,v=l.height??a.height??null;if(r&&!u||d)continue;const y=Un(i,Gn(a)),C=h===null||v===null,S=o&&y>0,N=(h??0)*(v??0);(C||S||y>=N||a.dragging)&&s.push(a)}return s}function ji(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function Ht(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return xn(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Sd(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=Ht(e,n),r=Ht(e,t);return{top:o,right:r,bottom:o,left:r,x:r*2,y:o*2}}if(typeof e=="object"){const o=Ht(e.top??e.y??0,n),r=Ht(e.bottom??e.y??0,n),i=Ht(e.left??e.x??0,t),s=Ht(e.right??e.x??0,t);return{top:o,right:s,bottom:r,left:i,x:i+s,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Ed(e,t,n,o,r,i){const{x:s,y:a}=vn(e,{x:t,y:n,zoom:o}),{x:l,y:u}=vn({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:o}),d=r-l,h=i-u;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(d),bottom:Math.floor(h)}}function Nr(e,t,n,o,r,i=.1){const s=Sd(i,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,u=Math.min(a,l),d=Pt(u,o,r),h=e.x+e.width/2,v=e.y+e.height/2,y=t/2-h*d,C=n/2-v*d,S=Ed(e,y,C,d,t,n),N={left:Math.min(S.left-s.left,0),top:Math.min(S.top-s.top,0),right:Math.min(S.right-s.right,0),bottom:Math.min(S.bottom-s.bottom,0)};return{x:y-N.left+N.right,y:C-N.top+N.bottom,zoom:d}}function Nd(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function Ji(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:Ji(n,t):!1}function mn(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function Cr(e){const t=e.ctrlKey&&Zn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t}function $r(e,t,n){return e<t?Pt(Math.abs(e-t),1,t)/t:e>n?-Pt(Math.abs(e-n),1,t)/t:0}function Qi(e,t,n=15,o=40){const r=$r(e.x,o,t.width-o)*n,i=$r(e.y,o,t.height-o)*n;return[r,i]}function mo(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let r={};if(typeof t.style=="function"?r={...t.style(t)}:t.style&&(r={...t.style}),r.width=r.width??`${t.dimensions.width}px`,r.height=r.height??`${t.dimensions.height}px`,n>0)if(typeof r.width=="string"){const i=Number(r.width.replace("px",""));r.width=`${i+n}px`}else r.width+=n;if(o>0)if(typeof r.height=="string"){const i=Number(r.height.replace("px",""));r.height=`${i+o}px`}else r.height+=o;if(e.position.x<0){const i=Math.abs(e.position.x);if(t.position.x=t.position.x-i,typeof r.width=="string"){const s=Number(r.width.replace("px",""));r.width=`${s+i}px`}else r.width+=i;e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);if(t.position.y=t.position.y-i,typeof r.height=="string"){const s=Number(r.height.replace("px",""));r.height=`${s+i}px`}else r.height+=i;e.position.y=0}t.dimensions.width=Number(r.width.toString().replace("px","")),t.dimensions.height=Number(r.height.toString().replace("px","")),typeof t.style=="function"?t.style=i=>{const s=t.style;return{...s(i),...r}}:t.style={...t.style,...r}}}}function Ir(e,t){var n,o;const r=e.filter(s=>s.type==="add"||s.type==="remove");for(const s of r)if(s.type==="add")t.findIndex(l=>l.id===s.item.id)===-1&&t.push(s.item);else if(s.type==="remove"){const a=t.findIndex(l=>l.id===s.id);a!==-1&&t.splice(a,1)}const i=t.map(s=>s.id);for(const s of t)for(const a of e)if(a.id===s.id)switch(a.type){case"select":s.selected=a.selected;break;case"position":if(sn(s)&&(typeof a.position<"u"&&(s.position=a.position),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&s.parentNode)){const l=t[i.indexOf(s.parentNode)];l&&sn(l)&&mo(s,l)}break;case"dimensions":if(sn(s)&&(typeof a.dimensions<"u"&&(s.dimensions=a.dimensions),typeof a.updateStyle<"u"&&a.updateStyle&&(s.style={...s.style||{},width:`${(n=a.dimensions)==null?void 0:n.width}px`,height:`${(o=a.dimensions)==null?void 0:o.height}px`}),typeof a.resizing<"u"&&(s.resizing=a.resizing),s.expandParent&&s.parentNode)){const l=t[i.indexOf(s.parentNode)];l&&sn(l)&&(!!l.dimensions.width&&!!l.dimensions.height?mo(s,l):ot(()=>{mo(s,l)}))}break}return t}function mt(e,t){return{id:e,type:"select",selected:t}}function Mr(e){return{item:e,type:"add"}}function Dr(e){return{id:e,type:"remove"}}function Pr(e,t,n,o,r){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:r||null,type:"remove"}}function yt(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const s=t.has(r);!(i.selected===void 0&&!s)&&i.selected!==s&&(n&&(i.selected=s),o.push(mt(i.id,s)))}return o}const Tr=()=>{};function q(e){const t=new Set;let n=Tr,o=()=>!1;const r=()=>t.size>0||o(),i=v=>{n=v},s=()=>{n=Tr},a=v=>{o=v},l=()=>{o=()=>!1},u=v=>{t.delete(v)};return{on:v=>{t.add(v);const y=()=>u(v);return cn(y),{off:y}},off:u,trigger:v=>{const y=[n];return r()?y.push(...t):e&&y.push(e),Promise.allSettled(y.map(C=>C(v)))},hasListeners:r,listeners:t,setEmitter:i,removeEmitter:s,setHasEmitListeners:a,removeHasEmitListeners:l}}function Ar(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function Cd(e,t,n,o){var r,i;const s=new Map;for(const[a,l]of e)(l.selected||l.id===o)&&(!l.parentNode||!Ji(l,e))&&(l.draggable||t&&typeof l.draggable>"u")&&e.get(a)&&s.set(a,{id:l.id,position:l.position||{x:0,y:0},distance:{x:n.x-((r=l.computedPosition)==null?void 0:r.x)||0,y:n.y-((i=l.computedPosition)==null?void 0:i.y)||0},from:{x:l.computedPosition.x,y:l.computedPosition.y},extent:l.extent,parentNode:l.parentNode,dimensions:{...l.dimensions},expandParent:l.expandParent});return Array.from(s.values())}function yo({id:e,dragItems:t,findNode:n}){const o=[];for(const r of t){const i=n(r.id);i&&o.push(i)}return[e?o.find(r=>r.id===e):o[0],o]}function es(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function $d(e,t,n){const[o,r,i,s]=typeof e!="string"?es(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+s,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-r,n.computedPosition.y+n.dimensions.height-i]]:!1}function Id(e,t,n,o){let r=e.extent||n;if((r==="parent"||!Array.isArray(r)&&r?.range==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const i=$d(r,e,o);i&&(r=i)}else t(new He(Ve.NODE_EXTENT_INVALID,e.id)),r=n;else if(Array.isArray(r)){const i=o?.computedPosition.x||0,s=o?.computedPosition.y||0;r=[[r[0][0]+i,r[0][1]+s],[r[1][0]+i,r[1][1]+s]]}else if(r!=="parent"&&r?.range&&Array.isArray(r.range)){const[i,s,a,l]=es(r.padding),u=o?.computedPosition.x||0,d=o?.computedPosition.y||0;r=[[r.range[0][0]+u+l,r.range[0][1]+d+i],[r.range[1][0]+u-s,r.range[1][1]+d-a]]}return r==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:r}function Md({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function Ko(e,t,n,o,r){const i=Md(e.dimensions,Id(e,n,o,r)),s=Yi(t,i);return{position:{x:s.x-(r?.computedPosition.x||0),y:s.y-(r?.computedPosition.y||0)},computedPosition:s}}function qt(e,t,n=re.Left,o=!1){const r=(t?.x??0)+e.computedPosition.x,i=(t?.y??0)+e.computedPosition.y,{width:s,height:a}=t??Ad(e);if(o)return{x:r+s/2,y:i+a/2};switch(t?.position??n){case re.Top:return{x:r+s/2,y:i};case re.Right:return{x:r+s,y:i+a/2};case re.Bottom:return{x:r+s/2,y:i+a};case re.Left:return{x:r,y:i+a/2}}}function Or(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Dd({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:s,height:a,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=Zi({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:s/l.zoom,height:a/l.zoom}),h=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),v=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(h*v)>0}function Pd(e,t,n=!1){const o=typeof e.zIndex=="number";let r=o?e.zIndex:0;const i=t(e.source),s=t(e.target);return!i||!s?0:(n&&(r=o?e.zIndex:Math.max(i.computedPosition.z||0,s.computedPosition.z||0)),r)}var Ve=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Ve||{});const zr={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class He extends Error{constructor(t,...n){var o;super((o=zr[t])==null?void 0:o.call(zr,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function qo(e){return"clientX"in e}function Td(e){return"sourceEvent"in e}function nt(e,t){const n=qo(e);let o,r;return n?(o=e.clientX,r=e.clientY):"touches"in e&&e.touches.length>0?(o=e.touches[0].clientX,r=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(o=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY):(o=0,r=0),{x:o-(t?.left??0),y:r-(t?.top??0)}}const Zn=()=>{var e;return typeof navigator<"u"&&((e=navigator?.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ad(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function to(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const Od=()=>!0;function _o(e){e?.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function zd(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())Un(r,Gn(i))>0&&o.push(i);return o}const Bd=250;function Vd(e,t,n,o){var r,i;let s=[],a=Number.POSITIVE_INFINITY;const l=zd(e,n,t+Bd);for(const u of l){const d=[...((r=u.handleBounds)==null?void 0:r.source)??[],...((i=u.handleBounds)==null?void 0:i.target)??[]];for(const h of d){if(o.nodeId===h.nodeId&&o.type===h.type&&o.id===h.id)continue;const{x:v,y}=qt(u,h,h.position,!0),C=Math.sqrt((v-e.x)**2+(y-e.y)**2);C>t||(C<a?(s=[{...h,x:v,y}],a=C):C===a&&s.push({...h,x:v,y}))}}if(!s.length)return null;if(s.length>1){const u=o.type==="source"?"target":"source";return s.find(d=>d.type===u)??s[0]}return s[0]}function Br(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:s,lib:a,flowId:l,isValidConnection:u=Od},d,h,v,y){const C=i==="target",S=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:N,y:E}=nt(e),I=s.elementFromPoint(N,E),f=I?.classList.contains(`${a}-flow__handle`)?I:S,w={handleDomNode:f,isValid:!1,connection:null,toHandle:null};if(f){const D=ts(void 0,f),V=f.getAttribute("data-nodeid"),z=f.getAttribute("data-handleid"),H=f.classList.contains("connectable"),Q=f.classList.contains("connectableend");if(!V||!D)return w;const O={source:C?V:o,sourceHandle:C?z:r,target:C?o:V,targetHandle:C?r:z};w.connection=O;const k=H&&Q&&(n===wt.Strict?C&&D==="source"||!C&&D==="target":V!==o||z!==r);w.isValid=k&&u(O,{nodes:h,edges:d,sourceNode:v(O.source),targetNode:v(O.target)}),w.toHandle=ns(V,D,z,y,n,!0)}return w}function ts(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Hd(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Rd(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function ns(e,t,n,o,r,i=!1){var s,a,l;const u=o.get(e);if(!u)return null;const d=r===wt.Strict?(s=u.handleBounds)==null?void 0:s[t]:[...((a=u.handleBounds)==null?void 0:a.source)??[],...((l=u.handleBounds)==null?void 0:l.target)??[]],h=(n?d?.find(v=>v.id===n):d?.[0])??null;return h&&i?{...h,...qt(u,h,h.position,!0)}:h}const zo={[re.Left]:re.Right,[re.Right]:re.Left,[re.Top]:re.Bottom,[re.Bottom]:re.Top},Wd=["production","prod"];function xn(e,...t){os()&&console.warn(`[Vue Flow]: ${e}`,...t)}function os(){return!Wd.includes("production")}function Vr(e,t,n,o,r){const i=t.querySelectorAll(`.vue-flow__handle.${e}`);return i?.length?Array.from(i).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:r,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...eo(s)}}):null}function Bo(e,t,n,o,r,i=!1,s){r.value=!1,e.selected?(i||e.selected&&t)&&(o([e]),ot(()=>{s.blur()})):n([e])}function Be(e){return typeof c(e)<"u"}function Ld(e,t,n,o){if(!e||!e.source||!e.target)return n(new He(Ve.EDGE_INVALID,e?.id??"[ID UNKNOWN]")),!1;let r;return xt(e)?r=e:r={...e,id:Ui(e)},r=Xi(r,void 0,o),xd(r,t)?!1:r}function Fd(e,t,n,o,r){if(!t.source||!t.target)return r(new He(Ve.EDGE_INVALID,e.id)),!1;if(!n)return r(new He(Ve.EDGE_NOT_FOUND,e.id)),!1;const{id:i,...s}=e;return{...s,id:o?Ui(t):i,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function Hr(e,t,n){const o={},r=[];for(let i=0;i<e.length;++i){const s=e[i];if(!It(s)){n(new He(Ve.NODE_INVALID,s?.id)||`[ID UNKNOWN|INDEX ${i}]`);continue}const a=yd(s,t(s.id),s.parentNode);s.parentNode&&(o[s.parentNode]=!0),r[i]=a}for(const i of r){const s=t(i.parentNode)||r.find(a=>a.id===i.parentNode);i.parentNode&&!s&&n(new He(Ve.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||o[i.id])&&(o[i.id]&&(i.isParent=!0),s&&(s.isParent=!0))}return r}function Rr(e,t,n,o,r,i){let s=r;const a=o.get(s)||new Map;o.set(s,a.set(n,t)),s=`${r}-${e}`;const l=o.get(s)||new Map;if(o.set(s,l.set(n,t)),i){s=`${r}-${e}-${i}`;const u=o.get(s)||new Map;o.set(s,u.set(n,t))}}function wo(e,t,n){e.clear();for(const o of n){const{source:r,target:i,sourceHandle:s=null,targetHandle:a=null}=o,l={edgeId:o.id,source:r,target:i,sourceHandle:s,targetHandle:a},u=`${r}-${s}--${i}-${a}`,d=`${i}-${a}--${r}-${s}`;Rr("source",l,d,e,r,s),Rr("target",l,u,e,i,a)}}function Wr(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function xo(e,t,n,o,r,i,s,a){const l=[];for(const u of e){const d=xt(u)?u:Ld(u,a,r,i);if(!d)continue;const h=n(d.source),v=n(d.target);if(!h||!v){r(new He(Ve.EDGE_SOURCE_TARGET_MISSING,d.id,d.source,d.target));continue}if(!h){r(new He(Ve.EDGE_SOURCE_MISSING,d.id,d.source));continue}if(!v){r(new He(Ve.EDGE_TARGET_MISSING,d.id,d.target));continue}if(t&&!t(d,{edges:a,nodes:s,sourceNode:h,targetNode:v})){r(new He(Ve.EDGE_INVALID,d.id));continue}const y=o(d.id);l.push({...Xi(d,y,i),sourceNode:h,targetNode:v})}return l}const Lr=Symbol("vueFlow"),rs=Symbol("nodeId"),is=Symbol("nodeRef"),Yd=Symbol("edgeId"),Xd=Symbol("edgeRef"),no=Symbol("slots");function ss(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:r,nodeLookup:i,nodeExtent:s,nodeDragThreshold:a,viewport:l,autoPanOnNodeDrag:u,autoPanSpeed:d,nodesDraggable:h,panBy:v,findNode:y,multiSelectionActive:C,nodesSelectionActive:S,selectNodesOnDrag:N,removeSelectedElements:E,addSelectedNodes:I,updateNodePositions:f,emits:w}=Te(),{onStart:D,onDrag:V,onStop:z,onClick:H,el:Q,disabled:O,id:F,selectable:k,dragHandle:ie}=e,b=_t(!1);let M=[],$,W=null,Y={x:void 0,y:void 0},Z={x:0,y:0},U=null,te=!1,ue=!1,fe=0,me=!1;const J=Zd(),ne=({x:de,y:_e})=>{Y={x:de,y:_e};let _=!1;if(M=M.map(p=>{const x={x:de-p.distance.x,y:_e-p.distance.y},{computedPosition:m}=Ko(p,n.value?to(x,o.value):x,w.error,s.value,p.parentNode?y(p.parentNode):void 0);return _=_||p.position.x!==m.x||p.position.y!==m.y,p.position=m,p}),ue=ue||_,!!_&&(f(M,!0,!0),b.value=!0,U)){const[p,x]=yo({id:F,dragItems:M,findNode:y});V({event:U,node:p,nodes:x})}},se=()=>{if(!W)return;const[de,_e]=Qi(Z,W,d.value);if(de!==0||_e!==0){const _={x:(Y.x??0)-de/l.value.zoom,y:(Y.y??0)-_e/l.value.zoom};v({x:de,y:_e})&&ne(_)}fe=requestAnimationFrame(se)},we=(de,_e)=>{te=!0;const _=y(F);!N.value&&!C.value&&_&&(_.selected||E()),_&&be(k)&&N.value&&Bo(_,C.value,I,E,S,!1,_e);const p=J(de.sourceEvent);if(Y=p,M=Cd(i.value,h.value,p,F),M.length){const[x,m]=yo({id:F,dragItems:M,findNode:y});D({event:de.sourceEvent,node:x,nodes:m})}},ve=(de,_e)=>{var _;de.sourceEvent.type==="touchmove"&&de.sourceEvent.touches.length>1||(ue=!1,a.value===0&&we(de,_e),Y=J(de.sourceEvent),W=((_=t.value)==null?void 0:_.getBoundingClientRect())||null,Z=nt(de.sourceEvent,W))},ye=(de,_e)=>{const _=J(de.sourceEvent);if(!me&&te&&u.value&&(me=!0,se()),!te){const p=_.xSnapped-(Y.x??0),x=_.ySnapped-(Y.y??0);Math.sqrt(p*p+x*x)>a.value&&we(de,_e)}(Y.x!==_.xSnapped||Y.y!==_.ySnapped)&&M.length&&te&&(U=de.sourceEvent,Z=nt(de.sourceEvent,W),ne(_))},Ie=de=>{let _e=!1;if(!te&&!b.value&&!C.value){const _=de.sourceEvent,p=J(_),x=p.xSnapped-(Y.x??0),m=p.ySnapped-(Y.y??0),T=Math.sqrt(x*x+m*m);T!==0&&T<=a.value&&(H?.(_),_e=!0)}if(M.length&&!_e){ue&&(f(M,!1,!1),ue=!1);const[_,p]=yo({id:F,dragItems:M,findNode:y});z({event:de.sourceEvent,node:_,nodes:p})}M=[],b.value=!1,me=!1,te=!1,Y={x:void 0,y:void 0},cancelAnimationFrame(fe)};return $e([()=>be(O),Q],([de,_e],_,p)=>{if(_e){const x=Ke(_e);de||($=mu().on("start",m=>ve(m,_e)).on("drag",m=>ye(m,_e)).on("end",m=>Ie(m)).filter(m=>{const T=m.target,K=be(ie);return!m.button&&(!r.value||!Ar(T,`.${r.value}`,_e)&&(!K||Ar(T,K,_e)))}),x.call($)),p(()=>{x.on(".drag",null),$&&($.on("start",null),$.on("drag",null),$.on("end",null))})}}),b}function Gd(){return{doubleClick:q(),click:q(),mouseEnter:q(),mouseMove:q(),mouseLeave:q(),contextMenu:q(),updateStart:q(),update:q(),updateEnd:q()}}function Ud(e,t){const n=Gd();return n.doubleClick.on(o=>{var r,i;t.edgeDoubleClick(o),(i=(r=e.events)==null?void 0:r.doubleClick)==null||i.call(r,o)}),n.click.on(o=>{var r,i;t.edgeClick(o),(i=(r=e.events)==null?void 0:r.click)==null||i.call(r,o)}),n.mouseEnter.on(o=>{var r,i;t.edgeMouseEnter(o),(i=(r=e.events)==null?void 0:r.mouseEnter)==null||i.call(r,o)}),n.mouseMove.on(o=>{var r,i;t.edgeMouseMove(o),(i=(r=e.events)==null?void 0:r.mouseMove)==null||i.call(r,o)}),n.mouseLeave.on(o=>{var r,i;t.edgeMouseLeave(o),(i=(r=e.events)==null?void 0:r.mouseLeave)==null||i.call(r,o)}),n.contextMenu.on(o=>{var r,i;t.edgeContextMenu(o),(i=(r=e.events)==null?void 0:r.contextMenu)==null||i.call(r,o)}),n.updateStart.on(o=>{var r,i;t.edgeUpdateStart(o),(i=(r=e.events)==null?void 0:r.updateStart)==null||i.call(r,o)}),n.update.on(o=>{var r,i;t.edgeUpdate(o),(i=(r=e.events)==null?void 0:r.update)==null||i.call(r,o)}),n.updateEnd.on(o=>{var r,i;t.edgeUpdateEnd(o),(i=(r=e.events)==null?void 0:r.updateEnd)==null||i.call(r,o)}),Object.entries(n).reduce((o,[r,i])=>(o.emit[r]=i.trigger,o.on[r]=i.on,o),{emit:{},on:{}})}function Zd(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:o}=Te();return r=>{var i;const s=((i=o.value)==null?void 0:i.getBoundingClientRect())??{left:0,top:0},a=Td(r)?r.sourceEvent:r,{x:l,y:u}=nt(a,s),d=gn({x:l,y:u},e.value),{x:h,y:v}=n.value?to(d,t.value):d;return{xSnapped:h,ySnapped:v,...d}}}function $n(){return!0}function as({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:r,onEdgeUpdate:i,onEdgeUpdateEnd:s}){const{id:a,vueFlowRef:l,connectionMode:u,connectionRadius:d,connectOnClick:h,connectionClickStartHandle:v,nodesConnectable:y,autoPanOnConnect:C,autoPanSpeed:S,findNode:N,panBy:E,startConnection:I,updateConnection:f,endConnection:w,emits:D,viewport:V,edges:z,nodes:H,isValidConnection:Q,nodeLookup:O}=Te();let F=null,k=!1,ie=null;function b($){var W;const Y=be(n)==="target",Z=qo($),U=Er($.target),te=$.currentTarget;if(te&&(Z&&$.button===0||!Z)){let ue=function(oe){_=nt(oe,Ie),ne=Vd(gn(_,V.value,!1,[1,1]),d.value,O.value,m),p||(x(),p=!0);const he=Br(oe,{handle:ne,connectionMode:u.value,fromNodeId:be(t),fromHandleId:be(e),fromType:Y?"target":"source",isValidConnection:J,doc:U,lib:"vue",flowId:a,nodeLookup:O.value},z.value,H.value,N,O.value);ie=he.handleDomNode,F=he.connection,k=Rd(!!ne,he.isValid);const xe={...j,isValid:k,to:he.toHandle&&k?vn({x:he.toHandle.x,y:he.toHandle.y},V.value):_,toHandle:he.toHandle,toPosition:k&&he.toHandle?he.toHandle.position:zo[m.position],toNode:he.toHandle?O.value.get(he.toHandle.nodeId):null};if(k&&ne&&j?.toHandle&&xe.toHandle&&j.toHandle.type===xe.toHandle.type&&j.toHandle.nodeId===xe.toHandle.nodeId&&j.toHandle.id===xe.toHandle.id&&j.to.x===xe.to.x&&j.to.y===xe.to.y)return;const Ee=ne??he.toHandle;if(f(Ee&&k?vn({x:Ee.x,y:Ee.y},V.value):_,Ee,Hd(!!Ee,k)),j=xe,!ne&&!k&&!ie)return _o(_e);F&&F.source!==F.target&&ie&&(_o(_e),_e=ie,ie.classList.add("connecting","vue-flow__handle-connecting"),ie.classList.toggle("valid",!!k),ie.classList.toggle("vue-flow__handle-valid",!!k))},fe=function(oe){"touches"in oe&&oe.touches.length>0||((ne||ie)&&F&&k&&(i?i(oe,F):D.connect(F)),D.connectEnd(oe),r&&s?.(oe),_o(_e),cancelAnimationFrame(se),w(oe),p=!1,k=!1,F=null,ie=null,U.removeEventListener("mousemove",ue),U.removeEventListener("mouseup",fe),U.removeEventListener("touchmove",ue),U.removeEventListener("touchend",fe))};const me=N(be(t));let J=be(o)||Q.value||$n;!J&&me&&(J=(Y?me.isValidSourcePos:me.isValidTargetPos)||$n);let ne,se=0;const{x:we,y:ve}=nt($),ye=ts(be(r),te),Ie=(W=l.value)==null?void 0:W.getBoundingClientRect();if(!Ie||!ye)return;const de=ns(be(t),ye,be(e),O.value,u.value);if(!de)return;let _e,_=nt($,Ie),p=!1;const x=()=>{if(!C.value)return;const[oe,he]=Qi(_,Ie,S.value);E({x:oe,y:he}),se=requestAnimationFrame(x)},m={...de,nodeId:be(t),type:ye,position:de.position},T=O.value.get(be(t)),ee={inProgress:!0,isValid:null,from:qt(T,m,re.Left,!0),fromHandle:m,fromPosition:m.position,fromNode:T,to:_,toHandle:null,toPosition:zo[m.position],toNode:null};I({nodeId:be(t),id:be(e),type:ye,position:te?.getAttribute("data-handlepos")||re.Top,..._},{x:we-Ie.left,y:ve-Ie.top}),D.connectStart({event:$,nodeId:be(t),handleId:be(e),handleType:ye});let j=ee;U.addEventListener("mousemove",ue),U.addEventListener("mouseup",fe),U.addEventListener("touchmove",ue),U.addEventListener("touchend",fe)}}function M($){var W,Y;if(!h.value)return;const Z=be(n)==="target";if(!v.value){D.clickConnectStart({event:$,nodeId:be(t),handleId:be(e)}),I({nodeId:be(t),type:be(n),id:be(e),position:re.Top,...nt($)},void 0,!0);return}let U=be(o)||Q.value||$n;const te=N(be(t));if(!U&&te&&(U=(Z?te.isValidSourcePos:te.isValidTargetPos)||$n),te&&(typeof te.connectable>"u"?y.value:te.connectable)===!1)return;const ue=Er($.target),fe=Br($,{handle:{nodeId:be(t),id:be(e),type:be(n),position:re.Top,...nt($)},connectionMode:u.value,fromNodeId:v.value.nodeId,fromHandleId:v.value.id??null,fromType:v.value.type,isValidConnection:U,doc:ue,lib:"vue",flowId:a,nodeLookup:O.value},z.value,H.value,N,O.value),me=((W=fe.connection)==null?void 0:W.source)===((Y=fe.connection)==null?void 0:Y.target);fe.isValid&&fe.connection&&!me&&D.connect(fe.connection),D.clickConnectEnd($),w($,!0)}return{handlePointerDown:b,handleClick:M}}function Kd(){return Jt(rs,"")}function ls(e){const t=e??Kd()??"",n=Jt(is,ce(null)),{findNode:o,edges:r,emits:i}=Te(),s=o(t);return s||i.error(new He(Ve.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:s,parentNode:le(()=>o(s.parentNode)),connectedEdges:le(()=>ji([s],r.value))}}function qd(){return{doubleClick:q(),click:q(),mouseEnter:q(),mouseMove:q(),mouseLeave:q(),contextMenu:q(),dragStart:q(),drag:q(),dragStop:q()}}function jd(e,t){const n=qd();return n.doubleClick.on(o=>{var r,i;t.nodeDoubleClick(o),(i=(r=e.events)==null?void 0:r.doubleClick)==null||i.call(r,o)}),n.click.on(o=>{var r,i;t.nodeClick(o),(i=(r=e.events)==null?void 0:r.click)==null||i.call(r,o)}),n.mouseEnter.on(o=>{var r,i;t.nodeMouseEnter(o),(i=(r=e.events)==null?void 0:r.mouseEnter)==null||i.call(r,o)}),n.mouseMove.on(o=>{var r,i;t.nodeMouseMove(o),(i=(r=e.events)==null?void 0:r.mouseMove)==null||i.call(r,o)}),n.mouseLeave.on(o=>{var r,i;t.nodeMouseLeave(o),(i=(r=e.events)==null?void 0:r.mouseLeave)==null||i.call(r,o)}),n.contextMenu.on(o=>{var r,i;t.nodeContextMenu(o),(i=(r=e.events)==null?void 0:r.contextMenu)==null||i.call(r,o)}),n.dragStart.on(o=>{var r,i;t.nodeDragStart(o),(i=(r=e.events)==null?void 0:r.dragStart)==null||i.call(r,o)}),n.drag.on(o=>{var r,i;t.nodeDrag(o),(i=(r=e.events)==null?void 0:r.drag)==null||i.call(r,o)}),n.dragStop.on(o=>{var r,i;t.nodeDragStop(o),(i=(r=e.events)==null?void 0:r.dragStop)==null||i.call(r,o)}),Object.entries(n).reduce((o,[r,i])=>(o.emit[r]=i.trigger,o.on[r]=i.on,o),{emit:{},on:{}})}function us(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:r,snapToGrid:i,nodesDraggable:s,emits:a}=Te();return(l,u=!1)=>{const d=i.value?r.value[0]:5,h=i.value?r.value[1]:5,v=u?4:1,y=l.x*d*v,C=l.y*h*v,S=[];for(const N of e.value)if(N.draggable||s&&typeof N.draggable>"u"){const E={x:N.computedPosition.x+y,y:N.computedPosition.y+C},{position:I}=Ko(N,E,a.error,t.value,N.parentNode?o(N.parentNode):void 0);S.push({id:N.id,position:I,from:N.position,distance:{x:l.x,y:l.y},dimensions:N.dimensions})}n(S,!0,!1)}}const In=.1,Jd=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function gt(){return xn("Viewport not initialized yet."),Promise.resolve(!1)}const Qd={zoomIn:gt,zoomOut:gt,zoomTo:gt,fitView:gt,setCenter:gt,fitBounds:gt,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:gt,setTransform:gt,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function ef(e){function t(o,r){return new Promise(i=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(r?.interpolate==="linear"?an:On).scaleBy(bo(e.d3Selection,r?.duration,r?.ease,()=>{i(!0)}),o):i(!1)})}function n(o,r,i,s){return new Promise(a=>{var l;const{x:u,y:d}=Yi({x:-o,y:-r},e.translateExtent),h=Kt.translate(-u,-d).scale(i);e.d3Selection&&e.d3Zoom?(l=e.d3Zoom)==null||l.interpolate(s?.interpolate==="linear"?an:On).transform(bo(e.d3Selection,s?.duration,s?.ease,()=>{a(!0)}),h):a(!1)})}return le(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:r=>t(1.2,r),zoomOut:r=>t(1/1.2,r),zoomTo:(r,i)=>new Promise(s=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(i?.interpolate==="linear"?an:On).scaleTo(bo(e.d3Selection,i?.duration,i?.ease,()=>{s(!0)}),r):s(!1)}),setViewport:(r,i)=>n(r.x,r.y,r.zoom,i),setTransform:(r,i)=>n(r.x,r.y,r.zoom,i),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(r={padding:In,includeHiddenNodes:!1,duration:0})=>{var i,s;const a=[];for(const v of e.nodes)v.dimensions.width&&v.dimensions.height&&(r?.includeHiddenNodes||!v.hidden)&&(!((i=r.nodes)!=null&&i.length)||(s=r.nodes)!=null&&s.length&&r.nodes.includes(v.id))&&a.push(v);if(!a.length)return Promise.resolve(!1);const l=Ki(a),{x:u,y:d,zoom:h}=Nr(l,e.dimensions.width,e.dimensions.height,r.minZoom??e.minZoom,r.maxZoom??e.maxZoom,r.padding??In);return n(u,d,h,r)},setCenter:(r,i,s)=>{const a=typeof s?.zoom<"u"?s.zoom:e.maxZoom,l=e.dimensions.width/2-r*a,u=e.dimensions.height/2-i*a;return n(l,u,a,s)},fitBounds:(r,i={padding:In})=>{const{x:s,y:a,zoom:l}=Nr(r,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,i.padding??In);return n(s,a,l,i)},project:r=>gn(r,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:s}=e.vueFlowRef.getBoundingClientRect(),a={x:r.x-i,y:r.y-s};return gn(a,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:s}=e.vueFlowRef.getBoundingClientRect(),a={x:r.x+i,y:r.y+s};return vn(a,e.viewport)}return{x:0,y:0}}}:Qd)}function bo(e,t=0,n=Jd,o=()=>{}){const r=typeof t=="number"&&t>0;return r||o(),r?e.transition().duration(t).ease(n).on("end",o):e}function tf(e,t,n){const o=oi(!0);return o.run(()=>{const r=()=>{o.run(()=>{let S,N,E=!!(n.nodes.value.length||n.edges.value.length);S=Vt([e.modelValue,()=>{var I,f;return(f=(I=e.modelValue)==null?void 0:I.value)==null?void 0:f.length}],([I])=>{I&&Array.isArray(I)&&(N?.pause(),n.setElements(I),!N&&!E&&I.length?E=!0:N?.resume())}),N=Vt([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([I,f])=>{var w;(w=e.modelValue)!=null&&w.value&&Array.isArray(e.modelValue.value)&&(S?.pause(),e.modelValue.value=[...I,...f],ot(()=>{S?.resume()}))},{immediate:E}),Pn(()=>{S?.stop(),N?.stop()})})},i=()=>{o.run(()=>{let S,N,E=!!n.nodes.value.length;S=Vt([e.nodes,()=>{var I,f;return(f=(I=e.nodes)==null?void 0:I.value)==null?void 0:f.length}],([I])=>{I&&Array.isArray(I)&&(N?.pause(),n.setNodes(I),!N&&!E&&I.length?E=!0:N?.resume())}),N=Vt([n.nodes,()=>n.nodes.value.length],([I])=>{var f;(f=e.nodes)!=null&&f.value&&Array.isArray(e.nodes.value)&&(S?.pause(),e.nodes.value=[...I],ot(()=>{S?.resume()}))},{immediate:E}),Pn(()=>{S?.stop(),N?.stop()})})},s=()=>{o.run(()=>{let S,N,E=!!n.edges.value.length;S=Vt([e.edges,()=>{var I,f;return(f=(I=e.edges)==null?void 0:I.value)==null?void 0:f.length}],([I])=>{I&&Array.isArray(I)&&(N?.pause(),n.setEdges(I),!N&&!E&&I.length?E=!0:N?.resume())}),N=Vt([n.edges,()=>n.edges.value.length],([I])=>{var f;(f=e.edges)!=null&&f.value&&Array.isArray(e.edges.value)&&(S?.pause(),e.edges.value=[...I],ot(()=>{S?.resume()}))},{immediate:E}),Pn(()=>{S?.stop(),N?.stop()})})},a=()=>{o.run(()=>{$e(()=>t.maxZoom,()=>{t.maxZoom&&Be(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},l=()=>{o.run(()=>{$e(()=>t.minZoom,()=>{t.minZoom&&Be(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{$e(()=>t.translateExtent,()=>{t.translateExtent&&Be(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},d=()=>{o.run(()=>{$e(()=>t.nodeExtent,()=>{t.nodeExtent&&Be(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},h=()=>{o.run(()=>{$e(()=>t.applyDefault,()=>{Be(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},v=()=>{o.run(()=>{const S=async N=>{let E=N;typeof t.autoConnect=="function"&&(E=await t.autoConnect(N)),E!==!1&&n.addEdges([E])};$e(()=>t.autoConnect,()=>{Be(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),$e(n.autoConnect,(N,E,I)=>{N?n.onConnect(S):n.hooks.value.connect.off(S),I(()=>{n.hooks.value.connect.off(S)})},{immediate:!0})})},y=()=>{const S=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const N of Object.keys(t)){const E=N;if(!S.includes(E)){const I=Pe(()=>t[E]),f=n[E];Ho(f)&&o.run(()=>{$e(I,w=>{Be(w)&&(f.value=w)},{immediate:!0})})}}};r(),i(),s(),l(),a(),u(),d(),h(),v(),y()}),()=>o.stop()}function nf(){return{edgesChange:q(),nodesChange:q(),nodeDoubleClick:q(),nodeClick:q(),nodeMouseEnter:q(),nodeMouseMove:q(),nodeMouseLeave:q(),nodeContextMenu:q(),nodeDragStart:q(),nodeDrag:q(),nodeDragStop:q(),nodesInitialized:q(),miniMapNodeClick:q(),miniMapNodeDoubleClick:q(),miniMapNodeMouseEnter:q(),miniMapNodeMouseMove:q(),miniMapNodeMouseLeave:q(),connect:q(),connectStart:q(),connectEnd:q(),clickConnectStart:q(),clickConnectEnd:q(),paneReady:q(),init:q(),move:q(),moveStart:q(),moveEnd:q(),selectionDragStart:q(),selectionDrag:q(),selectionDragStop:q(),selectionContextMenu:q(),selectionStart:q(),selectionEnd:q(),viewportChangeStart:q(),viewportChange:q(),viewportChangeEnd:q(),paneScroll:q(),paneClick:q(),paneContextMenu:q(),paneMouseEnter:q(),paneMouseMove:q(),paneMouseLeave:q(),edgeContextMenu:q(),edgeMouseEnter:q(),edgeMouseMove:q(),edgeMouseLeave:q(),edgeDoubleClick:q(),edgeClick:q(),edgeUpdateStart:q(),edgeUpdate:q(),edgeUpdateEnd:q(),updateNodeInternals:q(),error:q(e=>xn(e.message))}}function of(e,t){const n=jt();As(()=>{for(const[r,i]of Object.entries(t.value)){const s=a=>{e(r,a)};i.setEmitter(s),cn(i.removeEmitter),i.setHasEmitListeners(()=>o(r)),cn(i.removeHasEmitListeners)}});function o(r){var i;const s=rf(r);return!!((i=n?.vnode.props)==null?void 0:i[s])}}function rf(e){const[t,...n]=e.split(":");return`on${t.replace(/(?:^|-)(\w)/g,(r,i)=>i.toUpperCase())}${n.length?`:${n.join(":")}`:""}`}function cs(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Zo.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:ln.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Et.Bezier,style:{}},connectionMode:wt.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:Zn()?"Meta":"Control",zoomActivationKeyCode:Zn()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:nf(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const sf=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function af(e,t,n){const o=ef(e),r=_=>{const p=_??[];e.hooks.updateNodeInternals.trigger(p)},i=_=>wd(_,e.nodes,e.edges),s=_=>_d(_,e.nodes,e.edges),a=_=>ji(_,e.edges),l=({id:_,type:p,nodeId:x})=>{var m;const T=_?`-${p}-${_}`:`-${p}`;return Array.from(((m=e.connectionLookup.get(`${x}${T}`))==null?void 0:m.values())??[])},u=_=>{if(_)return t.value.get(_)},d=_=>{if(_)return n.value.get(_)},h=(_,p,x)=>{var m,T;const K=[];for(const ee of _){const j={id:ee.id,type:"position",dragging:x,from:ee.from};if(p&&(j.position=ee.position,ee.parentNode)){const oe=u(ee.parentNode);j.position={x:j.position.x-(((m=oe?.computedPosition)==null?void 0:m.x)??0),y:j.position.y-(((T=oe?.computedPosition)==null?void 0:T.y)??0)}}K.push(j)}K?.length&&e.hooks.nodesChange.trigger(K)},v=_=>{if(!e.vueFlowRef)return;const p=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!p)return;const x=window.getComputedStyle(p),{m22:m}=new window.DOMMatrixReadOnly(x.transform),T=[];for(const K of _){const ee=K,j=u(ee.id);if(j){const oe=eo(ee.nodeElement);if(!!(oe.width&&oe.height&&(j.dimensions.width!==oe.width||j.dimensions.height!==oe.height||ee.forceUpdate))){const xe=ee.nodeElement.getBoundingClientRect();j.dimensions=oe,j.handleBounds.source=Vr("source",ee.nodeElement,xe,m,j.id),j.handleBounds.target=Vr("target",ee.nodeElement,xe,m,j.id),T.push({id:j.id,type:"dimensions",dimensions:oe})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),T.length&&e.hooks.nodesChange.trigger(T)},y=(_,p)=>{const x=new Set,m=new Set;for(const ee of _)It(ee)?x.add(ee.id):xt(ee)&&m.add(ee.id);const T=yt(t.value,x,!0),K=yt(n.value,m);if(e.multiSelectionActive){for(const ee of x)T.push(mt(ee,p));for(const ee of m)K.push(mt(ee,p))}T.length&&e.hooks.nodesChange.trigger(T),K.length&&e.hooks.edgesChange.trigger(K)},C=_=>{if(e.multiSelectionActive){const p=_.map(x=>mt(x.id,!0));e.hooks.nodesChange.trigger(p);return}e.hooks.nodesChange.trigger(yt(t.value,new Set(_.map(p=>p.id)),!0)),e.hooks.edgesChange.trigger(yt(n.value))},S=_=>{if(e.multiSelectionActive){const p=_.map(x=>mt(x.id,!0));e.hooks.edgesChange.trigger(p);return}e.hooks.edgesChange.trigger(yt(n.value,new Set(_.map(p=>p.id)))),e.hooks.nodesChange.trigger(yt(t.value,new Set,!0))},N=_=>{y(_,!0)},E=_=>{const x=(_||e.nodes).map(m=>(m.selected=!1,mt(m.id,!1)));e.hooks.nodesChange.trigger(x)},I=_=>{const x=(_||e.edges).map(m=>(m.selected=!1,mt(m.id,!1)));e.hooks.edgesChange.trigger(x)},f=_=>{if(!_||!_.length)return y([],!1);const p=_.reduce((x,m)=>{const T=mt(m.id,!1);return It(m)?x.nodes.push(T):x.edges.push(T),x},{nodes:[],edges:[]});p.nodes.length&&e.hooks.nodesChange.trigger(p.nodes),p.edges.length&&e.hooks.edgesChange.trigger(p.edges)},w=_=>{var p;(p=e.d3Zoom)==null||p.scaleExtent([_,e.maxZoom]),e.minZoom=_},D=_=>{var p;(p=e.d3Zoom)==null||p.scaleExtent([e.minZoom,_]),e.maxZoom=_},V=_=>{var p;(p=e.d3Zoom)==null||p.translateExtent(_),e.translateExtent=_},z=_=>{e.nodeExtent=_,r()},H=_=>{var p;(p=e.d3Zoom)==null||p.clickDistance(_)},Q=_=>{e.nodesDraggable=_,e.nodesConnectable=_,e.elementsSelectable=_},O=_=>{const p=_ instanceof Function?_(e.nodes):_;!e.initialized&&!p.length||(e.nodes=Hr(p,u,e.hooks.error.trigger))},F=_=>{const p=_ instanceof Function?_(e.edges):_;if(!e.initialized&&!p.length)return;const x=xo(p,e.isValidConnection,u,d,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);wo(e.connectionLookup,n.value,x),e.edges=x},k=_=>{const p=_ instanceof Function?_([...e.nodes,...e.edges]):_;!e.initialized&&!p.length||(O(p.filter(It)),F(p.filter(xt)))},ie=_=>{let p=_ instanceof Function?_(e.nodes):_;p=Array.isArray(p)?p:[p];const x=Hr(p,u,e.hooks.error.trigger),m=[];for(const T of x)m.push(Mr(T));m.length&&e.hooks.nodesChange.trigger(m)},b=_=>{let p=_ instanceof Function?_(e.edges):_;p=Array.isArray(p)?p:[p];const x=xo(p,e.isValidConnection,u,d,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),m=[];for(const T of x)m.push(Mr(T));m.length&&e.hooks.edgesChange.trigger(m)},M=(_,p=!0,x=!1)=>{const m=_ instanceof Function?_(e.nodes):_,T=Array.isArray(m)?m:[m],K=[],ee=[];function j(he){const xe=a(he);for(const Ee of xe)(!Be(Ee.deletable)||Ee.deletable)&&ee.push(Pr(Ee.id,Ee.source,Ee.target,Ee.sourceHandle,Ee.targetHandle))}function oe(he){const xe=[];for(const Ee of e.nodes)Ee.parentNode===he&&xe.push(Ee);if(xe.length){for(const Ee of xe)K.push(Dr(Ee.id));p&&j(xe);for(const Ee of xe)oe(Ee.id)}}for(const he of T){const xe=typeof he=="string"?u(he):he;xe&&(Be(xe.deletable)&&!xe.deletable||(K.push(Dr(xe.id)),p&&j([xe]),x&&oe(xe.id)))}ee.length&&e.hooks.edgesChange.trigger(ee),K.length&&e.hooks.nodesChange.trigger(K)},$=_=>{const p=_ instanceof Function?_(e.edges):_,x=Array.isArray(p)?p:[p],m=[];for(const T of x){const K=typeof T=="string"?d(T):T;K&&(Be(K.deletable)&&!K.deletable||m.push(Pr(typeof T=="string"?T:T.id,K.source,K.target,K.sourceHandle,K.targetHandle)))}e.hooks.edgesChange.trigger(m)},W=(_,p,x=!0)=>{const m=d(_.id);if(!m)return!1;const T=e.edges.indexOf(m),K=Fd(_,p,m,x,e.hooks.error.trigger);if(K){const[ee]=xo([K],e.isValidConnection,u,d,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((j,oe)=>oe===T?ee:j),wo(e.connectionLookup,n.value,[ee]),ee}return!1},Y=(_,p,x={replace:!1})=>{const m=d(_);if(!m)return;const T=typeof p=="function"?p(m):p;m.data=x.replace?T:{...m.data,...T}},Z=_=>Ir(_,e.nodes),U=_=>{const p=Ir(_,e.edges);return wo(e.connectionLookup,n.value,p),p},te=(_,p,x={replace:!1})=>{const m=u(_);if(!m)return;const T=typeof p=="function"?p(m):p;x.replace?e.nodes.splice(e.nodes.indexOf(m),1,T):Object.assign(m,T)},ue=(_,p,x={replace:!1})=>{const m=u(_);if(!m)return;const T=typeof p=="function"?p(m):p;m.data=x.replace?T:{...m.data,...T}},fe=(_,p,x=!1)=>{x?e.connectionClickStartHandle=_:e.connectionStartHandle=_,e.connectionEndHandle=null,e.connectionStatus=null,p&&(e.connectionPosition=p)},me=(_,p=null,x=null)=>{e.connectionStartHandle&&(e.connectionPosition=_,e.connectionEndHandle=p,e.connectionStatus=x)},J=(_,p)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,p?e.connectionClickStartHandle=null:e.connectionStartHandle=null},ne=_=>{const p=md(_),x=p?null:sn(_)?_:u(_.id);return!p&&!x?[null,null,p]:[p?_:Gn(x),x,p]},se=(_,p=!0,x=e.nodes)=>{const[m,T,K]=ne(_);if(!m)return[];const ee=[];for(const j of x||e.nodes){if(!K&&(j.id===T.id||!j.computedPosition))continue;const oe=Gn(j),he=Un(oe,m);(p&&he>0||he>=oe.width*oe.height||he>=Number(m.width)*Number(m.height))&&ee.push(j)}return ee},we=(_,p,x=!0)=>{const[m]=ne(_);if(!m)return!1;const T=Un(m,p);return x&&T>0||T>=Number(m.width)*Number(m.height)},ve=_=>{const{viewport:p,dimensions:x,d3Zoom:m,d3Selection:T,translateExtent:K}=e;if(!m||!T||!_.x&&!_.y)return!1;const ee=Kt.translate(p.x+_.x,p.y+_.y).scale(p.zoom),j=[[0,0],[x.width,x.height]],oe=m.constrain()(ee,j,K),he=e.viewport.x!==oe.x||e.viewport.y!==oe.y||e.viewport.zoom!==oe.k;return m.transform(T,oe),he},ye=_=>{const p=_ instanceof Function?_(e):_,x=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Be(p.defaultEdgeOptions)&&(e.defaultEdgeOptions=p.defaultEdgeOptions);const m=p.modelValue||p.nodes||p.edges?[]:void 0;m&&(p.modelValue&&m.push(...p.modelValue),p.nodes&&m.push(...p.nodes),p.edges&&m.push(...p.edges),k(m));const T=()=>{Be(p.maxZoom)&&D(p.maxZoom),Be(p.minZoom)&&w(p.minZoom),Be(p.translateExtent)&&V(p.translateExtent)};for(const K of Object.keys(p)){const ee=K,j=p[ee];![...sf,...x].includes(ee)&&Be(j)&&(e[ee]=j)}Eo(()=>e.d3Zoom).not.toBeNull().then(T),e.initialized||(e.initialized=!0)};return{updateNodePositions:h,updateNodeDimensions:v,setElements:k,setNodes:O,setEdges:F,addNodes:ie,addEdges:b,removeNodes:M,removeEdges:$,findNode:u,findEdge:d,updateEdge:W,updateEdgeData:Y,updateNode:te,updateNodeData:ue,applyEdgeChanges:U,applyNodeChanges:Z,addSelectedElements:N,addSelectedNodes:C,addSelectedEdges:S,setMinZoom:w,setMaxZoom:D,setTranslateExtent:V,setNodeExtent:z,setPaneClickDistance:H,removeSelectedElements:f,removeSelectedNodes:E,removeSelectedEdges:I,startConnection:fe,updateConnection:me,endConnection:J,setInteractive:Q,setState:ye,getIntersectingNodes:se,getIncomers:i,getOutgoers:s,getConnectedEdges:a,getHandleConnections:l,isNodeIntersecting:we,panBy:ve,fitView:_=>o.value.fitView(_),zoomIn:_=>o.value.zoomIn(_),zoomOut:_=>o.value.zoomOut(_),zoomTo:(_,p)=>o.value.zoomTo(_,p),setViewport:(_,p)=>o.value.setViewport(_,p),setTransform:(_,p)=>o.value.setTransform(_,p),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(_,p,x)=>o.value.setCenter(_,p,x),fitBounds:(_,p)=>o.value.fitBounds(_,p),project:_=>o.value.project(_),screenToFlowCoordinate:_=>o.value.screenToFlowCoordinate(_),flowToScreenCoordinate:_=>o.value.flowToScreenCoordinate(_),toObject:()=>{const _=[],p=[];for(const x of e.nodes){const{computedPosition:m,handleBounds:T,selected:K,dimensions:ee,isParent:j,resizing:oe,dragging:he,events:xe,...Ee}=x;_.push(Ee)}for(const x of e.edges){const{selected:m,sourceNode:T,targetNode:K,events:ee,...j}=x;p.push(j)}return JSON.parse(JSON.stringify({nodes:_,edges:p,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:_=>new Promise(p=>{const{nodes:x,edges:m,position:T,zoom:K,viewport:ee}=_;x&&O(x),m&&F(m);const[j,oe]=ee?.x&&ee?.y?[ee.x,ee.y]:T??[null,null];if(j&&oe){const he=ee?.zoom||K||e.viewport.zoom;return Eo(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:j,y:oe,zoom:he}).then(()=>{p(!0)})})}else p(!0)}),updateNodeInternals:r,viewportHelper:o,$reset:()=>{const _=cs();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const p=Kt.translate(_.defaultViewport.x??0,_.defaultViewport.y??0).scale(Pt(_.defaultViewport.zoom??1,_.minZoom,_.maxZoom)),x=e.viewportRef.getBoundingClientRect(),m=[[0,0],[x.width,x.height]],T=e.d3Zoom.constrain()(p,m,_.translateExtent);e.d3Zoom.transform(e.d3Selection,T)}ye(_)},$destroy:()=>{}}}const lf=["data-id","data-handleid","data-nodeid","data-handlepos"],uf={name:"Handle",compatConfig:{MODE:3}},Kn=ge({...uf,props:{id:{default:null},type:{},position:{default:()=>re.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=Hs(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Pe(()=>n.type??"source"),r=Pe(()=>n.isValidConnection??null),{id:i,connectionStartHandle:s,connectionClickStartHandle:a,connectionEndHandle:l,vueFlowRef:u,nodesConnectable:d,noDragClassName:h,noPanClassName:v}=Te(),{id:y,node:C,nodeEl:S,connectedEdges:N}=ls(),E=ce(),I=Pe(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),f=Pe(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),w=Pe(()=>{var F,k,ie,b,M,$;return((F=s.value)==null?void 0:F.nodeId)===y&&((k=s.value)==null?void 0:k.id)===e.id&&((ie=s.value)==null?void 0:ie.type)===o.value||((b=l.value)==null?void 0:b.nodeId)===y&&((M=l.value)==null?void 0:M.id)===e.id&&(($=l.value)==null?void 0:$.type)===o.value}),D=Pe(()=>{var F,k,ie;return((F=a.value)==null?void 0:F.nodeId)===y&&((k=a.value)==null?void 0:k.id)===e.id&&((ie=a.value)==null?void 0:ie.type)===o.value}),{handlePointerDown:V,handleClick:z}=as({nodeId:y,handleId:e.id,isValidConnection:r,type:o}),H=le(()=>typeof e.connectable=="string"&&e.connectable==="single"?!N.value.some(F=>{const k=F[`${o.value}Handle`];return F[o.value]!==y?!1:k?k===e.id:!0}):typeof e.connectable=="number"?N.value.filter(F=>{const k=F[`${o.value}Handle`];return F[o.value]!==y?!1:k?k===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(C,N.value):Be(e.connectable)?e.connectable:d.value);it(()=>{var F;if(!C.dimensions.width||!C.dimensions.height)return;const k=(F=C.handleBounds[o.value])==null?void 0:F.find(Z=>Z.id===e.id);if(!u.value||k)return;const ie=u.value.querySelector(".vue-flow__transformationpane");if(!S.value||!E.value||!ie||!e.id)return;const b=S.value.getBoundingClientRect(),M=E.value.getBoundingClientRect(),$=window.getComputedStyle(ie),{m22:W}=new window.DOMMatrixReadOnly($.transform),Y={id:e.id,position:e.position,x:(M.left-b.left)/W,y:(M.top-b.top)/W,type:o.value,nodeId:y,...eo(E.value)};C.handleBounds[o.value]=[...C.handleBounds[o.value]??[],Y]});function Q(F){const k=qo(F);H.value&&I.value&&(k&&F.button===0||!k)&&V(F)}function O(F){!y||!a.value&&!I.value||H.value&&z(F)}return t({handleClick:z,handlePointerDown:V,onClick:O,onPointerDown:Q}),(F,k)=>(P(),X("div",{ref_key:"handle",ref:E,"data-id":`${c(i)}-${c(y)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":c(y),"data-handlepos":F.position,class:Re(["vue-flow__handle",[`vue-flow__handle-${F.position}`,`vue-flow__handle-${e.id}`,c(h),c(v),o.value,{connectable:H.value,connecting:D.value,connectablestart:I.value,connectableend:f.value,connectionindicator:H.value&&(I.value&&!w.value||f.value&&w.value)}]]),onMousedown:Q,onTouchstartPassive:Q,onClick:O},[ke(F.$slots,"default",{id:F.id})],42,lf))}}),oo=function({sourcePosition:e=re.Bottom,targetPosition:t=re.Top,label:n,connectable:o=!0,isValidTargetPos:r,isValidSourcePos:i,data:s}){const a=s.label??n;return[Me(Kn,{type:"target",position:t,connectable:o,isValidConnection:r}),typeof a!="string"&&a?Me(a):Me(Ce,[a]),Me(Kn,{type:"source",position:e,connectable:o,isValidConnection:i})]};oo.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];oo.inheritAttrs=!1;oo.compatConfig={MODE:3};const cf=oo,ro=function({targetPosition:e=re.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:r}){const i=r.label??t;return[Me(Kn,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof i!="string"&&i?Me(i):Me(Ce,[i])]};ro.props=["targetPosition","label","isValidTargetPos","connectable","data"];ro.inheritAttrs=!1;ro.compatConfig={MODE:3};const df=ro,io=function({sourcePosition:e=re.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:r}){const i=r.label??t;return[typeof i!="string"&&i?Me(i):Me(Ce,[i]),Me(Kn,{type:"source",position:e,connectable:n,isValidConnection:o})]};io.props=["sourcePosition","label","isValidSourcePos","connectable","data"];io.inheritAttrs=!1;io.compatConfig={MODE:3};const ff=io,hf=["transform"],pf=["width","height","x","y","rx","ry"],vf=["y"],gf={name:"EdgeText",compatConfig:{MODE:3}},mf=ge({...gf,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=ce({x:0,y:0,width:0,height:0}),n=ce(null),o=le(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);it(r),$e([()=>e.x,()=>e.y,n,()=>e.label],r);function r(){if(!n.value)return;const i=n.value.getBBox();(i.width!==t.value.width||i.height!==t.value.height)&&(t.value=i)}return(i,s)=>(P(),X("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[i.labelShowBg?(P(),X("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*i.labelBgPadding[0]}px`,height:`${t.value.height+2*i.labelBgPadding[1]}px`,x:-i.labelBgPadding[0],y:-i.labelBgPadding[1],style:ze(i.labelBgStyle),rx:i.labelBgBorderRadius,ry:i.labelBgBorderRadius},null,12,pf)):De("",!0),B("text",je(i.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:i.labelStyle}),[ke(i.$slots,"default",{},()=>[typeof i.label!="string"?(P(),Se(Rt(i.label),{key:0})):(P(),X(Ce,{key:1},[pe(Ne(i.label),1)],64))])],16,vf)],8,hf))}}),yf=["id","d","marker-end","marker-start"],_f=["d","stroke-width"],wf={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},so=ge({...wf,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=ce(null),o=ce(null),r=ce(null),i=Vs();return t({pathEl:n,interactionEl:o,labelEl:r}),(s,a)=>(P(),X(Ce,null,[B("path",je(c(i),{id:s.id,ref_key:"pathEl",ref:n,d:s.path,class:"vue-flow__edge-path","marker-end":s.markerEnd,"marker-start":s.markerStart}),null,16,yf),s.interactionWidth?(P(),X("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:s.path,"stroke-width":s.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,_f)):De("",!0),s.label&&s.labelX&&s.labelY?(P(),Se(mf,{key:1,ref_key:"labelEl",ref:r,x:s.labelX,y:s.labelY,label:s.label,"label-show-bg":s.labelShowBg,"label-bg-style":s.labelBgStyle,"label-bg-padding":s.labelBgPadding,"label-bg-border-radius":s.labelBgBorderRadius,"label-style":s.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):De("",!0)],64))}});function ds({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,s=Math.abs(o-t)/2,a=o<t?o+s:o-s;return[i,a,r,s]}function fs({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:a}){const l=e*.125+r*.375+s*.375+n*.125,u=t*.125+i*.375+a*.375+o*.125,d=Math.abs(l-e),h=Math.abs(u-t);return[l,u,d,h]}function Mn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Fr({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){let s,a;switch(e){case re.Left:s=t-Mn(t-o,i),a=n;break;case re.Right:s=t+Mn(o-t,i),a=n;break;case re.Top:s=t,a=n-Mn(n-r,i);break;case re.Bottom:s=t,a=n+Mn(r-n,i);break}return[s,a]}function hs(e){const{sourceX:t,sourceY:n,sourcePosition:o=re.Bottom,targetX:r,targetY:i,targetPosition:s=re.Top,curvature:a=.25}=e,[l,u]=Fr({pos:o,x1:t,y1:n,x2:r,y2:i,c:a}),[d,h]=Fr({pos:s,x1:r,y1:i,x2:t,y2:n,c:a}),[v,y,C,S]=fs({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:h});return[`M${t},${n} C${l},${u} ${d},${h} ${r},${i}`,v,y,C,S]}function Yr({pos:e,x1:t,y1:n,x2:o,y2:r}){let i,s;switch(e){case re.Left:case re.Right:i=.5*(t+o),s=n;break;case re.Top:case re.Bottom:i=t,s=.5*(n+r);break}return[i,s]}function ps(e){const{sourceX:t,sourceY:n,sourcePosition:o=re.Bottom,targetX:r,targetY:i,targetPosition:s=re.Top}=e,[a,l]=Yr({pos:o,x1:t,y1:n,x2:r,y2:i}),[u,d]=Yr({pos:s,x1:r,y1:i,x2:t,y2:n}),[h,v,y,C]=fs({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${t},${n} C${a},${l} ${u},${d} ${r},${i}`,h,v,y,C]}const Xr={[re.Left]:{x:-1,y:0},[re.Right]:{x:1,y:0},[re.Top]:{x:0,y:-1},[re.Bottom]:{x:0,y:1}};function xf({source:e,sourcePosition:t=re.Bottom,target:n}){return t===re.Left||t===re.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Gr(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function bf({source:e,sourcePosition:t=re.Bottom,target:n,targetPosition:o=re.Top,center:r,offset:i}){const s=Xr[t],a=Xr[o],l={x:e.x+s.x*i,y:e.y+s.y*i},u={x:n.x+a.x*i,y:n.y+a.y*i},d=xf({source:l,sourcePosition:t,target:u}),h=d.x!==0?"x":"y",v=d[h];let y,C,S;const N={x:0,y:0},E={x:0,y:0},[I,f,w,D]=ds({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[h]*a[h]===-1){C=r.x??I,S=r.y??f;const z=[{x:C,y:l.y},{x:C,y:u.y}],H=[{x:l.x,y:S},{x:u.x,y:S}];s[h]===v?y=h==="x"?z:H:y=h==="x"?H:z}else{const z=[{x:l.x,y:u.y}],H=[{x:u.x,y:l.y}];if(h==="x"?y=s.x===v?H:z:y=s.y===v?z:H,t===o){const ie=Math.abs(e[h]-n[h]);if(ie<=i){const b=Math.min(i-1,i-ie);s[h]===v?N[h]=(l[h]>e[h]?-1:1)*b:E[h]=(u[h]>n[h]?-1:1)*b}}if(t!==o){const ie=h==="x"?"y":"x",b=s[h]===a[ie],M=l[ie]>u[ie],$=l[ie]<u[ie];(s[h]===1&&(!b&&M||b&&$)||s[h]!==1&&(!b&&$||b&&M))&&(y=h==="x"?z:H)}const Q={x:l.x+N.x,y:l.y+N.y},O={x:u.x+E.x,y:u.y+E.y},F=Math.max(Math.abs(Q.x-y[0].x),Math.abs(O.x-y[0].x)),k=Math.max(Math.abs(Q.y-y[0].y),Math.abs(O.y-y[0].y));F>=k?(C=(Q.x+O.x)/2,S=y[0].y):(C=y[0].x,S=(Q.y+O.y)/2)}return[[e,{x:l.x+N.x,y:l.y+N.y},...y,{x:u.x+E.x,y:u.y+E.y},n],C,S,w,D]}function kf(e,t,n,o){const r=Math.min(Gr(e,t)/2,Gr(t,n)/2,o),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${i+r*u},${s}Q ${i},${s} ${i},${s+r*d}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${s+r*l}Q ${i},${s} ${i+r*a},${s}`}function Vo(e){const{sourceX:t,sourceY:n,sourcePosition:o=re.Bottom,targetX:r,targetY:i,targetPosition:s=re.Top,borderRadius:a=5,centerX:l,centerY:u,offset:d=20}=e,[h,v,y,C,S]=bf({source:{x:t,y:n},sourcePosition:o,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:d});return[h.reduce((E,I,f)=>{let w;return f>0&&f<h.length-1?w=kf(h[f-1],I,h[f+1],a):w=`${f===0?"M":"L"}${I.x} ${I.y}`,E+=w,E},""),v,y,C,S]}function Sf(e){const{sourceX:t,sourceY:n,targetX:o,targetY:r}=e,[i,s,a,l]=ds({sourceX:t,sourceY:n,targetX:o,targetY:r});return[`M ${t},${n}L ${o},${r}`,i,s,a,l]}const Ef=ge({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=Sf(e);return Me(so,{path:n,labelX:o,labelY:r,...t,...e})}}}),Nf=Ef,Cf=ge({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=Vo({...e,sourcePosition:e.sourcePosition??re.Bottom,targetPosition:e.targetPosition??re.Top});return Me(so,{path:n,labelX:o,labelY:r,...t,...e})}}}),vs=Cf,$f=ge({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>Me(vs,{...e,...t,borderRadius:0})}}),If=$f,Mf=ge({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=hs({...e,sourcePosition:e.sourcePosition??re.Bottom,targetPosition:e.targetPosition??re.Top});return Me(so,{path:n,labelX:o,labelY:r,...t,...e})}}}),Df=Mf,Pf=ge({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=ps({...e,sourcePosition:e.sourcePosition??re.Bottom,targetPosition:e.targetPosition??re.Top});return Me(so,{path:n,labelX:o,labelY:r,...t,...e})}}}),Tf=Pf,Af={input:ff,default:cf,output:df},Of={default:Df,straight:Nf,step:If,smoothstep:vs,simplebezier:Tf};function zf(e,t,n){const o=le(()=>S=>t.value.get(S)),r=le(()=>S=>n.value.get(S)),i=le(()=>{const S={...Of,...e.edgeTypes},N=Object.keys(S);for(const E of e.edges)E.type&&!N.includes(E.type)&&(S[E.type]=E.type);return S}),s=le(()=>{const S={...Af,...e.nodeTypes},N=Object.keys(S);for(const E of e.nodes)E.type&&!N.includes(E.type)&&(S[E.type]=E.type);return S}),a=le(()=>e.onlyRenderVisibleElements?qi(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),l=le(()=>{if(e.onlyRenderVisibleElements){const S=[];for(const N of e.edges){const E=t.value.get(N.source),I=t.value.get(N.target);Dd({sourcePos:E.computedPosition||{x:0,y:0},targetPos:I.computedPosition||{x:0,y:0},sourceWidth:E.dimensions.width,sourceHeight:E.dimensions.height,targetWidth:I.dimensions.width,targetHeight:I.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&S.push(N)}return S}return e.edges}),u=le(()=>[...a.value,...l.value]),d=le(()=>{const S=[];for(const N of e.nodes)N.selected&&S.push(N);return S}),h=le(()=>{const S=[];for(const N of e.edges)N.selected&&S.push(N);return S}),v=le(()=>[...d.value,...h.value]),y=le(()=>{const S=[];for(const N of e.nodes)N.dimensions.width&&N.dimensions.height&&N.handleBounds!==void 0&&S.push(N);return S}),C=le(()=>a.value.length>0&&y.value.length===a.value.length);return{getNode:o,getEdge:r,getElements:u,getEdgeTypes:i,getNodeTypes:s,getEdges:l,getNodes:a,getSelectedElements:v,getSelectedNodes:d,getSelectedEdges:h,getNodesInitialized:y,areNodesInitialized:C}}class Nt{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=jt())==null?void 0:t.appContext.app,o=n?.config.globalProperties.$vueFlowStorage??Nt.instance;return Nt.instance=o??new Nt,n&&(n.config.globalProperties.$vueFlowStorage=Nt.instance),Nt.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=cs(),r=Ts(o),i={};for(const[v,y]of Object.entries(r.hooks)){const C=`on${v.charAt(0).toUpperCase()+v.slice(1)}`;i[C]=y.on}const s={};for(const[v,y]of Object.entries(r.hooks))s[v]=y.trigger;const a=le(()=>{const v=new Map;for(const y of r.nodes)v.set(y.id,y);return v}),l=le(()=>{const v=new Map;for(const y of r.edges)v.set(y.id,y);return v}),u=zf(r,a,l),d=af(r,a,l);d.setState({...r,...n});const h={...i,...u,...d,...Na(r),nodeLookup:a,edgeLookup:l,emits:s,id:t,vueFlowVersion:"1.48.1",$destroy:()=>{this.remove(t)}};return this.set(t,h),h}getId(){return`vue-flow-${this.currentId++}`}}function Te(e){const t=Nt.getInstance(),n=si(),o=typeof e=="object",r=o?e:{id:e},i=r.id,s=i??n?.vueFlowId;let a;if(n){const l=Jt(Lr,null);typeof l<"u"&&l!==null&&(!s||l.id===s)&&(a=l)}if(a||s&&(a=t.get(s)),!a||s&&a.id!==s){const l=i??t.getId(),u=t.create(l,r);a=u,(n??oi(!0)).run(()=>{$e(u.applyDefault,(h,v,y)=>{const C=N=>{u.applyNodeChanges(N)},S=N=>{u.applyEdgeChanges(N)};h?(u.onNodesChange(C),u.onEdgesChange(S)):(u.hooks.value.nodesChange.off(C),u.hooks.value.edgesChange.off(S)),y(()=>{u.hooks.value.nodesChange.off(C),u.hooks.value.edgesChange.off(S)})},{immediate:!0}),cn(()=>{if(a){const h=t.get(a.id);h?h.$destroy():xn(`No store instance found for id ${a.id} in storage.`)}})})}else o&&a.setState(r);if(n&&(Gt(Lr,a),n.vueFlowId=a.id),o){const l=jt();l?.type.name!=="VueFlow"&&a.emits.error(new He(Ve.USEVUEFLOW_OPTIONS))}return a}function Bf(e){const{emits:t,dimensions:n}=Te();let o;it(()=>{const r=()=>{var i,s;if(!e.value||!(((s=(i=e.value).checkVisibility)==null?void 0:s.call(i))??!0))return;const a=eo(e.value);(a.width===0||a.height===0)&&t.error(new He(Ve.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:a.width||500,height:a.height||500}};r(),window.addEventListener("resize",r),e.value&&(o=new ResizeObserver(()=>r()),o.observe(e.value)),ii(()=>{window.removeEventListener("resize",r),o&&e.value&&o.unobserve(e.value)})})}const Vf={name:"UserSelection",compatConfig:{MODE:3}},Hf=ge({...Vf,props:{userSelectionRect:{}},setup(e){return(t,n)=>(P(),X("div",{class:"vue-flow__selection vue-flow__container",style:ze({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),Rf=["tabIndex"],Wf={name:"NodesSelection",compatConfig:{MODE:3}},Lf=ge({...Wf,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:r,disableKeyboardA11y:i,userSelectionActive:s}=Te(),a=us(),l=ce(null),u=ss({el:l,onStart(C){t.selectionDragStart(C),t.nodeDragStart(C)},onDrag(C){t.selectionDrag(C),t.nodeDrag(C)},onStop(C){t.selectionDragStop(C),t.nodeDragStop(C)}});it(()=>{var C;i.value||(C=l.value)==null||C.focus({preventScroll:!0})});const d=le(()=>Ki(o.value)),h=le(()=>({width:`${d.value.width}px`,height:`${d.value.height}px`,top:`${d.value.y}px`,left:`${d.value.x}px`}));function v(C){t.selectionContextMenu({event:C,nodes:o.value})}function y(C){i.value||Xt[C.key]&&(C.preventDefault(),a({x:Xt[C.key].x,y:Xt[C.key].y},C.shiftKey))}return(C,S)=>!c(s)&&d.value.width&&d.value.height?(P(),X("div",{key:0,class:Re(["vue-flow__nodesselection vue-flow__container",c(r)]),style:ze({transform:`translate(${c(n).x}px,${c(n).y}px) scale(${c(n).zoom})`})},[B("div",{ref_key:"el",ref:l,class:Re([{dragging:c(u)},"vue-flow__nodesselection-rect"]),style:ze(h.value),tabIndex:c(i)?void 0:-1,onContextmenu:v,onKeydown:y},null,46,Rf)],6)):De("",!0)}});function Ff(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Yf={name:"Pane",compatConfig:{MODE:3}},Xf=ge({...Yf,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:r,userSelectionActive:i,removeSelectedElements:s,userSelectionRect:a,elementsSelectable:l,nodesSelectionActive:u,getSelectedEdges:d,getSelectedNodes:h,removeNodes:v,removeEdges:y,selectionMode:C,deleteKeyCode:S,multiSelectionKeyCode:N,multiSelectionActive:E,edgeLookup:I,nodeLookup:f,connectionLookup:w,defaultEdgeOptions:D,connectionStartHandle:V,panOnDrag:z}=Te(),H=_t(null),Q=_t(new Set),O=_t(new Set),F=_t(null),k=Pe(()=>l.value&&(e.isSelecting||i.value)),ie=Pe(()=>V.value!==null);let b=!1,M=!1;const $=un(S,{actInsideInputWithModifier:!1}),W=un(N);$e($,J=>{J&&(v(h.value),y(d.value),u.value=!1)}),$e(W,J=>{E.value=J});function Y(J,ne){return se=>{se.target===ne&&J?.(se)}}function Z(J){if(b||ie.value){b=!1;return}r.paneClick(J),s(),u.value=!1}function U(J){var ne;if(Array.isArray(z.value)&&((ne=z.value)!=null&&ne.includes(2))){J.preventDefault();return}r.paneContextMenu(J)}function te(J){r.paneScroll(J)}function ue(J){var ne,se,we;if(F.value=((ne=t.value)==null?void 0:ne.getBoundingClientRect())??null,!l.value||!e.isSelecting||J.button!==0||J.target!==H.value||!F.value)return;(we=(se=J.target)==null?void 0:se.setPointerCapture)==null||we.call(se,J.pointerId);const{x:ve,y:ye}=Ff(J,F.value);M=!0,b=!1,s(),a.value={width:0,height:0,startX:ve,startY:ye,x:ve,y:ye},r.selectionStart(J)}function fe(J){var ne;if(!F.value||!a.value)return;b=!0;const{x:se,y:we}=nt(J,F.value),{startX:ve=0,startY:ye=0}=a.value,Ie={startX:ve,startY:ye,x:se<ve?se:ve,y:we<ye?we:ye,width:Math.abs(se-ve),height:Math.abs(we-ye)},de=Q.value,_e=O.value;Q.value=new Set(qi(n.value,Ie,o.value,C.value===Zo.Partial,!0).map(p=>p.id)),O.value=new Set;const _=((ne=D.value)==null?void 0:ne.selectable)??!0;for(const p of Q.value){const x=w.value.get(p);if(x)for(const{edgeId:m}of x.values()){const T=I.value.get(m);T&&(T.selectable??_)&&O.value.add(m)}}if(!Wr(de,Q.value)){const p=yt(f.value,Q.value,!0);r.nodesChange(p)}if(!Wr(_e,O.value)){const p=yt(I.value,O.value);r.edgesChange(p)}a.value=Ie,i.value=!0,u.value=!1}function me(J){var ne;J.button!==0||!M||((ne=J.target)==null||ne.releasePointerCapture(J.pointerId),!i.value&&a.value&&J.target===H.value&&Z(J),i.value=!1,a.value=null,u.value=Q.value.size>0,r.selectionEnd(J),e.selectionKeyPressed&&(b=!1),M=!1)}return(J,ne)=>(P(),X("div",{ref_key:"container",ref:H,class:Re(["vue-flow__pane vue-flow__container",{selection:J.isSelecting}]),onClick:ne[0]||(ne[0]=se=>k.value?void 0:Y(Z,H.value)(se)),onContextmenu:ne[1]||(ne[1]=se=>Y(U,H.value)(se)),onWheelPassive:ne[2]||(ne[2]=se=>Y(te,H.value)(se)),onPointerenter:ne[3]||(ne[3]=se=>k.value?void 0:c(r).paneMouseEnter(se)),onPointerdown:ne[4]||(ne[4]=se=>k.value?ue(se):c(r).paneMouseMove(se)),onPointermove:ne[5]||(ne[5]=se=>k.value?fe(se):c(r).paneMouseMove(se)),onPointerup:ne[6]||(ne[6]=se=>k.value?me(se):void 0),onPointerleave:ne[7]||(ne[7]=se=>c(r).paneMouseLeave(se))},[ke(J.$slots,"default"),c(i)&&c(a)?(P(),Se(Hf,{key:0,"user-selection-rect":c(a)},null,8,["user-selection-rect"])):De("",!0),c(u)&&c(h).length?(P(),Se(Lf,{key:1})):De("",!0)],34))}}),Gf={name:"Transform",compatConfig:{MODE:3}},Uf=ge({...Gf,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=Te(),r=le(()=>n.value?!o.value:!1),i=le(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(s,a)=>(P(),X("div",{class:"vue-flow__transformationpane vue-flow__container",style:ze({transform:i.value,opacity:r.value?0:void 0})},[ke(s.$slots,"default")],4))}}),Zf={name:"Viewport",compatConfig:{MODE:3}},Kf=ge({...Zf,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:r,zoomActivationKeyCode:i,selectionKeyCode:s,panActivationKeyCode:a,panOnScroll:l,panOnScrollMode:u,panOnScrollSpeed:d,panOnDrag:h,zoomOnDoubleClick:v,zoomOnPinch:y,zoomOnScroll:C,preventScrolling:S,noWheelClassName:N,noPanClassName:E,emits:I,connectionStartHandle:f,userSelectionActive:w,paneDragging:D,d3Zoom:V,d3Selection:z,d3ZoomHandler:H,viewport:Q,viewportRef:O,paneClickDistance:F}=Te();Bf(O);const k=_t(!1),ie=_t(!1);let b=null,M=!1,$=0,W={x:0,y:0,zoom:0};const Y=un(a),Z=un(s),U=un(i),te=Pe(()=>(!Z.value||Z.value&&s.value===!0)&&(Y.value||h.value)),ue=Pe(()=>Y.value||l.value),fe=Pe(()=>Z.value||s.value===!0&&te.value!==!0),me=Pe(()=>f.value!==null);it(()=>{if(!O.value){xn("Viewport element is missing");return}const ve=O.value,ye=ve.getBoundingClientRect(),Ie=cd().clickDistance(F.value).scaleExtent([t.value,n.value]).translateExtent(r.value),de=Ke(ve).call(Ie),_e=de.on("wheel.zoom"),_=Kt.translate(o.value.x??0,o.value.y??0).scale(Pt(o.value.zoom??1,t.value,n.value)),p=[[0,0],[ye.width,ye.height]],x=Ie.constrain()(_,p,r.value);Ie.transform(de,x),Ie.wheelDelta(Cr),V.value=Ie,z.value=de,H.value=_e,Q.value={x:x.x,y:x.y,zoom:x.k},Ie.on("start",m=>{var T;if(!m.sourceEvent)return null;$=m.sourceEvent.button,k.value=!0;const K=se(m.transform);((T=m.sourceEvent)==null?void 0:T.type)==="mousedown"&&(D.value=!0),W=K,I.viewportChangeStart(K),I.moveStart({event:m,flowTransform:K})}),Ie.on("end",m=>{if(!m.sourceEvent)return null;if(k.value=!1,D.value=!1,J(te.value,$??0)&&!M&&I.paneContextMenu(m.sourceEvent),M=!1,ne(W,m.transform)){const T=se(m.transform);W=T,I.viewportChangeEnd(T),I.moveEnd({event:m,flowTransform:T})}}),Ie.filter(m=>{var T;const K=U.value||C.value,ee=y.value&&m.ctrlKey,j=m.button,oe=m.type==="wheel";if(j===1&&m.type==="mousedown"&&(we(m,"vue-flow__node")||we(m,"vue-flow__edge")))return!0;if(!te.value&&!K&&!ue.value&&!v.value&&!y.value||w.value||me.value&&!oe||!v.value&&m.type==="dblclick"||we(m,N.value)&&oe||we(m,E.value)&&(!oe||ue.value&&oe&&!U.value)||!y.value&&m.ctrlKey&&oe||!K&&!ue.value&&!ee&&oe)return!1;if(!y&&m.type==="touchstart"&&((T=m.touches)==null?void 0:T.length)>1)return m.preventDefault(),!1;if(!te.value&&(m.type==="mousedown"||m.type==="touchstart")||s.value===!0&&Array.isArray(h.value)&&h.value.includes(0)&&j===0||Array.isArray(h.value)&&!h.value.includes(j)&&(m.type==="mousedown"||m.type==="touchstart"))return!1;const he=Array.isArray(h.value)&&h.value.includes(j)||s.value===!0&&Array.isArray(h.value)&&!h.value.includes(0)||!j||j<=1;return(!m.ctrlKey||Y.value||oe)&&he}),$e([w,te],()=>{w.value&&!k.value?Ie.on("zoom",null):w.value||Ie.on("zoom",m=>{Q.value={x:m.transform.x,y:m.transform.y,zoom:m.transform.k};const T=se(m.transform);M=J(te.value,$??0),I.viewportChange(T),I.move({event:m,flowTransform:T})})},{immediate:!0}),$e([w,ue,u,U,y,S,N],()=>{ue.value&&!U.value&&!w.value?de.on("wheel.zoom",m=>{if(we(m,N.value))return!1;const T=U.value||C.value,K=y.value&&m.ctrlKey;if(!(!S.value||ue.value||T||K))return!1;m.preventDefault(),m.stopImmediatePropagation();const j=de.property("__zoom").k||1,oe=Zn();if(!Y.value&&m.ctrlKey&&y.value&&oe){const bt=et(m),ao=Cr(m),kt=j*2**ao;Ie.scaleTo(de,kt,bt,m);return}const he=m.deltaMode===1?20:1;let xe=u.value===ln.Vertical?0:m.deltaX*he,Ee=u.value===ln.Horizontal?0:m.deltaY*he;!oe&&m.shiftKey&&u.value!==ln.Vertical&&!xe&&Ee&&(xe=Ee,Ee=0),Ie.translateBy(de,-(xe/j)*d.value,-(Ee/j)*d.value);const Ge=se(de.property("__zoom"));b&&clearTimeout(b),ie.value?(I.move({event:m,flowTransform:Ge}),I.viewportChange(Ge),b=setTimeout(()=>{I.moveEnd({event:m,flowTransform:Ge}),I.viewportChangeEnd(Ge),ie.value=!1},150)):(ie.value=!0,I.moveStart({event:m,flowTransform:Ge}),I.viewportChangeStart(Ge))},{passive:!1}):typeof _e<"u"&&de.on("wheel.zoom",function(m,T){const K=!S.value&&m.type==="wheel"&&!m.ctrlKey,ee=U.value||C.value,j=y.value&&m.ctrlKey;if(!ee&&!l.value&&!j&&m.type==="wheel"||K||we(m,N.value))return null;m.preventDefault(),_e.call(this,m,T)},{passive:!1})},{immediate:!0})});function J(ve,ye){return ye===2&&Array.isArray(ve)&&ve.includes(2)}function ne(ve,ye){return ve.x!==ye.x&&!Number.isNaN(ye.x)||ve.y!==ye.y&&!Number.isNaN(ye.y)||ve.zoom!==ye.k&&!Number.isNaN(ye.k)}function se(ve){return{x:ve.x,y:ve.y,zoom:ve.k}}function we(ve,ye){return ve.target.closest(`.${ye}`)}return(ve,ye)=>(P(),X("div",{ref_key:"viewportRef",ref:O,class:"vue-flow__viewport vue-flow__container"},[L(Xf,{"is-selecting":fe.value,"selection-key-pressed":c(Z),class:Re({connecting:me.value,dragging:c(D),draggable:c(h)===!0||Array.isArray(c(h))&&c(h).includes(0)})},{default:R(()=>[L(Uf,null,{default:R(()=>[ke(ve.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),qf=["id"],jf=["id"],Jf=["id"],Qf={name:"A11yDescriptions",compatConfig:{MODE:3}},eh=ge({...Qf,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Te();return(r,i)=>(P(),X(Ce,null,[B("div",{id:`${c(Wi)}-${c(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+Ne(c(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,qf),B("div",{id:`${c(Li)}-${c(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,jf),c(n)?De("",!0):(P(),X("div",{key:0,id:`${c(gd)}-${c(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},Ne(c(o)),9,Jf))],64))}});function th(){const e=Te();$e(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function nh(e,t,n){return n===re.Left?e-t:n===re.Right?e+t:e}function oh(e,t,n){return n===re.Top?e-t:n===re.Bottom?e+t:e}const jo=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=re.Top,type:r}){return Me("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${r}`,cx:nh(t,e,o),cy:oh(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};jo.props=["radius","centerX","centerY","position","type"];jo.compatConfig={MODE:3};const Ur=jo,rh=ge({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:r,emits:i,nodesSelectionActive:s,noPanClassName:a,getEdgeTypes:l,removeSelectedEdges:u,findEdge:d,findNode:h,isValidConnection:v,multiSelectionActive:y,disableKeyboardA11y:C,elementsSelectable:S,edgesUpdatable:N,edgesFocusable:E,hooks:I}=Te(),f=le(()=>d(e.id)),{emit:w,on:D}=Ud(f.value,i),V=Jt(no),z=jt(),H=ce(!1),Q=ce(!1),O=ce(""),F=ce(null),k=ce("source"),ie=ce(null),b=Pe(()=>typeof f.value.selectable>"u"?S.value:f.value.selectable),M=Pe(()=>typeof f.value.updatable>"u"?N.value:f.value.updatable),$=Pe(()=>typeof f.value.focusable>"u"?E.value:f.value.focusable);Gt(Yd,e.id),Gt(Xd,ie);const W=le(()=>f.value.class instanceof Function?f.value.class(f.value):f.value.class),Y=le(()=>f.value.style instanceof Function?f.value.style(f.value):f.value.style),Z=le(()=>{const p=f.value.type||"default",x=V?.[`edge-${p}`];if(x)return x;let m=f.value.template??l.value[p];if(typeof m=="string"&&z){const T=Object.keys(z.appContext.components);T&&T.includes(p)&&(m=ai(p,!1))}return m&&typeof m!="string"?m:(i.error(new He(Ve.EDGE_TYPE_MISSING,m)),!1)}),{handlePointerDown:U}=as({nodeId:O,handleId:F,type:k,isValidConnection:v,edgeUpdaterType:k,onEdgeUpdate:fe,onEdgeUpdateEnd:me});return()=>{const p=h(f.value.source),x=h(f.value.target),m="pathOptions"in f.value?f.value.pathOptions:{};if(!p&&!x)return i.error(new He(Ve.EDGE_SOURCE_TARGET_MISSING,f.value.id,f.value.source,f.value.target)),null;if(!p)return i.error(new He(Ve.EDGE_SOURCE_MISSING,f.value.id,f.value.source)),null;if(!x)return i.error(new He(Ve.EDGE_TARGET_MISSING,f.value.id,f.value.target)),null;if(!f.value||f.value.hidden||p.hidden||x.hidden)return null;let T;o.value===wt.Strict?T=p.handleBounds.source:T=[...p.handleBounds.source||[],...p.handleBounds.target||[]];const K=Or(T,f.value.sourceHandle);let ee;o.value===wt.Strict?ee=x.handleBounds.target:ee=[...x.handleBounds.target||[],...x.handleBounds.source||[]];const j=Or(ee,f.value.targetHandle),oe=K?.position||re.Bottom,he=j?.position||re.Top,{x:xe,y:Ee}=qt(p,K,oe),{x:Ge,y:bt}=qt(x,j,he);return f.value.sourceX=xe,f.value.sourceY=Ee,f.value.targetX=Ge,f.value.targetY=bt,Me("g",{ref:ie,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${Z.value===!1?"default":f.value.type||"default"}`,a.value,W.value,{updating:H.value,selected:f.value.selected,animated:f.value.animated,inactive:!b.value&&!I.value.edgeClick.hasListeners()}],tabIndex:$.value?0:void 0,"aria-label":f.value.ariaLabel===null?void 0:f.value.ariaLabel??`Edge from ${f.value.source} to ${f.value.target}`,"aria-describedby":$.value?`${Li}-${t}`:void 0,"aria-roledescription":"edge",role:$.value?"group":"img",...f.value.domAttributes,onClick:ne,onContextmenu:se,onDblclick:we,onMouseenter:ve,onMousemove:ye,onMouseleave:Ie,onKeyDown:$.value?_:void 0},[Q.value?null:Me(Z.value===!1?l.value.default:Z.value,{id:e.id,sourceNode:p,targetNode:x,source:f.value.source,target:f.value.target,type:f.value.type,updatable:M.value,selected:f.value.selected,animated:f.value.animated,label:f.value.label,labelStyle:f.value.labelStyle,labelShowBg:f.value.labelShowBg,labelBgStyle:f.value.labelBgStyle,labelBgPadding:f.value.labelBgPadding,labelBgBorderRadius:f.value.labelBgBorderRadius,data:f.value.data,events:{...f.value.events,...D},style:Y.value,markerStart:`url('#${mn(f.value.markerStart,t)}')`,markerEnd:`url('#${mn(f.value.markerEnd,t)}')`,sourcePosition:oe,targetPosition:he,sourceX:xe,sourceY:Ee,targetX:Ge,targetY:bt,sourceHandleId:f.value.sourceHandle,targetHandleId:f.value.targetHandle,interactionWidth:f.value.interactionWidth,...m}),[M.value==="source"||M.value===!0?[Me("g",{onMousedown:de,onMouseenter:te,onMouseout:ue},Me(Ur,{position:oe,centerX:xe,centerY:Ee,radius:r.value,type:"source","data-type":"source"}))]:null,M.value==="target"||M.value===!0?[Me("g",{onMousedown:_e,onMouseenter:te,onMouseout:ue},Me(Ur,{position:he,centerX:Ge,centerY:bt,radius:r.value,type:"target","data-type":"target"}))]:null]])};function te(){H.value=!0}function ue(){H.value=!1}function fe(p,x){w.update({event:p,edge:f.value,connection:x})}function me(p){w.updateEnd({event:p,edge:f.value}),Q.value=!1}function J(p,x){p.button===0&&(Q.value=!0,O.value=x?f.value.target:f.value.source,F.value=(x?f.value.targetHandle:f.value.sourceHandle)??null,k.value=x?"target":"source",w.updateStart({event:p,edge:f.value}),U(p))}function ne(p){var x;const m={event:p,edge:f.value};b.value&&(s.value=!1,f.value.selected&&y.value?(u([f.value]),(x=ie.value)==null||x.blur()):n([f.value])),w.click(m)}function se(p){w.contextMenu({event:p,edge:f.value})}function we(p){w.doubleClick({event:p,edge:f.value})}function ve(p){w.mouseEnter({event:p,edge:f.value})}function ye(p){w.mouseMove({event:p,edge:f.value})}function Ie(p){w.mouseLeave({event:p,edge:f.value})}function de(p){J(p,!0)}function _e(p){J(p,!1)}function _(p){var x;!C.value&&Fi.includes(p.key)&&b.value&&(p.key==="Escape"?((x=ie.value)==null||x.blur(),u([d(e.id)])):n([d(e.id)]))}}}),ih=rh,sh=ge({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:r,connectionPosition:i,connectionLineType:s,connectionLineStyle:a,connectionLineOptions:l,connectionStatus:u,viewport:d,findNode:h}=Te(),v=(e=Jt(no))==null?void 0:e["connection-line"],y=le(()=>{var I;return h((I=o.value)==null?void 0:I.nodeId)}),C=le(()=>{var I;return h((I=r.value)==null?void 0:I.nodeId)??null}),S=le(()=>({x:(i.value.x-d.value.x)/d.value.zoom,y:(i.value.y-d.value.y)/d.value.zoom})),N=le(()=>l.value.markerStart?`url(#${mn(l.value.markerStart,t)})`:""),E=le(()=>l.value.markerEnd?`url(#${mn(l.value.markerEnd,t)})`:"");return()=>{var I,f,w;if(!y.value||!o.value)return null;const D=o.value.id,V=o.value.type,z=y.value.handleBounds;let H=z?.[V]??[];if(n.value===wt.Loose){const Y=z?.[V==="source"?"target":"source"]??[];H=[...H,...Y]}if(!H)return null;const Q=(D?H.find(Y=>Y.id===D):H[0])??null,O=Q?.position??re.Top,{x:F,y:k}=qt(y.value,Q,O);let ie=null;C.value&&(n.value===wt.Strict?ie=((I=C.value.handleBounds[V==="source"?"target":"source"])==null?void 0:I.find(Y=>{var Z;return Y.id===((Z=r.value)==null?void 0:Z.id)}))||null:ie=((f=[...C.value.handleBounds.source??[],...C.value.handleBounds.target??[]])==null?void 0:f.find(Y=>{var Z;return Y.id===((Z=r.value)==null?void 0:Z.id)}))||null);const b=((w=r.value)==null?void 0:w.position)??(O?zo[O]:null);if(!O||!b)return null;const M=s.value??l.value.type??Et.Bezier;let $="";const W={sourceX:F,sourceY:k,sourcePosition:O,targetX:S.value.x,targetY:S.value.y,targetPosition:b};return M===Et.Bezier?[$]=hs(W):M===Et.Step?[$]=Vo({...W,borderRadius:0}):M===Et.SmoothStep?[$]=Vo(W):M===Et.SimpleBezier?[$]=ps(W):$=`M${F},${k} ${S.value.x},${S.value.y}`,Me("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Me("g",{class:"vue-flow__connection"},v?Me(v,{sourceX:F,sourceY:k,sourcePosition:O,targetX:S.value.x,targetY:S.value.y,targetPosition:b,sourceNode:y.value,sourceHandle:Q,targetNode:C.value,targetHandle:ie,markerEnd:E.value,markerStart:N.value,connectionStatus:u.value}):Me("path",{d:$,class:[l.value.class,u.value,"vue-flow__connection-path"],style:{...a.value,...l.value.style},"marker-end":E.value,"marker-start":N.value})))}}}),ah=sh,lh=["id","markerWidth","markerHeight","markerUnits","orient"],uh={name:"MarkerType",compatConfig:{MODE:3}},ch=ge({...uh,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(P(),X("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===c(Ao).ArrowClosed?(P(),X("polyline",{key:0,style:ze({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):De("",!0),t.type===c(Ao).Arrow?(P(),X("polyline",{key:1,style:ze({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):De("",!0)],8,lh))}}),dh={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},fh={name:"MarkerDefinitions",compatConfig:{MODE:3}},hh=ge({...fh,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:r}=Te(),i=le(()=>{const s=new Set,a=[],l=u=>{if(u){const d=mn(u,t);s.has(d)||(typeof u=="object"?a.push({...u,id:d,color:u.color||r.value}):a.push({id:d,color:r.value,type:u}),s.add(d))}};for(const u of[o.value.markerEnd,o.value.markerStart])l(u);for(const u of n.value)for(const d of[u.markerStart,u.markerEnd])l(d);return a.sort((u,d)=>u.id.localeCompare(d.id))});return(s,a)=>(P(),X("svg",dh,[B("defs",null,[(P(!0),X(Ce,null,Ae(i.value,l=>(P(),Se(ch,{id:l.id,key:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,"stroke-width":l.strokeWidth,orient:l.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),ph={name:"Edges",compatConfig:{MODE:3}},vh=ge({...ph,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=Te();return(r,i)=>(P(),X(Ce,null,[L(hh),(P(!0),X(Ce,null,Ae(c(n),s=>(P(),X("svg",{key:s.id,class:"vue-flow__edges vue-flow__container",style:ze({zIndex:c(Pd)(s,c(t),c(o))})},[L(c(ih),{id:s.id},null,8,["id"])],4))),128)),L(c(ah))],64))}}),gh=ge({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:r,multiSelectionActive:i,emits:s,removeSelectedNodes:a,addSelectedNodes:l,updateNodeDimensions:u,onUpdateNodeInternals:d,getNodeTypes:h,nodeExtent:v,elevateNodesOnSelect:y,disableKeyboardA11y:C,ariaLiveMessage:S,snapToGrid:N,snapGrid:E,nodeDragThreshold:I,nodesDraggable:f,elementsSelectable:w,nodesConnectable:D,nodesFocusable:V,hooks:z}=Te(),H=ce(null);Gt(is,H),Gt(rs,e.id);const Q=Jt(no),O=jt(),F=us(),{node:k,parentNode:ie}=ls(e.id),{emit:b,on:M}=jd(k,s),$=Pe(()=>typeof k.draggable>"u"?f.value:k.draggable),W=Pe(()=>typeof k.selectable>"u"?w.value:k.selectable),Y=Pe(()=>typeof k.connectable>"u"?D.value:k.connectable),Z=Pe(()=>typeof k.focusable>"u"?V.value:k.focusable),U=le(()=>W.value||$.value||z.value.nodeClick.hasListeners()||z.value.nodeDoubleClick.hasListeners()||z.value.nodeMouseEnter.hasListeners()||z.value.nodeMouseMove.hasListeners()||z.value.nodeMouseLeave.hasListeners()),te=Pe(()=>!!k.dimensions.width&&!!k.dimensions.height),ue=le(()=>{const x=k.type||"default",m=Q?.[`node-${x}`];if(m)return m;let T=k.template||h.value[x];if(typeof T=="string"&&O){const K=Object.keys(O.appContext.components);K&&K.includes(x)&&(T=ai(x,!1))}return T&&typeof T!="string"?T:(s.error(new He(Ve.NODE_TYPE_MISSING,T)),!1)}),fe=ss({id:e.id,el:H,disabled:()=>!$.value,selectable:W,dragHandle:()=>k.dragHandle,onStart(x){b.dragStart(x)},onDrag(x){b.drag(x)},onStop(x){b.dragStop(x)},onClick(x){_(x)}}),me=le(()=>k.class instanceof Function?k.class(k):k.class),J=le(()=>{const x=(k.style instanceof Function?k.style(k):k.style)||{},m=k.width instanceof Function?k.width(k):k.width,T=k.height instanceof Function?k.height(k):k.height;return!x.width&&m&&(x.width=typeof m=="string"?m:`${m}px`),!x.height&&T&&(x.height=typeof T=="string"?T:`${T}px`),x}),ne=Pe(()=>Number(k.zIndex??J.value.zIndex??0));return d(x=>{(x.includes(e.id)||!x.length)&&we()}),it(()=>{$e(()=>k.hidden,(x=!1,m,T)=>{!x&&H.value&&(e.resizeObserver.observe(H.value),T(()=>{H.value&&e.resizeObserver.unobserve(H.value)}))},{immediate:!0,flush:"post"})}),$e([()=>k.type,()=>k.sourcePosition,()=>k.targetPosition],()=>{ot(()=>{u([{id:e.id,nodeElement:H.value,forceUpdate:!0}])})}),$e([()=>k.position.x,()=>k.position.y,()=>{var x;return(x=ie.value)==null?void 0:x.computedPosition.x},()=>{var x;return(x=ie.value)==null?void 0:x.computedPosition.y},()=>{var x;return(x=ie.value)==null?void 0:x.computedPosition.z},ne,()=>k.selected,()=>k.dimensions.height,()=>k.dimensions.width,()=>{var x;return(x=ie.value)==null?void 0:x.dimensions.height},()=>{var x;return(x=ie.value)==null?void 0:x.dimensions.width}],([x,m,T,K,ee,j])=>{const oe={x,y:m,z:j+(y.value&&k.selected?1e3:0)};typeof T<"u"&&typeof K<"u"?k.computedPosition=Nd({x:T,y:K,z:ee},oe):k.computedPosition=oe},{flush:"post",immediate:!0}),$e([()=>k.extent,v],([x,m],[T,K])=>{(x!==T||m!==K)&&se()}),k.extent==="parent"||typeof k.extent=="object"&&"range"in k.extent&&k.extent.range==="parent"?Eo(()=>te).toBe(!0).then(se):se(),()=>k.hidden?null:Me("div",{ref:H,"data-id":k.id,class:["vue-flow__node",`vue-flow__node-${ue.value===!1?"default":k.type||"default"}`,{[n.value]:$.value,dragging:fe?.value,draggable:$.value,selected:k.selected,selectable:W.value,parent:k.isParent},me.value],style:{visibility:te.value?"visible":"hidden",zIndex:k.computedPosition.z??ne.value,transform:`translate(${k.computedPosition.x}px,${k.computedPosition.y}px)`,pointerEvents:U.value?"all":"none",...J.value},tabIndex:Z.value?0:void 0,role:Z.value?"group":void 0,"aria-describedby":C.value?void 0:`${Wi}-${t}`,"aria-label":k.ariaLabel,"aria-roledescription":"node",...k.domAttributes,onMouseenter:ve,onMousemove:ye,onMouseleave:Ie,onContextmenu:de,onClick:_,onDblclick:_e,onKeydown:p},[Me(ue.value===!1?h.value.default:ue.value,{id:k.id,type:k.type,data:k.data,events:{...k.events,...M},selected:k.selected,resizing:k.resizing,dragging:fe.value,connectable:Y.value,position:k.computedPosition,dimensions:k.dimensions,isValidTargetPos:k.isValidTargetPos,isValidSourcePos:k.isValidSourcePos,parent:k.parentNode,parentNodeId:k.parentNode,zIndex:k.computedPosition.z??ne.value,targetPosition:k.targetPosition,sourcePosition:k.sourcePosition,label:k.label,dragHandle:k.dragHandle,onUpdateNodeInternals:we})]);function se(){const x=k.computedPosition,{computedPosition:m,position:T}=Ko(k,N.value?to(x,E.value):x,s.error,v.value,ie.value);(k.computedPosition.x!==m.x||k.computedPosition.y!==m.y)&&(k.computedPosition={...k.computedPosition,...m}),(k.position.x!==T.x||k.position.y!==T.y)&&(k.position=T)}function we(){H.value&&u([{id:e.id,nodeElement:H.value,forceUpdate:!0}])}function ve(x){fe?.value||b.mouseEnter({event:x,node:k})}function ye(x){fe?.value||b.mouseMove({event:x,node:k})}function Ie(x){fe?.value||b.mouseLeave({event:x,node:k})}function de(x){return b.contextMenu({event:x,node:k})}function _e(x){return b.doubleClick({event:x,node:k})}function _(x){W.value&&(!o.value||!$.value||I.value>0)&&Bo(k,i.value,l,a,r,!1,H.value),b.click({event:x,node:k})}function p(x){if(!(Oo(x)||C.value))if(Fi.includes(x.key)&&W.value){const m=x.key==="Escape";Bo(k,i.value,l,a,r,m,H.value)}else $.value&&k.selected&&Xt[x.key]&&(x.preventDefault(),S.value=`Moved selected node ${x.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~k.position.x}, y: ${~~k.position.y}`,F({x:Xt[x.key].x,y:Xt[x.key].y},x.shiftKey))}}}),mh=gh;function yh(e={includeHiddenNodes:!1}){const{nodes:t}=Te();return le(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&(n?.handleBounds===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const _h={class:"vue-flow__nodes vue-flow__container"},wh={name:"Nodes",compatConfig:{MODE:3}},xh=ge({...wh,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=Te(),r=yh(),i=ce();return $e(r,s=>{s&&ot(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),it(()=>{i.value=new ResizeObserver(s=>{const a=s.map(l=>({id:l.target.getAttribute("data-id"),nodeElement:l.target,forceUpdate:!0}));ot(()=>n(a))})}),ii(()=>{var s;return(s=i.value)==null?void 0:s.disconnect()}),(s,a)=>(P(),X("div",_h,[i.value?(P(!0),X(Ce,{key:0},Ae(c(t),(l,u,d,h)=>{const v=[l.id];if(h&&h.key===l.id&&Os(h,v))return h;const y=(P(),Se(c(mh),{id:l.id,key:l.id,"resize-observer":i.value},null,8,["id","resize-observer"]));return y.memo=v,y},a,0),128)):De("",!0)]))}});function bh(){const{emits:e}=Te();it(()=>{if(os()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new He(Ve.MISSING_STYLES))}})}const kh=B("div",{class:"vue-flow__edge-labels"},null,-1),Sh={name:"VueFlow",compatConfig:{MODE:3}},Eh=ge({...Sh,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,r=Ps(),i=fo(o,"modelValue",n),s=fo(o,"nodes",n),a=fo(o,"edges",n),l=Te(o),u=tf({modelValue:i,nodes:s,edges:a},o,l);return of(n,l.hooks),th(),bh(),Gt(no,r),ri(u),t(l),(d,h)=>(P(),X("div",{ref:c(l).vueFlowRef,class:"vue-flow"},[L(Kf,null,{default:R(()=>[L(vh),kh,L(xh),ke(d.$slots,"zoom-pane")]),_:3}),ke(d.$slots,"default"),L(eh)],512))}}),Nh={name:"Panel",compatConfig:{MODE:3}},Ch=ge({...Nh,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=Te(),o=le(()=>`${t.position}`.split("-"));return(r,i)=>(P(),X("div",{class:Re(["vue-flow__panel",o.value]),style:ze({pointerEvents:c(n)?"none":"all"})},[ke(r.$slots,"default")],6))}}),$h={name:"ControlButton",compatConfig:{MODE:3}},Ih=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},Mh={type:"button",class:"vue-flow__controls-button"};function Dh(e,t,n,o,r,i){return P(),X("button",Mh,[ke(e.$slots,"default")])}const Dn=Ih($h,[["render",Dh]]),Ph={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Th=B("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),Ah=[Th];function Oh(e,t){return P(),X("svg",Ph,Ah)}const zh={render:Oh},Bh={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Vh=B("path",{d:"M0 0h32v4.2H0z"},null,-1),Hh=[Vh];function Rh(e,t){return P(),X("svg",Bh,Hh)}const Wh={render:Rh},Lh={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Fh=B("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),Yh=[Fh];function Xh(e,t){return P(),X("svg",Lh,Yh)}const Gh={render:Xh},Uh={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Zh=B("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),Kh=[Zh];function qh(e,t){return P(),X("svg",Uh,Kh)}const jh={render:qh},Jh={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Qh=B("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),ep=[Qh];function tp(e,t){return P(),X("svg",Jh,ep)}const np={render:tp},op={name:"Controls",compatConfig:{MODE:3}},rp=ge({...op,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>Ri.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:o,elementsSelectable:r,setInteractive:i,zoomIn:s,zoomOut:a,fitView:l,viewport:u,minZoom:d,maxZoom:h}=Te(),v=Pe(()=>n.value||o.value||r.value),y=Pe(()=>u.value.zoom<=d.value),C=Pe(()=>u.value.zoom>=h.value);function S(){s(),t("zoomIn")}function N(){a(),t("zoomOut")}function E(){l(e.fitViewParams),t("fitView")}function I(){i(!v.value),t("interactionChange",!v.value)}return(f,w)=>(P(),Se(c(Ch),{class:"vue-flow__controls",position:f.position},{default:R(()=>[ke(f.$slots,"top"),f.showZoom?(P(),X(Ce,{key:0},[ke(f.$slots,"control-zoom-in",{},()=>[L(Dn,{class:"vue-flow__controls-zoomin",disabled:C.value,onClick:S},{default:R(()=>[ke(f.$slots,"icon-zoom-in",{},()=>[(P(),Se(Rt(c(zh))))])]),_:3},8,["disabled"])]),ke(f.$slots,"control-zoom-out",{},()=>[L(Dn,{class:"vue-flow__controls-zoomout",disabled:y.value,onClick:N},{default:R(()=>[ke(f.$slots,"icon-zoom-out",{},()=>[(P(),Se(Rt(c(Wh))))])]),_:3},8,["disabled"])])],64)):De("",!0),f.showFitView?ke(f.$slots,"control-fit-view",{key:1},()=>[L(Dn,{class:"vue-flow__controls-fitview",onClick:E},{default:R(()=>[ke(f.$slots,"icon-fit-view",{},()=>[(P(),Se(Rt(c(Gh))))])]),_:3})]):De("",!0),f.showInteractive?ke(f.$slots,"control-interactive",{key:2},()=>[f.showInteractive?(P(),Se(Dn,{key:0,class:"vue-flow__controls-interactive",onClick:I},{default:R(()=>[v.value?ke(f.$slots,"icon-unlock",{key:0},()=>[(P(),Se(Rt(c(np))))]):De("",!0),v.value?De("",!0):ke(f.$slots,"icon-lock",{key:1},()=>[(P(),Se(Rt(c(jh))))])]),_:3})):De("",!0)]):De("",!0),ke(f.$slots,"default")]),_:3},8,["position"]))}}),Zr=ge({__name:"AlertDialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean}},emits:["update:open"],setup(e,{emit:t}){const r=Ro(e,t);return(i,s)=>(P(),Se(c(va),je({"data-slot":"alert-dialog"},c(r)),{default:R(a=>[ke(i.$slots,"default",Tt(At(a)))]),_:3},16))}}),Kr=ge({__name:"AlertDialogAction",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,n=yn(t,"class");return(o,r)=>(P(),Se(c(ta),je(c(n),{class:c(zt)(c(li)(),t.class)}),{default:R(()=>[ke(o.$slots,"default")]),_:3},16,["class"]))}}),qr=ge({__name:"AlertDialogCancel",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,n=yn(t,"class");return(o,r)=>(P(),Se(c(aa),je(c(n),{class:c(zt)(c(li)({variant:"outline"}),"mt-2 sm:mt-0",t.class)}),{default:R(()=>[ke(o.$slots,"default")]),_:3},16,["class"]))}}),jr=ge({inheritAttrs:!1,__name:"AlertDialogContent",props:{forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,o=t,r=yn(n,"class"),i=Ro(r,o);return(s,a)=>(P(),Se(c(ha),null,{default:R(()=>[L(c(da),{"data-slot":"alert-dialog-overlay",class:"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80"}),L(c(ia),je({"data-slot":"alert-dialog-content"},{...s.$attrs,...c(i)},{class:c(zt)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n.class)}),{default:R(()=>[ke(s.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),Jr=ge({__name:"AlertDialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,n=yn(t,"class");return(o,r)=>(P(),Se(c(ua),je({"data-slot":"alert-dialog-description"},c(n),{class:c(zt)("text-muted-foreground text-sm",t.class)}),{default:R(()=>[ke(o.$slots,"default")]),_:3},16,["class"]))}}),Qr=ge({__name:"AlertDialogFooter",props:{class:{}},setup(e){const t=e;return(n,o)=>(P(),X("div",{"data-slot":"alert-dialog-footer",class:Re(c(zt)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t.class))},[ke(n.$slots,"default")],2))}}),ei=ge({__name:"AlertDialogHeader",props:{class:{}},setup(e){const t=e;return(n,o)=>(P(),X("div",{"data-slot":"alert-dialog-header",class:Re(c(zt)("flex flex-col gap-2 text-center sm:text-left",t.class))},[ke(n.$slots,"default")],2))}}),ti=ge({__name:"AlertDialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const t=e,n=yn(t,"class");return(o,r)=>(P(),Se(c(ma),je({"data-slot":"alert-dialog-title"},c(n),{class:c(zt)("text-lg font-semibold",t.class)}),{default:R(()=>[ke(o.$slots,"default")]),_:3},16,["class"]))}}),Wt={async getPathList(){const{data:e}=await en.get("/workPath/getWorkPathList");return e},async createPath(e){const{data:t}=await en.post("/workPath/createWorkPath",e);return t},async updateWorkPath(e,t){await en.put(`/workPath/updateWorkPath/${e}`,{edges:t})},async optimizeWorkPath(e){await en.put(`/workPath/optimizeWorkPath/${e}`)},async deleteWorkPath(e){await en.delete(`/workPath/deleteWorkPath/${e}`)}};function ip(e){const t={width:`${e.width}px`,height:`${e.height}px`,overflow:"visible",whiteSpace:"nowrap"};return e.isWorkingOnHoliday||(t.backgroundColor="#f3f4f6",t.borderColor="#d1d5db"),{id:`work-${e.workId}`,type:"default",position:{x:e.positionX,y:e.positionY},data:{label:e.workName,work:e,originalX:e.positionX},style:t,sourcePosition:re.Right,targetPosition:re.Left,connectable:!0}}function sp(e){return e.map(t=>ip(t))}function ap(e){const t=new Date,n=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,o=ce({division_id:"",work_type_id:"",sub_work_type_id:"",component_type_id:"",zone_id:"",floor_id:"",section_id:"",usage_id:"",start_date:n,work_days:7,isWorkingOnHoliday:!0}),r=ce([]),i=ce([]),s=ce([]),a=ce([]),l=ce({zone:[],floor:[],section:[],usage:[]}),u=ce([]),d=ce(!1),h=ce(!1),v=ce(!1),y=async()=>{const{start_date:E,work_days:I,sub_work_type_id:f,component_type_id:w,zone_id:D,floor_id:V,section_id:z,usage_id:H,isWorkingOnHoliday:Q}=o.value;if(!f)return alert(" ."),!1;if(!w)return alert(" ."),!1;if(!E)return alert(" ."),!1;d.value=!0;try{const O={subWorkTypeId:Number(f),componentTypeId:Number(w),startDate:E,workLeadTime:I,isWorkingOnHoliday:Q,...D&&D!=="none"&&{zoneId:Number(D)},...V&&V!=="none"&&{floorId:Number(V)},...z&&z!=="none"&&{sectionId:Number(z)},...H&&H!=="none"&&{usageId:Number(H)}};return await Lt.createWork(O),await e(),!0}catch(O){console.error("  :",O);const F=O.response?.data?.message||O.message;return alert(F),!1}finally{d.value=!1}},C=async()=>{try{const[E,I,f,w,D,V,z]=await Promise.all([vt.getDivisionList(),vt.getZoneList(),vt.getFloorList(),vt.getSectionList(),vt.getUsageList(),Qs.getProjects(),vt.getComponentTypeList()]);r.value=E,u.value=V,a.value=z,l.value={zone:I,floor:f,section:w,usage:D}}catch(E){console.error("   :",E)}},S=async E=>{h.value=!0,i.value=[],s.value=[],o.value.work_type_id="",o.value.sub_work_type_id="";try{i.value=await vt.getWorkTypeList(E)}catch(I){console.error("WorkTypes  :",I)}finally{h.value=!1}},N=async E=>{v.value=!0,s.value=[],o.value.sub_work_type_id="";try{s.value=await vt.getSubWorkTypeList(E)}catch(I){console.error("SubWorkTypes  :",I)}finally{v.value=!1}};return $e(()=>o.value.division_id,E=>{E?S(Number(E)):(i.value=[],s.value=[],o.value.work_type_id="",o.value.sub_work_type_id="")}),$e(()=>o.value.work_type_id,E=>{E?N(Number(E)):(s.value=[],o.value.sub_work_type_id="")}),{workFormState:o,divisions:r,workTypes:i,subWorkTypes:s,componentTypes:a,locationOptions:l,projects:u,isCreatingWork:d,isLoadingWorkTypes:h,isLoadingSubWorkTypes:v,createWork:y,loadInitialData:C}}function lp(e){return e.isActivated?e.isHoliday?"holiday":"normal":"deactivated"}const up=["","","","","","",""],Oe=40,Qe=20,ni=Qe*5;function ko(e,t,n){if(e.length===0)return[];const o=[];let r=e[0][t],i=e[0].dayIndex,s=1;for(let a=1;a<e.length;a++){const l=e[a];l[t]===r?s++:(o.push({startIndex:i,span:s,label:n(e[a-1])}),r=l[t],i=l.dayIndex,s=1)}return o.push({startIndex:i,span:s,label:n(e[e.length-1])}),o}function cp(e,t,n){const o=new Date(e.date),r=lp(e);return{date:o,dateString:e.date,dayIndex:t,dayOfMonth:o.getDate(),dayName:up[e.dayOfWeek],isHoliday:r==="holiday",holidayName:e.holidayName,isDeactivated:r==="deactivated",deactivatedReason:e.deactivatedReason,isToday:e.date===n,year:o.getFullYear(),month:o.getMonth()+1,weekNumber:e.weekNumber}}function dp(e,t){const n=ce(null),o=ce(0);let r=null;const i=new Date,s=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`,a=le(()=>{if(!t.value?.dates.length)return 0;const f=t.value.dates.findIndex(w=>w.date===s);return f>=0?f:0}),l=le(()=>t.value?.dates.length?t.value.dates.map((f,w)=>{const D=w-a.value;return cp(f,D,s)}):[]),u=le(()=>{if(!o.value||l.value.length===0)return[];const f=e.value,w=-f.x/f.zoom,D=w+o.value/f.zoom,V=Math.floor(w/Oe),z=Math.ceil(D/Oe);return l.value.filter(H=>H.dayIndex>=V&&H.dayIndex<=z)}),d=le(()=>{if(l.value.length===0)return{startX:0,endX:0,width:0};const f=l.value[0],w=l.value[l.value.length-1],D=f.dayIndex*Oe,V=(w.dayIndex+1)*Oe;return{startX:D,endX:V,width:V-D}}),h=le(()=>ko(u.value,"year",f=>`${f.year}`)),v=le(()=>ko(u.value,"month",f=>`${f.month}`)),y=le(()=>ko(u.value,"weekNumber",f=>`W${f.weekNumber}`)),C=le(()=>l.value.filter(f=>f.isHoliday).map(f=>f.dayIndex)),S=le(()=>l.value.filter(f=>f.isDeactivated).map(f=>f.dayIndex)),N=le(()=>{const f=l.value.find(w=>w.isToday);return f?f.dayIndex:null});return{containerRef:n,containerWidth:o,allProjectDates:l,visibleDates:u,projectGridBounds:d,yearCells:h,monthCells:v,weekCells:y,holidayIndices:C,deactivatedIndices:S,todayInProject:N,setupResizeObserver:()=>{n.value&&(r=new ResizeObserver(f=>{const w=f[0];w&&(o.value=w.contentRect.width)}),r.observe(n.value))},cleanupResizeObserver:()=>{r&&(r.disconnect(),r=null)}}}function fp(e){if(e.length===0)return[];const t=new Set(e.map(a=>a.sourceWorkId)),n=new Set(e.map(a=>a.targetWorkId));let o=null;for(const a of t)if(!n.has(a)){o=a;break}o||(o=e[0].sourceWorkId);const r=new Map(e.map(a=>[a.sourceWorkId,a.targetWorkId])),i=[o];let s=o;for(;r.has(s);){const a=r.get(s);if(i.includes(a))break;i.push(a),s=a}return i}function hp(e){const t=[];for(let n=0;n<e.length-1;n++)t.push({sourceWorkId:e[n],targetWorkId:e[n+1]});return t}function pp(e,t,n,o){const r=ce(null),i=ce([]),s=ce(!1),a=le(()=>r.value!==null),l=le(()=>r.value?n.value.find(w=>w.workPathId===r.value)?.workPathColor||"#3b82f6":null),u=le(()=>{if(i.value.length===0)return[];const f=new Set(i.value.map(O=>O.sourceWorkId)),w=new Set(i.value.map(O=>O.targetWorkId));let D=null;for(const O of f)if(!w.has(O)){D=O;break}if(D===null&&i.value.length>0&&(D=i.value[0].sourceWorkId),D===null)return[];const V=new Map;i.value.forEach(O=>{V.set(O.sourceWorkId,O.targetWorkId)});const z=[D];let H=D;const Q=new Set([D]);for(;V.has(H);){const O=V.get(H);if(Q.has(O))break;z.push(O),Q.add(O),H=O}return z.map(O=>{const F=e.value.find(k=>k.id===`work-${O}`);return{workId:O,workName:F?.data.work?.workName||`Work ${O}`}})}),d=le(()=>{const f=new Set;return i.value.forEach(w=>{f.add(w.sourceWorkId),f.add(w.targetWorkId)}),f}),h=le(()=>a.value?Array.from(d.value).map(f=>{const w=e.value.find(V=>V.id===`work-${f}`);if(!w)return null;const D=w.data.work;return{workId:f,x:w.position.x+D.width,y:w.position.y}}).filter(f=>f!==null):[]),v=le(()=>{if(!r.value)return t.value.map(z=>{const H=z.data?.offset||0;return{...z,style:{stroke:z.style?.stroke,transform:`translate(${H}px, ${H}px)`}}});const w=n.value.find(z=>z.workPathId===r.value)?.workPathColor||"#3b82f6",D=t.value.filter(z=>z.data?.pathId!==r.value).map(z=>{const H=z.data?.offset||0;return{...z,style:{stroke:"#9ca3af",strokeWidth:1,transform:`translate(${H}px, ${H}px)`}}}),V=i.value.map((z,H)=>({id:`editing-${r.value}-${z.sourceWorkId}-${z.targetWorkId}-${H}`,source:`work-${z.sourceWorkId}`,target:`work-${z.targetWorkId}`,type:"smoothstep",pathOptions:{borderRadius:20,offset:15},style:{stroke:w,strokeWidth:2},data:{pathId:r.value,editing:!0}}));return[...D,...V]});return{selectedPathId:r,editingPathEdges:i,isUpdatingPath:s,isPathEditMode:a,selectedPathColor:l,orderedChainNodes:u,pathNodeIds:d,deleteButtonNodes:h,styledEdges:v,togglePathSelection:f=>{if(r.value===f)r.value=null,i.value=[];else{r.value=f;const w=n.value.find(D=>D.workPathId===f);i.value=w?.edges?[...w.edges]:[]}},submitPathUpdate:async()=>{if(r.value){s.value=!0;try{await Wt.updateWorkPath(r.value,i.value),await o(),r.value=null,i.value=[]}catch(f){console.error("  :",f);const w=f.response?.data?.message||f.message;alert(w)}finally{s.value=!1}}},cancelPathEdit:()=>{r.value=null,i.value=[]},onConnect:f=>{if(!a.value)return;const w=parseInt(f.source.replace("work-","")),D=parseInt(f.target.replace("work-",""));if(w===D||i.value.some(F=>F.sourceWorkId===w&&F.targetWorkId===D))return;const z=fp(i.value),H=z.indexOf(w),Q=z.indexOf(D);let O;if(H===-1&&Q===-1){i.value.push({sourceWorkId:w,targetWorkId:D});return}else if(H===-1)O=[...z],O.splice(Q,0,w);else if(Q===-1)O=[...z],O.splice(H+1,0,D);else{if(H+1===Q)return;{O=z.filter(k=>k!==D);const F=O.indexOf(w);O.splice(F+1,0,D)}}i.value=hp(O)},removeNodeFromPath:f=>{const w=i.value.find(V=>V.targetWorkId===f),D=i.value.find(V=>V.sourceWorkId===f);i.value=i.value.filter(V=>V.sourceWorkId!==f&&V.targetWorkId!==f),w&&D&&i.value.push({sourceWorkId:w.sourceWorkId,targetWorkId:D.targetWorkId})},clearPathEditMode:()=>{r.value=null,i.value=[]}}}function vp(e,t){const n=ce(null),o=ce(!1),r=ce({startDate:"",workLeadTime:1,isWorkingOnHoliday:!0}),i=le(()=>n.value?e.value.find(d=>d.id===`work-${n.value}`)?.data.work:null);return $e(i,u=>{u&&(r.value={startDate:u.startDate,workLeadTime:u.workLeadTime,isWorkingOnHoliday:u.isWorkingOnHoliday})}),{selectedWorkId:n,isUpdatingWork:o,workEditForm:r,selectedWork:i,submitWorkUpdate:async()=>{if(n.value){o.value=!0;try{await Lt.updateWork(n.value,{startDate:r.value.startDate,workLeadTime:r.value.workLeadTime,isWorkingOnHoliday:r.value.isWorkingOnHoliday}),await t(),n.value=null}catch(u){console.error("  :",u);const d=u.response?.data?.message||u.message;alert(d)}finally{o.value=!1}}},clearSelection:()=>{n.value=null},selectWork:u=>{n.value=u}}}const gp={class:"flex gap-4 h-full"},mp={style:{position:"absolute",width:"100%",height:"100%","pointer-events":"none","z-index":"0"}},yp=["transform"],_p=["x","width"],wp=["x","width"],xp=["x","width"],bp=["x","width"],kp=["x"],Sp={class:"px-3 py-2 text-sm bg-popover border border-border rounded-lg shadow-lg"},Ep={class:"text-muted-foreground"},Np={class:"font-medium"},Cp={class:"font-medium"},$p={class:"font-medium"},Ip={class:"font-medium"},Mp=["onClick"],Dp={key:0,class:"space-y-4"},Pp={class:"border border-border rounded-lg overflow-hidden"},Tp={class:"p-3 pt-0 space-y-3"},Ap={class:"space-y-2"},Op={class:"space-y-2"},zp={class:"space-y-2"},Bp={class:"space-y-2"},Vp={class:"space-y-1"},Hp={class:"flex items-center gap-1"},Rp={class:"space-y-1"},Wp={class:"flex items-center gap-1"},Lp={class:"space-y-1"},Fp={class:"flex rounded-lg border border-border overflow-hidden"},Yp={key:0,class:"border border-primary rounded-lg p-3 space-y-3 bg-primary/5"},Xp={class:"flex justify-between items-center"},Gp={class:"font-medium text-sm"},Up={class:"space-y-2"},Zp={class:"space-y-1"},Kp={class:"flex items-center gap-1"},qp={class:"space-y-1"},jp={class:"flex items-center gap-1"},Jp={class:"space-y-1"},Qp={class:"flex rounded-lg border border-border overflow-hidden"},ev={key:1,class:"text-sm text-muted-foreground text-center py-4 border border-dashed border-border rounded-lg"},tv={key:1,class:"space-y-4"},nv={class:"border border-border rounded-lg overflow-hidden"},ov={class:"p-3 pt-0 space-y-3"},rv={class:"space-y-1"},iv={class:"space-y-1"},sv={class:"flex items-center gap-2"},av={key:0,class:"border border-primary rounded-lg p-3 space-y-3 bg-primary/5"},lv={class:"flex justify-between items-center"},uv={class:"font-medium text-sm"},cv={class:"space-y-1"},dv={key:0,class:"text-sm flex flex-wrap items-center gap-1"},fv={class:"font-medium bg-background px-1.5 py-0.5 rounded border border-border"},hv={key:0,class:"text-muted-foreground"},pv={key:1,class:"text-xs text-muted-foreground/70"},vv={class:"flex gap-2"},gv={class:"space-y-2"},mv={class:"text-xs font-medium text-muted-foreground"},yv={class:"space-y-2 max-h-64 overflow-y-auto"},_v=["onClick"],wv={class:"flex items-center gap-2"},xv={class:"font-medium text-sm"},bv={class:"text-xs text-muted-foreground mt-1"},kv={key:0,class:"text-sm text-muted-foreground text-center py-4"},Sv={key:1,class:"text-xs text-muted-foreground text-center py-2 border border-dashed border-border rounded-lg"},Ev=ge({__name:"Viewer2dArea",emits:["works-loaded"],setup(e,{emit:t}){const n=t,o=ce([]),r=ce([]),{zoomIn:i,zoomOut:s,viewport:a}=Te(),l=ce([]),u=ce({pathName:"",pathColor:"#3b82f6"}),d=ce(!1),h=ce(!1),v=ce(!1),y=ce("single"),C=ce(!1),S=ce(!1),N=ce("work"),E=ce(!1),I=ce({visible:!1,nodeX:0,nodeY:0,workId:null,startDate:"",workLeadTime:0,completionDate:""}),f=ce(!1),w=ce(!1),D=ce("manage"),V=js(),z=Js(),H=async()=>{V.selectedProjectId&&await z.getCalendar(V.selectedProjectId)},Q=le(()=>z.calendarData),O=async()=>{h.value=!0;try{const[ae,g]=await Promise.all([Lt.getWorkList(),Wt.getPathList()]);o.value=sp(ae),l.value=g;const G=new Map;r.value=g.flatMap(A=>A.edges.map(Fe=>{const Ue=`${Fe.sourceWorkId}-${Fe.targetWorkId}`,St=G.get(Ue)||0;G.set(Ue,St+1);const uo=St,Is=uo===0?0:(uo%2===1?1:-1)*Math.ceil(uo/2)*3;return{id:`edge-${A.workPathId}-${Fe.sourceWorkId}-${Fe.targetWorkId}`,source:`work-${Fe.sourceWorkId}`,target:`work-${Fe.targetWorkId}`,type:"smoothstep",pathOptions:{borderRadius:20,offset:15},style:{stroke:A.workPathColor},data:{pathId:A.workPathId,pathName:A.workPathName,offset:Is}}})),n("works-loaded",ae)}catch(ae){console.error("  :",ae)}finally{h.value=!1}},F=ae=>{y.value=ae,v.value=!0},k=async()=>{C.value=!0;try{y.value==="single"&&K.value?await Wt.optimizeWorkPath(K.value):await Wt.optimizeWorkPath("all"),await O(),v.value=!1}catch(ae){console.error(" :",ae);const g=ae.response?.data?.message||ae.message;alert(g)}finally{C.value=!1}},ie=ae=>{N.value=ae,S.value=!0},b=async()=>{E.value=!0;try{N.value==="work"&&lo.value?(await Lt.deleteWork(lo.value),Qt(),I.value.visible=!1):N.value==="path"&&K.value&&(await Wt.deleteWorkPath(K.value),kt()),await O(),S.value=!1}catch(ae){console.error(" :",ae);const g=ae.response?.data?.message||ae.message;alert(g)}finally{E.value=!1}},{workFormState:M,divisions:$,workTypes:W,subWorkTypes:Y,componentTypes:Z,locationOptions:U,projects:te,isCreatingWork:ue,isLoadingWorkTypes:fe,isLoadingSubWorkTypes:me,createWork:J,loadInitialData:ne}=ap(O);le(()=>te.value.find(ae=>ae.id===V.selectedProjectId));const{containerRef:se,allProjectDates:we,visibleDates:ve,projectGridBounds:ye,yearCells:Ie,monthCells:de,weekCells:_e,holidayIndices:_,deactivatedIndices:p,todayInProject:x,setupResizeObserver:m,cleanupResizeObserver:T}=dp(a,Q),{selectedPathId:K,isUpdatingPath:ee,isPathEditMode:j,selectedPathColor:oe,orderedChainNodes:he,pathNodeIds:xe,deleteButtonNodes:Ee,styledEdges:Ge,togglePathSelection:bt,submitPathUpdate:ao,cancelPathEdit:kt,onConnect:gs,removeNodeFromPath:ms}=pp(o,r,l,O);$e(D,ae=>{ae!=="path"&&kt()}),$e([j,oe,xe],([ae,g,G])=>{o.value=o.value.map(A=>{const Fe=parseInt(A.id.replace("work-","")),Ue=A.data.work,St={width:`${Ue.width}px`,height:`${Ue.height}px`,overflow:"visible",whiteSpace:"nowrap"};return Ue.isWorkingOnHoliday||(St.backgroundColor="#f3f4f6",St.borderColor="#d1d5db"),ae&&g&&G.has(Fe)?{...A,style:{...St,border:`2px solid ${g}`,boxShadow:`0 0 8px ${g}50`}}:{...A,style:St}})},{deep:!0});const{selectedWorkId:lo,isUpdatingWork:Jo,workEditForm:We,selectedWork:Qo,submitWorkUpdate:ys,clearSelection:Qt,selectWork:_s}=vp(o,O),ws=async()=>{if(!u.value.pathName.trim()){alert("  .");return}d.value=!0;try{await Wt.createPath({workPathName:u.value.pathName,workPathColor:u.value.pathColor}),u.value.pathName="",u.value.pathColor="#3b82f6",await O()}catch(ae){console.error("  :",ae);const g=ae.response?.data?.message||ae.message;alert(g)}finally{d.value=!1}},xs=ae=>{const g=ae.node.data.work;if(g&&!j.value){if(lo.value===g.workId){Qt(),I.value.visible=!1;return}_s(g.workId),I.value={visible:!0,nodeX:ae.node.position.x+g.width/2,nodeY:ae.node.position.y-8,workId:g.workId,startDate:g.startDate,workLeadTime:g.workLeadTime,completionDate:g.completionDate}}},er=ae=>`${ae.getFullYear()}-${String(ae.getMonth()+1).padStart(2,"0")}-${String(ae.getDate()).padStart(2,"0")}`,tr=(ae,g)=>{if(!ae.start_date)return;const G=new Date(ae.start_date);G.setDate(G.getDate()+g),ae.start_date=er(G)},nr=ae=>{if(!We.value.startDate)return;const g=new Date(We.value.startDate);g.setDate(g.getDate()+ae),We.value.startDate=er(g)},bs=async()=>{await J()&&(f.value=!1)},ks=async()=>{await ys(),I.value.visible=!1},Ss=ae=>{bt(ae),K.value===ae&&(Qt(),I.value.visible=!1)},Es=()=>{I.value.visible=!1,j.value||Qt()},Ns=async ae=>{const g=ae.node.data.work;if(!g)return;const G=ae.node.position.y;if(G!==g.positionY)try{await Lt.updateWorkPositionY(g.workId,G);const A=await Lt.getWork(g.workId),Fe=o.value.findIndex(Ue=>Ue.id===`work-${g.workId}`);if(Fe!==-1){const Ue=o.value[Fe];o.value[Fe]={...Ue,position:{x:Ue.position.x,y:A.positionY},data:{...Ue.data,work:A}}}}catch(A){console.error("  :",A),ae.node.position.y=g.positionY}},Cs=ae=>{const g=ae.node.data.originalX;g!==void 0&&ae.node.position.x!==g&&(ae.node.position.x=g);const G=ae.node.data.work;G&&I.value.visible&&I.value.workId===G.workId&&(I.value.nodeX=ae.node.position.x+G.width/2,I.value.nodeY=ae.node.position.y-8)},$s=ae=>{ae.ctrlKey&&(ae.preventDefault(),ae.deltaY<0?i():s())};return it(async()=>{ne(),await H(),O(),m()}),ri(()=>{T()}),(ae,g)=>(P(),X(Ce,null,[B("div",gp,[B("div",{ref_key:"containerRef",ref:se,class:"relative flex-1 min-w-0 border border-border rounded-lg overflow-hidden",onWheel:$s},[B("div",{class:"absolute top-0 left-0 right-0 bg-muted/80 border-b border-border z-20 overflow-hidden",style:ze({height:`${c(ni)}px`})},[B("div",{class:"absolute w-full h-full",style:ze({transform:`translateX(${c(a).x}px)`})},[(P(!0),X(Ce,null,Ae(c(Ie),G=>(P(),X("div",{key:`year-${G.startIndex}`,class:"absolute flex items-center justify-center text-xs font-medium border border-border bg-muted/60",style:ze({left:`${G.startIndex*c(Oe)*c(a).zoom}px`,width:`${G.span*c(Oe)*c(a).zoom}px`,height:`${c(Qe)}px`,top:"0px"})},Ne(G.label),5))),128)),(P(!0),X(Ce,null,Ae(c(de),G=>(P(),X("div",{key:`month-${G.startIndex}`,class:"absolute flex items-center justify-center text-xs font-medium border border-border",style:ze({left:`${G.startIndex*c(Oe)*c(a).zoom}px`,width:`${G.span*c(Oe)*c(a).zoom}px`,height:`${c(Qe)}px`,top:`${c(Qe)}px`})},Ne(G.label),5))),128)),(P(!0),X(Ce,null,Ae(c(_e),G=>(P(),X("div",{key:`week-${G.startIndex}`,class:"absolute flex items-center justify-center text-xs border border-border",style:ze({left:`${G.startIndex*c(Oe)*c(a).zoom}px`,width:`${G.span*c(Oe)*c(a).zoom}px`,height:`${c(Qe)}px`,top:`${c(Qe)*2}px`})},Ne(G.label),5))),128)),(P(!0),X(Ce,null,Ae(c(ve),G=>(P(),X("div",{key:`date-${G.dayIndex}`,class:Re(["absolute flex items-center justify-center text-xs border-r border-b border-border/50",{"font-medium":G.isToday,"text-red-600":G.isHoliday&&!G.isDeactivated}]),style:ze({left:`${G.dayIndex*c(Oe)*c(a).zoom}px`,width:`${c(Oe)*c(a).zoom}px`,height:`${c(Qe)}px`,top:`${c(Qe)*3}px`,backgroundColor:G.isToday?"rgba(59, 130, 246, 0.3)":G.isDeactivated?"rgba(107, 114, 128, 0.5)":G.isHoliday?"rgba(239, 68, 68, 0.3)":"#ffffff"})},Ne(G.dayOfMonth),7))),128)),(P(!0),X(Ce,null,Ae(c(ve),G=>(P(),X("div",{key:`day-${G.dayIndex}`,class:Re(["absolute flex items-center justify-center text-[10px] border-r border-border/50",{"font-medium":G.isToday,"text-red-600":G.isHoliday&&!G.isDeactivated}]),style:ze({left:`${G.dayIndex*c(Oe)*c(a).zoom}px`,width:`${c(Oe)*c(a).zoom}px`,height:`${c(Qe)}px`,top:`${c(Qe)*4}px`,backgroundColor:G.isToday?"rgba(59, 130, 246, 0.3)":G.isDeactivated?"rgba(107, 114, 128, 0.5)":G.isHoliday?"rgba(239, 68, 68, 0.3)":"#ffffff"})},Ne(G.dayName),7))),128))],4)],4),L(c(Eh),{nodes:o.value,"onUpdate:nodes":g[0]||(g[0]=G=>o.value=G),edges:c(Ge),class:Re(["w-full h-full",{"path-mode":D.value==="path"}]),style:ze({paddingTop:`${c(ni)}px`}),"fit-view-on-init":"","min-zoom":.5,"zoom-on-scroll":!1,onNodeClick:xs,onNodeDrag:Cs,onNodeDragStop:Ns,onPaneClick:Es,onConnect:c(gs)},{default:R(()=>[(P(),X("svg",mp,[g[39]||(g[39]=B("defs",null,[B("pattern",{id:"vertical-lines",x:"0",y:"0",width:"40",height:"100",patternUnits:"userSpaceOnUse"},[B("rect",{x:"0",y:"0",width:"0.2",height:"100",fill:"#999"})])],-1)),B("g",{transform:`translate(${c(a).x}, ${c(a).y}) scale(${c(a).zoom})`},[(P(!0),X(Ce,null,Ae(c(p),G=>(P(),X("rect",{key:`deactivated-bg-${G}`,x:G*c(Oe),y:"-50000",width:c(Oe),height:"100000",fill:"rgba(107, 114, 128, 0.2)"},null,8,_p))),128)),(P(!0),X(Ce,null,Ae(c(_),G=>(P(),X("rect",{key:`holiday-bg-${G}`,x:G*c(Oe),y:"-50000",width:c(Oe),height:"100000",fill:"rgba(239, 68, 68, 0.1)"},null,8,wp))),128)),c(x)!==null?(P(),X("rect",{key:0,x:c(x)*c(Oe),y:"-50000",width:c(Oe),height:"100000",fill:"rgba(59, 130, 246, 0.3)"},null,8,xp)):De("",!0),B("rect",{x:c(ye).startX,y:"-50000",width:c(ye).width,height:"100000",fill:"url(#vertical-lines)"},null,8,bp),(P(!0),X(Ce,null,Ae(c(we),G=>(P(),X(Ce,{key:`reason-${G.dayIndex}`},[G.holidayName||G.deactivatedReason?(P(),X("text",{key:0,x:G.dayIndex*c(Oe)+c(Oe)/2,y:"0",fill:"currentColor","fill-opacity":.3,"font-size":"11","text-anchor":"middle","dominant-baseline":"middle",style:{"writing-mode":"tb","glyph-orientation-vertical":"0"}},Ne(G.deactivatedReason||G.holidayName),9,kp)):De("",!0)],64))),128))],8,yp)])),I.value.visible?(P(),X("div",{key:0,class:"absolute z-10 pointer-events-none",style:ze({left:`${I.value.nodeX*c(a).zoom+c(a).x}px`,top:`${I.value.nodeY*c(a).zoom+c(a).y}px`,transform:`translateX(-50%) translateY(-100%) scale(${c(a).zoom})`,transformOrigin:"bottom center"})},[B("div",Sp,[g[44]||(g[44]=B("div",{class:"absolute left-1/2 -bottom-2 -translate-x-1/2 border-l-8 border-r-8 border-t-8 border-transparent border-t-border"},null,-1)),g[45]||(g[45]=B("div",{class:"absolute left-1/2 -bottom-[7px] -translate-x-1/2 border-l-[7px] border-r-[7px] border-t-[7px] border-transparent border-t-popover"},null,-1)),B("p",Ep,[g[40]||(g[40]=pe("ID: ",-1)),B("span",Np,Ne(I.value.workId),1)]),B("p",null,[g[41]||(g[41]=pe(": ",-1)),B("span",Cp,Ne(I.value.startDate),1)]),B("p",null,[g[42]||(g[42]=pe(": ",-1)),B("span",$p,Ne(I.value.workLeadTime)+"",1)]),B("p",null,[g[43]||(g[43]=pe(": ",-1)),B("span",Ip,Ne(I.value.completionDate),1)])])],4)):De("",!0),c(j)?(P(!0),X(Ce,{key:1},Ae(c(Ee),G=>(P(),X("button",{key:`delete-${G.workId}`,class:"absolute z-20 w-5 h-5 flex items-center justify-center bg-red-500 hover:bg-red-600 text-white rounded-full shadow-md transition-colors cursor-pointer",style:ze({left:`${G.x*c(a).zoom+c(a).x}px`,top:`${G.y*c(a).zoom+c(a).y}px`,transform:`translate(-50%, -50%) scale(${Math.min(c(a).zoom,1)})`}),onClick:A=>c(ms)(G.workId)},[...g[46]||(g[46]=[B("span",{class:"text-xs font-bold"},"",-1)])],12,Mp))),128)):De("",!0),L(c(rp),{position:"bottom-right"})]),_:1},8,["nodes","edges","class","style","onConnect"]),g[47]||(g[47]=B("div",{class:"absolute bottom-3 right-16 text-xs text-muted-foreground/60 bg-background/50 px-2 py-1 rounded"}," Ctrl + :  | :  ",-1))],544),L(qs,{modelValue:D.value,"onUpdate:modelValue":g[36]||(g[36]=G=>D.value=G),tabs:[{value:"manage",label:" "},{value:"path",label:" "}]},{default:R(({activeTab:G})=>[G==="manage"?(P(),X("div",Dp,[B("div",Pp,[B("button",{class:"w-full flex items-center justify-between p-3 text-sm font-medium hover:bg-muted/50 transition-colors",onClick:g[1]||(g[1]=A=>f.value=!f.value)},[g[49]||(g[49]=B("span",null," ",-1)),(P(),X("svg",{class:Re(["w-4 h-4 transition-transform",{"rotate-180":f.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...g[48]||(g[48]=[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),co(B("div",Tp,[B("div",Ap,[g[50]||(g[50]=B("p",{class:"text-xs font-medium text-muted-foreground"}," ",-1)),L(c(dt),{modelValue:c(M).division_id,"onUpdate:modelValue":g[2]||(g[2]=A=>c(M).division_id=A)},{default:R(()=>[L(c(ft),{class:"w-full h-8 text-sm"},{default:R(()=>[L(c(ht),{placeholder:""})]),_:1}),L(c(pt),null,{default:R(()=>[(P(!0),X(Ce,null,Ae(c($),A=>(P(),Se(c(Ze),{key:A.id,value:String(A.id)},{default:R(()=>[pe(Ne(A.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),L(c(dt),{modelValue:c(M).work_type_id,"onUpdate:modelValue":g[3]||(g[3]=A=>c(M).work_type_id=A),disabled:!c(M).division_id||c(fe)},{default:R(()=>[L(c(ft),{class:"w-full h-8 text-sm"},{default:R(()=>[L(c(ht),{placeholder:c(fe)?"...":""},null,8,["placeholder"])]),_:1}),L(c(pt),null,{default:R(()=>[(P(!0),X(Ce,null,Ae(c(W),A=>(P(),Se(c(Ze),{key:A.id,value:String(A.id)},{default:R(()=>[pe(Ne(A.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),L(c(dt),{modelValue:c(M).sub_work_type_id,"onUpdate:modelValue":g[4]||(g[4]=A=>c(M).sub_work_type_id=A),disabled:!c(M).work_type_id||c(me)},{default:R(()=>[L(c(ft),{class:"w-full h-8 text-sm"},{default:R(()=>[L(c(ht),{placeholder:c(me)?"...":""},null,8,["placeholder"])]),_:1}),L(c(pt),null,{default:R(()=>[(P(!0),X(Ce,null,Ae(c(Y),A=>(P(),Se(c(Ze),{key:A.id,value:String(A.id)},{default:R(()=>[pe(Ne(A.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),B("div",Op,[g[51]||(g[51]=B("p",{class:"text-xs font-medium text-muted-foreground"}," ",-1)),L(c(dt),{modelValue:c(M).component_type_id,"onUpdate:modelValue":g[5]||(g[5]=A=>c(M).component_type_id=A)},{default:R(()=>[L(c(ft),{class:"w-full h-8 text-sm"},{default:R(()=>[L(c(ht),{placeholder:""})]),_:1}),L(c(pt),null,{default:R(()=>[(P(!0),X(Ce,null,Ae(c(Z),A=>(P(),Se(c(Ze),{key:A.id,value:String(A.id)},{default:R(()=>[pe(Ne(A.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),B("div",zp,[g[56]||(g[56]=B("p",{class:"text-xs font-medium text-muted-foreground"}," ",-1)),L(c(dt),{modelValue:c(M).zone_id,"onUpdate:modelValue":g[6]||(g[6]=A=>c(M).zone_id=A)},{default:R(()=>[L(c(ft),{class:"w-full h-8 text-sm"},{default:R(()=>[L(c(ht),{placeholder:"Zone"})]),_:1}),L(c(pt),null,{default:R(()=>[L(c(Ze),{value:"none"},{default:R(()=>[...g[52]||(g[52]=[pe("",-1)])]),_:1}),(P(!0),X(Ce,null,Ae(c(U).zone,A=>(P(),Se(c(Ze),{key:A.id,value:String(A.id)},{default:R(()=>[pe(Ne(A.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),L(c(dt),{modelValue:c(M).floor_id,"onUpdate:modelValue":g[7]||(g[7]=A=>c(M).floor_id=A)},{default:R(()=>[L(c(ft),{class:"w-full h-8 text-sm"},{default:R(()=>[L(c(ht),{placeholder:"Floor"})]),_:1}),L(c(pt),null,{default:R(()=>[L(c(Ze),{value:"none"},{default:R(()=>[...g[53]||(g[53]=[pe("",-1)])]),_:1}),(P(!0),X(Ce,null,Ae(c(U).floor,A=>(P(),Se(c(Ze),{key:A.id,value:String(A.id)},{default:R(()=>[pe(Ne(A.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),L(c(dt),{modelValue:c(M).section_id,"onUpdate:modelValue":g[8]||(g[8]=A=>c(M).section_id=A)},{default:R(()=>[L(c(ft),{class:"w-full h-8 text-sm"},{default:R(()=>[L(c(ht),{placeholder:"Section"})]),_:1}),L(c(pt),null,{default:R(()=>[L(c(Ze),{value:"none"},{default:R(()=>[...g[54]||(g[54]=[pe("",-1)])]),_:1}),(P(!0),X(Ce,null,Ae(c(U).section,A=>(P(),Se(c(Ze),{key:A.id,value:String(A.id)},{default:R(()=>[pe(Ne(A.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),L(c(dt),{modelValue:c(M).usage_id,"onUpdate:modelValue":g[9]||(g[9]=A=>c(M).usage_id=A)},{default:R(()=>[L(c(ft),{class:"w-full h-8 text-sm"},{default:R(()=>[L(c(ht),{placeholder:"Usage"})]),_:1}),L(c(pt),null,{default:R(()=>[L(c(Ze),{value:"none"},{default:R(()=>[...g[55]||(g[55]=[pe("",-1)])]),_:1}),(P(!0),X(Ce,null,Ae(c(U).usage,A=>(P(),Se(c(Ze),{key:A.id,value:String(A.id)},{default:R(()=>[pe(Ne(A.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),B("div",Bp,[g[64]||(g[64]=B("p",{class:"text-xs font-medium text-muted-foreground"}," ",-1)),B("div",Vp,[g[59]||(g[59]=B("label",{class:"text-xs text-muted-foreground"},"",-1)),B("div",Hp,[L(c(Le),{variant:"outline",class:"h-10 w-10 text-xl font-bold p-0",disabled:!c(M).start_date,onClick:g[10]||(g[10]=A=>tr(c(M),-1))},{default:R(()=>[...g[57]||(g[57]=[pe("  ",-1)])]),_:1},8,["disabled"]),L(c(Bt),{modelValue:c(M).start_date,"onUpdate:modelValue":g[11]||(g[11]=A=>c(M).start_date=A),type:"date",class:"h-10 text-sm text-center flex-1"},null,8,["modelValue"]),L(c(Le),{variant:"outline",class:"h-10 w-10 text-xl font-bold p-0",disabled:!c(M).start_date,onClick:g[12]||(g[12]=A=>tr(c(M),1))},{default:R(()=>[...g[58]||(g[58]=[pe(" + ",-1)])]),_:1},8,["disabled"])])]),B("div",Rp,[g[62]||(g[62]=B("label",{class:"text-xs text-muted-foreground"},"",-1)),B("div",Wp,[L(c(Le),{variant:"outline",class:"h-10 w-10 text-xl font-bold p-0",disabled:c(M).work_days<=1,onClick:g[13]||(g[13]=A=>c(M).work_days=Math.max(1,c(M).work_days-1))},{default:R(()=>[...g[60]||(g[60]=[pe("  ",-1)])]),_:1},8,["disabled"]),L(c(Bt),{modelValue:c(M).work_days,"onUpdate:modelValue":g[14]||(g[14]=A=>c(M).work_days=A),type:"number",min:"1",class:"h-10 text-sm text-center flex-1"},null,8,["modelValue"]),L(c(Le),{variant:"outline",class:"h-10 w-10 text-xl font-bold p-0",onClick:g[15]||(g[15]=A=>c(M).work_days++)},{default:R(()=>[...g[61]||(g[61]=[pe(" + ",-1)])]),_:1})])]),B("div",Lp,[g[63]||(g[63]=B("label",{class:"text-xs text-muted-foreground"},"  ",-1)),B("div",Fp,[B("button",{type:"button",class:Re(["flex-1 py-2 text-sm font-medium transition-colors",c(M).isWorkingOnHoliday?"bg-primary text-primary-foreground":"bg-background hover:bg-muted"]),onClick:g[16]||(g[16]=A=>c(M).isWorkingOnHoliday=!0)},"   ",2),B("button",{type:"button",class:Re(["flex-1 py-2 text-sm font-medium transition-colors border-l border-border",c(M).isWorkingOnHoliday?"bg-background hover:bg-muted":"bg-primary text-primary-foreground"]),onClick:g[17]||(g[17]=A=>c(M).isWorkingOnHoliday=!1)},"   ",2)])])]),L(c(Le),{class:"w-full",disabled:c(ue),onClick:bs},{default:R(()=>[pe(Ne(c(ue)?" ...":" "),1)]),_:1},8,["disabled"])],512),[[rr,f.value]])]),c(Qo)?(P(),X("div",Yp,[B("div",Xp,[B("span",Gp,Ne(c(Qo).workName),1),B("button",{onClick:g[18]||(g[18]=A=>{c(Qt)(),I.value.visible=!1}),class:"text-muted-foreground hover:text-foreground transition-colors"},"  ")]),B("div",Up,[B("div",Zp,[g[67]||(g[67]=B("label",{class:"text-xs text-muted-foreground"},"",-1)),B("div",Kp,[L(c(Le),{variant:"outline",class:"h-10 w-10 text-xl font-bold p-0",disabled:!c(We).startDate,onClick:g[19]||(g[19]=A=>nr(-1))},{default:R(()=>[...g[65]||(g[65]=[pe("  ",-1)])]),_:1},8,["disabled"]),L(c(Bt),{modelValue:c(We).startDate,"onUpdate:modelValue":g[20]||(g[20]=A=>c(We).startDate=A),type:"date",class:"h-10 text-sm text-center flex-1"},null,8,["modelValue"]),L(c(Le),{variant:"outline",class:"h-10 w-10 text-xl font-bold p-0",disabled:!c(We).startDate,onClick:g[21]||(g[21]=A=>nr(1))},{default:R(()=>[...g[66]||(g[66]=[pe(" + ",-1)])]),_:1},8,["disabled"])])]),B("div",qp,[g[70]||(g[70]=B("label",{class:"text-xs text-muted-foreground"},"",-1)),B("div",jp,[L(c(Le),{variant:"outline",class:"h-10 w-10 text-xl font-bold p-0",disabled:c(We).workLeadTime<=1,onClick:g[22]||(g[22]=A=>c(We).workLeadTime=Math.max(1,c(We).workLeadTime-1))},{default:R(()=>[...g[68]||(g[68]=[pe("  ",-1)])]),_:1},8,["disabled"]),L(c(Bt),{modelValue:c(We).workLeadTime,"onUpdate:modelValue":g[23]||(g[23]=A=>c(We).workLeadTime=A),type:"number",min:"1",class:"h-10 text-sm text-center flex-1"},null,8,["modelValue"]),L(c(Le),{variant:"outline",class:"h-10 w-10 text-xl font-bold p-0",onClick:g[24]||(g[24]=A=>c(We).workLeadTime++)},{default:R(()=>[...g[69]||(g[69]=[pe(" + ",-1)])]),_:1})])]),B("div",Jp,[g[71]||(g[71]=B("label",{class:"text-xs text-muted-foreground"},"  ",-1)),B("div",Qp,[B("button",{type:"button",class:Re(["flex-1 py-2 text-sm font-medium transition-colors",c(We).isWorkingOnHoliday?"bg-primary text-primary-foreground":"bg-background hover:bg-muted"]),onClick:g[25]||(g[25]=A=>c(We).isWorkingOnHoliday=!0)},"   ",2),B("button",{type:"button",class:Re(["flex-1 py-2 text-sm font-medium transition-colors border-l border-border",c(We).isWorkingOnHoliday?"bg-background hover:bg-muted":"bg-primary text-primary-foreground"]),onClick:g[26]||(g[26]=A=>c(We).isWorkingOnHoliday=!1)},"   ",2)])])]),L(c(Le),{class:"w-full",disabled:c(Jo),onClick:ks},{default:R(()=>[pe(Ne(c(Jo)?" ...":""),1)]),_:1},8,["disabled"]),L(c(Le),{variant:"destructive",class:"w-full",onClick:g[27]||(g[27]=A=>ie("work"))},{default:R(()=>[...g[72]||(g[72]=[pe("  ",-1)])]),_:1})])):(P(),X("div",ev,"     "))])):G==="path"?(P(),X("div",tv,[B("div",nv,[B("button",{class:"w-full flex items-center justify-between p-3 text-sm font-medium hover:bg-muted/50 transition-colors",onClick:g[28]||(g[28]=A=>w.value=!w.value)},[g[74]||(g[74]=B("span",null," ",-1)),(P(),X("svg",{class:Re(["w-4 h-4 transition-transform",{"rotate-180":w.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...g[73]||(g[73]=[B("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),co(B("div",ov,[B("div",rv,[g[75]||(g[75]=B("label",{class:"text-xs text-muted-foreground"}," ",-1)),L(c(Bt),{modelValue:u.value.pathName,"onUpdate:modelValue":g[29]||(g[29]=A=>u.value.pathName=A),placeholder:"  ",class:"h-8 text-sm"},null,8,["modelValue"])]),B("div",iv,[g[76]||(g[76]=B("label",{class:"text-xs text-muted-foreground"}," ",-1)),B("div",sv,[co(B("input",{"onUpdate:modelValue":g[30]||(g[30]=A=>u.value.pathColor=A),type:"color",class:"w-10 h-8 rounded border border-border cursor-pointer"},null,512),[[Ws,u.value.pathColor]]),L(c(Bt),{modelValue:u.value.pathColor,"onUpdate:modelValue":g[31]||(g[31]=A=>u.value.pathColor=A),placeholder:"#3b82f6",class:"h-8 text-sm flex-1"},null,8,["modelValue"])])]),L(c(Le),{class:"w-full",disabled:d.value,onClick:ws},{default:R(()=>[pe(Ne(d.value?" ...":" "),1)]),_:1},8,["disabled"])],512),[[rr,w.value]])]),L(c(Le),{variant:"outline",class:"w-full",disabled:l.value.length===0,onClick:g[32]||(g[32]=A=>F("all"))},{default:R(()=>[...g[77]||(g[77]=[pe("    ",-1)])]),_:1},8,["disabled"]),c(K)?(P(),X("div",av,[B("div",lv,[B("span",uv,Ne(l.value.find(A=>A.workPathId===c(K))?.workPathName),1),B("button",{onClick:g[33]||(g[33]=(...A)=>c(kt)&&c(kt)(...A)),class:"text-muted-foreground hover:text-foreground transition-colors"},"  ")]),B("div",cv,[g[78]||(g[78]=B("p",{class:"text-xs text-muted-foreground"}," ",-1)),c(he).length>0?(P(),X("div",dv,[(P(!0),X(Ce,null,Ae(c(he),(A,Fe)=>(P(),X(Ce,{key:A.workId},[B("span",fv,Ne(A.workName),1),Fe<c(he).length-1?(P(),X("span",hv,"")):De("",!0)],64))),128))])):(P(),X("p",pv,"   .    . "))]),B("div",vv,[L(c(Le),{variant:"outline",class:"flex-1",onClick:c(kt)},{default:R(()=>[...g[79]||(g[79]=[pe("  ",-1)])]),_:1},8,["onClick"]),L(c(Le),{class:"flex-1",disabled:c(ee),onClick:c(ao)},{default:R(()=>[pe(Ne(c(ee)?" ...":""),1)]),_:1},8,["disabled","onClick"])]),L(c(Le),{variant:"outline",class:"w-full",onClick:g[34]||(g[34]=A=>F("single"))},{default:R(()=>[...g[80]||(g[80]=[pe("    ",-1)])]),_:1}),L(c(Le),{variant:"destructive",class:"w-full",onClick:g[35]||(g[35]=A=>ie("path"))},{default:R(()=>[...g[81]||(g[81]=[pe("   ",-1)])]),_:1})])):De("",!0),B("div",gv,[B("p",mv,"   ("+Ne(l.value.length)+") ",1),B("div",yv,[(P(!0),X(Ce,null,Ae(l.value,A=>(P(),X("div",{key:A.workPathId,class:Re(["p-3 border rounded-lg cursor-pointer transition-colors",{"border-primary bg-primary/10":c(K)===A.workPathId,"border-border hover:bg-muted/50":c(K)!==A.workPathId}]),onClick:Fe=>Ss(A.workPathId)},[B("div",wv,[B("div",{class:"w-3 h-3 rounded-full",style:ze({backgroundColor:A.workPathColor})},null,4),B("span",xv,Ne(A.workPathName),1)]),B("p",bv," : "+Ne(A.edges.length)+" ",1)],10,_v))),128)),l.value.length===0?(P(),X("p",kv,"   . ")):De("",!0)])]),c(K)?De("",!0):(P(),X("div",Sv,"    "))])):De("",!0)]),_:1},8,["modelValue"])]),L(c(Zr),{open:v.value,"onUpdate:open":g[37]||(g[37]=G=>v.value=G)},{default:R(()=>[L(c(jr),null,{default:R(()=>[L(c(ei),null,{default:R(()=>[L(c(ti),null,{default:R(()=>[...g[82]||(g[82]=[pe(" ",-1)])]),_:1}),L(c(Jr),null,{default:R(()=>[...g[83]||(g[83]=[pe("   ? ",-1),B("br",null,null,-1),pe("         . ",-1),B("br",null,null,-1),B("span",{class:"text-amber-600 font-medium"},"    .",-1)])]),_:1})]),_:1}),L(c(Qr),null,{default:R(()=>[L(c(qr),{disabled:C.value},{default:R(()=>[...g[84]||(g[84]=[pe("",-1)])]),_:1},8,["disabled"]),L(c(Kr),{disabled:C.value,onClick:k},{default:R(()=>[pe(Ne(C.value?" ...":""),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),L(c(Zr),{open:S.value,"onUpdate:open":g[38]||(g[38]=G=>S.value=G)},{default:R(()=>[L(c(jr),null,{default:R(()=>[L(c(ei),null,{default:R(()=>[L(c(ti),null,{default:R(()=>[...g[85]||(g[85]=[pe(" ",-1)])]),_:1}),L(c(Jr),null,{default:R(()=>[...g[86]||(g[86]=[pe("  ? ",-1)])]),_:1})]),_:1}),L(c(Qr),null,{default:R(()=>[L(c(qr),{disabled:E.value},{default:R(()=>[...g[87]||(g[87]=[pe("",-1)])]),_:1},8,["disabled"]),L(c(Kr),{disabled:E.value,onClick:b},{default:R(()=>[pe(Ne(E.value?" ...":""),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),Nv=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},Cv=Nv(Ev,[["__scopeId","data-v-c72e2f30"]]),Gv=ge({__name:"Schedule2dPage",setup(e){return(t,n)=>(P(),Se(Ms,{title:"2D"},{default:R(()=>[L(Ds,{height:"flex-1","min-height":"800px"},{default:R(()=>[L(Cv)]),_:1})]),_:1}))}});export{Gv as default};
