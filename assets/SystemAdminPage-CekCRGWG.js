import{r as v,d as le,i as ve,c as w,a as u,e as l,u as e,w as t,g as a,p as U,j as h,F as B,n as K,t as y,o as f,a8 as we,U as be,D as xe,k as _e,y as Le,a6 as De,aa as We,h as Ae,f as Se}from"./index-BfWxKujM.js";import{_ as A}from"./index-C7HMwd8y.js";import{_ as te,a as ae,b as oe,c as se}from"./CardTitle.vue_vue_type_script_setup_true_lang-4TR4q4qN.js";import{_ as D}from"./Input.vue_vue_type_script_setup_true_lang-Dx8utq88.js";import{_ as ne,a as re,b as L,c as N,d as ue,e as j}from"./TableHeader.vue_vue_type_script_setup_true_lang-DMcxyLmq.js";import{_ as de,a as ie,b as me,c as fe,d as pe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BwJ9g-xK.js";import{_ as T}from"./Label.vue_vue_type_script_setup_true_lang-U565fH2X.js";import{a as O}from"./apiClient-Cn64PT0n.js";import{_ as Pe}from"./Separator.vue_vue_type_script_setup_true_lang-lvcs7Xwk.js";import{_ as X,a as Y,b as q,c as G,d as E}from"./SelectValue.vue_vue_type_script_setup_true_lang-CB0swD2u.js";import{_ as Me,a as Fe,b as Oe,c as Be,d as Ke,e as ze,f as Ee,g as Xe}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-Ba0kYQpB.js";import{X as Ne}from"./x-B4sIAsCH.js";import{_ as Ye}from"./index-BPs7iP_U.js";import"./utils-BNW14Lxq.js";import"./index-nT69UIRx.js";import"./Collection-Czag8AmA.js";import"./DialogTitle-DtDnRnRg.js";import"./createLucideIcon-BN78TdVt.js";import"./check-CqOsjgOL.js";import"./DialogDescription-CrmbOr-p.js";const R={async getCompanyList(){const{data:i}=await O.get("/super/getCompanyList");return i},async createCompany(i){const{data:m}=await O.post("/super/createCompany",i);return m},async getProjectList(){const{data:i}=await O.get("/super/getProjectList");return i},async createProject(i){const{data:m}=await O.post("/super/createProject",i);return m},async getSystemRoleList(){const{data:i}=await O.get("/super/getSystemRoleList");return i},async createSystemRole(i){const{data:m}=await O.post("/super/createSystemRole",{name:i});return m},async getCompanyRoleList(){const{data:i}=await O.get("/super/getCompanyRoleList");return i},async createCompanyRole(i){const{data:m}=await O.post("/super/createCompanyRole",{name:i});return m},async getWorkTypeList(i){const{data:m}=await O.get("/super/getWorkTypeList",{params:{projectId:i}});return m},async getCompanyToProjectList(i){const{data:m}=await O.get("/super/getCompanyToProjectList",{params:i});return m},async createCompanyToProject(i){const{data:m}=await O.post("/super/createCompanyToProject",i);return m},async getUserToProjectList(i){const{data:m}=await O.get("/super/getUserToProjectList",{params:i});return m},async createUserToProject(i){const{data:m}=await O.post("/super/createUserToProject",i);return m},async getWorkerList(i){const{data:m}=await O.get("/super/getWorkerList",{params:i});return m},async updateWorker(i,m){const{data:_}=await O.put(`/super/updateWorker/${i}`,m);return _},async deleteCompanyToProject(i){await O.delete(`/companyProject/deleteCompanyToProject/${i}`)},async deleteUserToProject(i){await O.delete(`/userProject/deleteUserToProject/${i}`)}};function qe(){const i=v([]),m=v(!1),_=v(!1),b=async()=>{m.value=!0;try{i.value=await R.getCompanyList()}catch(g){console.error("회사 목록 조회 실패:",g)}finally{m.value=!1}};return{companies:i,isLoading:m,isCreating:_,loadCompanies:b,createCompany:async g=>{if(!_.value){_.value=!0;try{return await R.createCompany(g),await b(),!0}catch($){console.error("회사 생성 실패:",$);const p=$;return alert(p.response?.data?.message||p.message),!1}finally{_.value=!1}}}}}const Ge={class:"space-y-4"},He={class:"flex justify-end"},Je={class:"border rounded-lg"},Qe={class:"grid gap-4 py-4"},Ze={class:"grid gap-2"},he={class:"grid gap-2"},el={class:"grid gap-2"},ll={class:"grid gap-2"},tl={class:"grid gap-2"},al={class:"grid gap-2"},ol=le({__name:"CompanyManagementArea",setup(i){const{companies:m,isLoading:_,isCreating:b,loadCompanies:P,createCompany:g}=qe(),$=v(!1),p=v({name:"",address:"",registrationNumber:"",phoneNumber:"",bankingAccount:"",displayName:""}),c=()=>{p.value={name:"",address:"",registrationNumber:"",phoneNumber:"",bankingAccount:"",displayName:""}},I=async()=>{if(!p.value.name.trim()){alert("회사명을 입력해주세요.");return}await g(p.value)&&($.value=!1,c())},C=()=>{c(),$.value=!0};return ve(()=>{P()}),(z,s)=>(f(),w("div",Ge,[u("div",He,[l(e(A),{onClick:C},{default:t(()=>[...s[8]||(s[8]=[a("회사 추가",-1)])]),_:1})]),u("div",Je,[l(e(ne),null,{default:t(()=>[l(e(re),null,{default:t(()=>[l(e(L),null,{default:t(()=>[l(e(N),null,{default:t(()=>[...s[9]||(s[9]=[a("회사명",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...s[10]||(s[10]=[a("표시명",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...s[11]||(s[11]=[a("사업자번호",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...s[12]||(s[12]=[a("전화번호",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...s[13]||(s[13]=[a("주소",-1)])]),_:1})]),_:1})]),_:1}),l(e(ue),null,{default:t(()=>[e(_)?(f(),U(e(L),{key:0},{default:t(()=>[l(e(j),{colspan:"5",class:"text-center text-muted-foreground"},{default:t(()=>[...s[14]||(s[14]=[a(" 로딩 중... ",-1)])]),_:1})]),_:1})):e(m).length===0?(f(),U(e(L),{key:1},{default:t(()=>[l(e(j),{colspan:"5",class:"text-center text-muted-foreground"},{default:t(()=>[...s[15]||(s[15]=[a(" 등록된 회사가 없습니다. ",-1)])]),_:1})]),_:1})):h("",!0),(f(!0),w(B,null,K(e(m),r=>(f(),U(e(L),{key:r.id},{default:t(()=>[l(e(j),{class:"font-medium"},{default:t(()=>[a(y(r.companyName),1)]),_:2},1024),l(e(j),null,{default:t(()=>[a(y(r.displayName||"-"),1)]),_:2},1024),l(e(j),null,{default:t(()=>[a(y(r.registrationNumber||"-"),1)]),_:2},1024),l(e(j),null,{default:t(()=>[a(y(r.phoneNumber||"-"),1)]),_:2},1024),l(e(j),null,{default:t(()=>[a(y(r.companyAddress||"-"),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),l(e(de),{open:$.value,"onUpdate:open":s[7]||(s[7]=r=>$.value=r)},{default:t(()=>[l(e(ie),{class:"sm:max-w-[500px]"},{default:t(()=>[l(e(me),null,{default:t(()=>[l(e(fe),null,{default:t(()=>[...s[16]||(s[16]=[a("회사 추가",-1)])]),_:1})]),_:1}),u("div",Qe,[u("div",Ze,[l(e(T),{for:"name"},{default:t(()=>[...s[17]||(s[17]=[a("회사명 *",-1)])]),_:1}),l(e(D),{id:"name",modelValue:p.value.name,"onUpdate:modelValue":s[0]||(s[0]=r=>p.value.name=r),placeholder:"회사명 입력"},null,8,["modelValue"])]),u("div",he,[l(e(T),{for:"displayName"},{default:t(()=>[...s[18]||(s[18]=[a("표시명",-1)])]),_:1}),l(e(D),{id:"displayName",modelValue:p.value.displayName,"onUpdate:modelValue":s[1]||(s[1]=r=>p.value.displayName=r),placeholder:"표시명 입력 (선택)"},null,8,["modelValue"])]),u("div",el,[l(e(T),{for:"registrationNumber"},{default:t(()=>[...s[19]||(s[19]=[a("사업자번호",-1)])]),_:1}),l(e(D),{id:"registrationNumber",modelValue:p.value.registrationNumber,"onUpdate:modelValue":s[2]||(s[2]=r=>p.value.registrationNumber=r),placeholder:"000-00-00000"},null,8,["modelValue"])]),u("div",ll,[l(e(T),{for:"phoneNumber"},{default:t(()=>[...s[20]||(s[20]=[a("전화번호",-1)])]),_:1}),l(e(D),{id:"phoneNumber",modelValue:p.value.phoneNumber,"onUpdate:modelValue":s[3]||(s[3]=r=>p.value.phoneNumber=r),placeholder:"02-0000-0000"},null,8,["modelValue"])]),u("div",tl,[l(e(T),{for:"address"},{default:t(()=>[...s[21]||(s[21]=[a("주소",-1)])]),_:1}),l(e(D),{id:"address",modelValue:p.value.address,"onUpdate:modelValue":s[4]||(s[4]=r=>p.value.address=r),placeholder:"회사 주소"},null,8,["modelValue"])]),u("div",al,[l(e(T),{for:"bankingAccount"},{default:t(()=>[...s[22]||(s[22]=[a("계좌정보",-1)])]),_:1}),l(e(D),{id:"bankingAccount",modelValue:p.value.bankingAccount,"onUpdate:modelValue":s[5]||(s[5]=r=>p.value.bankingAccount=r),placeholder:"은행 계좌번호"},null,8,["modelValue"])])]),l(e(pe),null,{default:t(()=>[l(e(A),{variant:"outline",onClick:s[6]||(s[6]=r=>$.value=!1)},{default:t(()=>[...s[23]||(s[23]=[a("취소",-1)])]),_:1}),l(e(A),{onClick:I,disabled:e(b)},{default:t(()=>[a(y(e(b)?"생성 중...":"추가"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]))}});function sl(){const i=v([]),m=v(!1),_=v(!1),b=async()=>{m.value=!0;try{i.value=await R.getProjectList()}catch(g){console.error("프로젝트 목록 조회 실패:",g)}finally{m.value=!1}};return{projects:i,isLoading:m,isCreating:_,loadProjects:b,createProject:async g=>{if(!_.value){_.value=!0;try{return await R.createProject(g),await b(),!0}catch($){console.error("프로젝트 생성 실패:",$);const p=$;return alert(p.response?.data?.message||p.message),!1}finally{_.value=!1}}}}}const nl={class:"space-y-4"},rl={class:"flex justify-end"},ul={class:"border rounded-lg"},dl={class:"grid gap-4 py-4"},il={class:"grid gap-2"},ml={class:"grid gap-2"},fl={class:"grid grid-cols-2 gap-4"},pl={class:"grid gap-2"},vl={class:"grid gap-2"},yl={class:"grid grid-cols-2 gap-4"},gl={class:"grid gap-2"},_l={class:"grid gap-2"},cl=le({__name:"ProjectManagementArea",setup(i){const{projects:m,isLoading:_,isCreating:b,loadProjects:P,createProject:g}=sl(),$=v(!1),p=v({name:"",address:"",startDate:"",completionDate:"",weatherNx:void 0,weatherNy:void 0}),c=()=>{p.value={name:"",address:"",startDate:"",completionDate:"",weatherNx:void 0,weatherNy:void 0}},I=async()=>{if(!p.value.name.trim()){alert("프로젝트명을 입력해주세요.");return}if(!p.value.startDate||!p.value.completionDate){alert("착공일과 준공일을 입력해주세요.");return}await g(p.value)&&($.value=!1,c())},C=()=>{c(),$.value=!0};return ve(()=>{P()}),(z,s)=>(f(),w("div",nl,[u("div",rl,[l(e(A),{onClick:C},{default:t(()=>[...s[8]||(s[8]=[a("프로젝트 추가",-1)])]),_:1})]),u("div",ul,[l(e(ne),null,{default:t(()=>[l(e(re),null,{default:t(()=>[l(e(L),null,{default:t(()=>[l(e(N),null,{default:t(()=>[...s[9]||(s[9]=[a("프로젝트명",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...s[10]||(s[10]=[a("현장주소",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...s[11]||(s[11]=[a("착공일",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...s[12]||(s[12]=[a("준공일",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...s[13]||(s[13]=[a("기상청 좌표",-1)])]),_:1})]),_:1})]),_:1}),l(e(ue),null,{default:t(()=>[e(_)?(f(),U(e(L),{key:0},{default:t(()=>[l(e(j),{colspan:"5",class:"text-center text-muted-foreground"},{default:t(()=>[...s[14]||(s[14]=[a(" 로딩 중... ",-1)])]),_:1})]),_:1})):e(m).length===0?(f(),U(e(L),{key:1},{default:t(()=>[l(e(j),{colspan:"5",class:"text-center text-muted-foreground"},{default:t(()=>[...s[15]||(s[15]=[a(" 등록된 프로젝트가 없습니다. ",-1)])]),_:1})]),_:1})):h("",!0),(f(!0),w(B,null,K(e(m),r=>(f(),U(e(L),{key:r.id},{default:t(()=>[l(e(j),{class:"font-medium"},{default:t(()=>[a(y(r.projectName),1)]),_:2},1024),l(e(j),null,{default:t(()=>[a(y(r.siteAddress||"-"),1)]),_:2},1024),l(e(j),null,{default:t(()=>[a(y(r.startDate),1)]),_:2},1024),l(e(j),null,{default:t(()=>[a(y(r.completionDate),1)]),_:2},1024),l(e(j),null,{default:t(()=>[a(y(r.weatherNx&&r.weatherNy?`(${r.weatherNx}, ${r.weatherNy})`:"-"),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),l(e(de),{open:$.value,"onUpdate:open":s[7]||(s[7]=r=>$.value=r)},{default:t(()=>[l(e(ie),{class:"sm:max-w-[500px]"},{default:t(()=>[l(e(me),null,{default:t(()=>[l(e(fe),null,{default:t(()=>[...s[16]||(s[16]=[a("프로젝트 추가",-1)])]),_:1})]),_:1}),u("div",dl,[u("div",il,[l(e(T),{for:"name"},{default:t(()=>[...s[17]||(s[17]=[a("프로젝트명 *",-1)])]),_:1}),l(e(D),{id:"name",modelValue:p.value.name,"onUpdate:modelValue":s[0]||(s[0]=r=>p.value.name=r),placeholder:"프로젝트명 입력"},null,8,["modelValue"])]),u("div",ml,[l(e(T),{for:"address"},{default:t(()=>[...s[18]||(s[18]=[a("현장주소",-1)])]),_:1}),l(e(D),{id:"address",modelValue:p.value.address,"onUpdate:modelValue":s[1]||(s[1]=r=>p.value.address=r),placeholder:"현장 주소"},null,8,["modelValue"])]),u("div",fl,[u("div",pl,[l(e(T),{for:"startDate"},{default:t(()=>[...s[19]||(s[19]=[a("착공일 *",-1)])]),_:1}),l(e(D),{id:"startDate",modelValue:p.value.startDate,"onUpdate:modelValue":s[2]||(s[2]=r=>p.value.startDate=r),type:"date"},null,8,["modelValue"])]),u("div",vl,[l(e(T),{for:"completionDate"},{default:t(()=>[...s[20]||(s[20]=[a("준공일 *",-1)])]),_:1}),l(e(D),{id:"completionDate",modelValue:p.value.completionDate,"onUpdate:modelValue":s[3]||(s[3]=r=>p.value.completionDate=r),type:"date"},null,8,["modelValue"])])]),u("div",yl,[u("div",gl,[l(e(T),{for:"weatherNx"},{default:t(()=>[...s[21]||(s[21]=[a("기상청 X좌표",-1)])]),_:1}),l(e(D),{id:"weatherNx",modelValue:p.value.weatherNx,"onUpdate:modelValue":s[4]||(s[4]=r=>p.value.weatherNx=r),modelModifiers:{number:!0},type:"number",placeholder:"NX"},null,8,["modelValue"])]),u("div",_l,[l(e(T),{for:"weatherNy"},{default:t(()=>[...s[22]||(s[22]=[a("기상청 Y좌표",-1)])]),_:1}),l(e(D),{id:"weatherNy",modelValue:p.value.weatherNy,"onUpdate:modelValue":s[5]||(s[5]=r=>p.value.weatherNy=r),modelModifiers:{number:!0},type:"number",placeholder:"NY"},null,8,["modelValue"])])])]),l(e(pe),null,{default:t(()=>[l(e(A),{variant:"outline",onClick:s[6]||(s[6]=r=>$.value=!1)},{default:t(()=>[...s[23]||(s[23]=[a("취소",-1)])]),_:1}),l(e(A),{onClick:I,disabled:e(b)},{default:t(()=>[a(y(e(b)?"생성 중...":"추가"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]))}});function Cl(){const i=v([]),m=v(!1),_=v(!1),b=v(""),P=v([]),g=v(!1),$=v(!1),p=v(""),c=async()=>{m.value=!0;try{i.value=await R.getSystemRoleList()}catch(r){console.error("시스템 역할 목록 조회 실패:",r)}finally{m.value=!1}},I=async()=>{if(!(_.value||!b.value.trim())){_.value=!0;try{await R.createSystemRole(b.value.trim()),b.value="",await c()}catch(r){console.error("시스템 역할 생성 실패:",r);const x=r;alert(x.response?.data?.message||x.message)}finally{_.value=!1}}},C=async()=>{g.value=!0;try{P.value=await R.getCompanyRoleList()}catch(r){console.error("회사 역할 목록 조회 실패:",r)}finally{g.value=!1}};return{systemRoles:i,isLoadingSystemRoles:m,isCreatingSystemRole:_,newSystemRoleName:b,loadSystemRoles:c,createSystemRole:I,companyRoles:P,isLoadingCompanyRoles:g,isCreatingCompanyRole:$,newCompanyRoleName:p,loadCompanyRoles:C,createCompanyRole:async()=>{if(!($.value||!p.value.trim())){$.value=!0;try{await R.createCompanyRole(p.value.trim()),p.value="",await C()}catch(r){console.error("회사 역할 생성 실패:",r);const x=r;alert(x.response?.data?.message||x.message)}finally{$.value=!1}}},loadAllRoles:async()=>{await Promise.all([c(),C()])}}}const jl={class:"space-y-6"},$l={class:"space-y-4"},bl={class:"flex gap-2"},xl={class:"flex flex-wrap gap-2"},Vl={key:0,class:"text-sm text-muted-foreground"},kl={key:1,class:"text-sm text-muted-foreground"},wl={class:"space-y-4"},Nl={class:"flex gap-2"},Pl={class:"flex flex-wrap gap-2"},Tl={key:0,class:"text-sm text-muted-foreground"},Ul={key:1,class:"text-sm text-muted-foreground"},Il=le({__name:"RoleManagementArea",setup(i){const{systemRoles:m,isLoadingSystemRoles:_,isCreatingSystemRole:b,newSystemRoleName:P,createSystemRole:g,companyRoles:$,isLoadingCompanyRoles:p,isCreatingCompanyRole:c,newCompanyRoleName:I,createCompanyRole:C,loadAllRoles:z}=Cl();return ve(()=>{z()}),(s,r)=>(f(),w("div",jl,[u("div",$l,[r[3]||(r[3]=u("h4",{class:"font-semibold"},"시스템 역할",-1)),r[4]||(r[4]=u("p",{class:"text-sm text-muted-foreground"}," 프로젝트 내 사용자의 권한을 정의합니다. (예: GC, SC, Viewer) ",-1)),u("div",bl,[l(e(D),{modelValue:e(P),"onUpdate:modelValue":r[0]||(r[0]=x=>be(P)?P.value=x:null),placeholder:"새 시스템 역할명",onKeyup:we(e(g),["enter"]),class:"max-w-xs"},null,8,["modelValue","onKeyup"]),l(e(A),{onClick:e(g),disabled:!e(P).trim()||e(b)},{default:t(()=>[...r[2]||(r[2]=[a(" 추가 ",-1)])]),_:1},8,["onClick","disabled"])]),u("div",xl,[e(_)?(f(),w("div",Vl," 로딩 중... ")):e(m).length===0?(f(),w("div",kl," 등록된 시스템 역할이 없습니다. ")):h("",!0),(f(!0),w(B,null,K(e(m),x=>(f(),w("div",{key:x.id,class:"px-3 py-1.5 bg-primary/10 text-primary rounded-md text-sm font-medium"},y(x.name),1))),128))])]),l(e(Pe)),u("div",wl,[r[6]||(r[6]=u("h4",{class:"font-semibold"},"회사 역할",-1)),r[7]||(r[7]=u("p",{class:"text-sm text-muted-foreground"}," 프로젝트에서 회사의 역할을 정의합니다. (예: 시공사, 감리사, 발주처) ",-1)),u("div",Nl,[l(e(D),{modelValue:e(I),"onUpdate:modelValue":r[1]||(r[1]=x=>be(I)?I.value=x:null),placeholder:"새 회사 역할명",onKeyup:we(e(C),["enter"]),class:"max-w-xs"},null,8,["modelValue","onKeyup"]),l(e(A),{onClick:e(C),disabled:!e(I).trim()||e(c)},{default:t(()=>[...r[5]||(r[5]=[a(" 추가 ",-1)])]),_:1},8,["onClick","disabled"])]),u("div",Pl,[e(p)?(f(),w("div",Tl," 로딩 중... ")):e($).length===0?(f(),w("div",Ul," 등록된 회사 역할이 없습니다. ")):h("",!0),(f(!0),w(B,null,K(e($),x=>(f(),w("div",{key:x.id,class:"px-3 py-1.5 bg-secondary text-secondary-foreground rounded-md text-sm font-medium"},y(x.name),1))),128))])])]))}});function Rl(){const i=v([]),m=v([]),_=v([]),b=v([]),P=v([]),g=v(!1),$=v([]),p=v(!1),c=v(!1),I=v(!1),C=v({}),z=v([]),s=v(!1),r=v(!1),x=v(!1),d=v({}),V=async()=>{try{const[k,F,W,S]=await Promise.all([R.getCompanyList(),R.getProjectList(),R.getCompanyRoleList(),R.getSystemRoleList()]);i.value=k,m.value=F,_.value=W,b.value=S}catch(k){console.error("조회 데이터 로드 실패:",k)}},ee=async k=>{if(!k||k==="__all__"){P.value=[];return}g.value=!0;try{P.value=await R.getWorkTypeList(k)}catch(F){console.error("공종 목록 로드 실패:",F),P.value=[]}finally{g.value=!1}},H=async()=>{p.value=!0;try{const k={};C.value.projectId&&C.value.projectId!=="__all__"&&(k.projectId=C.value.projectId),C.value.companyId&&C.value.companyId!=="__all__"&&(k.companyId=C.value.companyId),$.value=await R.getCompanyToProjectList(Object.keys(k).length>0?k:void 0)}catch(k){console.error("회사-프로젝트 매핑 조회 실패:",k)}finally{p.value=!1}},ye=async k=>{if(c.value)return!1;c.value=!0;try{return await R.createCompanyToProject(k),await H(),!0}catch(F){console.error("회사-프로젝트 매핑 생성 실패:",F);const W=F;return alert(W.response?.data?.message||W.message),!1}finally{c.value=!1}},J=async()=>{s.value=!0;try{const k={};d.value.projectId&&d.value.projectId!=="__all__"&&(k.projectId=d.value.projectId),d.value.userId&&d.value.userId!=="__all__"&&(k.userId=d.value.userId),z.value=await R.getUserToProjectList(Object.keys(k).length>0?k:void 0)}catch(k){console.error("사용자-프로젝트 매핑 조회 실패:",k)}finally{s.value=!1}},ce=async k=>{if(r.value)return!1;r.value=!0;try{return await R.createUserToProject(k),await J(),!0}catch(F){console.error("사용자-프로젝트 매핑 생성 실패:",F);const W=F;return alert(W.response?.data?.message||W.message),!1}finally{r.value=!1}},Ce=async k=>{if(!I.value){I.value=!0;try{await R.deleteCompanyToProject(k),await H()}catch(F){console.error("회사-프로젝트 매핑 삭제 실패:",F);const W=F;alert(W.response?.data?.message||W.message)}finally{I.value=!1}}},Q=async k=>{if(!x.value){x.value=!0;try{await R.deleteUserToProject(k),await J()}catch(F){console.error("사용자-프로젝트 매핑 삭제 실패:",F);const W=F;alert(W.response?.data?.message||W.message)}finally{x.value=!1}}};return xe(C,()=>H(),{deep:!0}),xe(d,()=>J(),{deep:!0}),{companies:i,projects:m,companyRoles:_,systemRoles:b,workTypes:P,isLoadingWorkTypes:g,loadWorkTypes:ee,companyToProjectList:$,isLoadingCompanyToProject:p,isCreatingCompanyToProject:c,isDeletingCompanyToProject:I,companyToProjectFilter:C,loadCompanyToProjectList:H,createCompanyToProject:ye,deleteCompanyToProject:Ce,userToProjectList:z,isLoadingUserToProject:s,isCreatingUserToProject:r,isDeletingUserToProject:x,userToProjectFilter:d,loadUserToProjectList:J,createUserToProject:ce,deleteUserToProject:Q,loadLookupData:V,loadAll:async()=>{await V(),await Promise.all([H(),J()])}}}const Ll={class:"space-y-8"},Dl={class:"space-y-4"},Wl={class:"flex justify-between items-center"},Al={class:"flex gap-4"},Sl={class:"w-48"},Ml={class:"w-48"},Fl={class:"border rounded-lg"},Ol=["disabled","onClick"],Bl={class:"space-y-4"},Kl={class:"flex justify-between items-center"},zl={class:"flex gap-4"},El={class:"w-48"},Xl={class:"border rounded-lg"},Yl=["disabled","onClick"],ql={class:"grid gap-4 py-4"},Gl={class:"grid gap-2"},Hl={class:"grid gap-2"},Jl={class:"grid gap-2"},Ql={class:"grid gap-2"},Zl={class:"grid gap-4 py-4"},hl={class:"grid gap-2"},et={class:"grid gap-2"},lt={class:"grid gap-2"},tt={class:"grid gap-2"},at={class:"grid gap-2"},ot=le({__name:"MappingManagementArea",setup(i){const{companies:m,projects:_,companyRoles:b,systemRoles:P,workTypes:g,isLoadingWorkTypes:$,loadWorkTypes:p,companyToProjectList:c,isLoadingCompanyToProject:I,isCreatingCompanyToProject:C,isDeletingCompanyToProject:z,companyToProjectFilter:s,createCompanyToProject:r,deleteCompanyToProject:x,userToProjectList:d,isLoadingUserToProject:V,isCreatingUserToProject:ee,isDeletingUserToProject:H,userToProjectFilter:ye,createUserToProject:J,deleteUserToProject:ce,loadAll:Ce}=Rl(),Q=v(!1),M=v({companyId:"",projectId:"",roleId:0,workTypeId:void 0}),k=()=>{M.value={companyId:"",projectId:"",roleId:0,workTypeId:void 0}};xe(()=>M.value.projectId,Z=>{M.value.workTypeId=void 0,Z&&p(Z)});const F=async()=>{if(!M.value.companyId||!M.value.projectId||!M.value.roleId){alert("회사, 프로젝트, 역할을 선택해주세요.");return}await r(M.value)&&(Q.value=!1,k())},W=v(!1),S=v({userId:"",projectId:"",companyToProjectId:0,projectRole:"",systemRoleId:0}),Te=()=>{S.value={userId:"",projectId:"",companyToProjectId:0,projectRole:"",systemRoleId:0}},Ue=async()=>{if(!S.value.userId||!S.value.projectId||!S.value.companyToProjectId||!S.value.systemRoleId){alert("모든 필수 항목을 입력해주세요.");return}await J(S.value)&&(W.value=!1,Te())},ge=v(!1),je=v(null),Ve=v(""),$e=v(null);function ke(Z,o,n){je.value=Z,Ve.value=o,$e.value=n,ge.value=!0}async function Ie(){je.value!=null&&$e.value&&await $e.value(je.value),ge.value=!1}return ve(()=>{Ce()}),(Z,o)=>(f(),w("div",Ll,[u("div",Dl,[u("div",Wl,[o[22]||(o[22]=u("h4",{class:"font-semibold"},"회사-프로젝트 매핑",-1)),l(e(A),{onClick:o[0]||(o[0]=n=>Q.value=!0)},{default:t(()=>[...o[21]||(o[21]=[a("매핑 추가",-1)])]),_:1})]),u("div",Al,[u("div",Sl,[l(e(X),{modelValue:e(s).projectId,"onUpdate:modelValue":o[1]||(o[1]=n=>e(s).projectId=n)},{default:t(()=>[l(e(Y),null,{default:t(()=>[l(e(q),{placeholder:"프로젝트 필터"})]),_:1}),l(e(G),null,{default:t(()=>[l(e(E),{value:"__all__"},{default:t(()=>[...o[23]||(o[23]=[a("전체",-1)])]),_:1}),(f(!0),w(B,null,K(e(_),n=>(f(),U(e(E),{key:n.id,value:n.id},{default:t(()=>[a(y(n.projectName),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),u("div",Ml,[l(e(X),{modelValue:e(s).companyId,"onUpdate:modelValue":o[2]||(o[2]=n=>e(s).companyId=n)},{default:t(()=>[l(e(Y),null,{default:t(()=>[l(e(q),{placeholder:"회사 필터"})]),_:1}),l(e(G),null,{default:t(()=>[l(e(E),{value:"__all__"},{default:t(()=>[...o[24]||(o[24]=[a("전체",-1)])]),_:1}),(f(!0),w(B,null,K(e(m),n=>(f(),U(e(E),{key:n.id,value:n.id},{default:t(()=>[a(y(n.companyName),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),u("div",Fl,[l(e(ne),null,{default:t(()=>[l(e(re),null,{default:t(()=>[l(e(L),null,{default:t(()=>[l(e(N),null,{default:t(()=>[...o[25]||(o[25]=[a("프로젝트",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...o[26]||(o[26]=[a("회사",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...o[27]||(o[27]=[a("역할",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...o[28]||(o[28]=[a("공종",-1)])]),_:1}),l(e(N),{class:"w-10 text-center"},{default:t(()=>[...o[29]||(o[29]=[a("삭제",-1)])]),_:1})]),_:1})]),_:1}),l(e(ue),null,{default:t(()=>[e(I)?(f(),U(e(L),{key:0},{default:t(()=>[l(e(j),{colspan:"5",class:"text-center text-muted-foreground"},{default:t(()=>[...o[30]||(o[30]=[a(" 로딩 중... ",-1)])]),_:1})]),_:1})):e(c).length===0?(f(),U(e(L),{key:1},{default:t(()=>[l(e(j),{colspan:"5",class:"text-center text-muted-foreground"},{default:t(()=>[...o[31]||(o[31]=[a(" 매핑이 없습니다. ",-1)])]),_:1})]),_:1})):h("",!0),(f(!0),w(B,null,K(e(c),n=>(f(),U(e(L),{key:n.id},{default:t(()=>[l(e(j),null,{default:t(()=>[a(y(n.projectName),1)]),_:2},1024),l(e(j),null,{default:t(()=>[a(y(n.companyName),1)]),_:2},1024),l(e(j),null,{default:t(()=>[a(y(n.roleName),1)]),_:2},1024),l(e(j),null,{default:t(()=>[a(y(n.workTypeName||"-"),1)]),_:2},1024),l(e(j),{class:"text-center"},{default:t(()=>[u("button",{class:"p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive",disabled:e(z),onClick:_e(Re=>ke(n.id,`${n.companyName} - ${n.projectName}`,e(x)),["stop"])},[l(e(Ne),{class:"w-3 h-3"})],8,Ol)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),l(e(Pe)),u("div",Bl,[u("div",Kl,[o[33]||(o[33]=u("h4",{class:"font-semibold"},"사용자-프로젝트 매핑",-1)),l(e(A),{onClick:o[3]||(o[3]=n=>W.value=!0)},{default:t(()=>[...o[32]||(o[32]=[a("매핑 추가",-1)])]),_:1})]),u("div",zl,[u("div",El,[l(e(X),{modelValue:e(ye).projectId,"onUpdate:modelValue":o[4]||(o[4]=n=>e(ye).projectId=n)},{default:t(()=>[l(e(Y),null,{default:t(()=>[l(e(q),{placeholder:"프로젝트 필터"})]),_:1}),l(e(G),null,{default:t(()=>[l(e(E),{value:"__all__"},{default:t(()=>[...o[34]||(o[34]=[a("전체",-1)])]),_:1}),(f(!0),w(B,null,K(e(_),n=>(f(),U(e(E),{key:n.id,value:n.id},{default:t(()=>[a(y(n.projectName),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),u("div",Xl,[l(e(ne),null,{default:t(()=>[l(e(re),null,{default:t(()=>[l(e(L),null,{default:t(()=>[l(e(N),null,{default:t(()=>[...o[35]||(o[35]=[a("프로젝트",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...o[36]||(o[36]=[a("사용자",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...o[37]||(o[37]=[a("이메일",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...o[38]||(o[38]=[a("소속회사",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...o[39]||(o[39]=[a("프로젝트 직책",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...o[40]||(o[40]=[a("시스템 역할",-1)])]),_:1}),l(e(N),{class:"w-10 text-center"},{default:t(()=>[...o[41]||(o[41]=[a("삭제",-1)])]),_:1})]),_:1})]),_:1}),l(e(ue),null,{default:t(()=>[e(V)?(f(),U(e(L),{key:0},{default:t(()=>[l(e(j),{colspan:"7",class:"text-center text-muted-foreground"},{default:t(()=>[...o[42]||(o[42]=[a(" 로딩 중... ",-1)])]),_:1})]),_:1})):e(d).length===0?(f(),U(e(L),{key:1},{default:t(()=>[l(e(j),{colspan:"7",class:"text-center text-muted-foreground"},{default:t(()=>[...o[43]||(o[43]=[a(" 매핑이 없습니다. ",-1)])]),_:1})]),_:1})):h("",!0),(f(!0),w(B,null,K(e(d),n=>(f(),U(e(L),{key:n.id},{default:t(()=>[l(e(j),null,{default:t(()=>[a(y(n.projectName),1)]),_:2},1024),l(e(j),null,{default:t(()=>[a(y(n.userName),1)]),_:2},1024),l(e(j),null,{default:t(()=>[a(y(n.userEmail),1)]),_:2},1024),l(e(j),null,{default:t(()=>[a(y(n.companyName),1)]),_:2},1024),l(e(j),null,{default:t(()=>[a(y(n.projectRole||"-"),1)]),_:2},1024),l(e(j),null,{default:t(()=>[a(y(n.systemRoleName),1)]),_:2},1024),l(e(j),{class:"text-center"},{default:t(()=>[u("button",{class:"p-0.5 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive",disabled:e(H),onClick:_e(Re=>ke(n.id,`${n.userName} - ${n.projectName}`,e(ce)),["stop"])},[l(e(Ne),{class:"w-3 h-3"})],8,Yl)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),l(e(de),{open:Q.value,"onUpdate:open":o[11]||(o[11]=n=>Q.value=n)},{default:t(()=>[l(e(ie),{class:"sm:max-w-[500px]",onInteractOutside:o[10]||(o[10]=_e(()=>{},["prevent"]))},{default:t(()=>[l(e(me),null,{default:t(()=>[l(e(fe),null,{default:t(()=>[...o[44]||(o[44]=[a("회사-프로젝트 매핑 추가",-1)])]),_:1})]),_:1}),u("div",ql,[u("div",Gl,[l(e(T),null,{default:t(()=>[...o[45]||(o[45]=[a("프로젝트 *",-1)])]),_:1}),l(e(X),{modelValue:M.value.projectId,"onUpdate:modelValue":o[5]||(o[5]=n=>M.value.projectId=n)},{default:t(()=>[l(e(Y),null,{default:t(()=>[l(e(q),{placeholder:"프로젝트 선택"})]),_:1}),l(e(G),null,{default:t(()=>[(f(!0),w(B,null,K(e(_),n=>(f(),U(e(E),{key:n.id,value:n.id},{default:t(()=>[a(y(n.projectName),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),u("div",Hl,[l(e(T),null,{default:t(()=>[...o[46]||(o[46]=[a("회사 *",-1)])]),_:1}),l(e(X),{modelValue:M.value.companyId,"onUpdate:modelValue":o[6]||(o[6]=n=>M.value.companyId=n)},{default:t(()=>[l(e(Y),null,{default:t(()=>[l(e(q),{placeholder:"회사 선택"})]),_:1}),l(e(G),null,{default:t(()=>[(f(!0),w(B,null,K(e(m),n=>(f(),U(e(E),{key:n.id,value:n.id},{default:t(()=>[a(y(n.companyName),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),u("div",Jl,[l(e(T),null,{default:t(()=>[...o[47]||(o[47]=[a("회사 역할 *",-1)])]),_:1}),l(e(X),{modelValue:M.value.roleId,"onUpdate:modelValue":o[7]||(o[7]=n=>M.value.roleId=n)},{default:t(()=>[l(e(Y),null,{default:t(()=>[l(e(q),{placeholder:"역할 선택"})]),_:1}),l(e(G),null,{default:t(()=>[(f(!0),w(B,null,K(e(b),n=>(f(),U(e(E),{key:n.id,value:n.id},{default:t(()=>[a(y(n.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),u("div",Ql,[l(e(T),null,{default:t(()=>[...o[48]||(o[48]=[a("공종",-1)])]),_:1}),l(e(X),{modelValue:M.value.workTypeId,"onUpdate:modelValue":o[8]||(o[8]=n=>M.value.workTypeId=n),disabled:!M.value.projectId||e($)},{default:t(()=>[l(e(Y),null,{default:t(()=>[l(e(q),{placeholder:e($)?"로딩 중...":"공종 선택 (선택사항)"},null,8,["placeholder"])]),_:1}),l(e(G),null,{default:t(()=>[(f(!0),w(B,null,K(e(g),n=>(f(),U(e(E),{key:n.id,value:n.id},{default:t(()=>[a(y(n.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])])]),l(e(pe),null,{default:t(()=>[l(e(A),{variant:"outline",onClick:o[9]||(o[9]=n=>Q.value=!1)},{default:t(()=>[...o[49]||(o[49]=[a("취소",-1)])]),_:1}),l(e(A),{onClick:F,disabled:e(C)},{default:t(()=>[a(y(e(C)?"생성 중...":"추가"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),l(e(de),{open:W.value,"onUpdate:open":o[19]||(o[19]=n=>W.value=n)},{default:t(()=>[l(e(ie),{class:"sm:max-w-[500px]",onInteractOutside:o[18]||(o[18]=_e(()=>{},["prevent"]))},{default:t(()=>[l(e(me),null,{default:t(()=>[l(e(fe),null,{default:t(()=>[...o[50]||(o[50]=[a("사용자-프로젝트 매핑 추가",-1)])]),_:1})]),_:1}),u("div",Zl,[u("div",hl,[l(e(T),null,{default:t(()=>[...o[51]||(o[51]=[a("사용자 ID *",-1)])]),_:1}),l(e(D),{modelValue:S.value.userId,"onUpdate:modelValue":o[12]||(o[12]=n=>S.value.userId=n),placeholder:"사용자 UUID 입력"},null,8,["modelValue"])]),u("div",et,[l(e(T),null,{default:t(()=>[...o[52]||(o[52]=[a("프로젝트 *",-1)])]),_:1}),l(e(X),{modelValue:S.value.projectId,"onUpdate:modelValue":o[13]||(o[13]=n=>S.value.projectId=n)},{default:t(()=>[l(e(Y),null,{default:t(()=>[l(e(q),{placeholder:"프로젝트 선택"})]),_:1}),l(e(G),null,{default:t(()=>[(f(!0),w(B,null,K(e(_),n=>(f(),U(e(E),{key:n.id,value:n.id},{default:t(()=>[a(y(n.projectName),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),u("div",lt,[l(e(T),null,{default:t(()=>[...o[53]||(o[53]=[a("소속 (회사-프로젝트 매핑 ID) *",-1)])]),_:1}),l(e(X),{modelValue:S.value.companyToProjectId,"onUpdate:modelValue":o[14]||(o[14]=n=>S.value.companyToProjectId=n)},{default:t(()=>[l(e(Y),null,{default:t(()=>[l(e(q),{placeholder:"소속 선택"})]),_:1}),l(e(G),null,{default:t(()=>[(f(!0),w(B,null,K(e(c),n=>(f(),U(e(E),{key:n.id,value:n.id},{default:t(()=>[a(y(n.companyName)+" - "+y(n.roleName),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),u("div",tt,[l(e(T),null,{default:t(()=>[...o[54]||(o[54]=[a("프로젝트 직책",-1)])]),_:1}),l(e(D),{modelValue:S.value.projectRole,"onUpdate:modelValue":o[15]||(o[15]=n=>S.value.projectRole=n),placeholder:"예: 현장소장"},null,8,["modelValue"])]),u("div",at,[l(e(T),null,{default:t(()=>[...o[55]||(o[55]=[a("시스템 역할 *",-1)])]),_:1}),l(e(X),{modelValue:S.value.systemRoleId,"onUpdate:modelValue":o[16]||(o[16]=n=>S.value.systemRoleId=n)},{default:t(()=>[l(e(Y),null,{default:t(()=>[l(e(q),{placeholder:"시스템 역할 선택"})]),_:1}),l(e(G),null,{default:t(()=>[(f(!0),w(B,null,K(e(P),n=>(f(),U(e(E),{key:n.id,value:n.id},{default:t(()=>[a(y(n.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),l(e(pe),null,{default:t(()=>[l(e(A),{variant:"outline",onClick:o[17]||(o[17]=n=>W.value=!1)},{default:t(()=>[...o[56]||(o[56]=[a("취소",-1)])]),_:1}),l(e(A),{onClick:Ue,disabled:e(ee)},{default:t(()=>[a(y(e(ee)?"생성 중...":"추가"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),l(e(Me),{open:ge.value,"onUpdate:open":o[20]||(o[20]=n=>ge.value=n)},{default:t(()=>[l(e(Fe),null,{default:t(()=>[l(e(Oe),null,{default:t(()=>[l(e(Be),null,{default:t(()=>[...o[57]||(o[57]=[a("삭제 확인",-1)])]),_:1}),l(e(Ke),null,{default:t(()=>[a(" '"+y(Ve.value)+"' 항목을 삭제하시겠습니까? ",1)]),_:1})]),_:1}),l(e(ze),null,{default:t(()=>[l(e(Ee),null,{default:t(()=>[...o[58]||(o[58]=[a("취소",-1)])]),_:1}),l(e(Xe),{onClick:Ie},{default:t(()=>[...o[59]||(o[59]=[a("삭제",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}});function st(){const i=v([]),m=v(!1),_=v(!1),b=v("all"),P=Le(()=>b.value==="all"?i.value:b.value==="confirmed"?i.value.filter(c=>c.confirmed):i.value.filter(c=>!c.confirmed)),g=async()=>{m.value=!0;try{i.value=await R.getWorkerList()}catch(c){console.error("작업자 목록 조회 실패:",c)}finally{m.value=!1}},$=async(c,I)=>{if(_.value)return!1;_.value=!0;try{return await R.updateWorker(c,I),await g(),!0}catch(C){console.error("작업자 수정 실패:",C);const z=C;return alert(z.response?.data?.message||z.message),!1}finally{_.value=!1}};return{workers:i,filteredWorkers:P,isLoading:m,isUpdating:_,filterConfirmed:b,loadWorkers:g,updateWorker:$,toggleWorkerConfirmed:async c=>$(c.id,{name:c.workerName,phoneNumber:c.phoneNumber,registrationNumber:c.registrationNumber,confirmed:!c.confirmed,registrationCardUrl:c.registrationCardUrl||void 0})}}const nt={class:"space-y-4"},rt={class:"flex justify-end items-center gap-4"},ut={class:"w-40"},dt={class:"border rounded-lg"},it=["href"],mt={key:1,class:"text-muted-foreground"},ft={class:"flex justify-end gap-2"},pt={class:"grid gap-4 py-4"},vt={class:"grid gap-2"},yt={class:"grid gap-2"},gt={class:"grid gap-2"},_t={class:"grid gap-2"},ct={class:"flex items-center gap-2"},Ct=le({__name:"WorkerManagementArea",setup(i){const{filteredWorkers:m,isLoading:_,isUpdating:b,filterConfirmed:P,loadWorkers:g,updateWorker:$,toggleWorkerConfirmed:p}=st(),c=v(!1),I=v(null),C=v({name:"",phoneNumber:"",registrationNumber:"",confirmed:!1,registrationCardUrl:""}),z=x=>{I.value=x,C.value={name:x.workerName,phoneNumber:x.phoneNumber,registrationNumber:x.registrationNumber,confirmed:x.confirmed,registrationCardUrl:x.registrationCardUrl||""},c.value=!0},s=async()=>{if(!I.value)return;if(!C.value.name.trim()||!C.value.phoneNumber.trim()){alert("이름과 전화번호를 입력해주세요.");return}await $(I.value.id,C.value)&&(c.value=!1,I.value=null)},r=async x=>{await p(x)};return ve(()=>{g()}),(x,d)=>(f(),w("div",nt,[u("div",rt,[u("div",ut,[l(e(X),{modelValue:e(P),"onUpdate:modelValue":d[0]||(d[0]=V=>be(P)?P.value=V:null)},{default:t(()=>[l(e(Y),null,{default:t(()=>[l(e(q),{placeholder:"승인 상태"})]),_:1}),l(e(G),null,{default:t(()=>[l(e(E),{value:"all"},{default:t(()=>[...d[8]||(d[8]=[a("전체",-1)])]),_:1}),l(e(E),{value:"confirmed"},{default:t(()=>[...d[9]||(d[9]=[a("승인됨",-1)])]),_:1}),l(e(E),{value:"unconfirmed"},{default:t(()=>[...d[10]||(d[10]=[a("미승인",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),u("div",dt,[l(e(ne),null,{default:t(()=>[l(e(re),null,{default:t(()=>[l(e(L),null,{default:t(()=>[l(e(N),null,{default:t(()=>[...d[11]||(d[11]=[a("이름",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...d[12]||(d[12]=[a("전화번호",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...d[13]||(d[13]=[a("주민등록번호",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...d[14]||(d[14]=[a("승인상태",-1)])]),_:1}),l(e(N),null,{default:t(()=>[...d[15]||(d[15]=[a("등록증",-1)])]),_:1}),l(e(N),{class:"text-right"},{default:t(()=>[...d[16]||(d[16]=[a("작업",-1)])]),_:1})]),_:1})]),_:1}),l(e(ue),null,{default:t(()=>[e(_)?(f(),U(e(L),{key:0},{default:t(()=>[l(e(j),{colspan:"6",class:"text-center text-muted-foreground"},{default:t(()=>[...d[17]||(d[17]=[a(" 로딩 중... ",-1)])]),_:1})]),_:1})):e(m).length===0?(f(),U(e(L),{key:1},{default:t(()=>[l(e(j),{colspan:"6",class:"text-center text-muted-foreground"},{default:t(()=>[...d[18]||(d[18]=[a(" 작업자가 없습니다. ",-1)])]),_:1})]),_:1})):h("",!0),(f(!0),w(B,null,K(e(m),V=>(f(),U(e(L),{key:V.id},{default:t(()=>[l(e(j),{class:"font-medium"},{default:t(()=>[a(y(V.workerName),1)]),_:2},1024),l(e(j),null,{default:t(()=>[a(y(V.phoneNumber),1)]),_:2},1024),l(e(j),null,{default:t(()=>[a(y(V.registrationNumber),1)]),_:2},1024),l(e(j),null,{default:t(()=>[l(e(Ye),{variant:V.confirmed?"default":"secondary"},{default:t(()=>[a(y(V.confirmed?"승인":"미승인"),1)]),_:2},1032,["variant"])]),_:2},1024),l(e(j),null,{default:t(()=>[V.registrationCardUrl?(f(),w("a",{key:0,href:V.registrationCardUrl,target:"_blank",class:"text-primary hover:underline"}," 보기 ",8,it)):(f(),w("span",mt,"-"))]),_:2},1024),l(e(j),{class:"text-right"},{default:t(()=>[u("div",ft,[l(e(A),{variant:"outline",size:"sm",onClick:ee=>r(V),disabled:e(b)},{default:t(()=>[a(y(V.confirmed?"승인취소":"승인"),1)]),_:2},1032,["onClick","disabled"]),l(e(A),{variant:"ghost",size:"sm",onClick:ee=>z(V)},{default:t(()=>[...d[19]||(d[19]=[a(" 수정 ",-1)])]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),l(e(de),{open:c.value,"onUpdate:open":d[7]||(d[7]=V=>c.value=V)},{default:t(()=>[l(e(ie),{class:"sm:max-w-[500px]"},{default:t(()=>[l(e(me),null,{default:t(()=>[l(e(fe),null,{default:t(()=>[...d[20]||(d[20]=[a("작업자 정보 수정",-1)])]),_:1})]),_:1}),u("div",pt,[u("div",vt,[l(e(T),{for:"name"},{default:t(()=>[...d[21]||(d[21]=[a("이름 *",-1)])]),_:1}),l(e(D),{id:"name",modelValue:C.value.name,"onUpdate:modelValue":d[1]||(d[1]=V=>C.value.name=V),placeholder:"이름"},null,8,["modelValue"])]),u("div",yt,[l(e(T),{for:"phoneNumber"},{default:t(()=>[...d[22]||(d[22]=[a("전화번호 *",-1)])]),_:1}),l(e(D),{id:"phoneNumber",modelValue:C.value.phoneNumber,"onUpdate:modelValue":d[2]||(d[2]=V=>C.value.phoneNumber=V),placeholder:"010-0000-0000"},null,8,["modelValue"])]),u("div",gt,[l(e(T),{for:"registrationNumber"},{default:t(()=>[...d[23]||(d[23]=[a("주민등록번호 *",-1)])]),_:1}),l(e(D),{id:"registrationNumber",modelValue:C.value.registrationNumber,"onUpdate:modelValue":d[3]||(d[3]=V=>C.value.registrationNumber=V),placeholder:"000000-0000000"},null,8,["modelValue"])]),u("div",_t,[l(e(T),{for:"registrationCardUrl"},{default:t(()=>[...d[24]||(d[24]=[a("등록증 URL",-1)])]),_:1}),l(e(D),{id:"registrationCardUrl",modelValue:C.value.registrationCardUrl,"onUpdate:modelValue":d[4]||(d[4]=V=>C.value.registrationCardUrl=V),placeholder:"https://..."},null,8,["modelValue"])]),u("div",ct,[De(u("input",{id:"confirmed",type:"checkbox","onUpdate:modelValue":d[5]||(d[5]=V=>C.value.confirmed=V),class:"h-4 w-4 rounded border-gray-300"},null,512),[[We,C.value.confirmed]]),l(e(T),{for:"confirmed"},{default:t(()=>[...d[25]||(d[25]=[a("승인됨",-1)])]),_:1})])]),l(e(pe),null,{default:t(()=>[l(e(A),{variant:"outline",onClick:d[6]||(d[6]=V=>c.value=!1)},{default:t(()=>[...d[26]||(d[26]=[a("취소",-1)])]),_:1}),l(e(A),{onClick:s,disabled:e(b)},{default:t(()=>[a(y(e(b)?"저장 중...":"저장"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]))}}),jt={class:"min-h-screen bg-background"},$t={class:"sticky top-0 z-10 border-b border-border bg-background p-4"},bt={class:"flex items-center justify-between"},xt={class:"flex items-center gap-4"},Vt={class:"text-sm text-muted-foreground"},kt={class:"p-6 space-y-6"},Yt=le({__name:"SystemAdminPage",setup(i){const m=Se(),_=Ae(),b=async()=>{await _.logout(),m.push("/")};return(P,g)=>(f(),w("div",jt,[u("header",$t,[u("div",bt,[g[1]||(g[1]=u("h1",{class:"text-2xl font-bold"},"시스템 관리자",-1)),u("div",xt,[u("span",Vt,y(e(_).user?.userName)+" ("+y(e(_).user?.systemRole)+") ",1),l(e(A),{variant:"outline",onClick:b},{default:t(()=>[...g[0]||(g[0]=[a("로그아웃",-1)])]),_:1})])])]),u("main",kt,[l(e(te),null,{default:t(()=>[l(e(ae),null,{default:t(()=>[l(e(oe),null,{default:t(()=>[...g[2]||(g[2]=[a("회사 관리",-1)])]),_:1})]),_:1}),l(e(se),null,{default:t(()=>[l(ol)]),_:1})]),_:1}),l(e(te),null,{default:t(()=>[l(e(ae),null,{default:t(()=>[l(e(oe),null,{default:t(()=>[...g[3]||(g[3]=[a("프로젝트 관리",-1)])]),_:1})]),_:1}),l(e(se),null,{default:t(()=>[l(cl)]),_:1})]),_:1}),l(e(te),null,{default:t(()=>[l(e(ae),null,{default:t(()=>[l(e(oe),null,{default:t(()=>[...g[4]||(g[4]=[a("역할 관리",-1)])]),_:1})]),_:1}),l(e(se),null,{default:t(()=>[l(Il)]),_:1})]),_:1}),l(e(te),null,{default:t(()=>[l(e(ae),null,{default:t(()=>[l(e(oe),null,{default:t(()=>[...g[5]||(g[5]=[a("매핑 관리",-1)])]),_:1})]),_:1}),l(e(se),null,{default:t(()=>[l(ot)]),_:1})]),_:1}),l(e(te),null,{default:t(()=>[l(e(ae),null,{default:t(()=>[l(e(oe),null,{default:t(()=>[...g[6]||(g[6]=[a("작업자 관리",-1)])]),_:1})]),_:1}),l(e(se),null,{default:t(()=>[l(Ct)]),_:1})]),_:1})])]))}});export{Yt as default};
